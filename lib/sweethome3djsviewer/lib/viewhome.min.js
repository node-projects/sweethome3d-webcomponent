var __extends=this&&this.__extends||function(){var e=function(t,i){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])})(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),HomeXMLHandler=function(e){function t(t){var i=this;if(null!=t&&t instanceof UserPreferences||null===t){void 0===(i=e.call(this)||this).preferences&&(i.preferences=null),void 0===i.home&&(i.home=null),void 0===i.homeElementName&&(i.homeElementName=null),void 0===i.labelText&&(i.labelText=null),void 0===i.leftSideBaseboard&&(i.leftSideBaseboard=null),void 0===i.rightSideBaseboard&&(i.rightSideBaseboard=null),void 0===i.homeBackgroundImage&&(i.homeBackgroundImage=null),void 0===i.backgroundImage&&(i.backgroundImage=null),void 0===i.materialTexture&&(i.materialTexture=null),i.buffer={str:"",toString:function(){return this.str}},i.elements=[],i.attributes=[],i.groupsFurniture=[],i.properties=[],i.textStyles=[],i.levels={},i.joinedWalls={},i.textures={},i.materials=[],i.transformations=[],i.sashes=[],i.lightSources=[],i.lightSourceMaterialNames=[],i.shelfBoxes=[],i.shelfElevations=[],i.points=[],i.furnitureVisiblePropertyNames=[],i.printedLevelIds=[],i.preferences=null!=t?t:new DefaultUserPreferences(!1,null)}else{if(void 0!==t)throw new Error("invalid overload");void 0===(i=e.call(this)||this).preferences&&(i.preferences=null),void 0===i.home&&(i.home=null),void 0===i.homeElementName&&(i.homeElementName=null),void 0===i.labelText&&(i.labelText=null),void 0===i.leftSideBaseboard&&(i.leftSideBaseboard=null),void 0===i.rightSideBaseboard&&(i.rightSideBaseboard=null),void 0===i.homeBackgroundImage&&(i.homeBackgroundImage=null),void 0===i.backgroundImage&&(i.backgroundImage=null),void 0===i.materialTexture&&(i.materialTexture=null),i.buffer={str:"",toString:function(){return this.str}},i.elements=[],i.attributes=[],i.groupsFurniture=[],i.properties=[],i.textStyles=[],i.levels={},i.joinedWalls={},i.textures={},i.materials=[],i.transformations=[],i.sashes=[],i.lightSources=[],i.lightSourceMaterialNames=[],i.shelfBoxes=[],i.shelfElevations=[],i.points=[],i.furnitureVisiblePropertyNames=[],i.printedLevelIds=[],i.preferences=new DefaultUserPreferences(!1,null),void 0===i.preferences&&(i.preferences=null),void 0===i.home&&(i.home=null),void 0===i.homeElementName&&(i.homeElementName=null),void 0===i.labelText&&(i.labelText=null),void 0===i.leftSideBaseboard&&(i.leftSideBaseboard=null),void 0===i.rightSideBaseboard&&(i.rightSideBaseboard=null),void 0===i.homeBackgroundImage&&(i.homeBackgroundImage=null),void 0===i.backgroundImage&&(i.backgroundImage=null),void 0===i.materialTexture&&(i.materialTexture=null),i.buffer={str:"",toString:function(){return this.str}},i.elements=[],i.attributes=[],i.groupsFurniture=[],i.properties=[],i.textStyles=[],i.levels={},i.joinedWalls={},i.textures={},i.materials=[],i.transformations=[],i.sashes=[],i.lightSources=[],i.lightSourceMaterialNames=[],i.shelfBoxes=[],i.shelfElevations=[],i.points=[],i.furnitureVisiblePropertyNames=[],i.printedLevelIds=[]}return i}return __extends(t,e),t.prototype.startDocument=function(){this.home=null,this.elements.length=0,this.attributes.length=0,this.groupsFurniture.length=0,function(e){for(var t in e)delete e[t]}(this.levels),function(e){for(var t in e)delete e[t]}(this.joinedWalls)},t.prototype.startElement=function(e,i,n,o){var r,l=this;(r=this.buffer).str=r.str.substring(0,0),this.elements.push(n);for(var a={},s=0;s<o.getLength();s++)a[o.getQName(s)]=o.getValue(s).replace("&quot;",'"').replace("&lt;","<").replace("&gt;",">").replace("&amp;","&");this.attributes.push(a),"property"!==n&&"furnitureVisibleProperty"!==n&&"textStyle"!==n&&(this.properties.push({}),this.textStyles.push({})),"home"===n?(this.setHome(this.createHome(n,a)),this.furnitureVisiblePropertyNames.length=0,this.homeBackgroundImage=null):"environment"===n?function(e){for(var t in e)delete e[t]}(this.textures):"level"===n?this.backgroundImage=null:"pieceOfFurniture"===n||"doorOrWindow"===n||"light"===n||"shelfUnit"===n||"furnitureGroup"===n?(!function(e){for(var t in e)delete e[t]}(this.textures),this.materials.length=0,this.transformations.length=0,this.sashes.length=0,this.lightSources.length=0,this.lightSourceMaterialNames.length=0,this.shelfBoxes.length=0,this.shelfElevations.length=0,"furnitureGroup"===n&&this.groupsFurniture.push([])):"room"===n?(!function(e){for(var t in e)delete e[t]}(this.textures),this.points.length=0):"polyline"===n?this.points.length=0:"label"===n?this.labelText=null:"wall"===n?(!function(e){for(var t in e)delete e[t]}(this.textures),this.leftSideBaseboard=null,this.rightSideBaseboard=null):"baseboard"===n?(this.textures,l.textures[t.UNIQUE_ATTRIBUTE],delete l.textures[t.UNIQUE_ATTRIBUTE]):"material"===n&&(this.materialTexture=null)},t.prototype.characters=function(e,t,i){this.buffer.str+=e.substr(t,i)},t.prototype.endElement=function(e,i,n){this.elements.pop();var o,r=0==this.elements.length?null:0==(o=this.elements).length?null:o[o.length-1],l=this.attributes.pop();if(null!=this.homeElementName&&this.homeElementName===n)this.setHomeAttributes(this.home,n,l);else if("furnitureVisibleProperty"===n){if(null==function(e,t){return void 0===e[t]?null:e[t]}(l,"name"))throw new SAXException("Missing name attribute");this.furnitureVisiblePropertyNames.push(function(e,t){return void 0===e[t]?null:e[t]}(l,"name"))}else if("environment"===n)this.setEnvironmentAttributes(this.home.getEnvironment(),n,l);else if("compass"===n)this.setCompassAttributes(this.home.getCompass(),n,l);else if("print"===n)this.home.setPrint(this.createPrint(l));else if("printedLevel"===n&&"print"===r){if(null==function(e,t){return void 0===e[t]?null:e[t]}(l,"level"))throw new SAXException("Missing level attribute");this.printedLevelIds.push(function(e,t){return void 0===e[t]?null:e[t]}(l,"level"))}else if("level"===n){var a=this.createLevel(n,l);this.setLevelAttributes(a,n,l),this.levels[function(e,t){return void 0===e.id?null:e.id}(l)]=a,this.home.addLevel(a)}else if("camera"===n||"observerCamera"===n){var s=this.createCamera(n,l);this.setCameraAttributes(s,n,l);var h=function(e,t){return void 0===e[t]?null:e[t]}(l,"attribute");if("cameraPath"===h){var u=this.home.getEnvironment().getVideoCameraPath().slice(0);u.push(s),this.home.getEnvironment().setVideoCameraPath(u)}else if("topCamera"===h){var d=this.home.getTopCamera();d.setCamera(s),d.setTime(s.getTime()),d.setLens(s.getLens())}else if("observerCamera"===h){var c=this.home.getObserverCamera();c.setCamera(s),c.setTime(s.getTime()),c.setLens(s.getLens()),c.setFixedSize(s.isFixedSize())}else if("storedCamera"===h){var p=this.home.getStoredCameras().slice(0);p.push(s),this.home.setStoredCameras(p)}}else if("pieceOfFurniture"===n||"doorOrWindow"===n||"light"===n||"shelfUnit"===n||"furnitureGroup"===n){var g="furnitureGroup"===n?this.createFurnitureGroup(n,l,this.groupsFurniture.pop()):this.createPieceOfFurniture(n,l);if(this.setPieceOfFurnitureAttributes(g,n,l),null!=this.homeElementName&&this.homeElementName===r){this.home.addPieceOfFurniture$com_eteks_sweethome3d_model_HomePieceOfFurniture(g);var v=function(e,t){return void 0===e[t]?null:e[t]}(l,"level");null!=v&&g.setLevel(function(e,t){return void 0===e[t]?null:e[t]}(this.levels,v))}else"furnitureGroup"===r&&function(e){return 0==e.length?null:e[e.length-1]}(this.groupsFurniture).push(g)}else if("wall"===n){var f=this.createWall(n,l);this.joinedWalls[function(e,t){return void 0===e.id?null:e.id}(l)]=new t.JoinedWall(f,function(e,t){return void 0===e[t]?null:e[t]}(l,"wallAtStart"),function(e,t){return void 0===e[t]?null:e[t]}(l,"wallAtEnd")),this.setWallAttributes(f,n,l),this.home.addWall(f);v=function(e,t){return void 0===e[t]?null:e[t]}(l,"level");null!=v&&f.setLevel(function(e,t){return void 0===e[t]?null:e[t]}(this.levels,v))}else if("baseboard"===n){var m=this.createBaseboard(n,l);"leftSideBaseboard"===function(e,t){return void 0===e[t]?null:e[t]}(l,"attribute")?this.leftSideBaseboard=m:this.rightSideBaseboard=m}else if("room"===n){var y=this.createRoom(n,l,this.points.slice(0));this.setRoomAttributes(y,n,l),this.home.addRoom$com_eteks_sweethome3d_model_Room(y);v=function(e,t){return void 0===e[t]?null:e[t]}(l,"level");null!=v&&y.setLevel(function(e,t){return void 0===e[t]?null:e[t]}(this.levels,v))}else if("polyline"===n){var C=this.createPolyline(n,l,this.points.slice(0));this.setPolylineAttributes(C,n,l),this.home.addPolyline$com_eteks_sweethome3d_model_Polyline(C);v=function(e,t){return void 0===e[t]?null:e[t]}(l,"level");null!=v&&C.setLevel(function(e,t){return void 0===e[t]?null:e[t]}(this.levels,v))}else if("dimensionLine"===n){var S=this.createDimensionLine(n,l);this.setDimensionLineAttributes(S,n,l),this.home.addDimensionLine(S);v=function(e,t){return void 0===e[t]?null:e[t]}(l,"level");null!=v&&S.setLevel(function(e,t){return void 0===e[t]?null:e[t]}(this.levels,v))}else if("label"===n){var E=this.createLabel(n,l,this.labelText);this.setLabelAttributes(E,n,l),this.home.addLabel(E);v=function(e,t){return void 0===e[t]?null:e[t]}(l,"level");null!=v&&E.setLevel(function(e,t){return void 0===e[t]?null:e[t]}(this.levels,v))}else if("text"===n)this.labelText=this.getCharacters();else if("textStyle"===n){h=function(e,t){return void 0===e[t]?null:e[t]}(l,"attribute");(function(e){return 0==e.length?null:e[e.length-1]}(this.textStyles))[null!=h?h:t.UNIQUE_ATTRIBUTE]=this.createTextStyle(n,l)}else if("texture"===n)if("material"===r)this.materialTexture=this.createTexture(n,l);else{h=function(e,t){return void 0===e[t]?null:e[t]}(l,"attribute");this.textures[null!=h?h:t.UNIQUE_ATTRIBUTE]=this.createTexture(n,l)}else if("material"===n)this.materials.push(this.createMaterial(n,l));else if("transformation"===n){var A=function(e,t){return void 0===e[t]?null:e[t]}(l,"matrix");if(null==A)throw new SAXException("Missing attribute matrix");var _=A.split(/ /);if(_.length<12)throw new SAXException("Missing values for attribute matrix");try{var P=[[parseFloat(_[0]),parseFloat(_[1]),parseFloat(_[2]),parseFloat(_[3])],[parseFloat(_[4]),parseFloat(_[5]),parseFloat(_[6]),parseFloat(_[7])],[parseFloat(_[8]),parseFloat(_[9]),parseFloat(_[10]),parseFloat(_[11])]],w=new Transformation(function(e,t){return void 0===e[t]?null:e[t]}(l,"name"),P);this.transformations.push(this.resolveObject(w,n,l))}catch(e){throw new SAXException("Invalid value for attribute matrix",e)}}else if("point"===n)this.points.push([this.parseFloat(l,"x"),this.parseFloat(l,"y")]);else if("sash"===n){var L=new Sash(this.parseFloat(l,"xAxis"),this.parseFloat(l,"yAxis"),this.parseFloat(l,"width"),this.parseFloat(l,"startAngle"),this.parseFloat(l,"endAngle"));this.sashes.push(this.resolveObject(L,n,l))}else if("lightSource"===n){var T=new LightSource(this.parseFloat(l,"x"),this.parseFloat(l,"y"),this.parseFloat(l,"z"),this.parseOptionalColor(l,"color"),this.parseOptionalFloat(l,"diameter"));this.lightSources.push(this.resolveObject(T,n,l))}else if("lightSourceMaterial"===n)this.lightSourceMaterialNames.push(function(e,t){return void 0===e[t]?null:e[t]}(l,"name"));else if("shelf"===n)null!=function(e,t){return void 0===e[t]?null:e[t]}(l,"xLower")?this.shelfBoxes.push(new BoxBounds(this.parseFloat(l,"xLower"),this.parseFloat(l,"yLower"),this.parseFloat(l,"zLower"),this.parseFloat(l,"xUpper"),this.parseFloat(l,"yUpper"),this.parseFloat(l,"zUpper"))):this.shelfElevations.push(this.parseFloat(l,"elevation"));else if("backgroundImage"===n){var b=new BackgroundImage(this.parseContent(n,l,"image"),this.parseFloat(l,"scaleDistance"),this.parseFloat(l,"scaleDistanceXStart"),this.parseFloat(l,"scaleDistanceYStart"),this.parseFloat(l,"scaleDistanceXEnd"),this.parseFloat(l,"scaleDistanceYEnd"),null!=function(e,t){return void 0===e[t]?null:e[t]}(l,"xOrigin")?this.parseFloat(l,"xOrigin"):0,null!=function(e,t){return void 0===e[t]?null:e[t]}(l,"yOrigin")?this.parseFloat(l,"yOrigin"):0,!("false"===function(e,t){return void 0===e[t]?null:e[t]}(l,"visible")));b=this.resolveObject(b,n,l),null!=this.homeElementName&&this.homeElementName===r?this.homeBackgroundImage=b:this.backgroundImage=b}else"property"===n&&null!=this.homeElementName&&(ObjectProperty.Type[ObjectProperty.Type.CONTENT]===function(e,t){return void 0===e[t]?null:e[t]}(l,"type")?(function(e){return 0==e.length?null:e[e.length-1]}(this.properties))[function(e,t){return void 0===e[t]?null:e[t]}(l,"name")]=this.parseContent(n,l,"value"):(function(e){return 0==e.length?null:e[e.length-1]}(this.properties))[function(e,t){return void 0===e[t]?null:e[t]}(l,"name")]=function(e,t){return void 0===e[t]?null:e[t]}(l,"value"));"property"!==n&&"furnitureVisibleProperty"!==n&&"textStyle"!==n&&(this.properties.pop(),this.textStyles.pop())},t.prototype.getCharacters=function(){return this.buffer.str.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},t.prototype.endDocument=function(){for(var e=[],t=0;t<this.printedLevelIds.length;t++)for(var i=this.printedLevelIds[t],n=this.home.getLevels(),o=0;o<n.length;o++){var r=n[o];if(i===r.getId()){e.push(r);break}}var l=this.home.getPrint();null!=l&&0!=e.length&&l.constructor===HomePrint&&this.home.setPrint(new HomePrint(l.getPaperOrientation(),l.getPaperWidth(),l.getPaperHeight(),l.getPaperTopMargin(),l.getPaperLeftMargin(),l.getPaperBottomMargin(),l.getPaperRightMargin(),l.isFurniturePrinted(),l.isPlanPrinted(),e,l.isView3DPrinted(),l.getPlanScale(),l.getHeaderFormat(),l.getFooterFormat()));var a;for(n=(a=this.joinedWalls,Object.keys(a).map((function(e){return a[e]}))),t=0;t<n.length;t++){var s=n[t],h=s.getWall();if(null!=s.getWallAtStartId()&&s.getWallAtStartId()!==h.getId()){var u=function(e,t){return void 0===e[t]?null:e[t]}(this.joinedWalls,s.getWallAtStartId());null!=u&&h.setWallAtStart(u.getWall())}if(null!=s.getWallAtEndId()&&s.getWallAtEndId()!==h.getId()){var d=function(e,t){return void 0===e[t]?null:e[t]}(this.joinedWalls,s.getWallAtEndId());null!=d&&h.setWallAtEnd(d.getWall())}}},t.prototype.resolveObject=function(e,t,i){return e},t.prototype.createHome=function(e,t){var i,n,o;i=null!=(void 0===(n=t)[o="wallHeight"]?null:n[o])?new Home(this.parseFloat(t,"wallHeight")):new Home;var r=function(e,t){return void 0===e[t]?null:e[t]}(t,"version");if(null!=r)try{i.setVersion(parseInt(r))}catch(e){throw new SAXException("Invalid value for integer attribute version",e)}return this.resolveObject(i,e,t)},t.prototype.setHomeAttributes=function(e,t,i){for(var n,o=function(e){var t=[];for(var i in e)t.push({k:i,v:e[i],getKey:function(){return this.k},getValue:function(){return this.v}});return t}(0==(n=this.properties).length?null:n[n.length-1]),r=0;r<o.length;r++){var l=o[r];"string"==typeof l.getValue()&&e.setProperty(l.getKey(),l.getValue())}this.furnitureVisiblePropertyNames.length>0&&this.home.setFurnitureVisiblePropertyNames(this.furnitureVisiblePropertyNames),this.home.setBackgroundImage(this.homeBackgroundImage),e.setName(function(e,t){return void 0===e[t]?null:e[t]}(i,"name"));var a=function(e,t){return void 0===e[t]?null:e[t]}(i,"selectedLevel");null!=a&&this.home.setSelectedLevel(function(e,t){return void 0===e[t]?null:e[t]}(this.levels,a)),"observerCamera"===function(e,t){return void 0===e[t]?null:e[t]}(i,"camera")&&this.home.setCamera(this.home.getObserverCamera()),e.setBasePlanLocked("true"===function(e,t){return void 0===e[t]?null:e[t]}(i,"basePlanLocked"));var s=function(e,t){return void 0===e[t]?null:e[t]}(i,"furnitureSortedProperty");if(null!=s)try{e.setFurnitureSortedPropertyName(s)}catch(e){}e.setFurnitureDescendingSorted("true"===function(e,t){return void 0===e[t]?null:e[t]}(i,"furnitureDescendingSorted")),i.structure&&(e.structure=this.parseContent(this.homeElementName,i,"structure"))},t.prototype.setEnvironmentAttributes=function(e,t,i){this.setProperties(e,t,i);var n,o,r=this.parseOptionalColor(i,"groundColor");null!=r&&e.setGroundColor(r),e.setGroundTexture(void 0===(n=this.textures)[o="groundTexture"]?null:n[o]),e.setBackgroundImageVisibleOnGround3D("true"===function(e,t){return void 0===e[t]?null:e[t]}(i,"backgroundImageVisibleOnGround3D"));var l=this.parseOptionalColor(i,"skyColor");null!=l&&e.setSkyColor(l),e.setSkyTexture(function(e,t){return void 0===e[t]?null:e[t]}(this.textures,"skyTexture"));var a=this.parseOptionalColor(i,"lightColor");null!=a&&e.setLightColor(a);var s=this.parseOptionalFloat(i,"wallsAlpha");null!=s&&e.setWallsAlpha(s),e.setAllLevelsVisible("true"===function(e,t){return void 0===e[t]?null:e[t]}(i,"allLevelsVisible")),e.setObserverCameraElevationAdjusted(!("false"===function(e,t){return void 0===e[t]?null:e[t]}(i,"observerCameraElevationAdjusted")));var h=this.parseOptionalColor(i,"ceillingLightColor");null!=h&&e.setCeillingLightColor(h);var u=function(e,t){return void 0===e[t]?null:e[t]}(i,"drawingMode");if(null!=u)try{e.setDrawingMode(HomeEnvironment.DrawingMode[u])}catch(e){}var d=this.parseOptionalFloat(i,"subpartSizeUnderLight");null!=d&&e.setSubpartSizeUnderLight(d);var c=this.parseOptionalInteger(i,"photoWidth");null!=c&&e.setPhotoWidth(c);var p=this.parseOptionalInteger(i,"photoHeight");null!=p&&e.setPhotoHeight(p);var g=function(e,t){return void 0===e[t]?null:e[t]}(i,"photoAspectRatio");if(null!=g)try{e.setPhotoAspectRatio(AspectRatio[g])}catch(e){}var v=this.parseOptionalInteger(i,"photoQuality");null!=v&&e.setPhotoQuality(v);var f=this.parseOptionalInteger(i,"videoWidth");null!=f&&e.setVideoWidth(f);var m=function(e,t){return void 0===e[t]?null:e[t]}(i,"videoAspectRatio");if(null!=m)try{e.setVideoAspectRatio(AspectRatio[m])}catch(e){}var y=this.parseOptionalInteger(i,"videoQuality");null!=y&&e.setVideoQuality(y);var C=this.parseOptionalFloat(i,"videoSpeed");null!=C&&e.setVideoSpeed(C);var S=this.parseOptionalInteger(i,"videoFrameRate");null!=S&&e.setVideoFrameRate(S)},t.prototype.createPrint=function(e){var t,i,n=HomePrint.PaperOrientation.PORTRAIT;try{if(null==(void 0===(t=e)[i="paperOrientation"]?null:t[i]))throw new SAXException("Missing paperOrientation attribute");n=HomePrint.PaperOrientation[function(e,t){return void 0===e[t]?null:e[t]}(e,"paperOrientation")]}catch(e){}var o=new HomePrint(n,this.parseFloat(e,"paperWidth"),this.parseFloat(e,"paperHeight"),this.parseFloat(e,"paperTopMargin"),this.parseFloat(e,"paperLeftMargin"),this.parseFloat(e,"paperBottomMargin"),this.parseFloat(e,"paperRightMargin"),!("false"===function(e,t){return void 0===e[t]?null:e[t]}(e,"furniturePrinted")),!("false"===function(e,t){return void 0===e[t]?null:e[t]}(e,"planPrinted")),!("false"===function(e,t){return void 0===e[t]?null:e[t]}(e,"view3DPrinted")),this.parseOptionalFloat(e,"planScale"),function(e,t){return void 0===e[t]?null:e[t]}(e,"headerFormat"),function(e,t){return void 0===e[t]?null:e[t]}(e,"footerFormat"));return this.resolveObject(o,"print",e)},t.prototype.setCompassAttributes=function(e,t,i){this.setProperties(e,t,i),e.setX(this.parseOptionalFloat(i,"x")),e.setY(this.parseOptionalFloat(i,"y")),e.setDiameter(this.parseOptionalFloat(i,"diameter"));var n=this.parseOptionalFloat(i,"northDirection");null!=n&&e.setNorthDirection(n);var o=this.parseOptionalFloat(i,"longitude");null!=o&&e.setLongitude(o);var r=this.parseOptionalFloat(i,"latitude");null!=r&&e.setLatitude(r);var l,a,s=void 0===(l=i)[a="timeZone"]?null:l[a];null!=s&&e.setTimeZone(s),e.setVisible(!("false"===function(e,t){return void 0===e[t]?null:e[t]}(i,"visible")))},t.prototype.createCamera=function(e,t){var i,n,o=void 0===(i=t).id?null:i.id,r=this.parseFloat(t,"x"),l=this.parseFloat(t,"y"),a=this.parseFloat(t,"z"),s=this.parseFloat(t,"yaw"),h=this.parseFloat(t,"pitch"),u=this.parseFloat(t,"fieldOfView");return n="observerCamera"===e?null!=o?new ObserverCamera(o,r,l,a,s,h,u):new ObserverCamera(r,l,a,s,h,u):null!=o?new Camera(o,r,l,a,s,h,u):new Camera(r,l,a,s,h,u),this.resolveObject(n,e,t)},t.prototype.setCameraAttributes=function(e,t,i){var n,o;this.setProperties(e,t,i),null!=e&&e instanceof ObserverCamera&&e.setFixedSize("true"===(void 0===(n=i)[o="fixedSize"]?null:n[o]));var r=function(e,t){return void 0===e[t]?null:e[t]}(i,"lens");if(null!=r)try{e.setLens(Camera.Lens[r])}catch(e){}var l=function(e,t){return void 0===e[t]?null:e[t]}(i,"time");if(null!=l)try{e.setTime(parseInt(l))}catch(e){throw new SAXException("Invalid value for long attribute time",e)}e.setName(function(e,t){return void 0===e[t]?null:e[t]}(i,"name")),e.setRenderer(function(e,t){return void 0===e[t]?null:e[t]}(i,"renderer"))},t.prototype.createLevel=function(e,t){var i,n=void 0===(i=t).id?null:i.id,o=function(e,t){return void 0===e[t]?null:e[t]}(t,"name"),r=this.parseFloat(t,"elevation"),l=this.parseFloat(t,"floorThickness"),a=this.parseFloat(t,"height"),s=null!=n?new Level(n,o,r,l,a):new Level(o,r,l,a);return this.resolveObject(s,e,t)},t.prototype.setLevelAttributes=function(e,t,i){this.setProperties(e,t,i),e.setBackgroundImage(this.backgroundImage);var n,o,r=this.parseOptionalInteger(i,"elevationIndex");null!=r&&e.setElevationIndex(r),e.setVisible(!("false"===(n=i,o="visible",void 0===n[o]?null:n[o]))),e.setViewable(!("false"===function(e,t){return void 0===e[t]?null:e[t]}(i,"viewable")))},t.prototype.createPieceOfFurniture=function(e,t){var i,n=void 0===(i=t).id?null:i.id,o=function(e,t){return void 0===e[t]?null:e[t]}(t,"catalogId"),r=null!=function(e,t){return void 0===e[t]?null:e[t]}(t,"tags")?function(e,t){return void 0===e[t]?null:e[t]}(t,"tags").split(/ /):null,l=null!=function(e,t){return void 0===e[t]?null:e[t]}(t,"elevation")?this.parseFloat(t,"elevation"):0,a=null!=function(e,t){return void 0===e[t]?null:e[t]}(t,"dropOnTopElevation")?this.parseFloat(t,"dropOnTopElevation"):1,s=null;if(null!=function(e,t){return void 0===e[t]?null:e[t]}(t,"modelRotation")){var h=function(e,t){return void 0===e[t]?null:e[t]}(t,"modelRotation").split(/ /);if(h.length<9)throw new SAXException("Missing values for attribute modelRotation");try{s=[[parseFloat(h[0]),parseFloat(h[1]),parseFloat(h[2])],[parseFloat(h[3]),parseFloat(h[4]),parseFloat(h[5])],[parseFloat(h[6]),parseFloat(h[7]),parseFloat(h[8])]]}catch(e){throw new SAXException("Invalid value for attribute modelRotation",e)}}var u=function(e,t){return void 0===e[t]?null:e[t]}(t,"name"),d=function(e,t){return void 0===e[t]?null:e[t]}(t,"description"),c=function(e,t){return void 0===e[t]?null:e[t]}(t,"information"),p=function(e,t){return void 0===e[t]?null:e[t]}(t,"license"),g=this.parseOptionalLong(t,"creationDate"),v=this.parseOptionalFloat(t,"grade"),f=this.parseContent(e,t,"icon"),m=this.parseContent(e,t,"planIcon"),y=this.parseContent(e,t,"model"),C=this.parseFloat(t,"width"),S=this.parseFloat(t,"depth"),E=this.parseFloat(t,"height"),A=!("false"===function(e,t){return void 0===e[t]?null:e[t]}(t,"movable")),_=this.parseOptionalInteger(t,"modelFlags");null==_&&(_="true"===function(e,t){return void 0===e[t]?null:e[t]}(t,"backFaceShown")?PieceOfFurniture.SHOW_BACK_FACE:0);var P,w=this.parseOptionalLong(t,"modelSize"),L=function(e,t){return void 0===e[t]?null:e[t]}(t,"creator"),T=!("false"===function(e,t){return void 0===e[t]?null:e[t]}(t,"resizable")),b=!("false"===function(e,t){return void 0===e[t]?null:e[t]}(t,"deformable")),O=!("false"===function(e,t){return void 0===e[t]?null:e[t]}(t,"texturable")),I=this.parseOptionalDecimal(t,"price"),D=this.parseOptionalDecimal(t,"valueAddedTaxPercentage"),R=function(e,t){return void 0===e[t]?null:e[t]}(t,"currency");if("doorOrWindow"===e||"true"===function(e,t){return void 0===e[t]?null:e[t]}(t,"doorOrWindow")){var x=null!=function(e,t){return void 0===e[t]?null:e[t]}(t,"wallThickness")?this.parseFloat(t,"wallThickness"):1,M=null!=function(e,t){return void 0===e[t]?null:e[t]}(t,"wallDistance")?this.parseFloat(t,"wallDistance"):0,F=function(e,t){return void 0===e[t]?null:e[t]}(t,"cutOutShape");null==F&&"doorOrWindow"!==e&&(F=PieceOfFurniture.DEFAULT_CUT_OUT_SHAPE);var N="true"===function(e,t){return void 0===e[t]?null:e[t]}(t,"wallCutOutOnBothSides"),U=!("false"===function(e,t){return void 0===e[t]?null:e[t]}(t,"widthDepthDeformable")),H=new CatalogDoorOrWindow(o,u,d,c,p,r,g,v,f,m,y,C,S,E,l,a,A,F,x,M,N,U,this.sashes.slice(0),s,_,w,L,T,b,O,I,D,R,null,null);P=null!=n?new HomeDoorOrWindow(n,H):new HomeDoorOrWindow(H)}else{var G=function(e,t){return void 0===e[t]?null:e[t]}(t,"staircaseCutOutShape"),k=!("false"===function(e,t){return void 0===e[t]?null:e[t]}(t,"horizontallyRotatable"));if("light"===e){var V=new CatalogLight(o,u,d,c,p,r,g,v,f,m,y,C,S,E,l,a,A,this.lightSources.slice(0),this.lightSourceMaterialNames.slice(0),G,s,_,w,L,T,b,O,k,I,D,R,null,null);P=null!=n?new HomeLight(n,V):new HomeLight(V)}else if("shelfUnit"===e){for(var W=function(e){for(var t=[];e-- >0;)t.push(0);return t}(this.shelfElevations.length),B=0;B<W.length;B++)W[B]=this.shelfElevations[B];var j=new CatalogShelfUnit(o,u,d,c,p,r,g,v,f,m,y,C,S,E,l,a,W,this.shelfBoxes.slice(0),A,G,s,_,w,L,T,b,O,k,I,D,R,null,null);P=null!=n?new HomeShelfUnit(n,j):new HomeShelfUnit(j)}else{var Y=new CatalogPieceOfFurniture(o,u,d,c,p,r,g,v,f,m,y,C,S,E,l,a,A,G,s,_,w,L,T,b,O,k,I,D,R,null,null);P=null!=n?new HomePieceOfFurniture(n,Y):new HomePieceOfFurniture(Y)}}return this.resolveObject(P,e,t)},t.prototype.createFurnitureGroup=function(e,t,i){var n,o=void 0===(n=t).id?null:n.id,r=null!=function(e,t){return void 0===e[t]?null:e[t]}(t,"angle")?this.parseFloat(t,"angle"):0,l="true"===function(e,t){return void 0===e[t]?null:e[t]}(t,"modelMirrored"),a=function(e,t){return void 0===e[t]?null:e[t]}(t,"name"),s=null!=o?new HomeFurnitureGroup(o,i,r,l,a):new HomeFurnitureGroup(i,r,l,a);return this.resolveObject(s,e,t)},t.prototype.setPieceOfFurnitureAttributes=function(e,i,n){var o;this.setProperties(e,i,n),e.setNameStyle(function(e,t){return void 0===e[t]?null:e[t]}(0==(o=this.textStyles).length?null:o[o.length-1],"nameStyle")),e.setNameVisible("true"===function(e,t){return void 0===e[t]?null:e[t]}(n,"nameVisible"));var r=this.parseOptionalFloat(n,"nameAngle");null!=r&&e.setNameAngle(r);var l=this.parseOptionalFloat(n,"nameXOffset");null!=l&&e.setNameXOffset(l);var a=this.parseOptionalFloat(n,"nameYOffset");if(null!=a&&e.setNameYOffset(a),e.setVisible(!("false"===function(e,t){return void 0===e[t]?null:e[t]}(n,"visible"))),null!=e&&e instanceof HomeFurnitureGroup)e.setCatalogId(function(e,t){return void 0===e[t]?null:e[t]}(n,"catalogId")),e.setDescription(function(e,t){return void 0===e[t]?null:e[t]}(n,"description")),e.setInformation(function(e,t){return void 0===e[t]?null:e[t]}(n,"information")),e.setLicense(function(e,t){return void 0===e[t]?null:e[t]}(n,"license")),e.setCreator(function(e,t){return void 0===e[t]?null:e[t]}(n,"creator"));else{var s=this.parseOptionalFloat(n,"x");null!=s&&e.setX(s);var h=this.parseOptionalFloat(n,"y");null!=h&&e.setY(h);var u=this.parseOptionalFloat(n,"angle");if(null!=u&&e.setAngle(u),e.isHorizontallyRotatable()){var d=this.parseOptionalFloat(n,"pitch");null!=d&&e.setPitch(d);var c=this.parseOptionalFloat(n,"roll");null!=c&&e.setRoll(c)}var p=this.parseOptionalFloat(n,"widthInPlan");null!=p&&e.setWidthInPlan(p);var g=this.parseOptionalFloat(n,"depthInPlan");null!=g&&e.setDepthInPlan(g);var v=this.parseOptionalFloat(n,"heightInPlan");if(null!=v&&e.setHeightInPlan(v),(this.home.getVersion()<5500||"false"===function(e,t){return void 0===e[t]?null:e[t]}(n,"modelCenteredAtOrigin"))&&e.setModelCenteredAtOrigin(null==function(e,t){return void 0===e[t]?null:e[t]}(n,"modelRotation")),e.isResizable()&&e.setModelMirrored("true"===function(e,t){return void 0===e[t]?null:e[t]}(n,"modelMirrored")),e.isTexturable()){this.materials.length>0&&e.setModelMaterials(this.materials.slice(0));var f=this.parseOptionalColor(n,"color");null!=f&&e.setColor(f);var m=function(e,t){return void 0===e[t]?null:e[t]}(this.textures,t.UNIQUE_ATTRIBUTE);null!=m&&e.setTexture(m);var y=this.parseOptionalFloat(n,"shininess");null!=y&&e.setShininess(y)}if(e.isDeformable()&&this.transformations.length>0&&e.setModelTransformations(this.transformations.slice(0)),null!=e&&e instanceof HomeLight&&null!=function(e,t){return void 0===e[t]?null:e[t]}(n,"power"))e.setPower(this.parseFloat(n,"power"));else if(null!=e&&e instanceof HomeDoorOrWindow&&"doorOrWindow"===i){var C=e;C.setBoundToWall(!("false"===function(e,t){return void 0===e[t]?null:e[t]}(n,"boundToWall")));var S=this.parseOptionalFloat(n,"wallWidth");null!=S&&C.setWallWidth(S);var E=this.parseOptionalFloat(n,"wallLeft");null!=E&&C.setWallLeft(E);var A=this.parseOptionalFloat(n,"wallHeight");null!=A&&C.setWallHeight(A);var _=this.parseOptionalFloat(n,"wallTop");null!=_&&C.setWallTop(_)}}},t.prototype.createWall=function(e,t){var i,n=void 0===(i=t).id?null:i.id,o=this.parseFloat(t,"xStart"),r=this.parseFloat(t,"yStart"),l=this.parseFloat(t,"xEnd"),a=this.parseFloat(t,"yEnd"),s=this.parseFloat(t,"thickness"),h=null!=n?new Wall(n,o,r,l,a,s,0):new Wall(o,r,l,a,s,0);return this.resolveObject(h,e,t)},t.prototype.setWallAttributes=function(e,t,i){var n,o;this.setProperties(e,t,i),e.setLeftSideBaseboard(this.leftSideBaseboard),e.setRightSideBaseboard(this.rightSideBaseboard),e.setHeight(this.parseOptionalFloat(i,"height")),e.setHeightAtEnd(this.parseOptionalFloat(i,"heightAtEnd")),e.setArcExtent(this.parseOptionalFloat(i,"arcExtent")),e.setTopColor(this.parseOptionalColor(i,"topColor")),e.setLeftSideColor(this.parseOptionalColor(i,"leftSideColor")),e.setLeftSideTexture(void 0===(n=this.textures)[o="leftSideTexture"]?null:n[o]);var r=this.parseOptionalFloat(i,"leftSideShininess");null!=r&&e.setLeftSideShininess(r),e.setRightSideColor(this.parseOptionalColor(i,"rightSideColor")),e.setRightSideTexture(function(e,t){return void 0===e[t]?null:e[t]}(this.textures,"rightSideTexture"));var l=this.parseOptionalFloat(i,"rightSideShininess");null!=l&&e.setRightSideShininess(l);var a=function(e,t){return void 0===e[t]?null:e[t]}(i,"pattern");if(null!=a)try{e.setPattern(this.preferences.getPatternsCatalog().getPattern$java_lang_String(a))}catch(e){}},t.prototype.createRoom=function(e,t,i){var n,o=void 0===(n=t).id?null:n.id,r=null!=o?new Room(o,i):new Room(i);return this.resolveObject(r,e,t)},t.prototype.setRoomAttributes=function(e,t,i){var n;this.setProperties(e,t,i),e.setNameStyle(function(e,t){return void 0===e[t]?null:e[t]}(0==(n=this.textStyles).length?null:n[n.length-1],"nameStyle")),e.setAreaStyle(function(e,t){return void 0===e[t]?null:e[t]}(function(e){return 0==e.length?null:e[e.length-1]}(this.textStyles),"areaStyle")),e.setName(function(e,t){return void 0===e[t]?null:e[t]}(i,"name"));var o=this.parseOptionalFloat(i,"nameAngle");null!=o&&e.setNameAngle(o);var r=this.parseOptionalFloat(i,"nameXOffset");null!=r&&e.setNameXOffset(r);var l=this.parseOptionalFloat(i,"nameYOffset");null!=l&&e.setNameYOffset(l),e.setAreaVisible("true"===function(e,t){return void 0===e[t]?null:e[t]}(i,"areaVisible"));var a=this.parseOptionalFloat(i,"areaAngle");null!=a&&e.setAreaAngle(a);var s=this.parseOptionalFloat(i,"areaXOffset");null!=s&&e.setAreaXOffset(s);var h=this.parseOptionalFloat(i,"areaYOffset");null!=h&&e.setAreaYOffset(h),e.setFloorVisible(!("false"===function(e,t){return void 0===e[t]?null:e[t]}(i,"floorVisible"))),e.setFloorColor(this.parseOptionalColor(i,"floorColor")),e.setFloorTexture(function(e,t){return void 0===e[t]?null:e[t]}(this.textures,"floorTexture"));var u=this.parseOptionalFloat(i,"floorShininess");null!=u&&e.setFloorShininess(u),e.setCeilingVisible(!("false"===function(e,t){return void 0===e[t]?null:e[t]}(i,"ceilingVisible"))),e.setCeilingColor(this.parseOptionalColor(i,"ceilingColor")),e.setCeilingTexture(function(e,t){return void 0===e[t]?null:e[t]}(this.textures,"ceilingTexture"));var d=this.parseOptionalFloat(i,"ceilingShininess");null!=d&&e.setCeilingShininess(d),e.setCeilingFlat("true"===function(e,t){return void 0===e[t]?null:e[t]}(i,"ceilingFlat"))},t.prototype.createPolyline=function(e,t,i){var n,o=void 0===(n=t).id?null:n.id,r=null!=o?new Polyline(o,i):new Polyline(i);return this.resolveObject(r,e,t)},t.prototype.setPolylineAttributes=function(e,t,i){this.setProperties(e,t,i);var n=this.parseOptionalFloat(i,"thickness");null!=n&&e.setThickness(n);var o,r,l=void 0===(o=i)[r="capStyle"]?null:o[r];if(null!=l)try{e.setCapStyle(Polyline.CapStyle[l])}catch(e){}var a=function(e,t){return void 0===e[t]?null:e[t]}(i,"joinStyle");if(null!=a)try{e.setJoinStyle(Polyline.JoinStyle[a])}catch(e){}var s=function(e,t){return void 0===e[t]?null:e[t]}(i,"dashStyle");if(null!=s)try{e.setDashStyle(Polyline.DashStyle[s])}catch(e){}var h=function(e,t){return void 0===e[t]?null:e[t]}(i,"dashPattern");if(null!=h)try{for(var u=h.split(/ /),d=function(e){for(var t=[];e-- >0;)t.push(0);return t}(u.length),c=0;c<u.length;c++)d[c]=parseFloat(u[c]);e.setDashPattern(d)}catch(e){throw new SAXException("Invalid value for dash pattern",e)}var p=this.parseOptionalFloat(i,"dashOffset");null!=p&&e.setDashOffset(p);var g=function(e,t){return void 0===e[t]?null:e[t]}(i,"startArrowStyle");if(null!=g)try{e.setStartArrowStyle(Polyline.ArrowStyle[g])}catch(e){}var v=function(e,t){return void 0===e[t]?null:e[t]}(i,"endArrowStyle");if(null!=v)try{e.setEndArrowStyle(Polyline.ArrowStyle[v])}catch(e){}var f=this.parseOptionalFloat(i,"elevation");null!=f&&(e.setVisibleIn3D(!0),e.setElevation(f));var m=this.parseOptionalColor(i,"color");null!=m&&e.setColor(m),e.setClosedPath("true"===function(e,t){return void 0===e[t]?null:e[t]}(i,"closedPath"))},t.prototype.createDimensionLine=function(e,t){var i,n=void 0===(i=t).id?null:i.id,o=this.parseFloat(t,"xStart"),r=this.parseFloat(t,"yStart"),l=this.parseOptionalFloat(t,"elevationStart"),a=null!=l?l:0,s=this.parseFloat(t,"xEnd"),h=this.parseFloat(t,"yEnd"),u=null!=(l=this.parseOptionalFloat(t,"elevationEnd"))?l:0,d=this.parseFloat(t,"offset"),c=null!=n?new DimensionLine(n,o,r,a,s,h,u,d):new DimensionLine(o,r,a,s,h,u,d);null!=(l=this.parseOptionalFloat(t,"endMarkSize"))&&c.setEndMarkSize(l),null!=(l=this.parseOptionalFloat(t,"pitch"))&&c.setPitch(l);var p=this.parseOptionalColor(t,"color");return null!=p&&c.setColor(p),c.setVisibleIn3D("true"===function(e,t){return void 0===e[t]?null:e[t]}(t,"visibleIn3D")),this.resolveObject(c,e,t)},t.prototype.setDimensionLineAttributes=function(e,t,i){var n;this.setProperties(e,t,i),e.setLengthStyle(function(e,t){return void 0===e[t]?null:e[t]}(0==(n=this.textStyles).length?null:n[n.length-1],"lengthStyle"))},t.prototype.createLabel=function(e,t,i){var n,o=void 0===(n=t).id?null:n.id,r=this.parseFloat(t,"x"),l=this.parseFloat(t,"y"),a=null!=o?new Label(o,i,r,l):new Label(i,r,l);return this.resolveObject(a,e,t)},t.prototype.setLabelAttributes=function(e,i,n){var o;this.setProperties(e,i,n),e.setStyle(function(e,t){return void 0===e[t]?null:e[t]}(0==(o=this.textStyles).length?null:o[o.length-1],t.UNIQUE_ATTRIBUTE));var r=this.parseOptionalFloat(n,"angle");null!=r&&e.setAngle(r);var l=this.parseOptionalFloat(n,"elevation");null!=l&&e.setElevation(l);var a=this.parseOptionalFloat(n,"pitch");null!=a&&e.setPitch(a),e.setColor(this.parseOptionalColor(n,"color")),e.setOutlineColor(this.parseOptionalColor(n,"outlineColor"))},t.prototype.createBaseboard=function(e,i){var n,o,r=Baseboard.getInstance(this.parseFloat(i,"thickness"),this.parseFloat(i,"height"),this.parseOptionalColor(i,"color"),(n=this.textures,o=t.UNIQUE_ATTRIBUTE,void 0===n[o]?null:n[o]));return this.resolveObject(r,e,i)},t.prototype.createTextStyle=function(e,t){var i,n,o=TextStyle.Alignment.CENTER,r=void 0===(i=t)[n="alignment"]?null:i[n];if(null!=r)try{o=TextStyle.Alignment[r]}catch(e){}var l=new TextStyle(function(e,t){return void 0===e[t]?null:e[t]}(t,"fontName"),this.parseFloat(t,"fontSize"),"true"===function(e,t){return void 0===e[t]?null:e[t]}(t,"bold"),"true"===function(e,t){return void 0===e[t]?null:e[t]}(t,"italic"),o);return this.resolveObject(l,e,t)},t.prototype.createTexture=function(e,t){var i,n,o=void 0===(i=t)[n="catalogId"]?null:i[n],r=new HomeTexture(new CatalogTexture(o,function(e,t){return void 0===e[t]?null:e[t]}(t,"name"),this.parseContent(e,t,"image"),this.parseFloat(t,"width"),this.parseFloat(t,"height"),function(e,t){return void 0===e[t]?null:e[t]}(t,"creator")),null!=function(e,t){return void 0===e[t]?null:e[t]}(t,"xOffset")?this.parseFloat(t,"xOffset"):0,null!=function(e,t){return void 0===e[t]?null:e[t]}(t,"yOffset")?this.parseFloat(t,"yOffset"):0,null!=function(e,t){return void 0===e[t]?null:e[t]}(t,"angle")?this.parseFloat(t,"angle"):0,null!=function(e,t){return void 0===e[t]?null:e[t]}(t,"scale")?this.parseFloat(t,"scale"):1,"true"===function(e,t){return void 0===e[t]?null:e[t]}(t,"fittingArea"),!("false"===function(e,t){return void 0===e[t]?null:e[t]}(t,"leftToRightOriented")));return this.resolveObject(r,e,t)},t.prototype.createMaterial=function(e,t){var i,n,o=new HomeMaterial(void 0===(i=t)[n="name"]?null:i[n],function(e,t){return void 0===e.key?null:e.key}(t),this.parseOptionalColor(t,"color"),this.materialTexture,this.parseOptionalFloat(t,"shininess"));return this.resolveObject(o,e,t)},t.prototype.setProperties=function(e,t,i){for(var n,o=function(e){var t=[];for(var i in e)t.push({k:i,v:e[i],getKey:function(){return this.k},getValue:function(){return this.v}});return t}(0==(n=this.properties).length?null:n[n.length-1]),r=0;r<o.length;r++){var l=o[r];e.setProperty$java_lang_String$java_lang_Object(l.getKey(),l.getValue())}},t.prototype.parseOptionalColor=function(e,t){var i,n,o=void 0===(i=e)[n=t]?null:i[n];if(null==o)return null;try{return 0|parseInt(o,16)}catch(e){throw new SAXException("Invalid value for color attribute "+t,e)}},t.prototype.parseOptionalInteger=function(e,t){var i,n,o=void 0===(i=e)[n=t]?null:i[n];if(null==o)return null;try{return parseInt(o)}catch(e){throw new SAXException("Invalid value for integer attribute "+t,e)}},t.prototype.parseOptionalLong=function(e,t){var i,n,o=void 0===(i=e)[n=t]?null:i[n];if(null==o)return null;try{return parseInt(o)}catch(e){throw new SAXException("Invalid value for long attribute "+t,e)}},t.prototype.parseOptionalDecimal=function(e,t){var i,n,o=void 0===(i=e)[n=t]?null:i[n];if(null==o)return null;try{return new Big(o)}catch(e){throw new SAXException("Invalid value for decimal attribute "+t,e)}},t.prototype.parseOptionalFloat=function(e,t){var i,n,o=void 0===(i=e)[n=t]?null:i[n];if(null==o)return null;try{return parseFloat(o)}catch(e){throw new SAXException("Invalid value for float attribute "+t,e)}},t.prototype.parseFloat=function(e,t){var i,n,o=void 0===(i=e)[n=t]?null:i[n];if(null==o)throw new SAXException("Missing float attribute "+t);try{return parseFloat(o)}catch(e){throw new SAXException("Invalid value for float attribute "+t,e)}},t.prototype.parseContent=function(e,t,i){var n=t[i];return void 0===n?null:n.indexOf("://")>=0?URLContent.fromURL(n):new HomeURLContent("jar:"+this.homeUrl+"!/"+n)},t.prototype.setHome=function(e){var t;this.home=e,this.homeElementName=0==(t=this.elements).length?null:t[t.length-1]},t.prototype.getHome=function(){return this.home},t.UNIQUE_ATTRIBUTE="@&unique&@",t}(DefaultHandler);HomeXMLHandler.__class="com.eteks.sweethome3d.io.HomeXMLHandler",HomeXMLHandler.__interfaces=["org.xml.sax.ErrorHandler","org.xml.sax.DTDHandler","org.xml.sax.ContentHandler","org.xml.sax.EntityResolver"],function(e){var t=function(){function e(e,t,i){void 0===this.wall&&(this.wall=null),void 0===this.wallAtStartId&&(this.wallAtStartId=null),void 0===this.wallAtEndId&&(this.wallAtEndId=null),this.wall=e,this.wallAtStartId=t,this.wallAtEndId=i}return e.prototype.getWall=function(){return this.wall},e.prototype.getWallAtStartId=function(){return this.wallAtStartId},e.prototype.getWallAtEndId=function(){return this.wallAtEndId},e}();e.JoinedWall=t,t.__class="com.eteks.sweethome3d.io.HomeXMLHandler.JoinedWall"}(HomeXMLHandler||(HomeXMLHandler={}));var BoxBounds=function(){function e(e,t,i,n,o,r){void 0===this.xLower&&(this.xLower=0),void 0===this.yLower&&(this.yLower=0),void 0===this.zLower&&(this.zLower=0),void 0===this.xUpper&&(this.xUpper=0),void 0===this.yUpper&&(this.yUpper=0),void 0===this.zUpper&&(this.zUpper=0),this.xLower=e,this.yLower=t,this.zLower=i,this.xUpper=n,this.yUpper=o,this.zUpper=r}return e.prototype.getXLower=function(){return this.xLower},e.prototype.getYLower=function(){return this.yLower},e.prototype.getZLower=function(){return this.zLower},e.prototype.getXUpper=function(){return this.xUpper},e.prototype.getYUpper=function(){return this.yUpper},e.prototype.getZUpper=function(){return this.zUpper},e.prototype.equals=function(t){if(null!=t&&t instanceof e){var i=t;return i.xLower===this.xLower&&i.yLower===this.yLower&&i.zLower===this.zLower&&i.xUpper===this.xUpper&&i.yUpper===this.yUpper&&i.zUpper===this.zUpper}return!1},e.prototype.hashCode=function(){var e,t,i=(e=this.xLower,t=new ArrayBuffer(4),new Float32Array(t)[0]=e,new Uint32Array(t)[0]+function(e){var t=new ArrayBuffer(4);return new Float32Array(t)[0]=e,new Uint32Array(t)[0]}(this.yLower)+function(e){var t=new ArrayBuffer(4);return new Float32Array(t)[0]=e,new Uint32Array(t)[0]}(this.zLower));return i+=31*(function(e){var t=new ArrayBuffer(4);return new Float32Array(t)[0]=e,new Uint32Array(t)[0]}(this.xUpper)+function(e){var t=new ArrayBuffer(4);return new Float32Array(t)[0]=e,new Uint32Array(t)[0]}(this.yUpper)+function(e){var t=new ArrayBuffer(4);return new Float32Array(t)[0]=e,new Uint32Array(t)[0]}(this.zUpper)),i},e}();BoxBounds.__class="com.eteks.sweethome3d.model.BoxBounds";var PatternsCatalog=function(){function e(e){void 0===this.patterns&&(this.patterns=null),this.patterns=e.slice(0)}return e.prototype.getPatterns=function(){return this.patterns.slice(0)},e.prototype.getPatternsCount=function(){return this.patterns.length},e.prototype.getPattern$int=function(e){return this.patterns[e]},e.prototype.getPattern$java_lang_String=function(e){for(var t=0;t<this.patterns.length;t++){var i=this.patterns[t];if(e===i.getName())return i}throw new IllegalArgumentException("No pattern with name "+e)},e.prototype.getPattern=function(e){if("string"==typeof e||null===e)return this.getPattern$java_lang_String(e);if("number"==typeof e||null===e)return this.getPattern$int(e);throw new Error("invalid overload")},e}();PatternsCatalog.__class="com.eteks.sweethome3d.model.PatternsCatalog";var HomePrint=function(){function e(e,t,i,n,o,r,l,a,s,h,u,d,c,p){if("number"!=typeof e&&null!==e||"number"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||"number"!=typeof l&&null!==l||"boolean"!=typeof a&&null!==a||"boolean"!=typeof s&&null!==s||!(null!=h&&h instanceof Array||null===h)||"boolean"!=typeof u&&null!==u||"number"!=typeof d&&null!==d||"string"!=typeof c&&null!==c||"string"!=typeof p&&null!==p){if("number"!=typeof e&&null!==e||"number"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||"number"!=typeof l&&null!==l||"boolean"!=typeof a&&null!==a||"boolean"!=typeof s&&null!==s||"boolean"!=typeof h&&null!==h||"number"!=typeof u&&null!==u||"string"!=typeof d&&null!==d||"string"!=typeof c&&null!==c||void 0!==p)throw new Error("invalid overload");var g=(y=arguments)[9],v=y[10],f=y[11],m=y[12];void 0===this.paperOrientation&&(this.paperOrientation=null),void 0===this.paperWidth&&(this.paperWidth=0),void 0===this.paperHeight&&(this.paperHeight=0),void 0===this.paperTopMargin&&(this.paperTopMargin=0),void 0===this.paperLeftMargin&&(this.paperLeftMargin=0),void 0===this.paperBottomMargin&&(this.paperBottomMargin=0),void 0===this.paperRightMargin&&(this.paperRightMargin=0),void 0===this.furniturePrinted&&(this.furniturePrinted=!1),void 0===this.planPrinted&&(this.planPrinted=!1),void 0===this.printedLevels&&(this.printedLevels=null),void 0===this.view3DPrinted&&(this.view3DPrinted=!1),void 0===this.planScale&&(this.planScale=null),void 0===this.headerFormat&&(this.headerFormat=null),void 0===this.footerFormat&&(this.footerFormat=null),this.paperOrientation=e,this.paperWidth=t,this.paperHeight=i,this.paperTopMargin=n,this.paperLeftMargin=o,this.paperBottomMargin=r,this.paperRightMargin=l,this.furniturePrinted=a,this.planPrinted=s,this.printedLevels=null,this.view3DPrinted=g,this.planScale=v,this.headerFormat=f,this.footerFormat=m,void 0===this.paperOrientation&&(this.paperOrientation=null),void 0===this.paperWidth&&(this.paperWidth=0),void 0===this.paperHeight&&(this.paperHeight=0),void 0===this.paperTopMargin&&(this.paperTopMargin=0),void 0===this.paperLeftMargin&&(this.paperLeftMargin=0),void 0===this.paperBottomMargin&&(this.paperBottomMargin=0),void 0===this.paperRightMargin&&(this.paperRightMargin=0),void 0===this.furniturePrinted&&(this.furniturePrinted=!1),void 0===this.planPrinted&&(this.planPrinted=!1),void 0===this.printedLevels&&(this.printedLevels=null),void 0===this.view3DPrinted&&(this.view3DPrinted=!1),void 0===this.planScale&&(this.planScale=null),void 0===this.headerFormat&&(this.headerFormat=null),void 0===this.footerFormat&&(this.footerFormat=null)}else{var y=arguments;void 0===this.paperOrientation&&(this.paperOrientation=null),void 0===this.paperWidth&&(this.paperWidth=0),void 0===this.paperHeight&&(this.paperHeight=0),void 0===this.paperTopMargin&&(this.paperTopMargin=0),void 0===this.paperLeftMargin&&(this.paperLeftMargin=0),void 0===this.paperBottomMargin&&(this.paperBottomMargin=0),void 0===this.paperRightMargin&&(this.paperRightMargin=0),void 0===this.furniturePrinted&&(this.furniturePrinted=!1),void 0===this.planPrinted&&(this.planPrinted=!1),void 0===this.printedLevels&&(this.printedLevels=null),void 0===this.view3DPrinted&&(this.view3DPrinted=!1),void 0===this.planScale&&(this.planScale=null),void 0===this.headerFormat&&(this.headerFormat=null),void 0===this.footerFormat&&(this.footerFormat=null),this.paperOrientation=e,this.paperWidth=t,this.paperHeight=i,this.paperTopMargin=n,this.paperLeftMargin=o,this.paperBottomMargin=r,this.paperRightMargin=l,this.furniturePrinted=a,this.planPrinted=s,this.printedLevels=null!=h?h.slice(0):null,this.view3DPrinted=u,this.planScale=d,this.headerFormat=c,this.footerFormat=p}}return e.prototype.getPaperOrientation=function(){return this.paperOrientation},e.prototype.getPaperBottomMargin=function(){return this.paperBottomMargin},e.prototype.getPaperHeight=function(){return this.paperHeight},e.prototype.getPaperLeftMargin=function(){return this.paperLeftMargin},e.prototype.getPaperRightMargin=function(){return this.paperRightMargin},e.prototype.getPaperTopMargin=function(){return this.paperTopMargin},e.prototype.getPaperWidth=function(){return this.paperWidth},e.prototype.isFurniturePrinted=function(){return this.furniturePrinted},e.prototype.isPlanPrinted=function(){return this.planPrinted},e.prototype.getPrintedLevels=function(){return this.printedLevels},e.prototype.isView3DPrinted=function(){return this.view3DPrinted},e.prototype.getPlanScale=function(){return this.planScale},e.prototype.getHeaderFormat=function(){return this.headerFormat},e.prototype.getFooterFormat=function(){return this.footerFormat},e}();HomePrint.__class="com.eteks.sweethome3d.model.HomePrint",function(e){var t;(t=e.PaperOrientation||(e.PaperOrientation={}))[t.PORTRAIT=0]="PORTRAIT",t[t.LANDSCAPE=1]="LANDSCAPE",t[t.REVERSE_LANDSCAPE=2]="REVERSE_LANDSCAPE"}(HomePrint||(HomePrint={}));var TexturesCategory=function(){function e(e){void 0===this.name&&(this.name=null),void 0===this.textures&&(this.textures=null),this.name=e,this.textures=[]}return e.COMPARATOR_$LI$=function(){return null==e.COMPARATOR&&(e.COMPARATOR={compare:function(e,t){return e.toString().localeCompare(t.toString())},equals:function(e,t){return 0===e.toString().localeCompare(t.toString())}}),e.COMPARATOR},e.prototype.getName=function(){return this.name},e.prototype.getTextures=function(){return this.textures.slice(0)},e.prototype.getTexturesCount=function(){return this.textures.length},e.prototype.getTexture=function(e){return this.textures[e]},e.prototype.getIndexOfTexture=function(e){return this.textures.indexOf(e)},e.prototype.add=function(e){e.setCategory(this);var t=function(e,t){for(var i,n,o=0,r=e.length-1;o<=r;){var l=o+r>>>1,a=e[l],s=(n=t,(i=a).compareTo?i.compareTo(n):i.localeCompare(n));if(s<0)o=l+1;else{if(!(s>0))return l;r=l-1}}return-(o+1)}(this.textures,e);t<0&&(t=-t-1),this.textures.splice(t,0,e)},e.prototype.delete=function(e){var t=this.textures.indexOf(e);if(-1===t)throw new IllegalArgumentException(this.name+" doesn't contain texture "+e.getName());this.textures=this.textures.slice(0),this.textures.splice(t,1)[0]},e.prototype.equals=function(t){return null!=t&&t instanceof e&&e.COMPARATOR_$LI$().equals(this.name,t.name)},e.prototype.hashCode=function(){return(e=this.name).hashCode?e.hashCode():e.toString().split("").reduce((function(e,t){return(e<<5)-e+t.charCodeAt(0)|0}),0);var e},e.prototype.compareTo=function(t){return e.COMPARATOR_$LI$().compare(this.name,t.name)},e}();TexturesCategory.__class="com.eteks.sweethome3d.model.TexturesCategory";var CatalogTexture=function(){function e(e,t,i,n,o,r,l){if("string"!=typeof e&&null!==e||"string"!=typeof t&&null!==t||!(null!=i&&null!=i.constructor&&null!=i.constructor.__interfaces&&i.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===i)||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o||"string"!=typeof r&&null!==r||"boolean"!=typeof l&&null!==l)if("string"!=typeof e&&null!==e||"string"!=typeof t&&null!==t||!(null!=i&&null!=i.constructor&&null!=i.constructor.__interfaces&&i.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===i)||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o||"string"!=typeof r&&null!==r||void 0!==l)if("string"!=typeof e&&null!==e||!(null!=t&&null!=t.constructor&&null!=t.constructor.__interfaces&&t.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===t)||"number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||"boolean"!=typeof o&&null!==o||void 0!==r||void 0!==l){if("string"!=typeof e&&null!==e||!(null!=t&&null!=t.constructor&&null!=t.constructor.__interfaces&&t.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===t)||"number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||void 0!==o||void 0!==r||void 0!==l)throw new Error("invalid overload");var a=(f=arguments)[0],s=f[1],h=f[2],u=f[3];void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.image&&(this.image=null),void 0===this.width&&(this.width=0),void 0===this.height&&(this.height=0),void 0===this.creator&&(this.creator=null),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null),this.id=null,this.name=a,this.image=s,this.width=h,this.height=u,this.creator=null,this.modifiable=!1,void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.image&&(this.image=null),void 0===this.width&&(this.width=0),void 0===this.height&&(this.height=0),void 0===this.creator&&(this.creator=null),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null),void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.image&&(this.image=null),void 0===this.width&&(this.width=0),void 0===this.height&&(this.height=0),void 0===this.creator&&(this.creator=null),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null)}else{var d=(f=arguments)[0],c=f[1],p=f[2],g=f[3],v=f[4];void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.image&&(this.image=null),void 0===this.width&&(this.width=0),void 0===this.height&&(this.height=0),void 0===this.creator&&(this.creator=null),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null),this.id=null,this.name=d,this.image=c,this.width=p,this.height=g,this.creator=null,this.modifiable=v,void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.image&&(this.image=null),void 0===this.width&&(this.width=0),void 0===this.height&&(this.height=0),void 0===this.creator&&(this.creator=null),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null)}else{var f=arguments;void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.image&&(this.image=null),void 0===this.width&&(this.width=0),void 0===this.height&&(this.height=0),void 0===this.creator&&(this.creator=null),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null),this.id=e,this.name=t,this.image=i,this.width=n,this.height=o,this.creator=r,this.modifiable=!1,void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.image&&(this.image=null),void 0===this.width&&(this.width=0),void 0===this.height&&(this.height=0),void 0===this.creator&&(this.creator=null),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null)}else{var f=arguments;void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.image&&(this.image=null),void 0===this.width&&(this.width=0),void 0===this.height&&(this.height=0),void 0===this.creator&&(this.creator=null),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null),this.id=e,this.name=t,this.image=i,this.width=n,this.height=o,this.creator=r,this.modifiable=l}}return e.__static_initialize=function(){e.__static_initialized||(e.__static_initialized=!0,e.__static_initializer_0())},e.EMPTY_CRITERIA_$LI$=function(){return e.__static_initialize(),null==e.EMPTY_CRITERIA&&(e.EMPTY_CRITERIA=[]),e.EMPTY_CRITERIA},e.COMPARATOR_$LI$=function(){return e.__static_initialize(),e.COMPARATOR},e.recentFilters_$LI$=function(){return e.__static_initialize(),e.recentFilters},e.__static_initializer_0=function(){e.COMPARATOR={compare:function(e,t){return e.toString().localeCompare(t.toString())},equals:function(e,t){return 0===e.toString().localeCompare(t.toString())}},e.COMPARATOR_$LI$(),e.recentFilters={}},e.prototype.getId=function(){return this.id},e.prototype.getName=function(){return this.name},e.prototype.getImage=function(){return this.image},e.prototype.getIcon=function(){return this.getImage()},e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.getCreator=function(){return this.creator},e.prototype.isModifiable=function(){return this.modifiable},e.prototype.getCategory=function(){return this.category},e.prototype.setCategory=function(e){this.category=e},e.prototype.equals=function(e){return i=e,(t=this)&&t.equals?t.equals(i):t===i;var t,i},e.prototype.hashCode=function(){return(e=this).hashCode?e.hashCode():e.toString().split("").reduce((function(e,t){return(e<<5)-e+t.charCodeAt(0)|0}),0);var e},e.prototype.compareTo=function(t){var i=e.COMPARATOR_$LI$().compare(this.name,t.name);return 0!==i?i:this.modifiable===t.modifiable?0:this.modifiable?1:-1},e.prototype.matchesFilter=function(e){var t=this.getFilterCollationKeys(e),i=0;if(t.length>0)for(var n=this.getTextureCollationKey(),o=0;o<t.length&&this.isSubCollationKey(n,t[o],0);o++)i++;return i===t.length},e.prototype.getFilterCollationKeys=function(t){if(0===t.length)return e.EMPTY_CRITERIA_$LI$();var i,n,o=void 0===(i=e.recentFilters_$LI$())[n=t]?null:i[n];if(null==o){for(var r=t.split(/\s|\p{Punct}|\\|/),l=[],a=0;a<r.length;a++){var s=r[a];s.length>0&&l.push(e.COMPARATOR_$LI$().getCollationKey(s).toByteArray())}o=0===l.length?e.EMPTY_CRITERIA_$LI$():l.slice(0),e.recentFilters_$LI$()[t]=o}return o},e.prototype.getTextureCollationKey=function(){var t=this;if(null==this.filterCollationKey){var i={str:"",toString:function(){return this.str}};i.str+=t.getName(),function(e){e.str+="|"}(i),null!=this.getCategory()&&(function(e){e.str+=t.getCategory().getName()}(i),function(e){e.str+="|"}(i)),null!=this.getCreator()&&(function(e){e.str+=t.getCreator()}(i),function(e){e.str+="|"}(i)),this.filterCollationKey=e.COMPARATOR_$LI$().getCollationKey(i.str).toByteArray()}return this.filterCollationKey},e.prototype.isSubCollationKey=function(e,t,i){for(var n=i,o=e.length-4,r=t.length-4;n<o&&n<o-r+1;n++)if(e[n]===t[0]){for(var l=1;l<r;l++)if(e[n+l]!==t[l])return this.isSubCollationKey(e,t,n+1);return!0}return!1},e.__static_initialized=!1,e}();CatalogTexture.__class="com.eteks.sweethome3d.model.CatalogTexture",CatalogTexture.__interfaces=["com.eteks.sweethome3d.model.CatalogItem","com.eteks.sweethome3d.model.TextureImage"];var Transformation=function(){function e(e,t){void 0===this.name&&(this.name=null),void 0===this.matrix&&(this.matrix=null),this.name=e,this.matrix=t}return e.prototype.getName=function(){return this.name},e.prototype.getMatrix=function(){return[[this.matrix[0][0],this.matrix[0][1],this.matrix[0][2],this.matrix[0][3]],[this.matrix[1][0],this.matrix[1][1],this.matrix[1][2],this.matrix[1][3]],[this.matrix[2][0],this.matrix[2][1],this.matrix[2][2],this.matrix[2][3]]]},e.prototype.equals=function(t){if(null!=t&&t instanceof e){var i=t;if(i.name===this.name){for(var n=0;n<this.matrix.length;n++)for(var o=0;o<this.matrix[n].length;o++)if(i.matrix[n][o]!==this.matrix[n][o])return!1;return!0}}return!1},e.prototype.hashCode=function(){return((e=this.name).hashCode?e.hashCode():e.toString().split("").reduce((function(e,t){return(e<<5)-e+t.charCodeAt(0)|0}),0))+(this.matrix,function e(t){if(null==t)return 0;for(var i=1,n=0;n<t.length;n++){var o=1;Array.isArray(t[n])?o=e(t[n]):"number"==typeof t[n]&&(o=1e3*t[n]|0),i=31*i+o}return i});var e},e}();Transformation.__class="com.eteks.sweethome3d.model.Transformation";var LightSource=function(){function e(e,t,i,n,o){if("number"!=typeof e&&null!==e||"number"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o){if("number"!=typeof e&&null!==e||"number"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||void 0!==o)throw new Error("invalid overload");void 0===this.x&&(this.x=0),void 0===this.y&&(this.y=0),void 0===this.z&&(this.z=0),void 0===this.color&&(this.color=0),void 0===this.diameter&&(this.diameter=null),this.x=e,this.y=t,this.z=i,this.color=n,this.diameter=null,void 0===this.x&&(this.x=0),void 0===this.y&&(this.y=0),void 0===this.z&&(this.z=0),void 0===this.color&&(this.color=0),void 0===this.diameter&&(this.diameter=null)}else{void 0===this.x&&(this.x=0),void 0===this.y&&(this.y=0),void 0===this.z&&(this.z=0),void 0===this.color&&(this.color=0),void 0===this.diameter&&(this.diameter=null),this.x=e,this.y=t,this.z=i,this.color=n,this.diameter=o}}return e.prototype.getX=function(){return this.x},e.prototype.getY=function(){return this.y},e.prototype.getZ=function(){return this.z},e.prototype.getColor=function(){return this.color},e.prototype.getDiameter=function(){return this.diameter},e}();LightSource.__class="com.eteks.sweethome3d.model.LightSource";var TextStyle=function(){function e(t,i,n,o,r,l){if("string"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||"boolean"!=typeof n&&null!==n||"boolean"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||"boolean"!=typeof l&&null!==l)if("string"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||"boolean"!=typeof n&&null!==n||"boolean"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||void 0!==l)if("string"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||"boolean"!=typeof n&&null!==n||"boolean"!=typeof o&&null!==o||void 0!==r||void 0!==l)if("number"!=typeof t&&null!==t||"boolean"!=typeof i&&null!==i||"boolean"!=typeof n&&null!==n||void 0!==o||void 0!==r||void 0!==l){if("number"!=typeof t&&null!==t||void 0!==i||void 0!==n||void 0!==o||void 0!==r||void 0!==l)throw new Error("invalid overload");var a=(p=arguments)[0],s=e.Alignment.CENTER;void 0===this.fontName&&(this.fontName=null),void 0===this.fontSize&&(this.fontSize=0),void 0===this.bold&&(this.bold=!1),void 0===this.italic&&(this.italic=!1),void 0===this.alignment&&(this.alignment=null),this.fontName=null,this.fontSize=a,this.bold=!1,this.italic=!1,this.alignment=s,e.textStylesCache_$LI$().push(this),void 0===this.fontName&&(this.fontName=null),void 0===this.fontSize&&(this.fontSize=0),void 0===this.bold&&(this.bold=!1),void 0===this.italic&&(this.italic=!1),void 0===this.alignment&&(this.alignment=null),void 0===this.fontName&&(this.fontName=null),void 0===this.fontSize&&(this.fontSize=0),void 0===this.bold&&(this.bold=!1),void 0===this.italic&&(this.italic=!1),void 0===this.alignment&&(this.alignment=null),void 0===this.fontName&&(this.fontName=null),void 0===this.fontSize&&(this.fontSize=0),void 0===this.bold&&(this.bold=!1),void 0===this.italic&&(this.italic=!1),void 0===this.alignment&&(this.alignment=null),void 0===this.fontName&&(this.fontName=null),void 0===this.fontSize&&(this.fontSize=0),void 0===this.bold&&(this.bold=!1),void 0===this.italic&&(this.italic=!1),void 0===this.alignment&&(this.alignment=null)}else{var h=(p=arguments)[0],u=p[1],d=p[2],c=e.Alignment.CENTER;void 0===this.fontName&&(this.fontName=null),void 0===this.fontSize&&(this.fontSize=0),void 0===this.bold&&(this.bold=!1),void 0===this.italic&&(this.italic=!1),void 0===this.alignment&&(this.alignment=null),this.fontName=null,this.fontSize=h,this.bold=u,this.italic=d,this.alignment=c,e.textStylesCache_$LI$().push(this),void 0===this.fontName&&(this.fontName=null),void 0===this.fontSize&&(this.fontSize=0),void 0===this.bold&&(this.bold=!1),void 0===this.italic&&(this.italic=!1),void 0===this.alignment&&(this.alignment=null),void 0===this.fontName&&(this.fontName=null),void 0===this.fontSize&&(this.fontSize=0),void 0===this.bold&&(this.bold=!1),void 0===this.italic&&(this.italic=!1),void 0===this.alignment&&(this.alignment=null),void 0===this.fontName&&(this.fontName=null),void 0===this.fontSize&&(this.fontSize=0),void 0===this.bold&&(this.bold=!1),void 0===this.italic&&(this.italic=!1),void 0===this.alignment&&(this.alignment=null)}else{var p=arguments,g=e.Alignment.CENTER;void 0===this.fontName&&(this.fontName=null),void 0===this.fontSize&&(this.fontSize=0),void 0===this.bold&&(this.bold=!1),void 0===this.italic&&(this.italic=!1),void 0===this.alignment&&(this.alignment=null),this.fontName=t,this.fontSize=i,this.bold=n,this.italic=o,this.alignment=g,e.textStylesCache_$LI$().push(this),void 0===this.fontName&&(this.fontName=null),void 0===this.fontSize&&(this.fontSize=0),void 0===this.bold&&(this.bold=!1),void 0===this.italic&&(this.italic=!1),void 0===this.alignment&&(this.alignment=null),void 0===this.fontName&&(this.fontName=null),void 0===this.fontSize&&(this.fontSize=0),void 0===this.bold&&(this.bold=!1),void 0===this.italic&&(this.italic=!1),void 0===this.alignment&&(this.alignment=null)}else{var p=arguments;void 0===this.fontName&&(this.fontName=null),void 0===this.fontSize&&(this.fontSize=0),void 0===this.bold&&(this.bold=!1),void 0===this.italic&&(this.italic=!1),void 0===this.alignment&&(this.alignment=null),this.fontName=t,this.fontSize=i,this.bold=n,this.italic=o,this.alignment=r,e.textStylesCache_$LI$().push(this),void 0===this.fontName&&(this.fontName=null),void 0===this.fontSize&&(this.fontSize=0),void 0===this.bold&&(this.bold=!1),void 0===this.italic&&(this.italic=!1),void 0===this.alignment&&(this.alignment=null)}else{var p=arguments;void 0===this.fontName&&(this.fontName=null),void 0===this.fontSize&&(this.fontSize=0),void 0===this.bold&&(this.bold=!1),void 0===this.italic&&(this.italic=!1),void 0===this.alignment&&(this.alignment=null),this.fontName=t,this.fontSize=i,this.bold=n,this.italic=o,this.alignment=r,l&&e.textStylesCache_$LI$().push(this)}}return e.textStylesCache_$LI$=function(){return null==e.textStylesCache&&(e.textStylesCache=[]),e.textStylesCache},e.prototype.getInstance=function(t,i,n,o,r){for(var l=new e(t,i,n,o,r,!1),a=e.textStylesCache_$LI$().length-1;a>=0;a--){var s=e.textStylesCache_$LI$()[a];if(null==s)e.textStylesCache_$LI$().splice(a,1)[0];else if(s.equals(l))return l}return e.textStylesCache_$LI$().push(l),l},e.prototype.getFontName=function(){return this.fontName},e.prototype.getFontSize=function(){return this.fontSize},e.prototype.isBold=function(){return this.bold},e.prototype.isItalic=function(){return this.italic},e.prototype.getAlignment=function(){return this.alignment},e.prototype.deriveStyle$java_lang_String=function(e){return this.getFontName()===e||null!=e&&e===this.getFontName()?this:this.getInstance(e,this.getFontSize(),this.isBold(),this.isItalic(),this.getAlignment())},e.prototype.deriveStyle=function(e){if("string"==typeof e||null===e)return this.deriveStyle$java_lang_String(e);if("number"==typeof e||null===e)return this.deriveStyle$com_eteks_sweethome3d_model_TextStyle_Alignment(e);if("number"==typeof e||null===e)return this.deriveStyle$float(e);throw new Error("invalid overload")},e.prototype.deriveStyle$float=function(e){return this.getFontSize()===e?this:this.getInstance(this.getFontName(),e,this.isBold(),this.isItalic(),this.getAlignment())},e.prototype.deriveStyle$com_eteks_sweethome3d_model_TextStyle_Alignment=function(e){return this.getAlignment()===e?this:this.getInstance(this.getFontName(),this.getFontSize(),this.isBold(),this.isItalic(),e)},e.prototype.deriveBoldStyle=function(e){return this.isBold()===e?this:this.getInstance(this.getFontName(),this.getFontSize(),e,this.isItalic(),this.getAlignment())},e.prototype.deriveItalicStyle=function(e){return this.isItalic()===e?this:this.getInstance(this.getFontName(),this.getFontSize(),this.isBold(),e,this.getAlignment())},e.prototype.equals=function(t){if(null!=t&&t instanceof e){var i=t;return(i.fontName===this.fontName||null!=i.fontName&&i.fontName===this.fontName)&&i.fontSize===this.fontSize&&i.bold===this.bold&&i.italic===this.italic&&i.alignment===this.alignment}return!1},e.prototype.hashCode=function(){var e,t,i=(e=this.fontSize,t=new ArrayBuffer(4),new Float32Array(t)[0]=e,new Uint32Array(t)[0]);return null!=this.fontName&&(i+=function(e){return e.hashCode?e.hashCode():e.toString().split("").reduce((function(e,t){return(e<<5)-e+t.charCodeAt(0)|0}),0)}(this.fontName)),this.bold&&i++,this.italic&&i++,i+=0},e}();TextStyle.__class="com.eteks.sweethome3d.model.TextStyle",function(e){var t;(t=e.Alignment||(e.Alignment={}))[t.LEFT=0]="LEFT",t[t.CENTER=1]="CENTER",t[t.RIGHT=2]="RIGHT"}(TextStyle||(TextStyle={}));var AspectRatio,HomeTexture=function(){function e(t,i,n,o,r,l,a){if(!(null!=t&&null!=t.constructor&&null!=t.constructor.__interfaces&&t.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0||null===t)||"number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||"boolean"!=typeof l&&null!==l||"boolean"!=typeof a&&null!==a)if(!(null!=t&&null!=t.constructor&&null!=t.constructor.__interfaces&&t.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0||null===t)||"number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||"boolean"!=typeof l&&null!==l||void 0!==a)if(!(null!=t&&null!=t.constructor&&null!=t.constructor.__interfaces&&t.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0||null===t)||"number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||"boolean"!=typeof o&&null!==o||void 0!==r||void 0!==l||void 0!==a)if(!(null!=t&&null!=t.constructor&&null!=t.constructor.__interfaces&&t.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0||null===t)||"number"!=typeof i&&null!==i||"boolean"!=typeof n&&null!==n||void 0!==o||void 0!==r||void 0!==l||void 0!==a)if(!(null!=t&&null!=t.constructor&&null!=t.constructor.__interfaces&&t.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0||null===t)||"number"!=typeof i&&null!==i||void 0!==n||void 0!==o||void 0!==r||void 0!==l||void 0!==a){if(!(null!=t&&null!=t.constructor&&null!=t.constructor.__interfaces&&t.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0||null===t)||void 0!==i||void 0!==n||void 0!==o||void 0!==r||void 0!==l||void 0!==a)throw new Error("invalid overload");v=arguments;void 0===this.catalogId&&(this.catalogId=null),void 0===this.name&&(this.name=null),void 0===this.creator&&(this.creator=null),void 0===this.image&&(this.image=null),void 0===this.width&&(this.width=0),void 0===this.height&&(this.height=0),void 0===this.xOffset&&(this.xOffset=0),void 0===this.yOffset&&(this.yOffset=0),void 0===this.angle&&(this.angle=0),void 0===this.scale&&(this.scale=0),void 0===this.fittingArea&&(this.fittingArea=!1),void 0===this.leftToRightOriented&&(this.leftToRightOriented=!1),this.name=t.getName(),this.creator=t.getCreator(),this.image=t.getImage(),this.width=t.getWidth(),this.height=t.getHeight(),this.xOffset=0,this.yOffset=0,this.angle=0,this.scale=1,this.fittingArea=!1,this.leftToRightOriented=!0,this.catalogId=null!=t&&t instanceof e?t.getCatalogId():null!=t&&t instanceof CatalogTexture?t.getId():null,void 0===this.catalogId&&(this.catalogId=null),void 0===this.name&&(this.name=null),void 0===this.creator&&(this.creator=null),void 0===this.image&&(this.image=null),void 0===this.width&&(this.width=0),void 0===this.height&&(this.height=0),void 0===this.xOffset&&(this.xOffset=0),void 0===this.yOffset&&(this.yOffset=0),void 0===this.angle&&(this.angle=0),void 0===this.scale&&(this.scale=0),void 0===this.fittingArea&&(this.fittingArea=!1),void 0===this.leftToRightOriented&&(this.leftToRightOriented=!1),void 0===this.catalogId&&(this.catalogId=null),void 0===this.name&&(this.name=null),void 0===this.creator&&(this.creator=null),void 0===this.image&&(this.image=null),void 0===this.width&&(this.width=0),void 0===this.height&&(this.height=0),void 0===this.xOffset&&(this.xOffset=0),void 0===this.yOffset&&(this.yOffset=0),void 0===this.angle&&(this.angle=0),void 0===this.scale&&(this.scale=0),void 0===this.fittingArea&&(this.fittingArea=!1),void 0===this.leftToRightOriented&&(this.leftToRightOriented=!1),void 0===this.catalogId&&(this.catalogId=null),void 0===this.name&&(this.name=null),void 0===this.creator&&(this.creator=null),void 0===this.image&&(this.image=null),void 0===this.width&&(this.width=0),void 0===this.height&&(this.height=0),void 0===this.xOffset&&(this.xOffset=0),void 0===this.yOffset&&(this.yOffset=0),void 0===this.angle&&(this.angle=0),void 0===this.scale&&(this.scale=0),void 0===this.fittingArea&&(this.fittingArea=!1),void 0===this.leftToRightOriented&&(this.leftToRightOriented=!1),void 0===this.catalogId&&(this.catalogId=null),void 0===this.name&&(this.name=null),void 0===this.creator&&(this.creator=null),void 0===this.image&&(this.image=null),void 0===this.width&&(this.width=0),void 0===this.height&&(this.height=0),void 0===this.xOffset&&(this.xOffset=0),void 0===this.yOffset&&(this.yOffset=0),void 0===this.angle&&(this.angle=0),void 0===this.scale&&(this.scale=0),void 0===this.fittingArea&&(this.fittingArea=!1),void 0===this.leftToRightOriented&&(this.leftToRightOriented=!1),void 0===this.catalogId&&(this.catalogId=null),void 0===this.name&&(this.name=null),void 0===this.creator&&(this.creator=null),void 0===this.image&&(this.image=null),void 0===this.width&&(this.width=0),void 0===this.height&&(this.height=0),void 0===this.xOffset&&(this.xOffset=0),void 0===this.yOffset&&(this.yOffset=0),void 0===this.angle&&(this.angle=0),void 0===this.scale&&(this.scale=0),void 0===this.fittingArea&&(this.fittingArea=!1),void 0===this.leftToRightOriented&&(this.leftToRightOriented=!1)}else{var s=(v=arguments)[1];void 0===this.catalogId&&(this.catalogId=null),void 0===this.name&&(this.name=null),void 0===this.creator&&(this.creator=null),void 0===this.image&&(this.image=null),void 0===this.width&&(this.width=0),void 0===this.height&&(this.height=0),void 0===this.xOffset&&(this.xOffset=0),void 0===this.yOffset&&(this.yOffset=0),void 0===this.angle&&(this.angle=0),void 0===this.scale&&(this.scale=0),void 0===this.fittingArea&&(this.fittingArea=!1),void 0===this.leftToRightOriented&&(this.leftToRightOriented=!1),this.name=t.getName(),this.creator=t.getCreator(),this.image=t.getImage(),this.width=t.getWidth(),this.height=t.getHeight(),this.xOffset=0,this.yOffset=0,this.angle=s,this.scale=1,this.fittingArea=!1,this.leftToRightOriented=!0,this.catalogId=null!=t&&t instanceof e?t.getCatalogId():null!=t&&t instanceof CatalogTexture?t.getId():null,void 0===this.catalogId&&(this.catalogId=null),void 0===this.name&&(this.name=null),void 0===this.creator&&(this.creator=null),void 0===this.image&&(this.image=null),void 0===this.width&&(this.width=0),void 0===this.height&&(this.height=0),void 0===this.xOffset&&(this.xOffset=0),void 0===this.yOffset&&(this.yOffset=0),void 0===this.angle&&(this.angle=0),void 0===this.scale&&(this.scale=0),void 0===this.fittingArea&&(this.fittingArea=!1),void 0===this.leftToRightOriented&&(this.leftToRightOriented=!1),void 0===this.catalogId&&(this.catalogId=null),void 0===this.name&&(this.name=null),void 0===this.creator&&(this.creator=null),void 0===this.image&&(this.image=null),void 0===this.width&&(this.width=0),void 0===this.height&&(this.height=0),void 0===this.xOffset&&(this.xOffset=0),void 0===this.yOffset&&(this.yOffset=0),void 0===this.angle&&(this.angle=0),void 0===this.scale&&(this.scale=0),void 0===this.fittingArea&&(this.fittingArea=!1),void 0===this.leftToRightOriented&&(this.leftToRightOriented=!1),void 0===this.catalogId&&(this.catalogId=null),void 0===this.name&&(this.name=null),void 0===this.creator&&(this.creator=null),void 0===this.image&&(this.image=null),void 0===this.width&&(this.width=0),void 0===this.height&&(this.height=0),void 0===this.xOffset&&(this.xOffset=0),void 0===this.yOffset&&(this.yOffset=0),void 0===this.angle&&(this.angle=0),void 0===this.scale&&(this.scale=0),void 0===this.fittingArea&&(this.fittingArea=!1),void 0===this.leftToRightOriented&&(this.leftToRightOriented=!1),void 0===this.catalogId&&(this.catalogId=null),void 0===this.name&&(this.name=null),void 0===this.creator&&(this.creator=null),void 0===this.image&&(this.image=null),void 0===this.width&&(this.width=0),void 0===this.height&&(this.height=0),void 0===this.xOffset&&(this.xOffset=0),void 0===this.yOffset&&(this.yOffset=0),void 0===this.angle&&(this.angle=0),void 0===this.scale&&(this.scale=0),void 0===this.fittingArea&&(this.fittingArea=!1),void 0===this.leftToRightOriented&&(this.leftToRightOriented=!1)}else{var h=(v=arguments)[1],u=v[2];void 0===this.catalogId&&(this.catalogId=null),void 0===this.name&&(this.name=null),void 0===this.creator&&(this.creator=null),void 0===this.image&&(this.image=null),void 0===this.width&&(this.width=0),void 0===this.height&&(this.height=0),void 0===this.xOffset&&(this.xOffset=0),void 0===this.yOffset&&(this.yOffset=0),void 0===this.angle&&(this.angle=0),void 0===this.scale&&(this.scale=0),void 0===this.fittingArea&&(this.fittingArea=!1),void 0===this.leftToRightOriented&&(this.leftToRightOriented=!1),this.name=t.getName(),this.creator=t.getCreator(),this.image=t.getImage(),this.width=t.getWidth(),this.height=t.getHeight(),this.xOffset=0,this.yOffset=0,this.angle=h,this.scale=1,this.fittingArea=!1,this.leftToRightOriented=u,this.catalogId=null!=t&&t instanceof e?t.getCatalogId():null!=t&&t instanceof CatalogTexture?t.getId():null,void 0===this.catalogId&&(this.catalogId=null),void 0===this.name&&(this.name=null),void 0===this.creator&&(this.creator=null),void 0===this.image&&(this.image=null),void 0===this.width&&(this.width=0),void 0===this.height&&(this.height=0),void 0===this.xOffset&&(this.xOffset=0),void 0===this.yOffset&&(this.yOffset=0),void 0===this.angle&&(this.angle=0),void 0===this.scale&&(this.scale=0),void 0===this.fittingArea&&(this.fittingArea=!1),void 0===this.leftToRightOriented&&(this.leftToRightOriented=!1),void 0===this.catalogId&&(this.catalogId=null),void 0===this.name&&(this.name=null),void 0===this.creator&&(this.creator=null),void 0===this.image&&(this.image=null),void 0===this.width&&(this.width=0),void 0===this.height&&(this.height=0),void 0===this.xOffset&&(this.xOffset=0),void 0===this.yOffset&&(this.yOffset=0),void 0===this.angle&&(this.angle=0),void 0===this.scale&&(this.scale=0),void 0===this.fittingArea&&(this.fittingArea=!1),void 0===this.leftToRightOriented&&(this.leftToRightOriented=!1),void 0===this.catalogId&&(this.catalogId=null),void 0===this.name&&(this.name=null),void 0===this.creator&&(this.creator=null),void 0===this.image&&(this.image=null),void 0===this.width&&(this.width=0),void 0===this.height&&(this.height=0),void 0===this.xOffset&&(this.xOffset=0),void 0===this.yOffset&&(this.yOffset=0),void 0===this.angle&&(this.angle=0),void 0===this.scale&&(this.scale=0),void 0===this.fittingArea&&(this.fittingArea=!1),void 0===this.leftToRightOriented&&(this.leftToRightOriented=!1)}else{var d=(v=arguments)[1],c=v[2],p=v[3];void 0===this.catalogId&&(this.catalogId=null),void 0===this.name&&(this.name=null),void 0===this.creator&&(this.creator=null),void 0===this.image&&(this.image=null),void 0===this.width&&(this.width=0),void 0===this.height&&(this.height=0),void 0===this.xOffset&&(this.xOffset=0),void 0===this.yOffset&&(this.yOffset=0),void 0===this.angle&&(this.angle=0),void 0===this.scale&&(this.scale=0),void 0===this.fittingArea&&(this.fittingArea=!1),void 0===this.leftToRightOriented&&(this.leftToRightOriented=!1),this.name=t.getName(),this.creator=t.getCreator(),this.image=t.getImage(),this.width=t.getWidth(),this.height=t.getHeight(),this.xOffset=0,this.yOffset=0,this.angle=d,this.scale=c,this.fittingArea=!1,this.leftToRightOriented=p,this.catalogId=null!=t&&t instanceof e?t.getCatalogId():null!=t&&t instanceof CatalogTexture?t.getId():null,void 0===this.catalogId&&(this.catalogId=null),void 0===this.name&&(this.name=null),void 0===this.creator&&(this.creator=null),void 0===this.image&&(this.image=null),void 0===this.width&&(this.width=0),void 0===this.height&&(this.height=0),void 0===this.xOffset&&(this.xOffset=0),void 0===this.yOffset&&(this.yOffset=0),void 0===this.angle&&(this.angle=0),void 0===this.scale&&(this.scale=0),void 0===this.fittingArea&&(this.fittingArea=!1),void 0===this.leftToRightOriented&&(this.leftToRightOriented=!1),void 0===this.catalogId&&(this.catalogId=null),void 0===this.name&&(this.name=null),void 0===this.creator&&(this.creator=null),void 0===this.image&&(this.image=null),void 0===this.width&&(this.width=0),void 0===this.height&&(this.height=0),void 0===this.xOffset&&(this.xOffset=0),void 0===this.yOffset&&(this.yOffset=0),void 0===this.angle&&(this.angle=0),void 0===this.scale&&(this.scale=0),void 0===this.fittingArea&&(this.fittingArea=!1),void 0===this.leftToRightOriented&&(this.leftToRightOriented=!1)}else{var g=(v=arguments)[5];void 0===this.catalogId&&(this.catalogId=null),void 0===this.name&&(this.name=null),void 0===this.creator&&(this.creator=null),void 0===this.image&&(this.image=null),void 0===this.width&&(this.width=0),void 0===this.height&&(this.height=0),void 0===this.xOffset&&(this.xOffset=0),void 0===this.yOffset&&(this.yOffset=0),void 0===this.angle&&(this.angle=0),void 0===this.scale&&(this.scale=0),void 0===this.fittingArea&&(this.fittingArea=!1),void 0===this.leftToRightOriented&&(this.leftToRightOriented=!1),this.name=t.getName(),this.creator=t.getCreator(),this.image=t.getImage(),this.width=t.getWidth(),this.height=t.getHeight(),this.xOffset=i,this.yOffset=n,this.angle=o,this.scale=r,this.fittingArea=!1,this.leftToRightOriented=g,this.catalogId=null!=t&&t instanceof e?t.getCatalogId():null!=t&&t instanceof CatalogTexture?t.getId():null,void 0===this.catalogId&&(this.catalogId=null),void 0===this.name&&(this.name=null),void 0===this.creator&&(this.creator=null),void 0===this.image&&(this.image=null),void 0===this.width&&(this.width=0),void 0===this.height&&(this.height=0),void 0===this.xOffset&&(this.xOffset=0),void 0===this.yOffset&&(this.yOffset=0),void 0===this.angle&&(this.angle=0),void 0===this.scale&&(this.scale=0),void 0===this.fittingArea&&(this.fittingArea=!1),void 0===this.leftToRightOriented&&(this.leftToRightOriented=!1)}else{var v=arguments;void 0===this.catalogId&&(this.catalogId=null),void 0===this.name&&(this.name=null),void 0===this.creator&&(this.creator=null),void 0===this.image&&(this.image=null),void 0===this.width&&(this.width=0),void 0===this.height&&(this.height=0),void 0===this.xOffset&&(this.xOffset=0),void 0===this.yOffset&&(this.yOffset=0),void 0===this.angle&&(this.angle=0),void 0===this.scale&&(this.scale=0),void 0===this.fittingArea&&(this.fittingArea=!1),void 0===this.leftToRightOriented&&(this.leftToRightOriented=!1),this.name=t.getName(),this.creator=t.getCreator(),this.image=t.getImage(),this.width=t.getWidth(),this.height=t.getHeight(),this.xOffset=i,this.yOffset=n,this.angle=o,this.scale=r,this.fittingArea=l,this.leftToRightOriented=a,this.catalogId=null!=t&&t instanceof e?t.getCatalogId():null!=t&&t instanceof CatalogTexture?t.getId():null}}return e.prototype.getCatalogId=function(){return this.catalogId},e.prototype.getName=function(){return this.name},e.prototype.getCreator=function(){return this.creator},e.prototype.getImage=function(){return this.image},e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.getXOffset=function(){return this.xOffset},e.prototype.getYOffset=function(){return this.yOffset},e.prototype.getAngle=function(){return this.angle},e.prototype.getScale=function(){return this.scale},e.prototype.isFittingArea=function(){return this.fittingArea},e.prototype.setFittingArea=function(e){this.fittingArea=e},e.prototype.isLeftToRightOriented=function(){return this.leftToRightOriented},e.prototype.equals=function(t){if(t===this)return!0;if(null!=t&&t instanceof e){var i=t;return(i.name===this.name||null!=i.name&&i.name===this.name)&&(i.image===this.image||null!=i.image&&(n=i.image,o=this.image,n&&n.equals?n.equals(o):n===o))&&i.width===this.width&&i.height===this.height&&i.xOffset===this.xOffset&&i.yOffset===this.yOffset&&i.fittingArea===this.fittingArea&&i.leftToRightOriented===this.leftToRightOriented&&i.angle===this.angle&&i.scale===this.scale}return!1;var n,o},e.prototype.hashCode=function(){return(null!=this.name?(e=this.name).hashCode?e.hashCode():e.toString().split("").reduce((function(e,t){return(e<<5)-e+t.charCodeAt(0)|0}),0):0)+(null!=this.image?function(e){return e.hashCode?e.hashCode():e.toString().split("").reduce((function(e,t){return(e<<5)-e+t.charCodeAt(0)|0}),0)}(this.image):0)+function(e){var t=new ArrayBuffer(4);return new Float32Array(t)[0]=e,new Uint32Array(t)[0]}(this.width)+function(e){var t=new ArrayBuffer(4);return new Float32Array(t)[0]=e,new Uint32Array(t)[0]}(this.height)+function(e){var t=new ArrayBuffer(4);return new Float32Array(t)[0]=e,new Uint32Array(t)[0]}(this.xOffset)+function(e){var t=new ArrayBuffer(4);return new Float32Array(t)[0]=e,new Uint32Array(t)[0]}(this.yOffset)+function(e){var t=new ArrayBuffer(4);return new Float32Array(t)[0]=e,new Uint32Array(t)[0]}(this.angle)+function(e){var t=new ArrayBuffer(4);return new Float32Array(t)[0]=e,new Uint32Array(t)[0]}(this.scale);var e},e}();HomeTexture.__class="com.eteks.sweethome3d.model.HomeTexture",HomeTexture.__interfaces=["com.eteks.sweethome3d.model.TextureImage"],function(e){e[e.FREE_RATIO=0]="FREE_RATIO",e[e.VIEW_3D_RATIO=1]="VIEW_3D_RATIO",e[e.RATIO_4_3=2]="RATIO_4_3",e[e.RATIO_3_2=3]="RATIO_3_2",e[e.RATIO_16_9=4]="RATIO_16_9",e[e.RATIO_2_1=5]="RATIO_2_1",e[e.RATIO_24_10=6]="RATIO_24_10",e[e.SQUARE_RATIO=7]="SQUARE_RATIO"}(AspectRatio||(AspectRatio={}));var AspectRatio_$WRAPPER=function(){function e(e,t,i){this._$ordinal=e,this._$name=t,void 0===this.value&&(this.value=null),this.value=i}return e.prototype.getValue=function(){return this.value},e.prototype.name=function(){return this._$name},e.prototype.ordinal=function(){return this._$ordinal},e.prototype.compareTo=function(e){return this._$ordinal-(isNaN(e)?e._$ordinal:e)},e}();AspectRatio.__class="com.eteks.sweethome3d.model.AspectRatio",AspectRatio._$wrappers={0:new AspectRatio_$WRAPPER(0,"FREE_RATIO",null),1:new AspectRatio_$WRAPPER(1,"VIEW_3D_RATIO",null),2:new AspectRatio_$WRAPPER(2,"RATIO_4_3",4/3),3:new AspectRatio_$WRAPPER(3,"RATIO_3_2",1.5),4:new AspectRatio_$WRAPPER(4,"RATIO_16_9",16/9),5:new AspectRatio_$WRAPPER(5,"RATIO_2_1",2),6:new AspectRatio_$WRAPPER(6,"RATIO_24_10",2.4),7:new AspectRatio_$WRAPPER(7,"SQUARE_RATIO",1)};var Baseboard=function(){function e(t,i,n,o,r){if("number"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||!(null!=o&&o instanceof HomeTexture||null===o)||"boolean"!=typeof r&&null!==r){if("number"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||!(null!=o&&o instanceof HomeTexture||null===o)||void 0!==r)throw new Error("invalid overload");var l=arguments,a=l[1],s=l[0];void 0===this.thickness&&(this.thickness=0),void 0===this.height&&(this.height=0),void 0===this.color&&(this.color=null),void 0===this.texture&&(this.texture=null),this.height=s,this.thickness=a,this.color=n,this.texture=o,e.baseboardsCache_$LI$().push(this),void 0===this.thickness&&(this.thickness=0),void 0===this.height&&(this.height=0),void 0===this.color&&(this.color=null),void 0===this.texture&&(this.texture=null)}else{void 0===this.thickness&&(this.thickness=0),void 0===this.height&&(this.height=0),void 0===this.color&&(this.color=null),void 0===this.texture&&(this.texture=null),this.height=i,this.thickness=t,this.color=n,this.texture=o,r&&e.baseboardsCache_$LI$().push(this)}}return e.baseboardsCache_$LI$=function(){return null==e.baseboardsCache&&(e.baseboardsCache=[]),e.baseboardsCache},e.getInstance=function(t,i,n,o){for(var r=new e(t,i,n,o,!1),l=e.baseboardsCache_$LI$().length-1;l>=0;l--){var a=e.baseboardsCache_$LI$()[l];if(null==a)e.baseboardsCache_$LI$().splice(l,1)[0];else if(a.equals(r))return r}return e.baseboardsCache_$LI$().push(r),r},e.prototype.getThickness=function(){return this.thickness},e.prototype.getHeight=function(){return this.height},e.prototype.getColor=function(){return this.color},e.prototype.getTexture=function(){return this.texture},e.prototype.equals=function(t){if(null!=t&&t instanceof e){var i=t;return i.thickness===this.thickness&&i.height===this.height&&(i.color===this.color||null!=i.color&&i.color===this.color)&&(i.texture===this.texture||null!=i.texture&&i.texture.equals(this.texture))}return!1},e.prototype.hashCode=function(){var e,t,i=(e=this.thickness,t=new ArrayBuffer(4),new Float32Array(t)[0]=e,new Uint32Array(t)[0]+function(e){var t=new ArrayBuffer(4);return new Float32Array(t)[0]=e,new Uint32Array(t)[0]}(this.height));return null!=this.color&&(i+=function(e){return e.hashCode?e.hashCode():e.toString().split("").reduce((function(e,t){return(e<<5)-e+t.charCodeAt(0)|0}),0)}(this.color)),null!=this.texture&&(i+=function(e){return e.hashCode?e.hashCode():e.toString().split("").reduce((function(e,t){return(e<<5)-e+t.charCodeAt(0)|0}),0)}(this.texture)),i},e}();Baseboard.__class="com.eteks.sweethome3d.model.Baseboard";var FurnitureCatalog=function(){function e(){this.categories=[],this.furnitureChangeSupport=new CollectionChangeSupport(this)}return e.prototype.getCategories=function(){return this.categories.slice(0)},e.prototype.getCategoriesCount=function(){return this.categories.length},e.prototype.getCategory=function(e){return this.categories[e]},e.prototype.addFurnitureListener=function(e){var t;this.furnitureChangeSupport.addCollectionListener(null==(t=e)||"function"==typeof t?t:function(e){return(t.collectionChanged?t.collectionChanged:t).call(t,e)})},e.prototype.removeFurnitureListener=function(e){var t;this.furnitureChangeSupport.removeCollectionListener(null==(t=e)||"function"==typeof t?t:function(e){return(t.collectionChanged?t.collectionChanged:t).call(t,e)})},e.prototype.add=function(e,t){var i=function(e,t){for(var i,n,o=0,r=e.length-1;o<=r;){var l=o+r>>>1,a=e[l],s=(n=t,(i=a).compareTo?i.compareTo(n):i.localeCompare(n));if(s<0)o=l+1;else{if(!(s>0))return l;r=l-1}}return-(o+1)}(this.categories,e);i<0?(e=new FurnitureCategory(e.getName()),this.categories.splice(-i-1,0,e)):e=this.categories[i],e.add(t),this.furnitureChangeSupport.fireCollectionChanged(t,e.getIndexOfPieceOfFurniture(t),CollectionEvent.Type.ADD)},e.prototype.delete=function(e){var t,i,n=e.getCategory();if(null!=n){var o=n.getIndexOfPieceOfFurniture(e);if(o>=0)return n.delete(e),0===n.getFurnitureCount()&&(this.categories=this.categories.slice(0),t=this.categories,(i=t.indexOf(n))>=0&&t.splice(i,1)),void this.furnitureChangeSupport.fireCollectionChanged(e,o,CollectionEvent.Type.DELETE)}throw new IllegalArgumentException("catalog doesn't contain piece "+e.getName())},e.prototype.getPieceOfFurnitureWithId=function(e){for(var t=0;t<this.categories.length;t++)for(var i=this.categories[t].getFurniture(),n=0;n<i.length;n++){var o=i[n];if(e===o.getId())return o}return null},e}();FurnitureCatalog.__class="com.eteks.sweethome3d.model.FurnitureCatalog";var HomeDescriptor=function(){function e(e,t,i){void 0===this.name&&(this.name=null),void 0===this.content&&(this.content=null),void 0===this.icon&&(this.icon=null),this.name=e,this.content=t,this.icon=i}return e.prototype.getName=function(){return this.name},e.prototype.getContent=function(){return this.content},e.prototype.getIcon=function(){return this.icon},e}();HomeDescriptor.__class="com.eteks.sweethome3d.model.HomeDescriptor";var BackgroundImage=function(){function e(e,t,i,n,o,r,l,a,s){if(!(null!=e&&null!=e.constructor&&null!=e.constructor.__interfaces&&e.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===e)||"number"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||"number"!=typeof l&&null!==l||"number"!=typeof a&&null!==a||"boolean"!=typeof s&&null!==s){if(!(null!=e&&null!=e.constructor&&null!=e.constructor.__interfaces&&e.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===e)||"number"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||"number"!=typeof l&&null!==l||"number"!=typeof a&&null!==a||void 0!==s)throw new Error("invalid overload");void 0===this.image&&(this.image=null),void 0===this.scaleDistance&&(this.scaleDistance=0),void 0===this.scaleDistanceXStart&&(this.scaleDistanceXStart=0),void 0===this.scaleDistanceYStart&&(this.scaleDistanceYStart=0),void 0===this.scaleDistanceXEnd&&(this.scaleDistanceXEnd=0),void 0===this.scaleDistanceYEnd&&(this.scaleDistanceYEnd=0),void 0===this.xOrigin&&(this.xOrigin=0),void 0===this.yOrigin&&(this.yOrigin=0),void 0===this.invisible&&(this.invisible=!1),this.image=e,this.scaleDistance=t,this.scaleDistanceXStart=i,this.scaleDistanceYStart=n,this.scaleDistanceXEnd=o,this.scaleDistanceYEnd=r,this.xOrigin=l,this.yOrigin=a,this.invisible=!1,void 0===this.image&&(this.image=null),void 0===this.scaleDistance&&(this.scaleDistance=0),void 0===this.scaleDistanceXStart&&(this.scaleDistanceXStart=0),void 0===this.scaleDistanceYStart&&(this.scaleDistanceYStart=0),void 0===this.scaleDistanceXEnd&&(this.scaleDistanceXEnd=0),void 0===this.scaleDistanceYEnd&&(this.scaleDistanceYEnd=0),void 0===this.xOrigin&&(this.xOrigin=0),void 0===this.yOrigin&&(this.yOrigin=0),void 0===this.invisible&&(this.invisible=!1)}else{void 0===this.image&&(this.image=null),void 0===this.scaleDistance&&(this.scaleDistance=0),void 0===this.scaleDistanceXStart&&(this.scaleDistanceXStart=0),void 0===this.scaleDistanceYStart&&(this.scaleDistanceYStart=0),void 0===this.scaleDistanceXEnd&&(this.scaleDistanceXEnd=0),void 0===this.scaleDistanceYEnd&&(this.scaleDistanceYEnd=0),void 0===this.xOrigin&&(this.xOrigin=0),void 0===this.yOrigin&&(this.yOrigin=0),void 0===this.invisible&&(this.invisible=!1),this.image=e,this.scaleDistance=t,this.scaleDistanceXStart=i,this.scaleDistanceYStart=n,this.scaleDistanceXEnd=o,this.scaleDistanceYEnd=r,this.xOrigin=l,this.yOrigin=a,this.invisible=!s}}return e.prototype.getImage=function(){return this.image},e.prototype.getScaleDistance=function(){return this.scaleDistance},e.prototype.getScaleDistanceXStart=function(){return this.scaleDistanceXStart},e.prototype.getScaleDistanceYStart=function(){return this.scaleDistanceYStart},e.prototype.getScaleDistanceXEnd=function(){return this.scaleDistanceXEnd},e.prototype.getScaleDistanceYEnd=function(){return this.scaleDistanceYEnd},e.prototype.getScale=function(){return e.getScale(this.scaleDistance,this.scaleDistanceXStart,this.scaleDistanceYStart,this.scaleDistanceXEnd,this.scaleDistanceYEnd)},e.getScale=function(e,t,i,n,o){return e/java.awt.geom.Point2D.distance(t,i,n,o)},e.prototype.getXOrigin=function(){return this.xOrigin},e.prototype.getYOrigin=function(){return this.yOrigin},e.prototype.isVisible=function(){return!this.invisible},e}();BackgroundImage.__class="com.eteks.sweethome3d.model.BackgroundImage";var HomeObject=function(){function e(t){if("string"==typeof t||null===t){if(void 0===this.id&&(this.id=null),void 0===this.properties&&(this.properties=null),void 0===this.propertyChangeSupport&&(this.propertyChangeSupport=null),null==t)throw new IllegalArgumentException("ID must exist");this.id=t}else{if(void 0!==t)throw new Error("invalid overload");var i=e.createId(e.ID_DEFAULT_PREFIX);if(void 0===this.id&&(this.id=null),void 0===this.properties&&(this.properties=null),void 0===this.propertyChangeSupport&&(this.propertyChangeSupport=null),null==i)throw new IllegalArgumentException("ID must exist");this.id=i,void 0===this.id&&(this.id=null),void 0===this.properties&&(this.properties=null),void 0===this.propertyChangeSupport&&(this.propertyChangeSupport=null)}}return e.createId=function(e){return e+"-"+UUID.randomUUID()},e.prototype.addPropertyChangeListener=function(e,t){null==this.propertyChangeSupport&&(this.propertyChangeSupport=new PropertyChangeSupport(this)),void 0===t?this.propertyChangeSupport.addPropertyChangeListener(e):this.propertyChangeSupport.addPropertyChangeListener(e,t)},e.prototype.removePropertyChangeListener=function(e,t){null!=this.propertyChangeSupport&&(void 0===t?this.propertyChangeSupport.removePropertyChangeListener(e):this.propertyChangeSupport.removePropertyChangeListener(e,t),0===this.propertyChangeSupport.getPropertyChangeListeners().length&&(this.propertyChangeSupport=null))},e.prototype.firePropertyChange=function(e,t,i){null!=this.propertyChangeSupport&&this.propertyChangeSupport.firePropertyChange(e,t,i)},e.prototype.getId=function(){return this.id},e.prototype.getProperty=function(e){if(null!=this.properties){var t=void 0===(i=this.properties)[n=e]?null:i[n];if("string"==typeof t)return t}var i,n;return null},e.prototype.getContentProperty=function(e){if(null!=this.properties){var t=void 0===(i=this.properties)[n=e]?null:i[n];if(null!=t&&null!=t.constructor&&null!=t.constructor.__interfaces&&t.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0)return t}var i,n;return null},e.prototype.isContentProperty=function(e){return null!=this.properties&&null!=(void 0===(t=this.properties)[i=e]?null:t[i])&&null!=function(e,t){return void 0===e[t]?null:e[t]}(this.properties,e).constructor&&null!=function(e,t){return void 0===e[t]?null:e[t]}(this.properties,e).constructor.__interfaces&&function(e,t){return void 0===e[t]?null:e[t]}(this.properties,e).constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0;var t,i},e.prototype.setProperty$java_lang_String$java_lang_String=function(e,t){this.setProperty$java_lang_String$java_lang_Object(e,t)},e.prototype.setProperty=function(e,t){if("string"!=typeof e&&null!==e||"string"!=typeof t&&null!==t){if("string"!=typeof e&&null!==e||null==t&&null!==t)throw new Error("invalid overload");return this.setProperty$java_lang_String$java_lang_Object(e,t)}return this.setProperty$java_lang_String$java_lang_String(e,t)},e.prototype.setProperty$java_lang_String$java_lang_Object=function(e,t){var i=this;if(null!=t&&!("string"==typeof t||null!=t&&null!=t.constructor&&null!=t.constructor.__interfaces&&t.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0))throw new IllegalArgumentException("Property value can be only a string or a content, not an instance of "+t.constructor);var n,o,r=null!=this.properties?void 0===(n=this.properties)[o=e]?null:n[o]:null;if(null==t){if(null!=this.properties&&null!=r){try{!function(t){var n=i.properties[e];delete i.properties[e]}(this.properties),0===Object.keys(this.properties).length&&(this.properties=null)}catch(e){this.properties=null}this.firePropertyChange(e,r,null)}}else null==this.properties||1===Object.keys(this.properties).length&&null!=r?this.properties=function(e){var i={};return i[e]=t,i}(e):(1===Object.keys(this.properties).length&&(this.properties=function(e){var t={};for(var i in e)t[i]=e[i];return t}(this.properties)),this.properties[e]=t),this.firePropertyChange(e,r,t)},e.prototype.getPropertyNames=function(){return null!=this.properties?Object.keys(this.properties):[]},e.prototype.duplicate=function(){for(var t,i,n=function(e){if(null!=e.clone)return e.clone();var t=Object.create(e);for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}(this),o=0;o<this.id.length&&(null==(i=t=this.id.charAt(o).toLowerCase()).charCodeAt?i:i.charCodeAt(0))>="a".charCodeAt(0)&&function(e){return null==e.charCodeAt?e:e.charCodeAt(0)}(t)<="z".charCodeAt(0);)o++;var r=o>=0?this.id.substring(0,o):e.ID_DEFAULT_PREFIX;return n.id=e.createId(r),n},e.prototype.clone=function(){var e,t,i=this;try{var n=function(e){var t=Object.create(e);for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}(this);return null!=this.properties&&(n.properties=1===Object.keys(n.properties).length?function(e){var t,n={};return n[e]=function(e){var t=0;return{next:function(){return t<e.length?e[t++]:null},hasNext:function(){return t<e.length}}}((t=i.properties,Object.keys(t).map((function(e){return t[e]})))).next(),n}((e=Object.keys(this.properties),t=0,{next:function(){return t<e.length?e[t++]:null},hasNext:function(){return t<e.length}}).next()):function(e){var t={};for(var i in e)t[i]=e[i];return t}(this.properties)),n.propertyChangeSupport=null,n}catch(e){throw new IllegalStateException("Super class isn't cloneable")}},e.ID_DEFAULT_PREFIX="object",e}();HomeObject.__class="com.eteks.sweethome3d.model.HomeObject",HomeObject.__transients=["propertyChangeSupport"];var ObjectProperty=function(){function e(t,i,n,o,r,l){if("string"!=typeof t&&null!==t||"string"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||"boolean"!=typeof o&&null!==o||"boolean"!=typeof r&&null!==r||"boolean"!=typeof l&&null!==l)if("string"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||"boolean"!=typeof n&&null!==n||"boolean"!=typeof o&&null!==o||"boolean"!=typeof r&&null!==r||void 0!==l)if("string"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||void 0!==n||void 0!==o||void 0!==r||void 0!==l){if("string"!=typeof t&&null!==t||void 0!==i||void 0!==n||void 0!==o||void 0!==r||void 0!==l)throw new Error("invalid overload");u=arguments;var a=null;void 0===this.name&&(this.name=null),void 0===this.displayedName&&(this.displayedName=null),void 0===this.type&&(this.type=null),void 0===this.typeName&&(this.typeName=null),void 0===this.displayable&&(this.displayable=!1),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.exportable&&(this.exportable=!1),this.name=t,this.displayedName=null,this.type=a,this.typeName=null,this.displayable=!0,this.modifiable=!0,this.exportable=!0,void 0===this.name&&(this.name=null),void 0===this.displayedName&&(this.displayedName=null),void 0===this.type&&(this.type=null),void 0===this.typeName&&(this.typeName=null),void 0===this.displayable&&(this.displayable=!1),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.exportable&&(this.exportable=!1),void 0===this.name&&(this.name=null),void 0===this.displayedName&&(this.displayedName=null),void 0===this.type&&(this.type=null),void 0===this.typeName&&(this.typeName=null),void 0===this.displayable&&(this.displayable=!1),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.exportable&&(this.exportable=!1)}else{var s=(u=arguments)[1];void 0===this.name&&(this.name=null),void 0===this.displayedName&&(this.displayedName=null),void 0===this.type&&(this.type=null),void 0===this.typeName&&(this.typeName=null),void 0===this.displayable&&(this.displayable=!1),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.exportable&&(this.exportable=!1),this.name=t,this.displayedName=null,this.type=s,this.typeName=null!=s?e.Type[s]:null,this.displayable=!0,this.modifiable=!0,this.exportable=!0,void 0===this.name&&(this.name=null),void 0===this.displayedName&&(this.displayedName=null),void 0===this.type&&(this.type=null),void 0===this.typeName&&(this.typeName=null),void 0===this.displayable&&(this.displayable=!1),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.exportable&&(this.exportable=!1)}else{var h=(u=arguments)[1];u[2],u[3],u[4];void 0===this.name&&(this.name=null),void 0===this.displayedName&&(this.displayedName=null),void 0===this.type&&(this.type=null),void 0===this.typeName&&(this.typeName=null),void 0===this.displayable&&(this.displayable=!1),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.exportable&&(this.exportable=!1),this.name=t,this.displayedName=null,this.type=h,this.typeName=null!=h?e.Type[h]:null,this.displayable=!0,this.modifiable=!0,this.exportable=!0,void 0===this.name&&(this.name=null),void 0===this.displayedName&&(this.displayedName=null),void 0===this.type&&(this.type=null),void 0===this.typeName&&(this.typeName=null),void 0===this.displayable&&(this.displayable=!1),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.exportable&&(this.exportable=!1)}else{var u=arguments;void 0===this.name&&(this.name=null),void 0===this.displayedName&&(this.displayedName=null),void 0===this.type&&(this.type=null),void 0===this.typeName&&(this.typeName=null),void 0===this.displayable&&(this.displayable=!1),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.exportable&&(this.exportable=!1),this.name=t,this.displayedName=i,this.type=n,this.typeName=null!=n?e.Type[n]:null,this.displayable=o,this.modifiable=r,this.exportable=l}}return e.fromDescription=function(t){if(0===t.length)throw new IllegalArgumentException("Description empty");var i,n,o,r=t.indexOf(":"),l=t.substring(0,r>0?r:t.length).trim(),a=null,s=!0,h=!0,u=!0,d=null;if(r>0){var c=t.substring(r+1).trim().split(/ /);if(c.length>0){a=e.Type[c[0]];for(var p=1;p<c.length;p++)i=c[p],n="displayable=",void 0===(o=void 0)&&(o=0),i.substr(o,12)===n?s=function(e,t){return"true".toUpperCase()===(null===t?t:t.toUpperCase())}(0,c[p].substring(13)):!function(e,t,i){return void 0===i&&(i=0),e.substr(i,11)===t}(c[p],"modifiable=")?!function(e,t,i){return void 0===i&&(i=0),e.substr(i,11)===t}(c[p],"exportable=")?function(e,t,i){return void 0===i&&(i=0),e.substr(i,14)===t}(c[p],"displayedName=")&&(d=t.substring(t.indexOf("displayedName=")+14)):u=function(e,t){return"true".toUpperCase()===(null===t?t:t.toUpperCase())}(0,c[p].substring(12)):h=function(e,t){return"true".toUpperCase()===(null===t?t:t.toUpperCase())}(0,c[p].substring(12))}}return new e(l,d,a,s,h,u)},e.prototype.getName=function(){return this.name},e.prototype.getType=function(){return this.type},e.prototype.isDisplayable=function(){return this.displayable},e.prototype.isModifiable=function(){return this.modifiable},e.prototype.isExportable=function(){return this.exportable},e.prototype.getDisplayedName=function(){if(null!=this.displayedName)return this.displayedName;var e=this.name.split("_").join(" ").toLowerCase();return e.charAt(0).toUpperCase()+(e.length>1?e.substring(1):"")},e.prototype.hashCode=function(){return null==this.name?0:(e=this.name).hashCode?e.hashCode():e.toString().split("").reduce((function(e,t){return(e<<5)-e+t.charCodeAt(0)|0}),0);var e},e.prototype.equals=function(t){return this===t||null!=t&&t instanceof e&&this.name===t.name},e}();ObjectProperty.__class="com.eteks.sweethome3d.model.ObjectProperty",function(e){var t;(t=e.Type||(e.Type={}))[t.ANY=0]="ANY",t[t.STRING=1]="STRING",t[t.BOOLEAN=2]="BOOLEAN",t[t.INTEGER=3]="INTEGER",t[t.NUMBER=4]="NUMBER",t[t.PRICE=5]="PRICE",t[t.LENGTH=6]="LENGTH",t[t.PERCENTAGE=7]="PERCENTAGE",t[t.DATE=8]="DATE",t[t.CONTENT=9]="CONTENT"}(ObjectProperty||(ObjectProperty={})),ObjectProperty.__transients=["type"];var TexturesCatalog=function(){function e(){this.categories=[],this.texturesChangeSupport=new CollectionChangeSupport(this)}return e.prototype.getCategories=function(){return this.categories.slice(0)},e.prototype.getCategoriesCount=function(){return this.categories.length},e.prototype.getCategory=function(e){return this.categories[e]},e.prototype.addTexturesListener=function(e){var t;this.texturesChangeSupport.addCollectionListener(null==(t=e)||"function"==typeof t?t:function(e){return(t.collectionChanged?t.collectionChanged:t).call(t,e)})},e.prototype.removeTexturesListener=function(e){var t;this.texturesChangeSupport.removeCollectionListener(null==(t=e)||"function"==typeof t?t:function(e){return(t.collectionChanged?t.collectionChanged:t).call(t,e)})},e.prototype.add=function(e,t){var i=function(e,t){for(var i,n,o=0,r=e.length-1;o<=r;){var l=o+r>>>1,a=e[l],s=(n=t,(i=a).compareTo?i.compareTo(n):i.localeCompare(n));if(s<0)o=l+1;else{if(!(s>0))return l;r=l-1}}return-(o+1)}(this.categories,e);i<0?(e=new TexturesCategory(e.getName()),this.categories.splice(-i-1,0,e)):e=this.categories[i],e.add(t),this.texturesChangeSupport.fireCollectionChanged(t,e.getIndexOfTexture(t),CollectionEvent.Type.ADD)},e.prototype.delete=function(e){var t,i,n=e.getCategory();if(null!=n){var o=n.getIndexOfTexture(e);if(o>=0)return n.delete(e),0===n.getTexturesCount()&&(this.categories=this.categories.slice(0),t=this.categories,(i=t.indexOf(n))>=0&&t.splice(i,1)),void this.texturesChangeSupport.fireCollectionChanged(e,o,CollectionEvent.Type.DELETE)}throw new IllegalArgumentException("catalog doesn't contain texture "+e.getName())},e}();TexturesCatalog.__class="com.eteks.sweethome3d.model.TexturesCatalog";var CatalogPieceOfFurniture=function(){function e(t,i,n,o,r,l,a,s,h,u,d,c,p,g,v,f,m,y,C,S,E,A,_,P,w,L,T,b,O,I,D,R,x,M,F,N,U,H){if("string"!=typeof t&&null!==t||"string"!=typeof i&&null!==i||"string"!=typeof n&&null!==n||"string"!=typeof o&&null!==o||"string"!=typeof r&&null!==r||!(null!=l&&l instanceof Array&&(0==l.length||null==l[0]||"string"==typeof l[0])||null===l)||"number"!=typeof a&&null!==a||"number"!=typeof s&&null!==s||!(null!=h&&null!=h.constructor&&null!=h.constructor.__interfaces&&h.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===h)||!(null!=u&&null!=u.constructor&&null!=u.constructor.__interfaces&&u.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===u)||!(null!=d&&null!=d.constructor&&null!=d.constructor.__interfaces&&d.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===d)||"number"!=typeof c&&null!==c||"number"!=typeof p&&null!==p||"number"!=typeof g&&null!==g||"number"!=typeof v&&null!==v||"number"!=typeof f&&null!==f||"boolean"!=typeof m&&null!==m||"boolean"!=typeof y&&null!==y||"string"!=typeof C&&null!==C||"number"!=typeof S&&null!==S||!(null!=E&&E instanceof Array&&(0==E.length||null==E[0]||E[0]instanceof Array)||null===E)||"number"!=typeof A&&null!==A||"number"!=typeof _&&null!==_||"string"!=typeof P&&null!==P||"boolean"!=typeof w&&null!==w||"boolean"!=typeof L&&null!==L||"boolean"!=typeof T&&null!==T||"boolean"!=typeof b&&null!==b||!(null!=O&&O instanceof Big||null===O)||!(null!=I&&I instanceof Big||null===I)||"string"!=typeof D&&null!==D||!(null!=R&&R instanceof Object||null===R)||!(null!=x&&x instanceof Object||null===x)||"number"!=typeof M&&null!==M||"number"!=typeof F&&null!==F||"number"!=typeof N&&null!==N||"boolean"!=typeof U&&null!==U||"boolean"!=typeof H&&null!==H)if("string"!=typeof t&&null!==t||"string"!=typeof i&&null!==i||"string"!=typeof n&&null!==n||"string"!=typeof o&&null!==o||"string"!=typeof r&&null!==r||!(null!=l&&l instanceof Array&&(0==l.length||null==l[0]||"string"==typeof l[0])||null===l)||"number"!=typeof a&&null!==a||"number"!=typeof s&&null!==s||!(null!=h&&null!=h.constructor&&null!=h.constructor.__interfaces&&h.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===h)||!(null!=u&&null!=u.constructor&&null!=u.constructor.__interfaces&&u.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===u)||!(null!=d&&null!=d.constructor&&null!=d.constructor.__interfaces&&d.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===d)||"number"!=typeof c&&null!==c||"number"!=typeof p&&null!==p||"number"!=typeof g&&null!==g||"number"!=typeof v&&null!==v||"number"!=typeof f&&null!==f||"boolean"!=typeof m&&null!==m||"string"!=typeof y&&null!==y||!(null!=C&&C instanceof Array&&(0==C.length||null==C[0]||C[0]instanceof Array)||null===C)||"number"!=typeof S&&null!==S||"number"!=typeof E&&null!==E||"string"!=typeof A&&null!==A||"boolean"!=typeof _&&null!==_||"boolean"!=typeof P&&null!==P||"boolean"!=typeof w&&null!==w||"boolean"!=typeof L&&null!==L||!(null!=T&&T instanceof Big||null===T)||!(null!=b&&b instanceof Big||null===b)||"string"!=typeof O&&null!==O||!(null!=I&&I instanceof Object||null===I)||!(null!=D&&D instanceof Object||null===D)||void 0!==R||void 0!==x||void 0!==M||void 0!==F||void 0!==N||void 0!==U||void 0!==H)if("string"!=typeof t&&null!==t||"string"!=typeof i&&null!==i||"string"!=typeof n&&null!==n||"string"!=typeof o&&null!==o||!(null!=r&&r instanceof Array&&(0==r.length||null==r[0]||"string"==typeof r[0])||null===r)||"number"!=typeof l&&null!==l||"number"!=typeof a&&null!==a||!(null!=s&&null!=s.constructor&&null!=s.constructor.__interfaces&&s.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===s)||!(null!=h&&null!=h.constructor&&null!=h.constructor.__interfaces&&h.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===h)||!(null!=u&&null!=u.constructor&&null!=u.constructor.__interfaces&&u.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===u)||"number"!=typeof d&&null!==d||"number"!=typeof c&&null!==c||"number"!=typeof p&&null!==p||"number"!=typeof g&&null!==g||"number"!=typeof v&&null!==v||"boolean"!=typeof f&&null!==f||"string"!=typeof m&&null!==m||!(null!=y&&y instanceof Array&&(0==y.length||null==y[0]||y[0]instanceof Array)||null===y)||"boolean"!=typeof C&&null!==C||"number"!=typeof S&&null!==S||"string"!=typeof E&&null!==E||"boolean"!=typeof A&&null!==A||"boolean"!=typeof _&&null!==_||"boolean"!=typeof P&&null!==P||"boolean"!=typeof w&&null!==w||!(null!=L&&L instanceof Big||null===L)||!(null!=T&&T instanceof Big||null===T)||"string"!=typeof b&&null!==b||!(null!=O&&O instanceof Object||null===O)||void 0!==I||void 0!==D||void 0!==R||void 0!==x||void 0!==M||void 0!==F||void 0!==N||void 0!==U||void 0!==H)if("string"!=typeof t&&null!==t||"string"!=typeof i&&null!==i||"string"!=typeof n&&null!==n||"string"!=typeof o&&null!==o||!(null!=r&&r instanceof Array&&(0==r.length||null==r[0]||"string"==typeof r[0])||null===r)||"number"!=typeof l&&null!==l||"number"!=typeof a&&null!==a||!(null!=s&&null!=s.constructor&&null!=s.constructor.__interfaces&&s.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===s)||!(null!=h&&null!=h.constructor&&null!=h.constructor.__interfaces&&h.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===h)||!(null!=u&&null!=u.constructor&&null!=u.constructor.__interfaces&&u.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===u)||"number"!=typeof d&&null!==d||"number"!=typeof c&&null!==c||"number"!=typeof p&&null!==p||"number"!=typeof g&&null!==g||"number"!=typeof v&&null!==v||"boolean"!=typeof f&&null!==f||"string"!=typeof m&&null!==m||!(null!=y&&y instanceof Array&&(0==y.length||null==y[0]||y[0]instanceof Array)||null===y)||"number"!=typeof C&&null!==C||"number"!=typeof S&&null!==S||"string"!=typeof E&&null!==E||"boolean"!=typeof A&&null!==A||"boolean"!=typeof _&&null!==_||"boolean"!=typeof P&&null!==P||"boolean"!=typeof w&&null!==w||!(null!=L&&L instanceof Big||null===L)||!(null!=T&&T instanceof Big||null===T)||"string"!=typeof b&&null!==b||!(null!=O&&O instanceof Object||null===O)||void 0!==I||void 0!==D||void 0!==R||void 0!==x||void 0!==M||void 0!==F||void 0!==N||void 0!==U||void 0!==H)if("string"!=typeof t&&null!==t||"string"!=typeof i&&null!==i||"string"!=typeof n&&null!==n||"string"!=typeof o&&null!==o||!(null!=r&&r instanceof Array&&(0==r.length||null==r[0]||"string"==typeof r[0])||null===r)||"number"!=typeof l&&null!==l||"number"!=typeof a&&null!==a||!(null!=s&&null!=s.constructor&&null!=s.constructor.__interfaces&&s.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===s)||!(null!=h&&null!=h.constructor&&null!=h.constructor.__interfaces&&h.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===h)||!(null!=u&&null!=u.constructor&&null!=u.constructor.__interfaces&&u.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===u)||"number"!=typeof d&&null!==d||"number"!=typeof c&&null!==c||"number"!=typeof p&&null!==p||"number"!=typeof g&&null!==g||"number"!=typeof v&&null!==v||"boolean"!=typeof f&&null!==f||"string"!=typeof m&&null!==m||!(null!=y&&y instanceof Array&&(0==y.length||null==y[0]||y[0]instanceof Array)||null===y)||"boolean"!=typeof C&&null!==C||"number"!=typeof S&&null!==S||"string"!=typeof E&&null!==E||"boolean"!=typeof A&&null!==A||"boolean"!=typeof _&&null!==_||"boolean"!=typeof P&&null!==P||"boolean"!=typeof w&&null!==w||!(null!=L&&L instanceof Big||null===L)||!(null!=T&&T instanceof Big||null===T)||"string"!=typeof b&&null!==b||void 0!==O||void 0!==I||void 0!==D||void 0!==R||void 0!==x||void 0!==M||void 0!==F||void 0!==N||void 0!==U||void 0!==H)if("string"!=typeof t&&null!==t||"string"!=typeof i&&null!==i||"string"!=typeof n&&null!==n||"string"!=typeof o&&null!==o||!(null!=r&&r instanceof Array&&(0==r.length||null==r[0]||"string"==typeof r[0])||null===r)||"number"!=typeof l&&null!==l||"number"!=typeof a&&null!==a||!(null!=s&&null!=s.constructor&&null!=s.constructor.__interfaces&&s.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===s)||!(null!=h&&null!=h.constructor&&null!=h.constructor.__interfaces&&h.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===h)||!(null!=u&&null!=u.constructor&&null!=u.constructor.__interfaces&&u.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===u)||"number"!=typeof d&&null!==d||"number"!=typeof c&&null!==c||"number"!=typeof p&&null!==p||"number"!=typeof g&&null!==g||"number"!=typeof v&&null!==v||"boolean"!=typeof f&&null!==f||"string"!=typeof m&&null!==m||!(null!=y&&y instanceof Array&&(0==y.length||null==y[0]||y[0]instanceof Array)||null===y)||"boolean"!=typeof C&&null!==C||"string"!=typeof S&&null!==S||"boolean"!=typeof E&&null!==E||"boolean"!=typeof A&&null!==A||"boolean"!=typeof _&&null!==_||!(null!=P&&P instanceof Big||null===P)||!(null!=w&&w instanceof Big||null===w)||"string"!=typeof L&&null!==L||void 0!==T||void 0!==b||void 0!==O||void 0!==I||void 0!==D||void 0!==R||void 0!==x||void 0!==M||void 0!==F||void 0!==N||void 0!==U||void 0!==H)if("string"!=typeof t&&null!==t||!(null!=i&&null!=i.constructor&&null!=i.constructor.__interfaces&&i.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===i)||!(null!=n&&null!=n.constructor&&null!=n.constructor.__interfaces&&n.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===n)||"number"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||"number"!=typeof l&&null!==l||"number"!=typeof a&&null!==a||"boolean"!=typeof s&&null!==s||"string"!=typeof h&&null!==h||"number"!=typeof u&&null!==u||!(null!=d&&d instanceof Array&&(0==d.length||null==d[0]||d[0]instanceof Array)||null===d)||"number"!=typeof c&&null!==c||"number"!=typeof p&&null!==p||"string"!=typeof g&&null!==g||"number"!=typeof v&&null!==v||"number"!=typeof f&&null!==f||"number"!=typeof m&&null!==m||"boolean"!=typeof y&&null!==y||void 0!==C||void 0!==S||void 0!==E||void 0!==A||void 0!==_||void 0!==P||void 0!==w||void 0!==L||void 0!==T||void 0!==b||void 0!==O||void 0!==I||void 0!==D||void 0!==R||void 0!==x||void 0!==M||void 0!==F||void 0!==N||void 0!==U||void 0!==H)if("string"!=typeof t&&null!==t||"string"!=typeof i&&null!==i||"string"!=typeof n&&null!==n||!(null!=o&&null!=o.constructor&&null!=o.constructor.__interfaces&&o.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===o)||!(null!=r&&null!=r.constructor&&null!=r.constructor.__interfaces&&r.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===r)||!(null!=l&&null!=l.constructor&&null!=l.constructor.__interfaces&&l.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===l)||"number"!=typeof a&&null!==a||"number"!=typeof s&&null!==s||"number"!=typeof h&&null!==h||"number"!=typeof u&&null!==u||"boolean"!=typeof d&&null!==d||!(null!=c&&c instanceof Array&&(0==c.length||null==c[0]||c[0]instanceof Array)||null===c)||"string"!=typeof p&&null!==p||"boolean"!=typeof g&&null!==g||"boolean"!=typeof v&&null!==v||"boolean"!=typeof f&&null!==f||!(null!=m&&m instanceof Big||null===m)||!(null!=y&&y instanceof Big||null===y)||void 0!==C||void 0!==S||void 0!==E||void 0!==A||void 0!==_||void 0!==P||void 0!==w||void 0!==L||void 0!==T||void 0!==b||void 0!==O||void 0!==I||void 0!==D||void 0!==R||void 0!==x||void 0!==M||void 0!==F||void 0!==N||void 0!==U||void 0!==H)if("string"!=typeof t&&null!==t||!(null!=i&&null!=i.constructor&&null!=i.constructor.__interfaces&&i.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===i)||!(null!=n&&null!=n.constructor&&null!=n.constructor.__interfaces&&n.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===n)||"number"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||"number"!=typeof l&&null!==l||"number"!=typeof a&&null!==a||"boolean"!=typeof s&&null!==s||"string"!=typeof h&&null!==h||"number"!=typeof u&&null!==u||!(null!=d&&d instanceof Array&&(0==d.length||null==d[0]||d[0]instanceof Array)||null===d)||"boolean"!=typeof c&&null!==c||"number"!=typeof p&&null!==p||"string"!=typeof g&&null!==g||"number"!=typeof v&&null!==v||"boolean"!=typeof f&&null!==f||void 0!==m||void 0!==y||void 0!==C||void 0!==S||void 0!==E||void 0!==A||void 0!==_||void 0!==P||void 0!==w||void 0!==L||void 0!==T||void 0!==b||void 0!==O||void 0!==I||void 0!==D||void 0!==R||void 0!==x||void 0!==M||void 0!==F||void 0!==N||void 0!==U||void 0!==H)if("string"!=typeof t&&null!==t||"string"!=typeof i&&null!==i||"string"!=typeof n&&null!==n||!(null!=o&&null!=o.constructor&&null!=o.constructor.__interfaces&&o.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===o)||!(null!=r&&null!=r.constructor&&null!=r.constructor.__interfaces&&r.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===r)||!(null!=l&&null!=l.constructor&&null!=l.constructor.__interfaces&&l.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===l)||"number"!=typeof a&&null!==a||"number"!=typeof s&&null!==s||"number"!=typeof h&&null!==h||"number"!=typeof u&&null!==u||"boolean"!=typeof d&&null!==d||!(null!=c&&c instanceof Array&&(0==c.length||null==c[0]||c[0]instanceof Array)||null===c)||"string"!=typeof p&&null!==p||"boolean"!=typeof g&&null!==g||!(null!=v&&v instanceof Big||null===v)||!(null!=f&&f instanceof Big||null===f)||void 0!==m||void 0!==y||void 0!==C||void 0!==S||void 0!==E||void 0!==A||void 0!==_||void 0!==P||void 0!==w||void 0!==L||void 0!==T||void 0!==b||void 0!==O||void 0!==I||void 0!==D||void 0!==R||void 0!==x||void 0!==M||void 0!==F||void 0!==N||void 0!==U||void 0!==H){if("string"!=typeof t&&null!==t||"string"!=typeof i&&null!==i||"string"!=typeof n&&null!==n||!(null!=o&&null!=o.constructor&&null!=o.constructor.__interfaces&&o.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===o)||!(null!=r&&null!=r.constructor&&null!=r.constructor.__interfaces&&r.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===r)||"number"!=typeof l&&null!==l||"number"!=typeof a&&null!==a||"number"!=typeof s&&null!==s||"number"!=typeof h&&null!==h||"boolean"!=typeof u&&null!==u||"boolean"!=typeof d&&null!==d||!(null!=c&&c instanceof Array&&(0==c.length||null==c[0]||c[0]instanceof Array)||null===c)||"string"!=typeof p&&null!==p||"boolean"!=typeof g&&null!==g||!(null!=v&&v instanceof Big||null===v)||!(null!=f&&f instanceof Big||null===f)||void 0!==m||void 0!==y||void 0!==C||void 0!==S||void 0!==E||void 0!==A||void 0!==_||void 0!==P||void 0!==w||void 0!==L||void 0!==T||void 0!==b||void 0!==O||void 0!==I||void 0!==D||void 0!==R||void 0!==x||void 0!==M||void 0!==F||void 0!==N||void 0!==U||void 0!==H)throw new Error("invalid overload");Ii=arguments,Ii[4],Ii[5],Ii[6],Ii[7],Ii[8],Ii[9],Ii[10],Ii[11],Ii[12],Ii[13],Ii[14],Ii[15];void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.description&&(this.description=null),void 0===this.information&&(this.information=null),void 0===this.license&&(this.license=null),void 0===this.tags&&(this.tags=null),void 0===this.creationDate&&(this.creationDate=null),void 0===this.grade&&(this.grade=null),void 0===this.icon&&(this.icon=null),void 0===this.planIcon&&(this.planIcon=null),void 0===this.model&&(this.model=null),void 0===this.width&&(this.width=0),void 0===this.depth&&(this.depth=0),void 0===this.height&&(this.height=0),void 0===this.proportional&&(this.proportional=!1),void 0===this.elevation&&(this.elevation=0),void 0===this.dropOnTopElevation&&(this.dropOnTopElevation=0),void 0===this.movable&&(this.movable=!1),void 0===this.doorOrWindow&&(this.doorOrWindow=!1),void 0===this.staircaseCutOutShape&&(this.staircaseCutOutShape=null),void 0===this.modelRotation&&(this.modelRotation=null),void 0===this.modelFlags&&(this.modelFlags=0),void 0===this.modelSize&&(this.modelSize=null),void 0===this.creator&&(this.creator=null),void 0===this.color&&(this.color=null),void 0===this.iconYaw&&(this.iconYaw=0),void 0===this.iconPitch&&(this.iconPitch=0),void 0===this.iconScale&&(this.iconScale=0),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.resizable&&(this.resizable=!1),void 0===this.deformable&&(this.deformable=!1),void 0===this.texturable&&(this.texturable=!1),void 0===this.horizontallyRotatable&&(this.horizontallyRotatable=!1),void 0===this.price&&(this.price=null),void 0===this.valueAddedTaxPercentage&&(this.valueAddedTaxPercentage=null),void 0===this.currency&&(this.currency=null),void 0===this.properties&&(this.properties=null),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null)}else{Ii=arguments,Ii[4],Ii[5],Ii[6],Ii[7],Ii[8],Ii[9],Ii[10],Ii[11],Ii[12],Ii[13],Ii[14],Ii[15];void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.description&&(this.description=null),void 0===this.information&&(this.information=null),void 0===this.license&&(this.license=null),void 0===this.tags&&(this.tags=null),void 0===this.creationDate&&(this.creationDate=null),void 0===this.grade&&(this.grade=null),void 0===this.icon&&(this.icon=null),void 0===this.planIcon&&(this.planIcon=null),void 0===this.model&&(this.model=null),void 0===this.width&&(this.width=0),void 0===this.depth&&(this.depth=0),void 0===this.height&&(this.height=0),void 0===this.proportional&&(this.proportional=!1),void 0===this.elevation&&(this.elevation=0),void 0===this.dropOnTopElevation&&(this.dropOnTopElevation=0),void 0===this.movable&&(this.movable=!1),void 0===this.doorOrWindow&&(this.doorOrWindow=!1),void 0===this.staircaseCutOutShape&&(this.staircaseCutOutShape=null),void 0===this.modelRotation&&(this.modelRotation=null),void 0===this.modelFlags&&(this.modelFlags=0),void 0===this.modelSize&&(this.modelSize=null),void 0===this.creator&&(this.creator=null),void 0===this.color&&(this.color=null),void 0===this.iconYaw&&(this.iconYaw=0),void 0===this.iconPitch&&(this.iconPitch=0),void 0===this.iconScale&&(this.iconScale=0),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.resizable&&(this.resizable=!1),void 0===this.deformable&&(this.deformable=!1),void 0===this.texturable&&(this.texturable=!1),void 0===this.horizontallyRotatable&&(this.horizontallyRotatable=!1),void 0===this.price&&(this.price=null),void 0===this.valueAddedTaxPercentage&&(this.valueAddedTaxPercentage=null),void 0===this.currency&&(this.currency=null),void 0===this.properties&&(this.properties=null),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null),void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.description&&(this.description=null),void 0===this.information&&(this.information=null),void 0===this.license&&(this.license=null),void 0===this.tags&&(this.tags=null),void 0===this.creationDate&&(this.creationDate=null),void 0===this.grade&&(this.grade=null),void 0===this.icon&&(this.icon=null),void 0===this.planIcon&&(this.planIcon=null),void 0===this.model&&(this.model=null),void 0===this.width&&(this.width=0),void 0===this.depth&&(this.depth=0),void 0===this.height&&(this.height=0),void 0===this.proportional&&(this.proportional=!1),void 0===this.elevation&&(this.elevation=0),void 0===this.dropOnTopElevation&&(this.dropOnTopElevation=0),void 0===this.movable&&(this.movable=!1),void 0===this.doorOrWindow&&(this.doorOrWindow=!1),void 0===this.staircaseCutOutShape&&(this.staircaseCutOutShape=null),void 0===this.modelRotation&&(this.modelRotation=null),void 0===this.modelFlags&&(this.modelFlags=0),void 0===this.modelSize&&(this.modelSize=null),void 0===this.creator&&(this.creator=null),void 0===this.color&&(this.color=null),void 0===this.iconYaw&&(this.iconYaw=0),void 0===this.iconPitch&&(this.iconPitch=0),void 0===this.iconScale&&(this.iconScale=0),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.resizable&&(this.resizable=!1),void 0===this.deformable&&(this.deformable=!1),void 0===this.texturable&&(this.texturable=!1),void 0===this.horizontallyRotatable&&(this.horizontallyRotatable=!1),void 0===this.price&&(this.price=null),void 0===this.valueAddedTaxPercentage&&(this.valueAddedTaxPercentage=null),void 0===this.currency&&(this.currency=null),void 0===this.properties&&(this.properties=null),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null)}else{var G=(Ii=arguments)[0],k=Ii[1],V=Ii[2],W=Ii[3],B=Ii[4],j=Ii[5],Y=Ii[6],z=Ii[7],$=Ii[8],X=Ii[9],K=Ii[10],q=(rt=Ii[11],Ii[12]),Z=Ii[13],Q=Ii[14],J=Ii[15],ee=Date.now(),te=rt?PieceOfFurniture.SHOW_BACK_FACE:0,ie=-Math.PI/16;void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.description&&(this.description=null),void 0===this.information&&(this.information=null),void 0===this.license&&(this.license=null),void 0===this.tags&&(this.tags=null),void 0===this.creationDate&&(this.creationDate=null),void 0===this.grade&&(this.grade=null),void 0===this.icon&&(this.icon=null),void 0===this.planIcon&&(this.planIcon=null),void 0===this.model&&(this.model=null),void 0===this.width&&(this.width=0),void 0===this.depth&&(this.depth=0),void 0===this.height&&(this.height=0),void 0===this.proportional&&(this.proportional=!1),void 0===this.elevation&&(this.elevation=0),void 0===this.dropOnTopElevation&&(this.dropOnTopElevation=0),void 0===this.movable&&(this.movable=!1),void 0===this.doorOrWindow&&(this.doorOrWindow=!1),void 0===this.staircaseCutOutShape&&(this.staircaseCutOutShape=null),void 0===this.modelRotation&&(this.modelRotation=null),void 0===this.modelFlags&&(this.modelFlags=0),void 0===this.modelSize&&(this.modelSize=null),void 0===this.creator&&(this.creator=null),void 0===this.color&&(this.color=null),void 0===this.iconYaw&&(this.iconYaw=0),void 0===this.iconPitch&&(this.iconPitch=0),void 0===this.iconScale&&(this.iconScale=0),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.resizable&&(this.resizable=!1),void 0===this.deformable&&(this.deformable=!1),void 0===this.texturable&&(this.texturable=!1),void 0===this.horizontallyRotatable&&(this.horizontallyRotatable=!1),void 0===this.price&&(this.price=null),void 0===this.valueAddedTaxPercentage&&(this.valueAddedTaxPercentage=null),void 0===this.currency&&(this.currency=null),void 0===this.properties&&(this.properties=null),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null),this.id=null,this.name=G,this.description=null,this.information=null,this.license=null,this.tags=[],this.creationDate=ee,this.grade=null,this.icon=k,this.planIcon=null,this.model=V,this.width=W,this.depth=B,this.height=j,this.elevation=Y,this.dropOnTopElevation=1,this.movable=z,this.doorOrWindow=!1,this.color=X,this.staircaseCutOutShape=$,this.creator=Z,this.horizontallyRotatable=!0,this.price=null,this.valueAddedTaxPercentage=null,this.currency=null,this.properties={},this.modelRotation=null==K?PieceOfFurniture.IDENTITY_ROTATION_$LI$():e.deepClone(K),this.modelFlags=te,this.modelSize=q,this.resizable=!0,this.deformable=!0,this.texturable=!0,this.iconYaw=Q,this.iconPitch=ie,this.iconScale=1,this.proportional=J,this.modifiable=!0,void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.description&&(this.description=null),void 0===this.information&&(this.information=null),void 0===this.license&&(this.license=null),void 0===this.tags&&(this.tags=null),void 0===this.creationDate&&(this.creationDate=null),void 0===this.grade&&(this.grade=null),void 0===this.icon&&(this.icon=null),void 0===this.planIcon&&(this.planIcon=null),void 0===this.model&&(this.model=null),void 0===this.width&&(this.width=0),void 0===this.depth&&(this.depth=0),void 0===this.height&&(this.height=0),void 0===this.proportional&&(this.proportional=!1),void 0===this.elevation&&(this.elevation=0),void 0===this.dropOnTopElevation&&(this.dropOnTopElevation=0),void 0===this.movable&&(this.movable=!1),void 0===this.doorOrWindow&&(this.doorOrWindow=!1),void 0===this.staircaseCutOutShape&&(this.staircaseCutOutShape=null),void 0===this.modelRotation&&(this.modelRotation=null),void 0===this.modelFlags&&(this.modelFlags=0),void 0===this.modelSize&&(this.modelSize=null),void 0===this.creator&&(this.creator=null),void 0===this.color&&(this.color=null),void 0===this.iconYaw&&(this.iconYaw=0),void 0===this.iconPitch&&(this.iconPitch=0),void 0===this.iconScale&&(this.iconScale=0),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.resizable&&(this.resizable=!1),void 0===this.deformable&&(this.deformable=!1),void 0===this.texturable&&(this.texturable=!1),void 0===this.horizontallyRotatable&&(this.horizontallyRotatable=!1),void 0===this.price&&(this.price=null),void 0===this.valueAddedTaxPercentage&&(this.valueAddedTaxPercentage=null),void 0===this.currency&&(this.currency=null),void 0===this.properties&&(this.properties=null),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null)}else{Ii=arguments,Ii[4],Ii[5],Ii[6],Ii[7],Ii[8],Ii[9],Ii[10],Ii[11],Ii[12],Ii[13],Ii[14],Ii[15],Ii[16],Ii[17];void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.description&&(this.description=null),void 0===this.information&&(this.information=null),void 0===this.license&&(this.license=null),void 0===this.tags&&(this.tags=null),void 0===this.creationDate&&(this.creationDate=null),void 0===this.grade&&(this.grade=null),void 0===this.icon&&(this.icon=null),void 0===this.planIcon&&(this.planIcon=null),void 0===this.model&&(this.model=null),void 0===this.width&&(this.width=0),void 0===this.depth&&(this.depth=0),void 0===this.height&&(this.height=0),void 0===this.proportional&&(this.proportional=!1),void 0===this.elevation&&(this.elevation=0),void 0===this.dropOnTopElevation&&(this.dropOnTopElevation=0),void 0===this.movable&&(this.movable=!1),void 0===this.doorOrWindow&&(this.doorOrWindow=!1),void 0===this.staircaseCutOutShape&&(this.staircaseCutOutShape=null),void 0===this.modelRotation&&(this.modelRotation=null),void 0===this.modelFlags&&(this.modelFlags=0),void 0===this.modelSize&&(this.modelSize=null),void 0===this.creator&&(this.creator=null),void 0===this.color&&(this.color=null),void 0===this.iconYaw&&(this.iconYaw=0),void 0===this.iconPitch&&(this.iconPitch=0),void 0===this.iconScale&&(this.iconScale=0),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.resizable&&(this.resizable=!1),void 0===this.deformable&&(this.deformable=!1),void 0===this.texturable&&(this.texturable=!1),void 0===this.horizontallyRotatable&&(this.horizontallyRotatable=!1),void 0===this.price&&(this.price=null),void 0===this.valueAddedTaxPercentage&&(this.valueAddedTaxPercentage=null),void 0===this.currency&&(this.currency=null),void 0===this.properties&&(this.properties=null),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null)}else{var ne=(Ii=arguments)[0],oe=Ii[1],re=Ii[2],le=Ii[3],ae=Ii[4],se=Ii[5],he=Ii[6],ue=Ii[7],de=Ii[8],ce=Ii[9],pe=Ii[10],ge=Ii[11],ve=Ii[12],fe=Ii[13],me=Ii[14],ye=Ii[15],Ce=Ii[16],Se=Ii[17],Ee=Date.now();void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.description&&(this.description=null),void 0===this.information&&(this.information=null),void 0===this.license&&(this.license=null),void 0===this.tags&&(this.tags=null),void 0===this.creationDate&&(this.creationDate=null),void 0===this.grade&&(this.grade=null),void 0===this.icon&&(this.icon=null),void 0===this.planIcon&&(this.planIcon=null),void 0===this.model&&(this.model=null),void 0===this.width&&(this.width=0),void 0===this.depth&&(this.depth=0),void 0===this.height&&(this.height=0),void 0===this.proportional&&(this.proportional=!1),void 0===this.elevation&&(this.elevation=0),void 0===this.dropOnTopElevation&&(this.dropOnTopElevation=0),void 0===this.movable&&(this.movable=!1),void 0===this.doorOrWindow&&(this.doorOrWindow=!1),void 0===this.staircaseCutOutShape&&(this.staircaseCutOutShape=null),void 0===this.modelRotation&&(this.modelRotation=null),void 0===this.modelFlags&&(this.modelFlags=0),void 0===this.modelSize&&(this.modelSize=null),void 0===this.creator&&(this.creator=null),void 0===this.color&&(this.color=null),void 0===this.iconYaw&&(this.iconYaw=0),void 0===this.iconPitch&&(this.iconPitch=0),void 0===this.iconScale&&(this.iconScale=0),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.resizable&&(this.resizable=!1),void 0===this.deformable&&(this.deformable=!1),void 0===this.texturable&&(this.texturable=!1),void 0===this.horizontallyRotatable&&(this.horizontallyRotatable=!1),void 0===this.price&&(this.price=null),void 0===this.valueAddedTaxPercentage&&(this.valueAddedTaxPercentage=null),void 0===this.currency&&(this.currency=null),void 0===this.properties&&(this.properties=null),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null),this.id=null,this.name=ne,this.description=null,this.information=null,this.license=null,this.tags=[],this.creationDate=Ee,this.grade=null,this.icon=oe,this.planIcon=null,this.model=re,this.width=le,this.depth=ae,this.height=se,this.elevation=he,this.dropOnTopElevation=1,this.movable=ue,this.doorOrWindow=!1,this.color=ce,this.staircaseCutOutShape=de,this.creator=fe,this.horizontallyRotatable=!0,this.price=null,this.valueAddedTaxPercentage=null,this.currency=null,this.properties={},this.modelRotation=null==pe?PieceOfFurniture.IDENTITY_ROTATION_$LI$():e.deepClone(pe),this.modelFlags=ge,this.modelSize=ve,this.resizable=!0,this.deformable=!0,this.texturable=!0,this.iconYaw=me,this.iconPitch=ye,this.iconScale=Ce,this.proportional=Se,this.modifiable=!0,void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.description&&(this.description=null),void 0===this.information&&(this.information=null),void 0===this.license&&(this.license=null),void 0===this.tags&&(this.tags=null),void 0===this.creationDate&&(this.creationDate=null),void 0===this.grade&&(this.grade=null),void 0===this.icon&&(this.icon=null),void 0===this.planIcon&&(this.planIcon=null),void 0===this.model&&(this.model=null),void 0===this.width&&(this.width=0),void 0===this.depth&&(this.depth=0),void 0===this.height&&(this.height=0),void 0===this.proportional&&(this.proportional=!1),void 0===this.elevation&&(this.elevation=0),void 0===this.dropOnTopElevation&&(this.dropOnTopElevation=0),void 0===this.movable&&(this.movable=!1),void 0===this.doorOrWindow&&(this.doorOrWindow=!1),void 0===this.staircaseCutOutShape&&(this.staircaseCutOutShape=null),void 0===this.modelRotation&&(this.modelRotation=null),void 0===this.modelFlags&&(this.modelFlags=0),void 0===this.modelSize&&(this.modelSize=null),void 0===this.creator&&(this.creator=null),void 0===this.color&&(this.color=null),void 0===this.iconYaw&&(this.iconYaw=0),void 0===this.iconPitch&&(this.iconPitch=0),void 0===this.iconScale&&(this.iconScale=0),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.resizable&&(this.resizable=!1),void 0===this.deformable&&(this.deformable=!1),void 0===this.texturable&&(this.texturable=!1),void 0===this.horizontallyRotatable&&(this.horizontallyRotatable=!1),void 0===this.price&&(this.price=null),void 0===this.valueAddedTaxPercentage&&(this.valueAddedTaxPercentage=null),void 0===this.currency&&(this.currency=null),void 0===this.properties&&(this.properties=null),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null)}else{var Ae=(Ii=arguments)[4],_e=Ii[5],Pe=Ii[6],we=Ii[7],Le=Ii[8],Te=Ii[9],be=Ii[10],Oe=Ii[11],Ie=Ii[12],De=Ii[13],Re=Ii[14],xe=Ii[15],Me=Ii[16],Fe=Ii[17],Ne=(rt=Ii[18],Ii[19]),Ue=Ii[20],He=Ii[21],Ge=Ii[22],ke=Ii[23],Ve=Ii[24],We=Ii[25],Be=rt?PieceOfFurniture.SHOW_BACK_FACE:0,je=Math.PI/8;void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.description&&(this.description=null),void 0===this.information&&(this.information=null),void 0===this.license&&(this.license=null),void 0===this.tags&&(this.tags=null),void 0===this.creationDate&&(this.creationDate=null),void 0===this.grade&&(this.grade=null),void 0===this.icon&&(this.icon=null),void 0===this.planIcon&&(this.planIcon=null),void 0===this.model&&(this.model=null),void 0===this.width&&(this.width=0),void 0===this.depth&&(this.depth=0),void 0===this.height&&(this.height=0),void 0===this.proportional&&(this.proportional=!1),void 0===this.elevation&&(this.elevation=0),void 0===this.dropOnTopElevation&&(this.dropOnTopElevation=0),void 0===this.movable&&(this.movable=!1),void 0===this.doorOrWindow&&(this.doorOrWindow=!1),void 0===this.staircaseCutOutShape&&(this.staircaseCutOutShape=null),void 0===this.modelRotation&&(this.modelRotation=null),void 0===this.modelFlags&&(this.modelFlags=0),void 0===this.modelSize&&(this.modelSize=null),void 0===this.creator&&(this.creator=null),void 0===this.color&&(this.color=null),void 0===this.iconYaw&&(this.iconYaw=0),void 0===this.iconPitch&&(this.iconPitch=0),void 0===this.iconScale&&(this.iconScale=0),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.resizable&&(this.resizable=!1),void 0===this.deformable&&(this.deformable=!1),void 0===this.texturable&&(this.texturable=!1),void 0===this.horizontallyRotatable&&(this.horizontallyRotatable=!1),void 0===this.price&&(this.price=null),void 0===this.valueAddedTaxPercentage&&(this.valueAddedTaxPercentage=null),void 0===this.currency&&(this.currency=null),void 0===this.properties&&(this.properties=null),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null),this.id=t,this.name=i,this.description=n,this.information=o,this.license=null,this.tags=Ae,this.creationDate=_e,this.grade=Pe,this.icon=we,this.planIcon=Le,this.model=Te,this.width=be,this.depth=Oe,this.height=Ie,this.elevation=De,this.dropOnTopElevation=Re,this.movable=xe,this.doorOrWindow=!1,this.color=null,this.staircaseCutOutShape=Me,this.creator=Ne,this.horizontallyRotatable=!0,this.price=ke,this.valueAddedTaxPercentage=Ve,this.currency=We,this.properties={},this.modelRotation=null==Fe?PieceOfFurniture.IDENTITY_ROTATION_$LI$():e.deepClone(Fe),this.modelFlags=Be,this.modelSize=null,this.resizable=Ue,this.deformable=He,this.texturable=Ge,this.iconYaw=je,this.iconPitch=0,this.iconScale=1,this.proportional=!0,this.modifiable=!1,void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.description&&(this.description=null),void 0===this.information&&(this.information=null),void 0===this.license&&(this.license=null),void 0===this.tags&&(this.tags=null),void 0===this.creationDate&&(this.creationDate=null),void 0===this.grade&&(this.grade=null),void 0===this.icon&&(this.icon=null),void 0===this.planIcon&&(this.planIcon=null),void 0===this.model&&(this.model=null),void 0===this.width&&(this.width=0),void 0===this.depth&&(this.depth=0),void 0===this.height&&(this.height=0),void 0===this.proportional&&(this.proportional=!1),void 0===this.elevation&&(this.elevation=0),void 0===this.dropOnTopElevation&&(this.dropOnTopElevation=0),void 0===this.movable&&(this.movable=!1),void 0===this.doorOrWindow&&(this.doorOrWindow=!1),void 0===this.staircaseCutOutShape&&(this.staircaseCutOutShape=null),void 0===this.modelRotation&&(this.modelRotation=null),void 0===this.modelFlags&&(this.modelFlags=0),void 0===this.modelSize&&(this.modelSize=null),void 0===this.creator&&(this.creator=null),void 0===this.color&&(this.color=null),void 0===this.iconYaw&&(this.iconYaw=0),void 0===this.iconPitch&&(this.iconPitch=0),void 0===this.iconScale&&(this.iconScale=0),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.resizable&&(this.resizable=!1),void 0===this.deformable&&(this.deformable=!1),void 0===this.texturable&&(this.texturable=!1),void 0===this.horizontallyRotatable&&(this.horizontallyRotatable=!1),void 0===this.price&&(this.price=null),void 0===this.valueAddedTaxPercentage&&(this.valueAddedTaxPercentage=null),void 0===this.currency&&(this.currency=null),void 0===this.properties&&(this.properties=null),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null),void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.description&&(this.description=null),void 0===this.information&&(this.information=null),void 0===this.license&&(this.license=null),void 0===this.tags&&(this.tags=null),void 0===this.creationDate&&(this.creationDate=null),void 0===this.grade&&(this.grade=null),void 0===this.icon&&(this.icon=null),void 0===this.planIcon&&(this.planIcon=null),void 0===this.model&&(this.model=null),void 0===this.width&&(this.width=0),void 0===this.depth&&(this.depth=0),void 0===this.height&&(this.height=0),void 0===this.proportional&&(this.proportional=!1),void 0===this.elevation&&(this.elevation=0),void 0===this.dropOnTopElevation&&(this.dropOnTopElevation=0),void 0===this.movable&&(this.movable=!1),void 0===this.doorOrWindow&&(this.doorOrWindow=!1),void 0===this.staircaseCutOutShape&&(this.staircaseCutOutShape=null),void 0===this.modelRotation&&(this.modelRotation=null),void 0===this.modelFlags&&(this.modelFlags=0),void 0===this.modelSize&&(this.modelSize=null),void 0===this.creator&&(this.creator=null),void 0===this.color&&(this.color=null),void 0===this.iconYaw&&(this.iconYaw=0),void 0===this.iconPitch&&(this.iconPitch=0),void 0===this.iconScale&&(this.iconScale=0),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.resizable&&(this.resizable=!1),void 0===this.deformable&&(this.deformable=!1),void 0===this.texturable&&(this.texturable=!1),void 0===this.horizontallyRotatable&&(this.horizontallyRotatable=!1),void 0===this.price&&(this.price=null),void 0===this.valueAddedTaxPercentage&&(this.valueAddedTaxPercentage=null),void 0===this.currency&&(this.currency=null),void 0===this.properties&&(this.properties=null),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null),void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.description&&(this.description=null),void 0===this.information&&(this.information=null),void 0===this.license&&(this.license=null),void 0===this.tags&&(this.tags=null),void 0===this.creationDate&&(this.creationDate=null),void 0===this.grade&&(this.grade=null),void 0===this.icon&&(this.icon=null),void 0===this.planIcon&&(this.planIcon=null),void 0===this.model&&(this.model=null),void 0===this.width&&(this.width=0),void 0===this.depth&&(this.depth=0),void 0===this.height&&(this.height=0),void 0===this.proportional&&(this.proportional=!1),void 0===this.elevation&&(this.elevation=0),void 0===this.dropOnTopElevation&&(this.dropOnTopElevation=0),void 0===this.movable&&(this.movable=!1),void 0===this.doorOrWindow&&(this.doorOrWindow=!1),void 0===this.staircaseCutOutShape&&(this.staircaseCutOutShape=null),void 0===this.modelRotation&&(this.modelRotation=null),void 0===this.modelFlags&&(this.modelFlags=0),void 0===this.modelSize&&(this.modelSize=null),void 0===this.creator&&(this.creator=null),void 0===this.color&&(this.color=null),void 0===this.iconYaw&&(this.iconYaw=0),void 0===this.iconPitch&&(this.iconPitch=0),void 0===this.iconScale&&(this.iconScale=0),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.resizable&&(this.resizable=!1),void 0===this.deformable&&(this.deformable=!1),void 0===this.texturable&&(this.texturable=!1),void 0===this.horizontallyRotatable&&(this.horizontallyRotatable=!1),void 0===this.price&&(this.price=null),void 0===this.valueAddedTaxPercentage&&(this.valueAddedTaxPercentage=null),void 0===this.currency&&(this.currency=null),void 0===this.properties&&(this.properties=null),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null),void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.description&&(this.description=null),void 0===this.information&&(this.information=null),void 0===this.license&&(this.license=null),void 0===this.tags&&(this.tags=null),void 0===this.creationDate&&(this.creationDate=null),void 0===this.grade&&(this.grade=null),void 0===this.icon&&(this.icon=null),void 0===this.planIcon&&(this.planIcon=null),void 0===this.model&&(this.model=null),void 0===this.width&&(this.width=0),void 0===this.depth&&(this.depth=0),void 0===this.height&&(this.height=0),void 0===this.proportional&&(this.proportional=!1),void 0===this.elevation&&(this.elevation=0),void 0===this.dropOnTopElevation&&(this.dropOnTopElevation=0),void 0===this.movable&&(this.movable=!1),void 0===this.doorOrWindow&&(this.doorOrWindow=!1),void 0===this.staircaseCutOutShape&&(this.staircaseCutOutShape=null),void 0===this.modelRotation&&(this.modelRotation=null),void 0===this.modelFlags&&(this.modelFlags=0),void 0===this.modelSize&&(this.modelSize=null),void 0===this.creator&&(this.creator=null),void 0===this.color&&(this.color=null),void 0===this.iconYaw&&(this.iconYaw=0),void 0===this.iconPitch&&(this.iconPitch=0),void 0===this.iconScale&&(this.iconScale=0),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.resizable&&(this.resizable=!1),void 0===this.deformable&&(this.deformable=!1),void 0===this.texturable&&(this.texturable=!1),void 0===this.horizontallyRotatable&&(this.horizontallyRotatable=!1),void 0===this.price&&(this.price=null),void 0===this.valueAddedTaxPercentage&&(this.valueAddedTaxPercentage=null),void 0===this.currency&&(this.currency=null),void 0===this.properties&&(this.properties=null),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null),void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.description&&(this.description=null),void 0===this.information&&(this.information=null),void 0===this.license&&(this.license=null),void 0===this.tags&&(this.tags=null),void 0===this.creationDate&&(this.creationDate=null),void 0===this.grade&&(this.grade=null),void 0===this.icon&&(this.icon=null),void 0===this.planIcon&&(this.planIcon=null),void 0===this.model&&(this.model=null),void 0===this.width&&(this.width=0),void 0===this.depth&&(this.depth=0),void 0===this.height&&(this.height=0),void 0===this.proportional&&(this.proportional=!1),void 0===this.elevation&&(this.elevation=0),void 0===this.dropOnTopElevation&&(this.dropOnTopElevation=0),void 0===this.movable&&(this.movable=!1),void 0===this.doorOrWindow&&(this.doorOrWindow=!1),void 0===this.staircaseCutOutShape&&(this.staircaseCutOutShape=null),void 0===this.modelRotation&&(this.modelRotation=null),void 0===this.modelFlags&&(this.modelFlags=0),void 0===this.modelSize&&(this.modelSize=null),void 0===this.creator&&(this.creator=null),void 0===this.color&&(this.color=null),void 0===this.iconYaw&&(this.iconYaw=0),void 0===this.iconPitch&&(this.iconPitch=0),void 0===this.iconScale&&(this.iconScale=0),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.resizable&&(this.resizable=!1),void 0===this.deformable&&(this.deformable=!1),void 0===this.texturable&&(this.texturable=!1),void 0===this.horizontallyRotatable&&(this.horizontallyRotatable=!1),void 0===this.price&&(this.price=null),void 0===this.valueAddedTaxPercentage&&(this.valueAddedTaxPercentage=null),void 0===this.currency&&(this.currency=null),void 0===this.properties&&(this.properties=null),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null)}else{var Ye=(Ii=arguments)[4],ze=Ii[5],$e=Ii[6],Xe=Ii[7],Ke=Ii[8],qe=Ii[9],Ze=Ii[10],Qe=Ii[11],Je=Ii[12],et=Ii[13],tt=Ii[14],it=Ii[15],nt=Ii[16],ot=Ii[17],rt=Ii[18],lt=Ii[19],at=Ii[20],st=Ii[21],ht=Ii[22],ut=Ii[23],dt=Ii[24],ct=Ii[25],pt=Ii[26],gt=Ii[27],vt=rt?PieceOfFurniture.SHOW_BACK_FACE:0,ft=Math.PI/8;void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.description&&(this.description=null),void 0===this.information&&(this.information=null),void 0===this.license&&(this.license=null),void 0===this.tags&&(this.tags=null),void 0===this.creationDate&&(this.creationDate=null),void 0===this.grade&&(this.grade=null),void 0===this.icon&&(this.icon=null),void 0===this.planIcon&&(this.planIcon=null),void 0===this.model&&(this.model=null),void 0===this.width&&(this.width=0),void 0===this.depth&&(this.depth=0),void 0===this.height&&(this.height=0),void 0===this.proportional&&(this.proportional=!1),void 0===this.elevation&&(this.elevation=0),void 0===this.dropOnTopElevation&&(this.dropOnTopElevation=0),void 0===this.movable&&(this.movable=!1),void 0===this.doorOrWindow&&(this.doorOrWindow=!1),void 0===this.staircaseCutOutShape&&(this.staircaseCutOutShape=null),void 0===this.modelRotation&&(this.modelRotation=null),void 0===this.modelFlags&&(this.modelFlags=0),void 0===this.modelSize&&(this.modelSize=null),void 0===this.creator&&(this.creator=null),void 0===this.color&&(this.color=null),void 0===this.iconYaw&&(this.iconYaw=0),void 0===this.iconPitch&&(this.iconPitch=0),void 0===this.iconScale&&(this.iconScale=0),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.resizable&&(this.resizable=!1),void 0===this.deformable&&(this.deformable=!1),void 0===this.texturable&&(this.texturable=!1),void 0===this.horizontallyRotatable&&(this.horizontallyRotatable=!1),void 0===this.price&&(this.price=null),void 0===this.valueAddedTaxPercentage&&(this.valueAddedTaxPercentage=null),void 0===this.currency&&(this.currency=null),void 0===this.properties&&(this.properties=null),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null),this.id=t,this.name=i,this.description=n,this.information=o,this.license=null,this.tags=Ye,this.creationDate=ze,this.grade=$e,this.icon=Xe,this.planIcon=Ke,this.model=qe,this.width=Ze,this.depth=Qe,this.height=Je,this.elevation=et,this.dropOnTopElevation=tt,this.movable=it,this.doorOrWindow=!1,this.color=null,this.staircaseCutOutShape=nt,this.creator=at,this.horizontallyRotatable=dt,this.price=ct,this.valueAddedTaxPercentage=pt,this.currency=gt,this.properties={},this.modelRotation=null==ot?PieceOfFurniture.IDENTITY_ROTATION_$LI$():e.deepClone(ot),this.modelFlags=vt,this.modelSize=lt,this.resizable=st,this.deformable=ht,this.texturable=ut,this.iconYaw=ft,this.iconPitch=0,this.iconScale=1,this.proportional=!0,this.modifiable=!1,void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.description&&(this.description=null),void 0===this.information&&(this.information=null),void 0===this.license&&(this.license=null),void 0===this.tags&&(this.tags=null),void 0===this.creationDate&&(this.creationDate=null),void 0===this.grade&&(this.grade=null),void 0===this.icon&&(this.icon=null),void 0===this.planIcon&&(this.planIcon=null),void 0===this.model&&(this.model=null),void 0===this.width&&(this.width=0),void 0===this.depth&&(this.depth=0),void 0===this.height&&(this.height=0),void 0===this.proportional&&(this.proportional=!1),void 0===this.elevation&&(this.elevation=0),void 0===this.dropOnTopElevation&&(this.dropOnTopElevation=0),void 0===this.movable&&(this.movable=!1),void 0===this.doorOrWindow&&(this.doorOrWindow=!1),void 0===this.staircaseCutOutShape&&(this.staircaseCutOutShape=null),void 0===this.modelRotation&&(this.modelRotation=null),void 0===this.modelFlags&&(this.modelFlags=0),void 0===this.modelSize&&(this.modelSize=null),void 0===this.creator&&(this.creator=null),void 0===this.color&&(this.color=null),void 0===this.iconYaw&&(this.iconYaw=0),void 0===this.iconPitch&&(this.iconPitch=0),void 0===this.iconScale&&(this.iconScale=0),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.resizable&&(this.resizable=!1),void 0===this.deformable&&(this.deformable=!1),void 0===this.texturable&&(this.texturable=!1),void 0===this.horizontallyRotatable&&(this.horizontallyRotatable=!1),void 0===this.price&&(this.price=null),void 0===this.valueAddedTaxPercentage&&(this.valueAddedTaxPercentage=null),void 0===this.currency&&(this.currency=null),void 0===this.properties&&(this.properties=null),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null),void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.description&&(this.description=null),void 0===this.information&&(this.information=null),void 0===this.license&&(this.license=null),void 0===this.tags&&(this.tags=null),void 0===this.creationDate&&(this.creationDate=null),void 0===this.grade&&(this.grade=null),void 0===this.icon&&(this.icon=null),void 0===this.planIcon&&(this.planIcon=null),void 0===this.model&&(this.model=null),void 0===this.width&&(this.width=0),void 0===this.depth&&(this.depth=0),void 0===this.height&&(this.height=0),void 0===this.proportional&&(this.proportional=!1),void 0===this.elevation&&(this.elevation=0),void 0===this.dropOnTopElevation&&(this.dropOnTopElevation=0),void 0===this.movable&&(this.movable=!1),void 0===this.doorOrWindow&&(this.doorOrWindow=!1),void 0===this.staircaseCutOutShape&&(this.staircaseCutOutShape=null),void 0===this.modelRotation&&(this.modelRotation=null),void 0===this.modelFlags&&(this.modelFlags=0),void 0===this.modelSize&&(this.modelSize=null),void 0===this.creator&&(this.creator=null),void 0===this.color&&(this.color=null),void 0===this.iconYaw&&(this.iconYaw=0),void 0===this.iconPitch&&(this.iconPitch=0),void 0===this.iconScale&&(this.iconScale=0),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.resizable&&(this.resizable=!1),void 0===this.deformable&&(this.deformable=!1),void 0===this.texturable&&(this.texturable=!1),void 0===this.horizontallyRotatable&&(this.horizontallyRotatable=!1),void 0===this.price&&(this.price=null),void 0===this.valueAddedTaxPercentage&&(this.valueAddedTaxPercentage=null),void 0===this.currency&&(this.currency=null),void 0===this.properties&&(this.properties=null),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null),void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.description&&(this.description=null),void 0===this.information&&(this.information=null),void 0===this.license&&(this.license=null),void 0===this.tags&&(this.tags=null),void 0===this.creationDate&&(this.creationDate=null),void 0===this.grade&&(this.grade=null),void 0===this.icon&&(this.icon=null),void 0===this.planIcon&&(this.planIcon=null),void 0===this.model&&(this.model=null),void 0===this.width&&(this.width=0),void 0===this.depth&&(this.depth=0),void 0===this.height&&(this.height=0),void 0===this.proportional&&(this.proportional=!1),void 0===this.elevation&&(this.elevation=0),void 0===this.dropOnTopElevation&&(this.dropOnTopElevation=0),void 0===this.movable&&(this.movable=!1),void 0===this.doorOrWindow&&(this.doorOrWindow=!1),void 0===this.staircaseCutOutShape&&(this.staircaseCutOutShape=null),void 0===this.modelRotation&&(this.modelRotation=null),void 0===this.modelFlags&&(this.modelFlags=0),void 0===this.modelSize&&(this.modelSize=null),void 0===this.creator&&(this.creator=null),void 0===this.color&&(this.color=null),void 0===this.iconYaw&&(this.iconYaw=0),void 0===this.iconPitch&&(this.iconPitch=0),void 0===this.iconScale&&(this.iconScale=0),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.resizable&&(this.resizable=!1),void 0===this.deformable&&(this.deformable=!1),void 0===this.texturable&&(this.texturable=!1),void 0===this.horizontallyRotatable&&(this.horizontallyRotatable=!1),void 0===this.price&&(this.price=null),void 0===this.valueAddedTaxPercentage&&(this.valueAddedTaxPercentage=null),void 0===this.currency&&(this.currency=null),void 0===this.properties&&(this.properties=null),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null),void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.description&&(this.description=null),void 0===this.information&&(this.information=null),void 0===this.license&&(this.license=null),void 0===this.tags&&(this.tags=null),void 0===this.creationDate&&(this.creationDate=null),void 0===this.grade&&(this.grade=null),void 0===this.icon&&(this.icon=null),void 0===this.planIcon&&(this.planIcon=null),void 0===this.model&&(this.model=null),void 0===this.width&&(this.width=0),void 0===this.depth&&(this.depth=0),void 0===this.height&&(this.height=0),void 0===this.proportional&&(this.proportional=!1),void 0===this.elevation&&(this.elevation=0),void 0===this.dropOnTopElevation&&(this.dropOnTopElevation=0),void 0===this.movable&&(this.movable=!1),void 0===this.doorOrWindow&&(this.doorOrWindow=!1),void 0===this.staircaseCutOutShape&&(this.staircaseCutOutShape=null),void 0===this.modelRotation&&(this.modelRotation=null),void 0===this.modelFlags&&(this.modelFlags=0),void 0===this.modelSize&&(this.modelSize=null),void 0===this.creator&&(this.creator=null),void 0===this.color&&(this.color=null),void 0===this.iconYaw&&(this.iconYaw=0),void 0===this.iconPitch&&(this.iconPitch=0),void 0===this.iconScale&&(this.iconScale=0),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.resizable&&(this.resizable=!1),void 0===this.deformable&&(this.deformable=!1),void 0===this.texturable&&(this.texturable=!1),void 0===this.horizontallyRotatable&&(this.horizontallyRotatable=!1),void 0===this.price&&(this.price=null),void 0===this.valueAddedTaxPercentage&&(this.valueAddedTaxPercentage=null),void 0===this.currency&&(this.currency=null),void 0===this.properties&&(this.properties=null),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null)}else{var mt=(Ii=arguments)[4],yt=Ii[5],Ct=Ii[6],St=Ii[7],Et=Ii[8],At=Ii[9],_t=Ii[10],Pt=Ii[11],wt=Ii[12],Lt=Ii[13],Tt=Ii[14],bt=Ii[15],Ot=Ii[16],It=Ii[17],Dt=Ii[18],Rt=Ii[19],xt=Ii[20],Mt=Ii[21],Ft=Ii[22],Nt=Ii[23],Ut=Ii[24],Ht=Ii[25],Gt=Ii[26],kt=Ii[27],Vt=Ii[28],Wt=Math.PI/8;void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.description&&(this.description=null),void 0===this.information&&(this.information=null),void 0===this.license&&(this.license=null),void 0===this.tags&&(this.tags=null),void 0===this.creationDate&&(this.creationDate=null),void 0===this.grade&&(this.grade=null),void 0===this.icon&&(this.icon=null),void 0===this.planIcon&&(this.planIcon=null),void 0===this.model&&(this.model=null),void 0===this.width&&(this.width=0),void 0===this.depth&&(this.depth=0),void 0===this.height&&(this.height=0),void 0===this.proportional&&(this.proportional=!1),void 0===this.elevation&&(this.elevation=0),void 0===this.dropOnTopElevation&&(this.dropOnTopElevation=0),void 0===this.movable&&(this.movable=!1),void 0===this.doorOrWindow&&(this.doorOrWindow=!1),void 0===this.staircaseCutOutShape&&(this.staircaseCutOutShape=null),void 0===this.modelRotation&&(this.modelRotation=null),void 0===this.modelFlags&&(this.modelFlags=0),void 0===this.modelSize&&(this.modelSize=null),void 0===this.creator&&(this.creator=null),void 0===this.color&&(this.color=null),void 0===this.iconYaw&&(this.iconYaw=0),void 0===this.iconPitch&&(this.iconPitch=0),void 0===this.iconScale&&(this.iconScale=0),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.resizable&&(this.resizable=!1),void 0===this.deformable&&(this.deformable=!1),void 0===this.texturable&&(this.texturable=!1),void 0===this.horizontallyRotatable&&(this.horizontallyRotatable=!1),void 0===this.price&&(this.price=null),void 0===this.valueAddedTaxPercentage&&(this.valueAddedTaxPercentage=null),void 0===this.currency&&(this.currency=null),void 0===this.properties&&(this.properties=null),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null),this.id=t,this.name=i,this.description=n,this.information=o,this.license=null,this.tags=mt,this.creationDate=yt,this.grade=Ct,this.icon=St,this.planIcon=Et,this.model=At,this.width=_t,this.depth=Pt,this.height=wt,this.elevation=Lt,this.dropOnTopElevation=Tt,this.movable=bt,this.doorOrWindow=!1,this.color=null,this.staircaseCutOutShape=Ot,this.creator=xt,this.horizontallyRotatable=Ut,this.price=Ht,this.valueAddedTaxPercentage=Gt,this.currency=kt,null==Vt||0===Object.keys(Vt).length?this.properties={}:1===Object.keys(Vt).length?this.properties=function(e){var t,i={};return i[e]=function(e){var t=0;return{next:function(){return t<e.length?e[t++]:null},hasNext:function(){return t<e.length}}}((t=Vt,Object.keys(t).map((function(e){return t[e]})))).next(),i}(function(e){var t=0;return{next:function(){return t<e.length?e[t++]:null},hasNext:function(){return t<e.length}}}(Object.keys(Vt)).next()):this.properties=function(e){var t={};for(var i in e)t[i]=e[i];return t}(Vt),this.modelRotation=null==It?PieceOfFurniture.IDENTITY_ROTATION_$LI$():e.deepClone(It),this.modelFlags=Dt,this.modelSize=Rt,this.resizable=Mt,this.deformable=Ft,this.texturable=Nt,this.iconYaw=Wt,this.iconPitch=0,this.iconScale=1,this.proportional=!0,this.modifiable=!1,void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.description&&(this.description=null),void 0===this.information&&(this.information=null),void 0===this.license&&(this.license=null),void 0===this.tags&&(this.tags=null),void 0===this.creationDate&&(this.creationDate=null),void 0===this.grade&&(this.grade=null),void 0===this.icon&&(this.icon=null),void 0===this.planIcon&&(this.planIcon=null),void 0===this.model&&(this.model=null),void 0===this.width&&(this.width=0),void 0===this.depth&&(this.depth=0),void 0===this.height&&(this.height=0),void 0===this.proportional&&(this.proportional=!1),void 0===this.elevation&&(this.elevation=0),void 0===this.dropOnTopElevation&&(this.dropOnTopElevation=0),void 0===this.movable&&(this.movable=!1),void 0===this.doorOrWindow&&(this.doorOrWindow=!1),void 0===this.staircaseCutOutShape&&(this.staircaseCutOutShape=null),void 0===this.modelRotation&&(this.modelRotation=null),void 0===this.modelFlags&&(this.modelFlags=0),void 0===this.modelSize&&(this.modelSize=null),void 0===this.creator&&(this.creator=null),void 0===this.color&&(this.color=null),void 0===this.iconYaw&&(this.iconYaw=0),void 0===this.iconPitch&&(this.iconPitch=0),void 0===this.iconScale&&(this.iconScale=0),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.resizable&&(this.resizable=!1),void 0===this.deformable&&(this.deformable=!1),void 0===this.texturable&&(this.texturable=!1),void 0===this.horizontallyRotatable&&(this.horizontallyRotatable=!1),void 0===this.price&&(this.price=null),void 0===this.valueAddedTaxPercentage&&(this.valueAddedTaxPercentage=null),void 0===this.currency&&(this.currency=null),void 0===this.properties&&(this.properties=null),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null),void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.description&&(this.description=null),void 0===this.information&&(this.information=null),void 0===this.license&&(this.license=null),void 0===this.tags&&(this.tags=null),void 0===this.creationDate&&(this.creationDate=null),void 0===this.grade&&(this.grade=null),void 0===this.icon&&(this.icon=null),void 0===this.planIcon&&(this.planIcon=null),void 0===this.model&&(this.model=null),void 0===this.width&&(this.width=0),void 0===this.depth&&(this.depth=0),void 0===this.height&&(this.height=0),void 0===this.proportional&&(this.proportional=!1),void 0===this.elevation&&(this.elevation=0),void 0===this.dropOnTopElevation&&(this.dropOnTopElevation=0),void 0===this.movable&&(this.movable=!1),void 0===this.doorOrWindow&&(this.doorOrWindow=!1),void 0===this.staircaseCutOutShape&&(this.staircaseCutOutShape=null),void 0===this.modelRotation&&(this.modelRotation=null),void 0===this.modelFlags&&(this.modelFlags=0),void 0===this.modelSize&&(this.modelSize=null),void 0===this.creator&&(this.creator=null),void 0===this.color&&(this.color=null),void 0===this.iconYaw&&(this.iconYaw=0),void 0===this.iconPitch&&(this.iconPitch=0),void 0===this.iconScale&&(this.iconScale=0),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.resizable&&(this.resizable=!1),void 0===this.deformable&&(this.deformable=!1),void 0===this.texturable&&(this.texturable=!1),void 0===this.horizontallyRotatable&&(this.horizontallyRotatable=!1),void 0===this.price&&(this.price=null),void 0===this.valueAddedTaxPercentage&&(this.valueAddedTaxPercentage=null),void 0===this.currency&&(this.currency=null),void 0===this.properties&&(this.properties=null),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null)}else{var Bt=(Ii=arguments)[4],jt=Ii[5],Yt=Ii[6],zt=Ii[7],$t=Ii[8],Xt=Ii[9],Kt=Ii[10],qt=Ii[11],Zt=Ii[12],Qt=Ii[13],Jt=Ii[14],ei=Ii[15],ti=Ii[16],ii=Ii[17],rt=Ii[18],ni=Ii[19],oi=Ii[20],ri=Ii[21],li=Ii[22],ai=Ii[23],si=Ii[24],hi=Ii[25],ui=Ii[26],di=Ii[27],ci=Ii[28],pi=rt?PieceOfFurniture.SHOW_BACK_FACE:0,gi=Math.PI/8;void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.description&&(this.description=null),void 0===this.information&&(this.information=null),void 0===this.license&&(this.license=null),void 0===this.tags&&(this.tags=null),void 0===this.creationDate&&(this.creationDate=null),void 0===this.grade&&(this.grade=null),void 0===this.icon&&(this.icon=null),void 0===this.planIcon&&(this.planIcon=null),void 0===this.model&&(this.model=null),void 0===this.width&&(this.width=0),void 0===this.depth&&(this.depth=0),void 0===this.height&&(this.height=0),void 0===this.proportional&&(this.proportional=!1),void 0===this.elevation&&(this.elevation=0),void 0===this.dropOnTopElevation&&(this.dropOnTopElevation=0),void 0===this.movable&&(this.movable=!1),void 0===this.doorOrWindow&&(this.doorOrWindow=!1),void 0===this.staircaseCutOutShape&&(this.staircaseCutOutShape=null),void 0===this.modelRotation&&(this.modelRotation=null),void 0===this.modelFlags&&(this.modelFlags=0),void 0===this.modelSize&&(this.modelSize=null),void 0===this.creator&&(this.creator=null),void 0===this.color&&(this.color=null),void 0===this.iconYaw&&(this.iconYaw=0),void 0===this.iconPitch&&(this.iconPitch=0),void 0===this.iconScale&&(this.iconScale=0),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.resizable&&(this.resizable=!1),void 0===this.deformable&&(this.deformable=!1),void 0===this.texturable&&(this.texturable=!1),void 0===this.horizontallyRotatable&&(this.horizontallyRotatable=!1),void 0===this.price&&(this.price=null),void 0===this.valueAddedTaxPercentage&&(this.valueAddedTaxPercentage=null),void 0===this.currency&&(this.currency=null),void 0===this.properties&&(this.properties=null),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null),this.id=t,this.name=i,this.description=n,this.information=o,this.license=null,this.tags=Bt,this.creationDate=jt,this.grade=Yt,this.icon=zt,this.planIcon=$t,this.model=Xt,this.width=Kt,this.depth=qt,this.height=Zt,this.elevation=Qt,this.dropOnTopElevation=Jt,this.movable=ei,this.doorOrWindow=!1,this.color=null,this.staircaseCutOutShape=ti,this.creator=oi,this.horizontallyRotatable=si,this.price=hi,this.valueAddedTaxPercentage=ui,this.currency=di,null==ci||0===Object.keys(ci).length?this.properties={}:1===Object.keys(ci).length?this.properties=function(e){var t,i={};return i[e]=function(e){var t=0;return{next:function(){return t<e.length?e[t++]:null},hasNext:function(){return t<e.length}}}((t=ci,Object.keys(t).map((function(e){return t[e]})))).next(),i}(function(e){var t=0;return{next:function(){return t<e.length?e[t++]:null},hasNext:function(){return t<e.length}}}(Object.keys(ci)).next()):this.properties=function(e){var t={};for(var i in e)t[i]=e[i];return t}(ci),this.modelRotation=null==ii?PieceOfFurniture.IDENTITY_ROTATION_$LI$():e.deepClone(ii),this.modelFlags=pi,this.modelSize=ni,this.resizable=ri,this.deformable=li,this.texturable=ai,this.iconYaw=gi,this.iconPitch=0,this.iconScale=1,this.proportional=!0,this.modifiable=!1,void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.description&&(this.description=null),void 0===this.information&&(this.information=null),void 0===this.license&&(this.license=null),void 0===this.tags&&(this.tags=null),void 0===this.creationDate&&(this.creationDate=null),void 0===this.grade&&(this.grade=null),void 0===this.icon&&(this.icon=null),void 0===this.planIcon&&(this.planIcon=null),void 0===this.model&&(this.model=null),void 0===this.width&&(this.width=0),void 0===this.depth&&(this.depth=0),void 0===this.height&&(this.height=0),void 0===this.proportional&&(this.proportional=!1),void 0===this.elevation&&(this.elevation=0),void 0===this.dropOnTopElevation&&(this.dropOnTopElevation=0),void 0===this.movable&&(this.movable=!1),void 0===this.doorOrWindow&&(this.doorOrWindow=!1),void 0===this.staircaseCutOutShape&&(this.staircaseCutOutShape=null),void 0===this.modelRotation&&(this.modelRotation=null),void 0===this.modelFlags&&(this.modelFlags=0),void 0===this.modelSize&&(this.modelSize=null),void 0===this.creator&&(this.creator=null),void 0===this.color&&(this.color=null),void 0===this.iconYaw&&(this.iconYaw=0),void 0===this.iconPitch&&(this.iconPitch=0),void 0===this.iconScale&&(this.iconScale=0),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.resizable&&(this.resizable=!1),void 0===this.deformable&&(this.deformable=!1),void 0===this.texturable&&(this.texturable=!1),void 0===this.horizontallyRotatable&&(this.horizontallyRotatable=!1),void 0===this.price&&(this.price=null),void 0===this.valueAddedTaxPercentage&&(this.valueAddedTaxPercentage=null),void 0===this.currency&&(this.currency=null),void 0===this.properties&&(this.properties=null),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null),void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.description&&(this.description=null),void 0===this.information&&(this.information=null),void 0===this.license&&(this.license=null),void 0===this.tags&&(this.tags=null),void 0===this.creationDate&&(this.creationDate=null),void 0===this.grade&&(this.grade=null),void 0===this.icon&&(this.icon=null),void 0===this.planIcon&&(this.planIcon=null),void 0===this.model&&(this.model=null),void 0===this.width&&(this.width=0),void 0===this.depth&&(this.depth=0),void 0===this.height&&(this.height=0),void 0===this.proportional&&(this.proportional=!1),void 0===this.elevation&&(this.elevation=0),void 0===this.dropOnTopElevation&&(this.dropOnTopElevation=0),void 0===this.movable&&(this.movable=!1),void 0===this.doorOrWindow&&(this.doorOrWindow=!1),void 0===this.staircaseCutOutShape&&(this.staircaseCutOutShape=null),void 0===this.modelRotation&&(this.modelRotation=null),void 0===this.modelFlags&&(this.modelFlags=0),void 0===this.modelSize&&(this.modelSize=null),void 0===this.creator&&(this.creator=null),void 0===this.color&&(this.color=null),void 0===this.iconYaw&&(this.iconYaw=0),void 0===this.iconPitch&&(this.iconPitch=0),void 0===this.iconScale&&(this.iconScale=0),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.resizable&&(this.resizable=!1),void 0===this.deformable&&(this.deformable=!1),void 0===this.texturable&&(this.texturable=!1),void 0===this.horizontallyRotatable&&(this.horizontallyRotatable=!1),void 0===this.price&&(this.price=null),void 0===this.valueAddedTaxPercentage&&(this.valueAddedTaxPercentage=null),void 0===this.currency&&(this.currency=null),void 0===this.properties&&(this.properties=null),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null),void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.description&&(this.description=null),void 0===this.information&&(this.information=null),void 0===this.license&&(this.license=null),void 0===this.tags&&(this.tags=null),void 0===this.creationDate&&(this.creationDate=null),void 0===this.grade&&(this.grade=null),void 0===this.icon&&(this.icon=null),void 0===this.planIcon&&(this.planIcon=null),void 0===this.model&&(this.model=null),void 0===this.width&&(this.width=0),void 0===this.depth&&(this.depth=0),void 0===this.height&&(this.height=0),void 0===this.proportional&&(this.proportional=!1),void 0===this.elevation&&(this.elevation=0),void 0===this.dropOnTopElevation&&(this.dropOnTopElevation=0),void 0===this.movable&&(this.movable=!1),void 0===this.doorOrWindow&&(this.doorOrWindow=!1),void 0===this.staircaseCutOutShape&&(this.staircaseCutOutShape=null),void 0===this.modelRotation&&(this.modelRotation=null),void 0===this.modelFlags&&(this.modelFlags=0),void 0===this.modelSize&&(this.modelSize=null),void 0===this.creator&&(this.creator=null),void 0===this.color&&(this.color=null),void 0===this.iconYaw&&(this.iconYaw=0),void 0===this.iconPitch&&(this.iconPitch=0),void 0===this.iconScale&&(this.iconScale=0),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.resizable&&(this.resizable=!1),void 0===this.deformable&&(this.deformable=!1),void 0===this.texturable&&(this.texturable=!1),void 0===this.horizontallyRotatable&&(this.horizontallyRotatable=!1),void 0===this.price&&(this.price=null),void 0===this.valueAddedTaxPercentage&&(this.valueAddedTaxPercentage=null),void 0===this.currency&&(this.currency=null),void 0===this.properties&&(this.properties=null),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null)}else{var vi=(Ii=arguments)[17],fi=Ii[18],mi=Ii[19],yi=Ii[20],Ci=Ii[21],Si=Ii[22],Ei=Ii[23],Ai=Ii[24],_i=Ii[25],Pi=Ii[26],wi=Ii[27],Li=Ii[28],Ti=Ii[29],bi=Ii[30],Oi=Math.PI/8;void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.description&&(this.description=null),void 0===this.information&&(this.information=null),void 0===this.license&&(this.license=null),void 0===this.tags&&(this.tags=null),void 0===this.creationDate&&(this.creationDate=null),void 0===this.grade&&(this.grade=null),void 0===this.icon&&(this.icon=null),void 0===this.planIcon&&(this.planIcon=null),void 0===this.model&&(this.model=null),void 0===this.width&&(this.width=0),void 0===this.depth&&(this.depth=0),void 0===this.height&&(this.height=0),void 0===this.proportional&&(this.proportional=!1),void 0===this.elevation&&(this.elevation=0),void 0===this.dropOnTopElevation&&(this.dropOnTopElevation=0),void 0===this.movable&&(this.movable=!1),void 0===this.doorOrWindow&&(this.doorOrWindow=!1),void 0===this.staircaseCutOutShape&&(this.staircaseCutOutShape=null),void 0===this.modelRotation&&(this.modelRotation=null),void 0===this.modelFlags&&(this.modelFlags=0),void 0===this.modelSize&&(this.modelSize=null),void 0===this.creator&&(this.creator=null),void 0===this.color&&(this.color=null),void 0===this.iconYaw&&(this.iconYaw=0),void 0===this.iconPitch&&(this.iconPitch=0),void 0===this.iconScale&&(this.iconScale=0),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.resizable&&(this.resizable=!1),void 0===this.deformable&&(this.deformable=!1),void 0===this.texturable&&(this.texturable=!1),void 0===this.horizontallyRotatable&&(this.horizontallyRotatable=!1),void 0===this.price&&(this.price=null),void 0===this.valueAddedTaxPercentage&&(this.valueAddedTaxPercentage=null),void 0===this.currency&&(this.currency=null),void 0===this.properties&&(this.properties=null),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null),this.id=t,this.name=i,this.description=n,this.information=o,this.license=r,this.tags=l,this.creationDate=a,this.grade=s,this.icon=h,this.planIcon=u,this.model=d,this.width=c,this.depth=p,this.height=g,this.elevation=v,this.dropOnTopElevation=f,this.movable=m,this.doorOrWindow=!1,this.color=null,this.staircaseCutOutShape=vi,this.creator=Ci,this.horizontallyRotatable=_i,this.price=Pi,this.valueAddedTaxPercentage=wi,this.currency=Li,null==Ti||0===Object.keys(Ti).length?null==bi||0===Object.keys(bi).length?this.properties={}:1===Object.keys(bi).length?this.properties=function(e){var t,i={};return i[e]=function(e){var t=0;return{next:function(){return t<e.length?e[t++]:null},hasNext:function(){return t<e.length}}}((t=bi,Object.keys(t).map((function(e){return t[e]})))).next(),i}(function(e){var t=0;return{next:function(){return t<e.length?e[t++]:null},hasNext:function(){return t<e.length}}}(Object.keys(bi)).next()):this.properties=function(e){var t={};for(var i in e)t[i]=e[i];return t}(bi):1!==Object.keys(Ti).length||null!=bi&&0!==Object.keys(bi).length?(this.properties=function(e){var t={};for(var i in e)t[i]=e[i];return t}(Ti),null!=bi&&function(e,t){for(var i in t)e[i]=t[i]}(this.properties,bi)):this.properties=function(e){var t,i={};return i[e]=function(e){var t=0;return{next:function(){return t<e.length?e[t++]:null},hasNext:function(){return t<e.length}}}((t=Ti,Object.keys(t).map((function(e){return t[e]})))).next(),i}(function(e){var t=0;return{next:function(){return t<e.length?e[t++]:null},hasNext:function(){return t<e.length}}}(Object.keys(Ti)).next()),this.modelRotation=null==fi?PieceOfFurniture.IDENTITY_ROTATION_$LI$():e.deepClone(fi),this.modelFlags=mi,this.modelSize=yi,this.resizable=Si,this.deformable=Ei,this.texturable=Ai,this.iconYaw=Oi,this.iconPitch=0,this.iconScale=1,this.proportional=!0,this.modifiable=!1,void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.description&&(this.description=null),void 0===this.information&&(this.information=null),void 0===this.license&&(this.license=null),void 0===this.tags&&(this.tags=null),void 0===this.creationDate&&(this.creationDate=null),void 0===this.grade&&(this.grade=null),void 0===this.icon&&(this.icon=null),void 0===this.planIcon&&(this.planIcon=null),void 0===this.model&&(this.model=null),void 0===this.width&&(this.width=0),void 0===this.depth&&(this.depth=0),void 0===this.height&&(this.height=0),void 0===this.proportional&&(this.proportional=!1),void 0===this.elevation&&(this.elevation=0),void 0===this.dropOnTopElevation&&(this.dropOnTopElevation=0),void 0===this.movable&&(this.movable=!1),void 0===this.doorOrWindow&&(this.doorOrWindow=!1),void 0===this.staircaseCutOutShape&&(this.staircaseCutOutShape=null),void 0===this.modelRotation&&(this.modelRotation=null),void 0===this.modelFlags&&(this.modelFlags=0),void 0===this.modelSize&&(this.modelSize=null),void 0===this.creator&&(this.creator=null),void 0===this.color&&(this.color=null),void 0===this.iconYaw&&(this.iconYaw=0),void 0===this.iconPitch&&(this.iconPitch=0),void 0===this.iconScale&&(this.iconScale=0),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.resizable&&(this.resizable=!1),void 0===this.deformable&&(this.deformable=!1),void 0===this.texturable&&(this.texturable=!1),void 0===this.horizontallyRotatable&&(this.horizontallyRotatable=!1),void 0===this.price&&(this.price=null),void 0===this.valueAddedTaxPercentage&&(this.valueAddedTaxPercentage=null),void 0===this.currency&&(this.currency=null),void 0===this.properties&&(this.properties=null),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null)}else{var Ii=arguments;void 0===this.id&&(this.id=null),void 0===this.name&&(this.name=null),void 0===this.description&&(this.description=null),void 0===this.information&&(this.information=null),void 0===this.license&&(this.license=null),void 0===this.tags&&(this.tags=null),void 0===this.creationDate&&(this.creationDate=null),void 0===this.grade&&(this.grade=null),void 0===this.icon&&(this.icon=null),void 0===this.planIcon&&(this.planIcon=null),void 0===this.model&&(this.model=null),void 0===this.width&&(this.width=0),void 0===this.depth&&(this.depth=0),void 0===this.height&&(this.height=0),void 0===this.proportional&&(this.proportional=!1),void 0===this.elevation&&(this.elevation=0),void 0===this.dropOnTopElevation&&(this.dropOnTopElevation=0),void 0===this.movable&&(this.movable=!1),void 0===this.doorOrWindow&&(this.doorOrWindow=!1),void 0===this.staircaseCutOutShape&&(this.staircaseCutOutShape=null),void 0===this.modelRotation&&(this.modelRotation=null),void 0===this.modelFlags&&(this.modelFlags=0),void 0===this.modelSize&&(this.modelSize=null),void 0===this.creator&&(this.creator=null),void 0===this.color&&(this.color=null),void 0===this.iconYaw&&(this.iconYaw=0),void 0===this.iconPitch&&(this.iconPitch=0),void 0===this.iconScale&&(this.iconScale=0),void 0===this.modifiable&&(this.modifiable=!1),void 0===this.resizable&&(this.resizable=!1),void 0===this.deformable&&(this.deformable=!1),void 0===this.texturable&&(this.texturable=!1),void 0===this.horizontallyRotatable&&(this.horizontallyRotatable=!1),void 0===this.price&&(this.price=null),void 0===this.valueAddedTaxPercentage&&(this.valueAddedTaxPercentage=null),void 0===this.currency&&(this.currency=null),void 0===this.properties&&(this.properties=null),void 0===this.category&&(this.category=null),void 0===this.filterCollationKey&&(this.filterCollationKey=null),this.id=t,this.name=i,this.description=n,this.information=o,this.license=r,this.tags=l,this.creationDate=a,this.grade=s,this.icon=h,this.planIcon=u,this.model=d,this.width=c,this.depth=p,this.height=g,this.elevation=v,this.dropOnTopElevation=f,this.movable=m,this.doorOrWindow=y,this.color=S,this.staircaseCutOutShape=C,this.creator=P,this.horizontallyRotatable=b,this.price=O,this.valueAddedTaxPercentage=I,this.currency=D,null==R||0===Object.keys(R).length?null==x||0===Object.keys(x).length?this.properties={}:1===Object.keys(x).length?this.properties=function(e){var t,i={};return i[e]=function(e){var t=0;return{next:function(){return t<e.length?e[t++]:null},hasNext:function(){return t<e.length}}}((t=x,Object.keys(t).map((function(e){return t[e]})))).next(),i}((Di=Object.keys(x),Ri=0,{next:function(){return Ri<Di.length?Di[Ri++]:null},hasNext:function(){return Ri<Di.length}}).next()):this.properties=function(e){var t={};for(var i in e)t[i]=e[i];return t}(x):1!==Object.keys(R).length||null!=x&&0!==Object.keys(x).length?(this.properties=function(e){var t={};for(var i in e)t[i]=e[i];return t}(R),null!=x&&function(e,t){for(var i in t)e[i]=t[i]}(this.properties,x)):this.properties=function(e){var t,i={};return i[e]=function(e){var t=0;return{next:function(){return t<e.length?e[t++]:null},hasNext:function(){return t<e.length}}}((t=R,Object.keys(t).map((function(e){return t[e]})))).next(),i}(function(e){var t=0;return{next:function(){return t<e.length?e[t++]:null},hasNext:function(){return t<e.length}}}(Object.keys(R)).next()),this.modelRotation=null==E?PieceOfFurniture.IDENTITY_ROTATION_$LI$():e.deepClone(E),this.modelFlags=A,this.modelSize=_,this.resizable=w,this.deformable=L,this.texturable=T,this.iconYaw=M,this.iconPitch=F,this.iconScale=N,this.proportional=U,this.modifiable=H}var Di,Ri}return e.__static_initialize=function(){e.__static_initialized||(e.__static_initialized=!0,e.__static_initializer_0())},e.EMPTY_CRITERIA_$LI$=function(){return e.__static_initialize(),null==e.EMPTY_CRITERIA&&(e.EMPTY_CRITERIA=[]),e.EMPTY_CRITERIA},e.COMPARATOR_$LI$=function(){return e.__static_initialize(),e.COMPARATOR},e.recentFilters_$LI$=function(){return e.__static_initialize(),e.recentFilters},e.__static_initializer_0=function(){e.COMPARATOR={compare:function(e,t){return e.toString().localeCompare(t.toString())},equals:function(e,t){return 0===e.toString().localeCompare(t.toString())}},e.COMPARATOR_$LI$(),e.recentFilters={}},e.prototype.getId=function(){return this.id},e.prototype.getName=function(){return this.name},e.prototype.getDescription=function(){return this.description},e.prototype.getInformation=function(){return this.information},e.prototype.getLicense=function(){return this.license},e.prototype.getTags=function(){return this.tags},e.prototype.getCreationDate=function(){return this.creationDate},e.prototype.getGrade=function(){return this.grade},e.prototype.getDepth=function(){return this.depth},e.prototype.getHeight=function(){return this.height},e.prototype.getWidth=function(){return this.width},e.prototype.getElevation=function(){return this.elevation},e.prototype.getDropOnTopElevation=function(){return this.dropOnTopElevation},e.prototype.isMovable=function(){return this.movable},e.prototype.isDoorOrWindow=function(){return this.doorOrWindow},e.prototype.getIcon=function(){return this.icon},e.prototype.getPlanIcon=function(){return this.planIcon},e.prototype.getModel=function(){return this.model},e.prototype.getModelFlags=function(){return this.modelFlags},e.prototype.getModelSize=function(){return this.modelSize},e.prototype.getModelRotation=function(){return e.deepClone(this.modelRotation)},e.deepClone=function(e){for(var t=function(e){for(var t=[];e-- >0;)t.push(null);return t}(e.length),i=0;i<e.length;i++)t[i]=e[i].slice(0);return t},e.prototype.getStaircaseCutOutShape=function(){return this.staircaseCutOutShape},e.prototype.getCreator=function(){return this.creator},e.prototype.isBackFaceShown=function(){return(this.modelFlags&PieceOfFurniture.SHOW_BACK_FACE)===PieceOfFurniture.SHOW_BACK_FACE},e.prototype.getColor=function(){return this.color},e.prototype.getIconYaw=function(){return this.iconYaw},e.prototype.getIconPitch=function(){return this.iconPitch},e.prototype.getIconScale=function(){return this.iconScale},e.prototype.isProportional=function(){return this.proportional},e.prototype.isModifiable=function(){return this.modifiable},e.prototype.isResizable=function(){return this.resizable},e.prototype.isDeformable=function(){return this.deformable},e.prototype.isWidthDepthDeformable=function(){return this.isDeformable()},e.prototype.isTexturable=function(){return this.texturable},e.prototype.isHorizontallyRotatable=function(){return this.horizontallyRotatable},e.prototype.getPrice=function(){return this.price},e.prototype.getValueAddedTaxPercentage=function(){return this.valueAddedTaxPercentage},e.prototype.getCurrency=function(){return this.currency},e.prototype.getProperty=function(e){var t,i,n=void 0===(t=this.properties)[i=e]?null:t[i];return"string"==typeof n?n:null},e.prototype.getPropertyNames=function(){return Object.keys(this.properties)},e.prototype.getContentProperty=function(e){var t,i,n=void 0===(t=this.properties)[i=e]?null:t[i];return null!=n&&null!=n.constructor&&null!=n.constructor.__interfaces&&n.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0?n:null},e.prototype.isContentProperty=function(e){return null!=(void 0===(t=this.properties)[i=e]?null:t[i])&&null!=function(e,t){return void 0===e[t]?null:e[t]}(this.properties,e).constructor&&null!=function(e,t){return void 0===e[t]?null:e[t]}(this.properties,e).constructor.__interfaces&&function(e,t){return void 0===e[t]?null:e[t]}(this.properties,e).constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0;var t,i},e.prototype.getCategory=function(){return this.category},e.prototype.setCategory=function(e){this.category=e},e.prototype.equals=function(e){return i=e,(t=this)&&t.equals?t.equals(i):t===i;var t,i},e.prototype.hashCode=function(){return(e=this).hashCode?e.hashCode():e.toString().split("").reduce((function(e,t){return(e<<5)-e+t.charCodeAt(0)|0}),0);var e},e.prototype.compareTo=function(t){var i=e.COMPARATOR_$LI$().compare(this.name,t.name);return 0!==i?i:this.modifiable===t.modifiable?0:this.modifiable?1:-1},e.prototype.matchesFilter=function(e){var t=this.getFilterCollationKeys(e),i=0;if(t.length>0)for(var n=this.getPieceOfFurnitureCollationKey(),o=0;o<t.length&&this.isSubCollationKey(n,t[o],0);o++)i++;return i===t.length},e.prototype.getFilterCollationKeys=function(t){if(0===t.length)return e.EMPTY_CRITERIA_$LI$();var i,n,o=void 0===(i=e.recentFilters_$LI$())[n=t]?null:i[n];if(null==o){for(var r=t.split(/\s|\p{Punct}|\\|/),l=[],a=0;a<r.length;a++){var s=r[a];s.length>0&&l.push(e.COMPARATOR_$LI$().getCollationKey(s).toByteArray())}o=0===l.length?e.EMPTY_CRITERIA_$LI$():l.slice(0),e.recentFilters_$LI$()[t]=o}return o},e.prototype.getPieceOfFurnitureCollationKey=function(){if(null==this.filterCollationKey){for(var t={str:"",toString:function(){return this.str}},i=this.getFilterCriteria(),n=0;n<i.length;n++)o=void 0,o=i[n],0!==t.str.length&&(t.str+="|"),t.str+=o;this.filterCollationKey=e.COMPARATOR_$LI$().getCollationKey(t.str).toByteArray()}var o;return this.filterCollationKey},e.prototype.getFilterCriteria=function(){var e=[];e.push(this.getName()),null!=this.getCategory()&&e.push(this.getCategory().getName()),null!=this.getCreator()&&e.push(this.getCreator()),null!=this.getDescription()&&e.push(this.getDescription()),null!=this.getLicense()&&e.push(this.getLicense());for(var t=this.getTags(),i=0;i<t.length;i++){var n=t[i];e.push(n)}return e.slice(0)},e.prototype.isSubCollationKey=function(e,t,i){for(var n=i,o=e.length-4,r=t.length-4;n<o&&n<o-r+1;n++)if(e[n]===t[0]){for(var l=1;l<r;l++)if(e[n+l]!==t[l])return this.isSubCollationKey(e,t,n+1);return!0}return!1},e.prototype.clone=function(){try{var e=function(e){var t=Object.create(e);for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}(this);return e.category=null,e}catch(e){throw new IllegalStateException("Super class isn't cloneable")}},e.__static_initialized=!1,e}();CatalogPieceOfFurniture.__class="com.eteks.sweethome3d.model.CatalogPieceOfFurniture",CatalogPieceOfFurniture.__interfaces=["com.eteks.sweethome3d.model.CatalogItem","com.eteks.sweethome3d.model.PieceOfFurniture"];var CollectionChangeSupport=function(){function e(e){void 0===this.source&&(this.source=null),void 0===this.collectionListeners&&(this.collectionListeners=null),this.source=e,this.collectionListeners=[]}return e.prototype.addCollectionListener=function(e){this.collectionListeners.push(e)},e.prototype.removeCollectionListener=function(e){var t,i;t=this.collectionListeners,(i=t.indexOf(e))>=0&&t.splice(i,1)},e.prototype.fireCollectionChanged$java_lang_Object$com_eteks_sweethome3d_model_CollectionEvent_Type=function(e,t){this.fireCollectionChanged(e,-1,t)},e.prototype.fireCollectionChanged$java_lang_Object$int$com_eteks_sweethome3d_model_CollectionEvent_Type=function(e,t,i){if(0!=this.collectionListeners.length)for(var n=new CollectionEvent(this.source,e,t,i),o=this.collectionListeners.slice(0),r=0;r<o.length;r++){(0,o[r])(n)}},e.prototype.fireCollectionChanged=function(e,t,i){if(null==e&&null!==e||"number"!=typeof t&&null!==t||"number"!=typeof i&&null!==i){if(null==e&&null!==e||"number"!=typeof t&&null!==t||void 0!==i)throw new Error("invalid overload");return this.fireCollectionChanged$java_lang_Object$com_eteks_sweethome3d_model_CollectionEvent_Type(e,t)}return this.fireCollectionChanged$java_lang_Object$int$com_eteks_sweethome3d_model_CollectionEvent_Type(e,t,i)},e}();CollectionChangeSupport.__class="com.eteks.sweethome3d.model.CollectionChangeSupport";var CollectionEvent=function(e){function t(t,i,n,o){var r=this;if(null==t&&null!==t||null==i&&null!==i||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o){if(null==t&&null!==t||null==i&&null!==i||"number"!=typeof n&&null!==n||void 0!==o)throw new Error("invalid overload");var l=arguments[2];void 0===(r=e.call(this,t)||this).item&&(r.item=null),void 0===r.index&&(r.index=0),void 0===r.type&&(r.type=null),r.item=i,r.index=-1,r.type=l,void 0===r.item&&(r.item=null),void 0===r.index&&(r.index=0),void 0===r.type&&(r.type=null)}else{void 0===(r=e.call(this,t)||this).item&&(r.item=null),void 0===r.index&&(r.index=0),void 0===r.type&&(r.type=null),r.item=i,r.index=n,r.type=o}return r}return __extends(t,e),t.prototype.getItem=function(){return this.item},t.prototype.getIndex=function(){return this.index},t.prototype.getType=function(){return this.type},t}(EventObject);CollectionEvent.__class="com.eteks.sweethome3d.model.CollectionEvent",function(e){var t;(t=e.Type||(e.Type={}))[t.ADD=0]="ADD",t[t.DELETE=1]="DELETE"}(CollectionEvent||(CollectionEvent={})),CollectionEvent.__transients=["source"];var SelectionEvent=function(e){function t(t,i,n){var o=this;if((null!=t||null===t)&&(null!=i&&i instanceof Array||null===i)&&(null!=n&&n instanceof Array||null===n)){void 0===(o=e.call(this,t)||this).oldSelectedItems&&(o.oldSelectedItems=null),void 0===o.selectedItems&&(o.selectedItems=null),o.oldSelectedItems=i,o.selectedItems=n}else{if(null==t&&null!==t||!(null!=i&&i instanceof Array||null===i)||void 0!==n)throw new Error("invalid overload");var r=arguments[1];void 0===(o=e.call(this,t)||this).oldSelectedItems&&(o.oldSelectedItems=null),void 0===o.selectedItems&&(o.selectedItems=null),o.oldSelectedItems=null,o.selectedItems=r,void 0===o.oldSelectedItems&&(o.oldSelectedItems=null),void 0===o.selectedItems&&(o.selectedItems=null)}return o}return __extends(t,e),t.prototype.getOldSelectedItems=function(){return this.oldSelectedItems},t.prototype.getSelectedItems=function(){return this.selectedItems},t}(EventObject);SelectionEvent.__class="com.eteks.sweethome3d.model.SelectionEvent",SelectionEvent.__transients=["source"];var FurnitureCategory=function(){function e(e){void 0===this.name&&(this.name=null),void 0===this.furniture&&(this.furniture=null),this.name=e,this.furniture=[]}return e.COMPARATOR_$LI$=function(){return null==e.COMPARATOR&&(e.COMPARATOR={compare:function(e,t){return e.toString().localeCompare(t.toString())},equals:function(e,t){return 0===e.toString().localeCompare(t.toString())}}),e.COMPARATOR},e.prototype.getName=function(){return this.name},e.prototype.getFurniture=function(){return this.furniture.slice(0)},e.prototype.getFurnitureCount=function(){return this.furniture.length},e.prototype.getPieceOfFurniture=function(e){return this.furniture[e]},e.prototype.getIndexOfPieceOfFurniture=function(e){return this.furniture.indexOf(e)},e.prototype.add=function(e){e.setCategory(this);var t=function(e,t){for(var i,n,o=0,r=e.length-1;o<=r;){var l=o+r>>>1,a=e[l],s=(n=t,(i=a).compareTo?i.compareTo(n):i.localeCompare(n));if(s<0)o=l+1;else{if(!(s>0))return l;r=l-1}}return-(o+1)}(this.furniture,e);t<0&&(t=-t-1),this.furniture.splice(t,0,e)},e.prototype.delete=function(e){var t=this.furniture.indexOf(e);if(-1===t)throw new IllegalArgumentException(this.name+" doesn't contain piece "+e.getName());this.furniture=this.furniture.slice(0),this.furniture.splice(t,1)[0]},e.prototype.equals=function(t){return null!=t&&t instanceof e&&e.COMPARATOR_$LI$().equals(this.name,t.name)},e.prototype.hashCode=function(){return(e=this.name).hashCode?e.hashCode():e.toString().split("").reduce((function(e,t){return(e<<5)-e+t.charCodeAt(0)|0}),0);var e},e.prototype.compareTo=function(t){return e.COMPARATOR_$LI$().compare(this.name,t.name)},e}();FurnitureCategory.__class="com.eteks.sweethome3d.model.FurnitureCategory";var HomeMaterial=function(){function e(e,t,i,n,o){if("string"!=typeof e&&null!==e||"string"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||!(null!=n&&n instanceof HomeTexture||null===n)||"number"!=typeof o&&null!==o){if("string"!=typeof e&&null!==e||"number"!=typeof t&&null!==t||!(null!=i&&i instanceof HomeTexture||null===i)||"number"!=typeof n&&null!==n||void 0!==o)throw new Error("invalid overload");var r=(s=arguments)[1],l=s[2],a=s[3];void 0===this.name&&(this.name=null),void 0===this.key&&(this.key=null),void 0===this.color&&(this.color=null),void 0===this.texture&&(this.texture=null),void 0===this.shininess&&(this.shininess=null),this.name=e,this.key=null,this.color=r,this.texture=l,this.shininess=a,void 0===this.name&&(this.name=null),void 0===this.key&&(this.key=null),void 0===this.color&&(this.color=null),void 0===this.texture&&(this.texture=null),void 0===this.shininess&&(this.shininess=null)}else{var s=arguments;void 0===this.name&&(this.name=null),void 0===this.key&&(this.key=null),void 0===this.color&&(this.color=null),void 0===this.texture&&(this.texture=null),void 0===this.shininess&&(this.shininess=null),this.name=e,this.key=t,this.color=i,this.texture=n,this.shininess=o}}return e.prototype.getName=function(){return this.name},e.prototype.getKey=function(){return this.key},e.prototype.getColor=function(){return this.color},e.prototype.getTexture=function(){return this.texture},e.prototype.getShininess=function(){return this.shininess},e.prototype.equals=function(t){if(null!=t&&t instanceof e){var i=t;return(i.name===this.name||null!=i.name&&i.name===this.name)&&(i.key===this.key||null!=i.key&&i.key===this.name)&&(i.color===this.color||null!=i.color&&i.color===this.color)&&(i.texture===this.texture||null!=i.texture&&i.texture.equals(this.texture))&&(i.shininess===this.shininess||null!=i.shininess&&i.shininess===this.shininess)}return!1},e.prototype.hashCode=function(){var e,t=0;return null!=this.name&&(t+=(e=this.name).hashCode?e.hashCode():e.toString().split("").reduce((function(e,t){return(e<<5)-e+t.charCodeAt(0)|0}),0)),null!=this.key&&(t+=function(e){return e.hashCode?e.hashCode():e.toString().split("").reduce((function(e,t){return(e<<5)-e+t.charCodeAt(0)|0}),0)}(this.key)),null!=this.color&&(t+=function(e){return e.hashCode?e.hashCode():e.toString().split("").reduce((function(e,t){return(e<<5)-e+t.charCodeAt(0)|0}),0)}(this.color)),null!=this.texture&&(t+=function(e){return e.hashCode?e.hashCode():e.toString().split("").reduce((function(e,t){return(e<<5)-e+t.charCodeAt(0)|0}),0)}(this.texture)),null!=this.shininess&&(t+=function(e){return e.hashCode?e.hashCode():e.toString().split("").reduce((function(e,t){return(e<<5)-e+t.charCodeAt(0)|0}),0)}(this.shininess)),t},e}();HomeMaterial.__class="com.eteks.sweethome3d.model.HomeMaterial";var PieceOfFurniture,Sash=function(){function e(e,t,i,n,o){void 0===this.xAxis&&(this.xAxis=0),void 0===this.yAxis&&(this.yAxis=0),void 0===this.width&&(this.width=0),void 0===this.startAngle&&(this.startAngle=0),void 0===this.endAngle&&(this.endAngle=0),this.xAxis=e,this.yAxis=t,this.width=i,this.startAngle=n,this.endAngle=o}return e.prototype.getXAxis=function(){return this.xAxis},e.prototype.getYAxis=function(){return this.yAxis},e.prototype.getWidth=function(){return this.width},e.prototype.getStartAngle=function(){return this.startAngle},e.prototype.getEndAngle=function(){return this.endAngle},e}();Sash.__class="com.eteks.sweethome3d.model.Sash",function(e){e.DEFAULT_CUT_OUT_SHAPE="M0,0 v1 h1 v-1 z",e.IDENTITY_ROTATION_$LI$=function(){return null==e.IDENTITY_ROTATION&&(e.IDENTITY_ROTATION=[[1,0,0],[0,1,0],[0,0,1]]),e.IDENTITY_ROTATION},e.SHOW_BACK_FACE=1,e.HIDE_EDGE_COLOR_MATERIAL=2}(PieceOfFurniture||(PieceOfFurniture={}));var View,HomeController3D=function(){function e(t,i,n,o,r){void 0===this.home&&(this.home=null),void 0===this.preferences&&(this.preferences=null),void 0===this.viewFactory&&(this.viewFactory=null),void 0===this.contentManager&&(this.contentManager=null),void 0===this.undoSupport&&(this.undoSupport=null),void 0===this.planController&&(this.planController=null),void 0===this.home3DView&&(this.home3DView=null),void 0===this.topCameraState&&(this.topCameraState=null),void 0===this.observerCameraState&&(this.observerCameraState=null),void 0===this.cameraState&&(this.cameraState=null),this.home=t,this.preferences=i,this.viewFactory=n,this.contentManager=o,this.undoSupport=r,this.topCameraState=new e.TopCameraState(this,i),this.observerCameraState=new e.ObserverCameraState(this),this.setCameraState(t.getCamera()===t.getTopCamera()?this.topCameraState:this.observerCameraState),this.addModelListeners(t)}return e.prototype.addModelListeners=function(t){t.addPropertyChangeListener("CAMERA",new e.HomeController3D$0(this,t));var i=new e.HomeController3D$1(this,t),n=t.getSelectedLevel();null!=n&&n.addPropertyChangeListener(i),t.addPropertyChangeListener("SELECTED_LEVEL",new e.HomeController3D$2(this,t,i));var o=new e.HomeController3D$3(this,t);t.addPropertyChangeListener("SELECTED_LEVEL",o),t.getEnvironment().addPropertyChangeListener("ALL_LEVELS_VISIBLE",o)},e.prototype.getObserverCameraMinimumElevation=function(e){var t=e.getLevels();return 0===t.length?10:10+t[0].getElevation()},e.prototype.getView=function(){return null==this.home3DView&&(this.home3DView=this.viewFactory.createView3D(this.home,this.preferences,this)),this.home3DView},e.prototype.viewFromTop=function(){this.home.setCamera(this.home.getTopCamera())},e.prototype.viewFromObserver=function(){this.home.setCamera(this.home.getObserverCamera())},e.prototype.storeCamera=function(e){var t=this.home.getCamera().duplicate();t.setName(e);var i,n,o=this.home.getStoredCameras(),r=[];n=o,(i=r).push.apply(i,n);for(var l=r.length-1;l>=0;l--){var a=r[l];(e===a.getName()||t.getX()===a.getX()&&t.getY()===a.getY()&&t.getZ()===a.getZ()&&t.getPitch()===a.getPitch()&&t.getYaw()===a.getYaw()&&t.getFieldOfView()===a.getFieldOfView()&&t.getTime()===a.getTime()&&t.getLens()===a.getLens()&&(t.getRenderer()===a.getRenderer()||null!=t.getRenderer()&&t.getRenderer()===a.getRenderer()))&&r.splice(l,1)[0]}for(r.splice(0,0,t);r.length>this.preferences.getStoredCamerasMaxCount();)r.splice(r.length-1,1)[0];this.home.setStoredCameras(r)},e.prototype.goToCamera=function(e){null!=e&&e instanceof ObserverCamera?this.viewFromObserver():this.viewFromTop(),this.cameraState.goToCamera(e);var t,i,n=this.home.getStoredCameras().slice(0);(i=(t=n).indexOf(e))>=0&&t.splice(i,1),n.splice(0,0,e),this.home.setStoredCameras(n)},e.prototype.deleteCameras=function(e){for(var t=this.home.getStoredCameras(),i=[],n=0;n<t.length;n++){var o=t[n];e.indexOf(o)>=0||i.push(o)}this.home.setStoredCameras(i)},e.prototype.displayAllLevels=function(){this.home.getEnvironment().setAllLevelsVisible(!0)},e.prototype.displaySelectedLevel=function(){this.home.getEnvironment().setAllLevelsVisible(!1)},e.prototype.setCameraState=function(e){null!=this.cameraState&&this.cameraState.exit(),this.cameraState=e,this.cameraState.enter()},e.prototype.moveCamera=function(e){this.cameraState.moveCamera(e)},e.prototype.moveCameraSideways=function(e){this.cameraState.moveCameraSideways(e)},e.prototype.elevateCamera=function(e){this.cameraState.elevateCamera(e)},e.prototype.rotateCameraYaw=function(e){this.cameraState.rotateCameraYaw(e)},e.prototype.rotateCameraPitch=function(e){this.cameraState.rotateCameraPitch(e)},e.prototype.modifyFieldOfView=function(e){this.cameraState.modifyFieldOfView(e)},e.prototype.pressMouse=function(e,t,i,n,o,r,l,a){this.cameraState.pressMouse(e,t,i,n,o,r,l,a)},e.prototype.releaseMouse=function(e,t){this.cameraState.releaseMouse(e,t)},e.prototype.moveMouse=function(e,t){this.cameraState.moveMouse(e,t)},e.prototype.isEditingState=function(){return this.cameraState.isEditingState()},e.prototype.escape=function(){this.cameraState.escape()},e.prototype.toggleMagnetism=function(e){this.cameraState.toggleMagnetism(e)},e.prototype.setAlignmentActivated=function(e){this.cameraState.setAlignmentActivated(e)},e.prototype.setDuplicationActivated=function(e){this.cameraState.setDuplicationActivated(e)},e.prototype.getObserverCameraState=function(){return this.observerCameraState},e.prototype.getTopCameraState=function(){return this.topCameraState},e}();HomeController3D.__class="com.eteks.sweethome3d.viewcontroller.HomeController3D",HomeController3D.__interfaces=["com.eteks.sweethome3d.viewcontroller.Controller"],function(e){var t=function(){function e(){}return e.prototype.enter=function(){},e.prototype.exit=function(){},e.prototype.moveCamera=function(e){},e.prototype.moveCameraSideways=function(e){},e.prototype.elevateCamera=function(e){},e.prototype.rotateCameraYaw=function(e){},e.prototype.rotateCameraPitch=function(e){},e.prototype.modifyFieldOfView=function(e){},e.prototype.goToCamera=function(e){},e.prototype.isEditingState=function(){return!1},e.prototype.pressMouse=function(e,t,i,n,o,r,l,a){},e.prototype.releaseMouse=function(e,t){},e.prototype.moveMouse=function(e,t){},e.prototype.escape=function(){},e.prototype.toggleMagnetism=function(e){},e.prototype.setAlignmentActivated=function(e){},e.prototype.setDuplicationActivated=function(e){},e.prototype.setEditionActivated=function(e){},e}();e.CameraControllerState=t,t.__class="com.eteks.sweethome3d.viewcontroller.HomeController3D.CameraControllerState";var i=function(){function e(e){void 0===this.topCameraState&&(this.topCameraState=null),this.topCameraState=e}return e.prototype.propertyChange=function(e){var t=this.topCameraState,i=e.getSource();null==t?i.removePropertyChangeListener(e.getPropertyName(),this):t.setAerialViewCenteredOnSelectionEnabled(i.isAerialViewCenteredOnSelectionEnabled())},e}();e.UserPreferencesChangeListener=i,i.__class="com.eteks.sweethome3d.viewcontroller.HomeController3D.UserPreferencesChangeListener";var n=function(e){function t(t){var i=e.call(this)||this;return i.__parent=t,void 0===i.cameraMoved&&(i.cameraMoved=!1),void 0===i.mouseMoved&&(i.mouseMoved=!1),void 0===i.elevationActivated&&(i.elevationActivated=!1),void 0===i.rotationActivated&&(i.rotationActivated=!1),void 0===i.lastMousePressedPoint3D&&(i.lastMousePressedPoint3D=null),void 0===i.distancesRatio&&(i.distancesRatio=0),void 0===i.yLastMousePress&&(i.yLastMousePress=0),void 0===i.angleMousePress&&(i.angleMousePress=null),void 0===i.alignmentActivated&&(i.alignmentActivated=!1),void 0===i.duplicationActivated&&(i.duplicationActivated=!1),void 0===i.magnetismToggled&&(i.magnetismToggled=!1),void 0===i.pointerType&&(i.pointerType=null),void 0===i.movedItems&&(i.movedItems=null),void 0===i.closestMovedPiece&&(i.closestMovedPiece=null),void 0===i.movedItemsStartPoint&&(i.movedItemsStartPoint=null),void 0===i.movedItemsDeltaX&&(i.movedItemsDeltaX=null),void 0===i.movedItemsDeltaY&&(i.movedItemsDeltaY=null),i}return __extends(t,e),t.prototype.moveCamera=function(e){this.cameraMoved=!0},t.prototype.moveCameraSideways=function(e){this.cameraMoved=!0},t.prototype.elevateCamera=function(e){this.cameraMoved=!0},t.prototype.rotateCameraYaw=function(e){this.cameraMoved=!0},t.prototype.rotateCameraPitch=function(e){this.cameraMoved=!0},t.prototype.modifyFieldOfView=function(e){this.cameraMoved=!0},t.prototype.goToCamera=function(e){this.cameraMoved=!0},t}(e.CameraControllerState);e.EditingCameraState=n,n.__class="com.eteks.sweethome3d.viewcontroller.HomeController3D.EditingCameraState";var o=function(t){function i(n,o){var r=t.call(this,n)||this;return r.__parent=n,r.MIN_WIDTH=100,r.MIN_DEPTH=r.MIN_WIDTH,r.MIN_HEIGHT=20,void 0===r.topCamera&&(r.topCamera=null),void 0===r.aerialViewBoundsLowerPoint&&(r.aerialViewBoundsLowerPoint=null),void 0===r.aerialViewBoundsUpperPoint&&(r.aerialViewBoundsUpperPoint=null),void 0===r.minDistanceToAerialViewCenter&&(r.minDistanceToAerialViewCenter=0),void 0===r.maxDistanceToAerialViewCenter&&(r.maxDistanceToAerialViewCenter=0),void 0===r.aerialViewCenteredOnSelectionEnabled&&(r.aerialViewCenteredOnSelectionEnabled=!1),void 0===r.previousSelectionEmpty&&(r.previousSelectionEmpty=!1),r.distanceToCenterWithSelection=-1,r.objectChangeListener=new i.TopCameraState$0(r),r.levelsListener=function(e){e.getType()===CollectionEvent.Type.ADD?e.getItem().addPropertyChangeListener(r.objectChangeListener):e.getType()===CollectionEvent.Type.DELETE&&e.getItem().removePropertyChangeListener(r.objectChangeListener),r.updateCameraFromHomeBounds(!1,!1)},r.wallsListener=function(e){e.getType()===CollectionEvent.Type.ADD?e.getItem().addPropertyChangeListener(r.objectChangeListener):e.getType()===CollectionEvent.Type.DELETE&&e.getItem().removePropertyChangeListener(r.objectChangeListener),r.updateCameraFromHomeBounds(!1,!1)},r.furnitureListener=function(e){e.getType()===CollectionEvent.Type.ADD?(r.addPropertyChangeListener(e.getItem(),r.objectChangeListener),r.updateCameraFromHomeBounds(1===n.home.getFurniture().length&&0==n.home.getWalls().length&&0==n.home.getRooms().length,!1)):e.getType()===CollectionEvent.Type.DELETE&&(r.removePropertyChangeListener(e.getItem(),r.objectChangeListener),r.updateCameraFromHomeBounds(!1,!1))},r.roomsListener=function(e){e.getType()===CollectionEvent.Type.ADD?e.getItem().addPropertyChangeListener(r.objectChangeListener):e.getType()===CollectionEvent.Type.DELETE&&e.getItem().removePropertyChangeListener(r.objectChangeListener),r.updateCameraFromHomeBounds(!1,!1)},r.polylinesListener=function(e){e.getType()===CollectionEvent.Type.ADD?e.getItem().addPropertyChangeListener(r.objectChangeListener):e.getType()===CollectionEvent.Type.DELETE&&e.getItem().removePropertyChangeListener(r.objectChangeListener),r.updateCameraFromHomeBounds(!1,!1)},r.dimensionLinesListener=function(e){e.getType()===CollectionEvent.Type.ADD?e.getItem().addPropertyChangeListener(r.objectChangeListener):e.getType()===CollectionEvent.Type.DELETE&&e.getItem().removePropertyChangeListener(r.objectChangeListener),r.updateCameraFromHomeBounds(!1,!1)},r.labelsListener=function(e){e.getType()===CollectionEvent.Type.ADD?e.getItem().addPropertyChangeListener(r.objectChangeListener):e.getType()===CollectionEvent.Type.DELETE&&e.getItem().removePropertyChangeListener(r.objectChangeListener),r.updateCameraFromHomeBounds(!1,!1)},r.selectionListener=new i.TopCameraState$1(r),void 0===r.userPreferencesChangeListener&&(r.userPreferencesChangeListener=null),r.userPreferencesChangeListener=new e.UserPreferencesChangeListener(r),r}return __extends(i,t),i.prototype.addPropertyChangeListener=function(e,t){if(null!=e&&e instanceof HomeFurnitureGroup)for(var i=e.getFurniture(),n=0;n<i.length;n++){var o=i[n];this.addPropertyChangeListener(o,t)}else e.addPropertyChangeListener(t)},i.prototype.removePropertyChangeListener=function(e,t){if(null!=e&&e instanceof HomeFurnitureGroup)for(var i=e.getFurniture(),n=0;n<i.length;n++){var o=i[n];this.removePropertyChangeListener(o,t)}else e.removePropertyChangeListener(t)},i.prototype.enter=function(){this.topCamera=this.__parent.home.getCamera(),this.previousSelectionEmpty=0==this.__parent.home.getSelectedItems().length,this.aerialViewCenteredOnSelectionEnabled=this.__parent.preferences.isAerialViewCenteredOnSelectionEnabled(),this.updateCameraFromHomeBounds(!1,!1);for(var e,t=this.__parent.home.getLevels(),i=0;i<t.length;i++){t[i].addPropertyChangeListener(this.objectChangeListener)}this.__parent.home.addLevelsListener(null==(e=this.levelsListener)||"function"==typeof e?e:function(t){return(e.collectionChanged?e.collectionChanged:e).call(e,t)});for(t=this.__parent.home.getWalls(),i=0;i<t.length;i++){t[i].addPropertyChangeListener(this.objectChangeListener)}this.__parent.home.addWallsListener(function(e){return null==e||"function"==typeof e?e:function(t){return(e.collectionChanged?e.collectionChanged:e).call(e,t)}}(this.wallsListener));for(t=this.__parent.home.getFurniture(),i=0;i<t.length;i++){var n=t[i];this.addPropertyChangeListener(n,this.objectChangeListener)}this.__parent.home.addFurnitureListener(function(e){return null==e||"function"==typeof e?e:function(t){return(e.collectionChanged?e.collectionChanged:e).call(e,t)}}(this.furnitureListener));for(t=this.__parent.home.getRooms(),i=0;i<t.length;i++){t[i].addPropertyChangeListener(this.objectChangeListener)}this.__parent.home.addRoomsListener(function(e){return null==e||"function"==typeof e?e:function(t){return(e.collectionChanged?e.collectionChanged:e).call(e,t)}}(this.roomsListener));for(t=this.__parent.home.getPolylines(),i=0;i<t.length;i++){t[i].addPropertyChangeListener(this.objectChangeListener)}this.__parent.home.addPolylinesListener(function(e){return null==e||"function"==typeof e?e:function(t){return(e.collectionChanged?e.collectionChanged:e).call(e,t)}}(this.polylinesListener));for(t=this.__parent.home.getDimensionLines(),i=0;i<t.length;i++){t[i].addPropertyChangeListener(this.objectChangeListener)}this.__parent.home.addDimensionLinesListener(function(e){return null==e||"function"==typeof e?e:function(t){return(e.collectionChanged?e.collectionChanged:e).call(e,t)}}(this.dimensionLinesListener));for(t=this.__parent.home.getLabels(),i=0;i<t.length;i++){t[i].addPropertyChangeListener(this.objectChangeListener)}this.__parent.home.addLabelsListener(function(e){return null==e||"function"==typeof e?e:function(t){return(e.collectionChanged?e.collectionChanged:e).call(e,t)}}(this.labelsListener)),this.__parent.home.addSelectionListener(this.selectionListener),this.__parent.preferences.addPropertyChangeListener("AERIAL_VIEW_CENTERED_ON_SELECTION_ENABLED",this.userPreferencesChangeListener)},i.prototype.setAerialViewCenteredOnSelectionEnabled=function(e){this.aerialViewCenteredOnSelectionEnabled=e,this.updateCameraFromHomeBounds(!1,!1)},i.prototype.updateCameraFromHomeBounds=function(e,t){null==this.aerialViewBoundsLowerPoint&&this.updateAerialViewBoundsFromHomeBounds(this.aerialViewCenteredOnSelectionEnabled);var i=void 0;i=t&&this.__parent.preferences.isAerialViewCenteredOnSelectionEnabled()&&-1!==this.distanceToCenterWithSelection?this.distanceToCenterWithSelection:this.getCameraToAerialViewCenterDistance(),0!=this.__parent.home.getSelectedItems().length&&(this.distanceToCenterWithSelection=i),this.updateAerialViewBoundsFromHomeBounds(this.aerialViewCenteredOnSelectionEnabled),this.updateCameraIntervalToAerialViewCenter(),this.placeCameraAt(i,e)},i.prototype.getCameraToAerialViewCenterDistance=function(){return Math.sqrt(Math.pow((this.aerialViewBoundsLowerPoint[0]+this.aerialViewBoundsUpperPoint[0])/2-this.topCamera.getX(),2)+Math.pow((this.aerialViewBoundsLowerPoint[1]+this.aerialViewBoundsUpperPoint[1])/2-this.topCamera.getY(),2)+Math.pow((this.aerialViewBoundsLowerPoint[2]+this.aerialViewBoundsUpperPoint[2])/2-this.topCamera.getZ(),2))},i.prototype.updateAerialViewBoundsFromHomeBounds=function(e){this.aerialViewBoundsLowerPoint=this.aerialViewBoundsUpperPoint=null;var t=[];if(e){t=[];for(var i=this.__parent.home.getSelectedItems(),n=0;n<i.length;n++){var o=i[n];!(null!=o&&null!=o.constructor&&null!=o.constructor.__interfaces&&o.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Elevatable")>=0&&this.isItemAtVisibleLevel(o))||null!=o&&o instanceof HomePieceOfFurniture&&!o.isVisible()||null!=o&&o instanceof Polyline&&!o.isVisibleIn3D()||null!=o&&o instanceof DimensionLine&&!o.isVisibleIn3D()||null!=o&&o instanceof Label&&null==o.getPitch()||t.push(o)}}var r=0===t.length||!e,l=!1;for(i=r?this.__parent.home.getWalls():Home.getWallsSubList(t),n=0;n<i.length;n++){var a=i[n];if(this.isItemAtVisibleLevel(a)){l=!0;var s=null!=a.getLevel()?a.getLevel().getElevation():0,h=r?0:s,u=a.getHeight(),d=void 0;d=null!=u?s+u:s+this.__parent.home.getWallHeight();var c=a.getHeightAtEnd();null!=c&&(d=Math.max(d,s+c));for(var p=a.getPoints$(),g=0;g<p.length;g++){var v=p[g];this.updateAerialViewBounds(v[0],v[1],h,d)}}}for(i=r?this.__parent.home.getFurniture():Home.getFurnitureSubList(t),n=0;n<i.length;n++){var f=i[n];if(f.isVisible()&&this.isItemAtVisibleLevel(f)){h=void 0,d=void 0;r?(h=Math.max(0,f.getGroundElevation()),d=Math.max(0,f.getGroundElevation()+f.getHeightInPlan())):(h=f.getGroundElevation(),d=f.getGroundElevation()+f.getHeightInPlan());for(p=f.getPoints(),g=0;g<p.length;g++){v=p[g];this.updateAerialViewBounds(v[0],v[1],h,d)}}}for(i=r?this.__parent.home.getRooms():Home.getRoomsSubList(t),n=0;n<i.length;n++){var m=i[n];if(this.isItemAtVisibleLevel(m)){h=0,d=this.MIN_HEIGHT;var y=m.getLevel();null!=y&&(h=y.getElevation()-y.getFloorThickness(),d=y.getElevation(),r&&(h=Math.max(0,h),d=Math.max(this.MIN_HEIGHT,y.getElevation())));for(p=m.getPoints(),g=0;g<p.length;g++){v=p[g];this.updateAerialViewBounds(v[0],v[1],h,d)}}}for(i=r?this.__parent.home.getPolylines():Home.getPolylinesSubList(t),n=0;n<i.length;n++){var C=i[n];if(C.isVisibleIn3D()&&this.isItemAtVisibleLevel(C)){h=void 0,d=void 0;r?(h=Math.max(0,C.getGroundElevation()),d=Math.max(this.MIN_HEIGHT,C.getGroundElevation())):h=d=C.getGroundElevation();for(p=C.getPoints(),g=0;g<p.length;g++){v=p[g];this.updateAerialViewBounds(v[0],v[1],h,d)}}}for(i=r?this.__parent.home.getDimensionLines():Home.getDimensionLinesSubList(t),n=0;n<i.length;n++){var S=i[n];if(S.isVisibleIn3D()&&this.isItemAtVisibleLevel(S)){var E=null!=S.getLevel()?S.getLevel().getElevation():0;h=void 0,d=void 0;r?(h=Math.max(0,E+S.getElevationStart()),d=Math.max(this.MIN_HEIGHT,E+S.getElevationEnd())):(h=E+S.getElevationStart(),d=E+S.getElevationEnd());for(p=S.getPoints(),g=0;g<p.length;g++){v=p[g];this.updateAerialViewBounds(v[0],v[1],h,d)}}}for(i=r?this.__parent.home.getLabels():Home.getLabelsSubList(t),n=0;n<i.length;n++){var A=i[n];if(null!=A.getPitch()&&this.isItemAtVisibleLevel(A)){h=void 0,d=void 0;r?(h=Math.max(0,A.getGroundElevation()),d=Math.max(this.MIN_HEIGHT,A.getGroundElevation())):h=d=A.getGroundElevation();for(p=A.getPoints(),g=0;g<p.length;g++){v=p[g];this.updateAerialViewBounds(v[0],v[1],h,d)}}}null==this.aerialViewBoundsLowerPoint?(this.aerialViewBoundsLowerPoint=[0,0,0],this.aerialViewBoundsUpperPoint=[this.MIN_WIDTH,this.MIN_DEPTH,this.MIN_HEIGHT]):l&&r&&(this.MIN_WIDTH>this.aerialViewBoundsUpperPoint[0]-this.aerialViewBoundsLowerPoint[0]&&(this.aerialViewBoundsLowerPoint[0]=(this.aerialViewBoundsLowerPoint[0]+this.aerialViewBoundsUpperPoint[0])/2-this.MIN_WIDTH/2,this.aerialViewBoundsUpperPoint[0]=this.aerialViewBoundsLowerPoint[0]+this.MIN_WIDTH),this.MIN_DEPTH>this.aerialViewBoundsUpperPoint[1]-this.aerialViewBoundsLowerPoint[1]&&(this.aerialViewBoundsLowerPoint[1]=(this.aerialViewBoundsLowerPoint[1]+this.aerialViewBoundsUpperPoint[1])/2-this.MIN_DEPTH/2,this.aerialViewBoundsUpperPoint[1]=this.aerialViewBoundsLowerPoint[1]+this.MIN_DEPTH),this.MIN_HEIGHT>this.aerialViewBoundsUpperPoint[2]-this.aerialViewBoundsLowerPoint[2]&&(this.aerialViewBoundsLowerPoint[2]=(this.aerialViewBoundsLowerPoint[2]+this.aerialViewBoundsUpperPoint[2])/2-this.MIN_HEIGHT/2,this.aerialViewBoundsUpperPoint[2]=this.aerialViewBoundsLowerPoint[2]+this.MIN_HEIGHT))},i.prototype.updateAerialViewBounds=function(e,t,i,n){null==this.aerialViewBoundsLowerPoint?(this.aerialViewBoundsLowerPoint=[e,t,i],this.aerialViewBoundsUpperPoint=[e,t,n]):(this.aerialViewBoundsLowerPoint[0]=Math.min(this.aerialViewBoundsLowerPoint[0],e),this.aerialViewBoundsUpperPoint[0]=Math.max(this.aerialViewBoundsUpperPoint[0],e),this.aerialViewBoundsLowerPoint[1]=Math.min(this.aerialViewBoundsLowerPoint[1],t),this.aerialViewBoundsUpperPoint[1]=Math.max(this.aerialViewBoundsUpperPoint[1],t),this.aerialViewBoundsLowerPoint[2]=Math.min(this.aerialViewBoundsLowerPoint[2],i),this.aerialViewBoundsUpperPoint[2]=Math.max(this.aerialViewBoundsUpperPoint[2],n))},i.prototype.isItemAtVisibleLevel=function(e){return null==e.getLevel()||e.getLevel().isViewableAndVisible()},i.prototype.updateCameraIntervalToAerialViewCenter=function(){var e=this.aerialViewBoundsUpperPoint[0]-this.aerialViewBoundsLowerPoint[0],t=this.aerialViewBoundsUpperPoint[1]-this.aerialViewBoundsLowerPoint[1],i=this.aerialViewBoundsUpperPoint[2]-this.aerialViewBoundsLowerPoint[2],n=Math.sqrt(e*e+t*t+i*i)/2;this.minDistanceToAerialViewCenter=1.05*n,this.maxDistanceToAerialViewCenter=Math.max(5*this.minDistanceToAerialViewCenter,5e3)},i.prototype.moveCamera=function(e){t.prototype.moveCamera.call(this,e),e*=5;var i=this.getCameraToAerialViewCenterDistance()-e;this.placeCameraAt(i,!1)},i.prototype.placeCameraAt=function(e,t){e=Math.max(e,this.minDistanceToAerialViewCenter),e=Math.min(e,this.maxDistanceToAerialViewCenter),t&&(e=Math.min(e,3*this.minDistanceToAerialViewCenter));var i=e*Math.cos(this.topCamera.getPitch());this.topCamera.setX((this.aerialViewBoundsLowerPoint[0]+this.aerialViewBoundsUpperPoint[0])/2+Math.sin(this.topCamera.getYaw())*i),this.topCamera.setY((this.aerialViewBoundsLowerPoint[1]+this.aerialViewBoundsUpperPoint[1])/2-Math.cos(this.topCamera.getYaw())*i),this.topCamera.setZ((this.aerialViewBoundsLowerPoint[2]+this.aerialViewBoundsUpperPoint[2])/2+Math.sin(this.topCamera.getPitch())*e)},i.prototype.rotateCameraYaw=function(e){t.prototype.rotateCameraYaw.call(this,e);var i=this.topCamera.getYaw()+e,n=this.getCameraToAerialViewCenterDistance()*Math.cos(this.topCamera.getPitch());this.topCamera.setYaw(i),this.topCamera.setX((this.aerialViewBoundsLowerPoint[0]+this.aerialViewBoundsUpperPoint[0])/2+Math.sin(i)*n),this.topCamera.setY((this.aerialViewBoundsLowerPoint[1]+this.aerialViewBoundsUpperPoint[1])/2-Math.cos(i)*n)},i.prototype.rotateCameraPitch=function(e){t.prototype.rotateCameraPitch.call(this,e);var i=this.topCamera.getPitch()+e;i=Math.max(i,0),i=Math.min(i,Math.PI/2);var n=this.getCameraToAerialViewCenterDistance(),o=n*Math.cos(i);this.topCamera.setPitch(i),this.topCamera.setX((this.aerialViewBoundsLowerPoint[0]+this.aerialViewBoundsUpperPoint[0])/2+Math.sin(this.topCamera.getYaw())*o),this.topCamera.setY((this.aerialViewBoundsLowerPoint[1]+this.aerialViewBoundsUpperPoint[1])/2-Math.cos(this.topCamera.getYaw())*o),this.topCamera.setZ((this.aerialViewBoundsLowerPoint[2]+this.aerialViewBoundsUpperPoint[2])/2+n*Math.sin(i))},i.prototype.goToCamera=function(e){t.prototype.goToCamera.call(this,e),this.topCamera.setCamera(e),this.topCamera.setTime(e.getTime()),this.topCamera.setLens(e.getLens()),this.topCamera.setRenderer(e.getRenderer()),this.updateCameraFromHomeBounds(!1,!1)},i.prototype.releaseMouse=function(e,t){this.updateCameraFromHomeBounds(!1,!1)},i.prototype.exit=function(){this.topCamera=null;for(var e,t=this.__parent.home.getWalls(),i=0;i<t.length;i++){t[i].removePropertyChangeListener(this.objectChangeListener)}this.__parent.home.removeWallsListener(null==(e=this.wallsListener)||"function"==typeof e?e:function(t){return(e.collectionChanged?e.collectionChanged:e).call(e,t)});for(t=this.__parent.home.getFurniture(),i=0;i<t.length;i++){var n=t[i];this.removePropertyChangeListener(n,this.objectChangeListener)}this.__parent.home.removeFurnitureListener(function(e){return null==e||"function"==typeof e?e:function(t){return(e.collectionChanged?e.collectionChanged:e).call(e,t)}}(this.furnitureListener));for(t=this.__parent.home.getRooms(),i=0;i<t.length;i++){t[i].removePropertyChangeListener(this.objectChangeListener)}this.__parent.home.removeRoomsListener(function(e){return null==e||"function"==typeof e?e:function(t){return(e.collectionChanged?e.collectionChanged:e).call(e,t)}}(this.roomsListener));for(t=this.__parent.home.getPolylines(),i=0;i<t.length;i++){t[i].removePropertyChangeListener(this.objectChangeListener)}this.__parent.home.removePolylinesListener(function(e){return null==e||"function"==typeof e?e:function(t){return(e.collectionChanged?e.collectionChanged:e).call(e,t)}}(this.polylinesListener));for(t=this.__parent.home.getDimensionLines(),i=0;i<t.length;i++){t[i].removePropertyChangeListener(this.objectChangeListener)}this.__parent.home.removeDimensionLinesListener(function(e){return null==e||"function"==typeof e?e:function(t){return(e.collectionChanged?e.collectionChanged:e).call(e,t)}}(this.dimensionLinesListener));for(t=this.__parent.home.getLabels(),i=0;i<t.length;i++){t[i].removePropertyChangeListener(this.objectChangeListener)}this.__parent.home.removeLabelsListener(function(e){return null==e||"function"==typeof e?e:function(t){return(e.collectionChanged?e.collectionChanged:e).call(e,t)}}(this.labelsListener));for(t=this.__parent.home.getLevels(),i=0;i<t.length;i++){t[i].removePropertyChangeListener(this.objectChangeListener)}this.__parent.home.removeLevelsListener(function(e){return null==e||"function"==typeof e?e:function(t){return(e.collectionChanged?e.collectionChanged:e).call(e,t)}}(this.levelsListener)),this.__parent.home.removeSelectionListener(this.selectionListener),this.__parent.preferences.removePropertyChangeListener("AERIAL_VIEW_CENTERED_ON_SELECTION_ENABLED",this.userPreferencesChangeListener)},i}(e.EditingCameraState);e.TopCameraState=o,o.__class="com.eteks.sweethome3d.viewcontroller.HomeController3D.TopCameraState",function(e){var t=function(){function e(e){this.__parent=e}return e.prototype.propertyChange=function(e){this.__parent.updateCameraFromHomeBounds(!1,!1)},e}();e.TopCameraState$0=t;var i=function(){function e(e){this.__parent=e}return e.prototype.selectionChanged=function(e){var t=0==e.getSelectedItems().length;this.__parent.updateCameraFromHomeBounds(!1,this.__parent.previousSelectionEmpty&&!t),this.__parent.previousSelectionEmpty=t},e}();e.TopCameraState$1=i,i.__interfaces=["com.eteks.sweethome3d.model.SelectionListener"]}(o=e.TopCameraState||(e.TopCameraState={}));var r,l,a=function(e){function t(i){var n=e.call(this,i)||this;return n.__parent=i,void 0===n.observerCamera&&(n.observerCamera=null),n.levelElevationChangeListener=new t.ObserverCameraState$0(n),n.levelsListener=function(e){e.getType()===CollectionEvent.Type.ADD?e.getItem().addPropertyChangeListener(n.levelElevationChangeListener):e.getType()===CollectionEvent.Type.DELETE&&e.getItem().removePropertyChangeListener(n.levelElevationChangeListener),n.updateCameraMinimumElevation()},n}return __extends(t,e),t.prototype.enter=function(){this.observerCamera=this.__parent.home.getCamera();for(var e,t=this.__parent.home.getLevels(),i=0;i<t.length;i++){t[i].addPropertyChangeListener(this.levelElevationChangeListener)}this.__parent.home.addLevelsListener(null==(e=this.levelsListener)||"function"==typeof e?e:function(t){return(e.collectionChanged?e.collectionChanged:e).call(e,t)}),this.selectCamera()},t.prototype.selectCamera=function(){if(this.__parent.preferences.isObserverCameraSelectedAtChange()){var e=this.__parent.home.getSelectedItems();(!this.__parent.preferences.isEditingIn3DViewEnabled()||0==e.length||1===e.length&&e[0]===this.observerCamera)&&this.__parent.home.setSelectedItems([this.observerCamera].slice(0))}},t.prototype.moveCamera=function(t){e.prototype.moveCamera.call(this,t),this.observerCamera.setX(this.observerCamera.getX()-Math.sin(this.observerCamera.getYaw())*t),this.observerCamera.setY(this.observerCamera.getY()+Math.cos(this.observerCamera.getYaw())*t),this.selectCamera()},t.prototype.moveCameraSideways=function(t){e.prototype.moveCameraSideways.call(this,t),this.observerCamera.setX(this.observerCamera.getX()-Math.cos(this.observerCamera.getYaw())*t),this.observerCamera.setY(this.observerCamera.getY()-Math.sin(this.observerCamera.getYaw())*t),this.selectCamera()},t.prototype.elevateCamera=function(t){e.prototype.elevateCamera.call(this,t);var i=this.observerCamera.getZ()+t;i=Math.min(Math.max(i,this.getMinimumElevation()),this.__parent.preferences.getLengthUnit().getMaximumElevation()),this.observerCamera.setZ(i),this.selectCamera()},t.prototype.updateCameraMinimumElevation=function(){this.observerCamera.setZ(Math.max(this.observerCamera.getZ(),this.getMinimumElevation()))},t.prototype.getMinimumElevation=function(){var e=this.__parent.home.getLevels();return e.length>0?10+e[0].getElevation():10},t.prototype.rotateCameraYaw=function(t){e.prototype.rotateCameraYaw.call(this,t),this.observerCamera.setYaw(this.observerCamera.getYaw()+t),this.selectCamera()},t.prototype.rotateCameraPitch=function(t){e.prototype.rotateCameraPitch.call(this,t);var i=this.observerCamera.getPitch()+t;i=Math.min(Math.max(-Math.PI/2,i),Math.PI/2),this.observerCamera.setPitch(i),this.selectCamera()},t.prototype.modifyFieldOfView=function(t){e.prototype.modifyFieldOfView.call(this,t);var i=this.observerCamera.getFieldOfView()+t;i=Math.min(Math.max(2*Math.PI/180,i),120*Math.PI/180),this.observerCamera.setFieldOfView(i),this.selectCamera()},t.prototype.goToCamera=function(t){e.prototype.goToCamera.call(this,t),this.observerCamera.setCamera(t),this.observerCamera.setTime(t.getTime()),this.observerCamera.setLens(t.getLens()),this.observerCamera.setRenderer(t.getRenderer())},t.prototype.exit=function(){var e,t,i=this,n=this.__parent.home.getSelectedItems();n.indexOf(this.observerCamera)>=0&&(n=n.slice(0),(t=(e=n).indexOf(i.observerCamera))>=0&&e.splice(t,1),this.__parent.home.setSelectedItems(n));for(var o=this.__parent.home.getLevels(),r=0;r<o.length;r++){o[r].removePropertyChangeListener(this.levelElevationChangeListener)}this.__parent.home.removeLevelsListener(function(e){return null==e||"function"==typeof e?e:function(t){return(e.collectionChanged?e.collectionChanged:e).call(e,t)}}(this.levelsListener)),this.observerCamera=null},t}(e.EditingCameraState);e.ObserverCameraState=a,a.__class="com.eteks.sweethome3d.viewcontroller.HomeController3D.ObserverCameraState",r=a=e.ObserverCameraState||(e.ObserverCameraState={}),l=function(){function e(e){this.__parent=e}return e.prototype.propertyChange=function(e){"ELEVATION"===e.getPropertyName()&&this.__parent.updateCameraMinimumElevation()},e}(),r.ObserverCameraState$0=l;var s=function(){function e(e,t){this.home=t,this.__parent=e}return e.prototype.propertyChange=function(e){this.__parent.setCameraState(this.home.getCamera()===this.home.getTopCamera()?this.__parent.topCameraState:this.__parent.observerCameraState)},e}();e.HomeController3D$0=s;var h=function(){function e(e,t){this.home=t,this.__parent=e}return e.prototype.propertyChange=function(e){"ELEVATION"===e.getPropertyName()&&this.home.getEnvironment().isObserverCameraElevationAdjusted()&&this.home.getObserverCamera().setZ(Math.max(this.__parent.getObserverCameraMinimumElevation(this.home),this.home.getObserverCamera().getZ()+e.getNewValue()-e.getOldValue()))},e}();e.HomeController3D$1=h;var u=function(){function e(e,t,i){this.home=t,this.levelElevationChangeListener=i,this.__parent=e}return e.prototype.propertyChange=function(e){var t=e.getOldValue(),i=this.home.getSelectedLevel();this.home.getEnvironment().isObserverCameraElevationAdjusted()&&this.home.getObserverCamera().setZ(Math.max(this.__parent.getObserverCameraMinimumElevation(this.home),this.home.getObserverCamera().getZ()+(null==i?0:i.getElevation())-(null==t?0:t.getElevation()))),null!=t&&t.removePropertyChangeListener(this.levelElevationChangeListener),null!=i&&i.addPropertyChangeListener(this.levelElevationChangeListener)},e}();e.HomeController3D$2=u;var d=function(){function e(e,t){this.home=t,this.__parent=e}return e.prototype.propertyChange=function(e){for(var t=this.home.getLevels(),i=this.home.getSelectedLevel(),n=!0,o=0;o<t.length;o++)t[o].setVisible(n),t[o]!==i||this.home.getEnvironment().isAllLevelsVisible()||(n=!1)},e}();e.HomeController3D$3=d}(HomeController3D||(HomeController3D={})),function(e){var t;(t=e.PointerType||(e.PointerType={}))[t.MOUSE=0]="MOUSE",t[t.TOUCH=1]="TOUCH"}(View||(View={}));var Room=function(e){function t(t,i){var n=this;if("string"!=typeof t&&null!==t||!(null!=i&&i instanceof Array&&(0==i.length||null==i[0]||i[0]instanceof Array)||null===i)){if(!(null!=t&&t instanceof Array&&(0==t.length||null==t[0]||t[0]instanceof Array)||null===t)||void 0!==i)throw new Error("invalid overload");var o=arguments[0],r=HomeObject.createId("room");if(void 0===(n=e.call(this,r)||this).name&&(n.name=null),void 0===n.nameXOffset&&(n.nameXOffset=0),void 0===n.nameYOffset&&(n.nameYOffset=0),void 0===n.nameStyle&&(n.nameStyle=null),void 0===n.nameAngle&&(n.nameAngle=0),void 0===n.points&&(n.points=null),void 0===n.areaVisible&&(n.areaVisible=!1),void 0===n.areaXOffset&&(n.areaXOffset=0),void 0===n.areaYOffset&&(n.areaYOffset=0),void 0===n.areaStyle&&(n.areaStyle=null),void 0===n.areaAngle&&(n.areaAngle=0),void 0===n.floorVisible&&(n.floorVisible=!1),void 0===n.floorColor&&(n.floorColor=null),void 0===n.floorTexture&&(n.floorTexture=null),void 0===n.floorShininess&&(n.floorShininess=0),void 0===n.ceilingVisible&&(n.ceilingVisible=!1),void 0===n.ceilingColor&&(n.ceilingColor=null),void 0===n.ceilingTexture&&(n.ceilingTexture=null),void 0===n.ceilingShininess&&(n.ceilingShininess=0),void 0===n.ceilingFlat&&(n.ceilingFlat=!1),void 0===n.level&&(n.level=null),void 0===n.shapeCache&&(n.shapeCache=null),void 0===n.boundsCache&&(n.boundsCache=null),void 0===n.areaCache&&(n.areaCache=null),o.length<=1)throw new IllegalStateException("Room points must containt at least two points");n.points=n.deepCopy(o),n.areaVisible=!0,n.nameYOffset=-40,n.floorVisible=!0,n.ceilingVisible=!0,n.ceilingFlat=!0,void 0===n.name&&(n.name=null),void 0===n.nameXOffset&&(n.nameXOffset=0),void 0===n.nameYOffset&&(n.nameYOffset=0),void 0===n.nameStyle&&(n.nameStyle=null),void 0===n.nameAngle&&(n.nameAngle=0),void 0===n.points&&(n.points=null),void 0===n.areaVisible&&(n.areaVisible=!1),void 0===n.areaXOffset&&(n.areaXOffset=0),void 0===n.areaYOffset&&(n.areaYOffset=0),void 0===n.areaStyle&&(n.areaStyle=null),void 0===n.areaAngle&&(n.areaAngle=0),void 0===n.floorVisible&&(n.floorVisible=!1),void 0===n.floorColor&&(n.floorColor=null),void 0===n.floorTexture&&(n.floorTexture=null),void 0===n.floorShininess&&(n.floorShininess=0),void 0===n.ceilingVisible&&(n.ceilingVisible=!1),void 0===n.ceilingColor&&(n.ceilingColor=null),void 0===n.ceilingTexture&&(n.ceilingTexture=null),void 0===n.ceilingShininess&&(n.ceilingShininess=0),void 0===n.ceilingFlat&&(n.ceilingFlat=!1),void 0===n.level&&(n.level=null),void 0===n.shapeCache&&(n.shapeCache=null),void 0===n.boundsCache&&(n.boundsCache=null),void 0===n.areaCache&&(n.areaCache=null)}else{if(void 0===(n=e.call(this,t)||this).name&&(n.name=null),void 0===n.nameXOffset&&(n.nameXOffset=0),void 0===n.nameYOffset&&(n.nameYOffset=0),void 0===n.nameStyle&&(n.nameStyle=null),void 0===n.nameAngle&&(n.nameAngle=0),void 0===n.points&&(n.points=null),void 0===n.areaVisible&&(n.areaVisible=!1),void 0===n.areaXOffset&&(n.areaXOffset=0),void 0===n.areaYOffset&&(n.areaYOffset=0),void 0===n.areaStyle&&(n.areaStyle=null),void 0===n.areaAngle&&(n.areaAngle=0),void 0===n.floorVisible&&(n.floorVisible=!1),void 0===n.floorColor&&(n.floorColor=null),void 0===n.floorTexture&&(n.floorTexture=null),void 0===n.floorShininess&&(n.floorShininess=0),void 0===n.ceilingVisible&&(n.ceilingVisible=!1),void 0===n.ceilingColor&&(n.ceilingColor=null),void 0===n.ceilingTexture&&(n.ceilingTexture=null),void 0===n.ceilingShininess&&(n.ceilingShininess=0),void 0===n.ceilingFlat&&(n.ceilingFlat=!1),void 0===n.level&&(n.level=null),void 0===n.shapeCache&&(n.shapeCache=null),void 0===n.boundsCache&&(n.boundsCache=null),void 0===n.areaCache&&(n.areaCache=null),i.length<=1)throw new IllegalStateException("Room points must containt at least two points");n.points=n.deepCopy(i),n.areaVisible=!0,n.nameYOffset=-40,n.floorVisible=!0,n.ceilingVisible=!0,n.ceilingFlat=!0}return n}return __extends(t,e),t.TWICE_PI_$LI$=function(){return null==t.TWICE_PI&&(t.TWICE_PI=2*Math.PI),t.TWICE_PI},t.prototype.getName=function(){return this.name},t.prototype.setName=function(e){if(e!==this.name&&(null==e||e!==this.name)){var t=this.name;this.name=e,this.firePropertyChange("NAME",t,e)}},t.prototype.getNameXOffset=function(){return this.nameXOffset},t.prototype.setNameXOffset=function(e){if(e!==this.nameXOffset){var t=this.nameXOffset;this.nameXOffset=e,this.firePropertyChange("NAME_X_OFFSET",t,e)}},t.prototype.getNameYOffset=function(){return this.nameYOffset},t.prototype.setNameYOffset=function(e){if(e!==this.nameYOffset){var t=this.nameYOffset;this.nameYOffset=e,this.firePropertyChange("NAME_Y_OFFSET",t,e)}},t.prototype.getNameStyle=function(){return this.nameStyle},t.prototype.setNameStyle=function(e){if(e!==this.nameStyle){var t=this.nameStyle;this.nameStyle=e,this.firePropertyChange("NAME_STYLE",t,e)}},t.prototype.getNameAngle=function(){return this.nameAngle},t.prototype.setNameAngle=function(e){if((e=(e%t.TWICE_PI_$LI$()+t.TWICE_PI_$LI$())%t.TWICE_PI_$LI$())!==this.nameAngle){var i=this.nameAngle;this.nameAngle=e,this.firePropertyChange("NAME_ANGLE",i,e)}},t.prototype.getPoints=function(){return this.deepCopy(this.points)},t.prototype.getPointCount=function(){return this.points.length},t.prototype.deepCopy=function(e){for(var t=function(e){for(var t=[];e-- >0;)t.push(null);return t}(e.length),i=0;i<e.length;i++)t[i]=e[i].slice(0);return t},t.prototype.setPoints=function(e){JSON.stringify(this.points)!==JSON.stringify(e)&&this.updatePoints(e)},t.prototype.updatePoints=function(e){var t=this.points;this.points=this.deepCopy(e),this.shapeCache=null,this.boundsCache=null,this.areaCache=null,this.firePropertyChange("POINTS",t,e)},t.prototype.addPoint$float$float=function(e,t){this.addPoint$float$float$int(e,t,this.points.length)},t.prototype.addPoint$float$float$int=function(e,t,i){if(i<0||i>this.points.length)throw Object.defineProperty(new Error("Invalid index "+i),"__classes",{configurable:!0,value:["java.lang.Throwable","java.lang.IndexOutOfBoundsException","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]});var n=function(e){for(var t=[];e-- >0;)t.push(null);return t}(this.points.length+1);!function(e,t,i,n,o){if(e!==i||n>=t+o)for(;--o>=0;)i[n++]=e[t++];else for(var r=e.slice(t,t+o),l=0;l<o;l++)i[n++]=r[l]}(this.points,0,n,0,i),n[i]=[e,t],function(e,t,i,n,o){if(e!==i||n>=t+o)for(;--o>=0;)i[n++]=e[t++];else for(var r=e.slice(t,t+o),l=0;l<o;l++)i[n++]=r[l]}(this.points,i,n,i+1,this.points.length-i);var o=this.points;this.points=n,this.shapeCache=null,this.boundsCache=null,this.areaCache=null,this.firePropertyChange("POINTS",o,this.deepCopy(this.points))},t.prototype.addPoint=function(e,t,i){if("number"!=typeof e&&null!==e||"number"!=typeof t&&null!==t||"number"!=typeof i&&null!==i){if("number"!=typeof e&&null!==e||"number"!=typeof t&&null!==t||void 0!==i)throw new Error("invalid overload");return this.addPoint$float$float(e,t)}return this.addPoint$float$float$int(e,t,i)},t.prototype.setPoint=function(e,t,i){if(i<0||i>=this.points.length)throw Object.defineProperty(new Error("Invalid index "+i),"__classes",{configurable:!0,value:["java.lang.Throwable","java.lang.IndexOutOfBoundsException","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]});if(this.points[i][0]!==e||this.points[i][1]!==t){var n=this.points;this.points=this.deepCopy(this.points),this.points[i][0]=e,this.points[i][1]=t,this.shapeCache=null,this.boundsCache=null,this.areaCache=null,this.firePropertyChange("POINTS",n,this.deepCopy(this.points))}},t.prototype.removePoint=function(e){if(e<0||e>=this.points.length)throw Object.defineProperty(new Error("Invalid index "+e),"__classes",{configurable:!0,value:["java.lang.Throwable","java.lang.IndexOutOfBoundsException","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]});if(this.points.length<=1)throw new IllegalStateException("Room points must containt at least one point");var t=function(e){for(var t=[];e-- >0;)t.push(null);return t}(this.points.length-1);!function(e,t,i,n,o){if(e!==i||n>=t+o)for(;--o>=0;)i[n++]=e[t++];else for(var r=e.slice(t,t+o),l=0;l<o;l++)i[n++]=r[l]}(this.points,0,t,0,e),function(e,t,i,n,o){if(e!==i||n>=t+o)for(;--o>=0;)i[n++]=e[t++];else for(var r=e.slice(t,t+o),l=0;l<o;l++)i[n++]=r[l]}(this.points,e+1,t,e,this.points.length-e-1);var i=this.points;this.points=t,this.shapeCache=null,this.boundsCache=null,this.areaCache=null,this.firePropertyChange("POINTS",i,this.deepCopy(this.points))},t.prototype.getBoundsMinimumCoordinates=function(){return null==this.boundsCache&&(this.boundsCache=this.getShape().getBounds2D()),[this.boundsCache.getMinX(),this.boundsCache.getMinY()]},t.prototype.getBoundsMaximumCoordinates=function(){return null==this.boundsCache&&(this.boundsCache=this.getShape().getBounds2D()),[this.boundsCache.getMaxX(),this.boundsCache.getMaxY()]},t.prototype.isAreaVisible=function(){return this.areaVisible},t.prototype.setAreaVisible=function(e){e!==this.areaVisible&&(this.areaVisible=e,this.firePropertyChange("AREA_VISIBLE",!e,e))},t.prototype.getAreaXOffset=function(){return this.areaXOffset},t.prototype.setAreaXOffset=function(e){if(e!==this.areaXOffset){var t=this.areaXOffset;this.areaXOffset=e,this.firePropertyChange("AREA_X_OFFSET",t,e)}},t.prototype.getAreaYOffset=function(){return this.areaYOffset},t.prototype.setAreaYOffset=function(e){if(e!==this.areaYOffset){var t=this.areaYOffset;this.areaYOffset=e,this.firePropertyChange("AREA_Y_OFFSET",t,e)}},t.prototype.getAreaStyle=function(){return this.areaStyle},t.prototype.setAreaStyle=function(e){if(e!==this.areaStyle){var t=this.areaStyle;this.areaStyle=e,this.firePropertyChange("AREA_STYLE",t,e)}},t.prototype.getAreaAngle=function(){return this.areaAngle},t.prototype.setAreaAngle=function(e){if((e=(e%t.TWICE_PI_$LI$()+t.TWICE_PI_$LI$())%t.TWICE_PI_$LI$())!==this.areaAngle){var i=this.areaAngle;this.areaAngle=e,this.firePropertyChange("AREA_ANGLE",i,e)}},t.prototype.getXCenter=function(){for(var e=this.points[0][0],t=this.points[0][0],i=1;i<this.points.length;i++)e=Math.min(e,this.points[i][0]),t=Math.max(t,this.points[i][0]);return(e+t)/2},t.prototype.getYCenter=function(){for(var e=this.points[0][1],t=this.points[0][1],i=1;i<this.points.length;i++)e=Math.min(e,this.points[i][1]),t=Math.max(t,this.points[i][1]);return(e+t)/2},t.prototype.getFloorColor=function(){return this.floorColor},t.prototype.setFloorColor=function(e){if(e!==this.floorColor&&(null==e||e!==this.floorColor)){var t=this.floorColor;this.floorColor=e,this.firePropertyChange("FLOOR_COLOR",t,e)}},t.prototype.getFloorTexture=function(){return this.floorTexture},t.prototype.setFloorTexture=function(e){if(e!==this.floorTexture&&(null==e||!e.equals(this.floorTexture))){var t=this.floorTexture;this.floorTexture=e,this.firePropertyChange("FLOOR_TEXTURE",t,e)}},t.prototype.isFloorVisible=function(){return this.floorVisible},t.prototype.setFloorVisible=function(e){e!==this.floorVisible&&(this.floorVisible=e,this.firePropertyChange("FLOOR_VISIBLE",!e,e))},t.prototype.getFloorShininess=function(){return this.floorShininess},t.prototype.setFloorShininess=function(e){if(e!==this.floorShininess){var t=this.floorShininess;this.floorShininess=e,this.firePropertyChange("FLOOR_SHININESS",t,e)}},t.prototype.getCeilingColor=function(){return this.ceilingColor},t.prototype.setCeilingColor=function(e){if(e!==this.ceilingColor&&(null==e||e!==this.ceilingColor)){var t=this.ceilingColor;this.ceilingColor=e,this.firePropertyChange("CEILING_COLOR",t,e)}},t.prototype.getCeilingTexture=function(){return this.ceilingTexture},t.prototype.setCeilingTexture=function(e){if(e!==this.ceilingTexture&&(null==e||!e.equals(this.ceilingTexture))){var t=this.ceilingTexture;this.ceilingTexture=e,this.firePropertyChange("CEILING_TEXTURE",t,e)}},t.prototype.isCeilingVisible=function(){return this.ceilingVisible},t.prototype.setCeilingVisible=function(e){e!==this.ceilingVisible&&(this.ceilingVisible=e,this.firePropertyChange("CEILING_VISIBLE",!e,e))},t.prototype.getCeilingShininess=function(){return this.ceilingShininess},t.prototype.setCeilingShininess=function(e){if(e!==this.ceilingShininess){var t=this.ceilingShininess;this.ceilingShininess=e,this.firePropertyChange("CEILING_SHININESS",t,e)}},t.prototype.isCeilingFlat=function(){return this.ceilingFlat},t.prototype.setCeilingFlat=function(e){e!==this.ceilingFlat&&(this.ceilingFlat=e,this.firePropertyChange("CEILING_FLAT",!e,e))},t.prototype.getLevel=function(){return this.level},t.prototype.setLevel=function(e){if(e!==this.level){var t=this.level;this.level=e,this.firePropertyChange("LEVEL",t,e)}},t.prototype.isAtLevel=function(e){return this.level===e||null!=this.level&&null!=e&&this.level.getElevation()===e.getElevation()&&this.level.getElevationIndex()<e.getElevationIndex()},t.prototype.getArea=function(){if(null==this.areaCache){var e=new java.awt.geom.Area(this.getShape());if(e.isSingular())this.areaCache=Math.abs(this.getSignedArea(this.getPoints()));else{for(var t=0,i=[],n=e.getPathIterator(null);!n.isDone();){var o=[0,0];switch(n.currentSegment(o)){case java.awt.geom.PathIterator.SEG_MOVETO:case java.awt.geom.PathIterator.SEG_LINETO:i.push(o);break;case java.awt.geom.PathIterator.SEG_CLOSE:var r=i.slice(0);t+=this.getSignedArea(r),i.length=0}n.next()}this.areaCache=t}}return this.areaCache},t.prototype.getSignedArea=function(e){for(var t=0,i=1;i<e.length;i++)t+=e[i][0]*e[i-1][1],t-=e[i][1]*e[i-1][0];return t+=e[0][0]*e[e.length-1][1],(t-=e[0][1]*e[e.length-1][0])/2},t.prototype.isClockwise=function(){return this.getSignedArea(this.getPoints())<0},t.prototype.isSingular=function(){return new java.awt.geom.Area(this.getShape()).isSingular()},t.prototype.intersectsRectangle=function(e,t,i,n){var o=new java.awt.geom.Rectangle2D.Float(e,t,0,0);return o.add(i,n),this.getShape().intersects(o)},t.prototype.containsPoint=function(e,t,i){return this.containsShapeAtWithMargin(this.getShape(),e,t,i)},t.prototype.getPointIndexAt=function(e,t,i){for(var n=0;n<this.points.length;n++)if(Math.abs(e-this.points[n][0])<=i&&Math.abs(t-this.points[n][1])<=i)return n;return-1},t.prototype.isNameCenterPointAt=function(e,t,i){return Math.abs(e-this.getXCenter()-this.getNameXOffset())<=i&&Math.abs(t-this.getYCenter()-this.getNameYOffset())<=i},t.prototype.isAreaCenterPointAt=function(e,t,i){return Math.abs(e-this.getXCenter()-this.getAreaXOffset())<=i&&Math.abs(t-this.getYCenter()-this.getAreaYOffset())<=i},t.prototype.containsShapeAtWithMargin=function(e,t,i,n){return 0===n?e.contains(t,i):e.intersects(t-n,i-n,2*n,2*n)},t.prototype.getShape=function(){if(null==this.shapeCache){var e=new java.awt.geom.GeneralPath;e.moveTo(this.points[0][0],this.points[0][1]);for(var t=1;t<this.points.length;t++)e.lineTo(this.points[t][0],this.points[t][1]);e.closePath(),this.shapeCache=e}return this.shapeCache},t.prototype.move=function(e,t){if(0!==e||0!==t){for(var i=this.getPoints(),n=0;n<i.length;n++)i[n][0]+=e,i[n][1]+=t;this.updatePoints(i)}},t.prototype.clone=function(){var t=this,i=function(i){if(null!=e.prototype.clone)return e.prototype.clone.call(t);var n=Object.create(i);for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o]);return n}(this);return i.level=null,i},t}(HomeObject);Room.__class="com.eteks.sweethome3d.model.Room",Room.__interfaces=["com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.Elevatable"],Room.__transients=["shapeCache","boundsCache","areaCache","propertyChangeSupport"];var Label=function(e){function t(t,i,n,o){var r=this;if("string"!=typeof t&&null!==t||"string"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o){if("string"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||void 0!==o)throw new Error("invalid overload");var l=(u=arguments)[0],a=u[1],s=u[2],h=HomeObject.createId("label");void 0===(r=e.call(this,h)||this).text&&(r.text=null),void 0===r.x&&(r.x=0),void 0===r.y&&(r.y=0),void 0===r.style&&(r.style=null),void 0===r.color&&(r.color=null),void 0===r.outlineColor&&(r.outlineColor=null),void 0===r.angle&&(r.angle=0),void 0===r.pitch&&(r.pitch=null),void 0===r.elevation&&(r.elevation=0),void 0===r.level&&(r.level=null),r.text=l,r.x=a,r.y=s,void 0===r.text&&(r.text=null),void 0===r.x&&(r.x=0),void 0===r.y&&(r.y=0),void 0===r.style&&(r.style=null),void 0===r.color&&(r.color=null),void 0===r.outlineColor&&(r.outlineColor=null),void 0===r.angle&&(r.angle=0),void 0===r.pitch&&(r.pitch=null),void 0===r.elevation&&(r.elevation=0),void 0===r.level&&(r.level=null)}else{var u=arguments;void 0===(r=e.call(this,t)||this).text&&(r.text=null),void 0===r.x&&(r.x=0),void 0===r.y&&(r.y=0),void 0===r.style&&(r.style=null),void 0===r.color&&(r.color=null),void 0===r.outlineColor&&(r.outlineColor=null),void 0===r.angle&&(r.angle=0),void 0===r.pitch&&(r.pitch=null),void 0===r.elevation&&(r.elevation=0),void 0===r.level&&(r.level=null),r.text=i,r.x=n,r.y=o}return r}return __extends(t,e),t.TWICE_PI_$LI$=function(){return null==t.TWICE_PI&&(t.TWICE_PI=2*Math.PI),t.TWICE_PI},t.prototype.getText=function(){return this.text},t.prototype.setText=function(e){if(e!==this.text&&(null==e||e!==this.text)){var t=this.text;this.text=e,this.firePropertyChange("TEXT",t,e)}},t.prototype.getX=function(){return this.x},t.prototype.setX=function(e){if(e!==this.x){var t=this.x;this.x=e,this.firePropertyChange("X",t,e)}},t.prototype.getY=function(){return this.y},t.prototype.setY=function(e){if(e!==this.y){var t=this.y;this.y=e,this.firePropertyChange("Y",t,e)}},t.prototype.getGroundElevation=function(){return null!=this.level?this.elevation+this.level.getElevation():this.elevation},t.prototype.getElevation=function(){return this.elevation},t.prototype.setElevation=function(e){if(e!==this.elevation){var t=this.elevation;this.elevation=e,this.firePropertyChange("ELEVATION",t,e)}},t.prototype.getStyle=function(){return this.style},t.prototype.setStyle=function(e){if(e!==this.style){var t=this.style;this.style=e,this.firePropertyChange("STYLE",t,e)}},t.prototype.getColor=function(){return this.color},t.prototype.setColor=function(e){if(e!==this.color){var t=this.color;this.color=e,this.firePropertyChange("COLOR",t,e)}},t.prototype.getOutlineColor=function(){return this.outlineColor},t.prototype.setOutlineColor=function(e){if(e!==this.outlineColor){var t=this.outlineColor;this.outlineColor=e,this.firePropertyChange("OUTLINE_COLOR",t,e)}},t.prototype.getAngle=function(){return this.angle},t.prototype.setAngle=function(e){if((e=(e%t.TWICE_PI_$LI$()+t.TWICE_PI_$LI$())%t.TWICE_PI_$LI$())!==this.angle){var i=this.angle;this.angle=e,this.firePropertyChange("ANGLE",i,e)}},t.prototype.getPitch=function(){return this.pitch},t.prototype.setPitch=function(e){if(null!=e&&(e=(e%t.TWICE_PI_$LI$()+t.TWICE_PI_$LI$())%t.TWICE_PI_$LI$()),e!==this.pitch&&(null==e||e!==this.pitch)){var i=this.pitch;this.pitch=e,this.firePropertyChange("PITCH",i,e)}},t.prototype.getLevel=function(){return this.level},t.prototype.setLevel=function(e){if(e!==this.level){var t=this.level;this.level=e,this.firePropertyChange("LEVEL",t,e)}},t.prototype.isAtLevel=function(e){if(this.level===e)return!0;if(null!=this.level&&null!=e){var t=this.level.getElevation(),i=e.getElevation();return t===i&&this.level.getElevationIndex()<e.getElevationIndex()||t<i&&t+this.elevation>i}return!1},t.prototype.getPoints=function(){return[[this.x,this.y]]},t.prototype.intersectsRectangle=function(e,t,i,n){var o=new java.awt.geom.Rectangle2D.Float(e,t,0,0);return o.add(i,n),o.contains(this.x,this.y)},t.prototype.containsPoint=function(e,t,i){return Math.abs(e-this.x)<=i&&Math.abs(t-this.y)<=i},t.prototype.move=function(e,t){this.setX(this.getX()+e),this.setY(this.getY()+t)},t.prototype.clone=function(){var t=this,i=function(i){if(null!=e.prototype.clone)return e.prototype.clone.call(t);var n=Object.create(i);for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o]);return n}(this);return i.level=null,i},t}(HomeObject);Label.__class="com.eteks.sweethome3d.model.Label",Label.__interfaces=["com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.Elevatable"],Label.__transients=["propertyChangeSupport"];var HomeEnvironment=function(e){function t(i,n,o,r,l,a,s){var h=this;if("string"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||!(null!=o&&o instanceof HomeTexture||null===o)||"number"!=typeof r&&null!==r||!(null!=l&&l instanceof HomeTexture||null===l)||"number"!=typeof a&&null!==a||"number"!=typeof s&&null!==s)if("number"!=typeof i&&null!==i||!(null!=n&&n instanceof HomeTexture||null===n)||"number"!=typeof o&&null!==o||!(null!=r&&r instanceof HomeTexture||null===r)||"number"!=typeof l&&null!==l||"number"!=typeof a&&null!==a||void 0!==s)if("number"!=typeof i&&null!==i||!(null!=n&&n instanceof HomeTexture||null===n)||"number"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||"number"!=typeof l&&null!==l||void 0!==a||void 0!==s)if("string"!=typeof i&&null!==i||void 0!==n||void 0!==o||void 0!==r||void 0!==l||void 0!==a||void 0!==s){if(void 0!==i||void 0!==n||void 0!==o||void 0!==r||void 0!==l||void 0!==a||void 0!==s)throw new Error("invalid overload");P=arguments;var u=HomeObject.createId("environment");void 0===(h=e.call(this,u)||this).observerCameraElevationAdjusted&&(h.observerCameraElevationAdjusted=!1),void 0===h.groundColor&&(h.groundColor=0),void 0===h.groundTexture&&(h.groundTexture=null),void 0===h.backgroundImageVisibleOnGround3D&&(h.backgroundImageVisibleOnGround3D=!1),void 0===h.skyColor&&(h.skyColor=0),void 0===h.skyTexture&&(h.skyTexture=null),void 0===h.lightColor&&(h.lightColor=0),void 0===h.ceilingLightColor&&(h.ceilingLightColor=0),void 0===h.wallsAlpha&&(h.wallsAlpha=0),void 0===h.drawingMode&&(h.drawingMode=null),void 0===h.subpartSizeUnderLight&&(h.subpartSizeUnderLight=0),void 0===h.allLevelsVisible&&(h.allLevelsVisible=!1),void 0===h.photoWidth&&(h.photoWidth=0),void 0===h.photoHeight&&(h.photoHeight=0),void 0===h.photoAspectRatio&&(h.photoAspectRatio=null),void 0===h.photoAspectRatioName&&(h.photoAspectRatioName=null),void 0===h.photoQuality&&(h.photoQuality=0),void 0===h.videoWidth&&(h.videoWidth=0),void 0===h.videoAspectRatio&&(h.videoAspectRatio=null),void 0===h.videoAspectRatioName&&(h.videoAspectRatioName=null),void 0===h.videoQuality&&(h.videoQuality=0),void 0===h.videoSpeed&&(h.videoSpeed=0),void 0===h.videoFrameRate&&(h.videoFrameRate=0),void 0===h.cameraPath&&(h.cameraPath=null),h.observerCameraElevationAdjusted=!0,h.groundColor=11053224,h.groundTexture=null,h.skyColor=13427964,h.skyTexture=null,h.lightColor=13684944,h.ceilingLightColor=13684944,h.wallsAlpha=0,h.drawingMode=t.DrawingMode.FILL,h.photoWidth=400,h.photoHeight=300,h.photoAspectRatio=AspectRatio.VIEW_3D_RATIO,h.videoWidth=320,h.videoAspectRatio=AspectRatio.RATIO_4_3,h.videoSpeed=2400/3600,h.videoFrameRate=25,h.cameraPath=[],void 0===h.observerCameraElevationAdjusted&&(h.observerCameraElevationAdjusted=!1),void 0===h.groundColor&&(h.groundColor=0),void 0===h.groundTexture&&(h.groundTexture=null),void 0===h.backgroundImageVisibleOnGround3D&&(h.backgroundImageVisibleOnGround3D=!1),void 0===h.skyColor&&(h.skyColor=0),void 0===h.skyTexture&&(h.skyTexture=null),void 0===h.lightColor&&(h.lightColor=0),void 0===h.ceilingLightColor&&(h.ceilingLightColor=0),void 0===h.wallsAlpha&&(h.wallsAlpha=0),void 0===h.drawingMode&&(h.drawingMode=null),void 0===h.subpartSizeUnderLight&&(h.subpartSizeUnderLight=0),void 0===h.allLevelsVisible&&(h.allLevelsVisible=!1),void 0===h.photoWidth&&(h.photoWidth=0),void 0===h.photoHeight&&(h.photoHeight=0),void 0===h.photoAspectRatio&&(h.photoAspectRatio=null),void 0===h.photoAspectRatioName&&(h.photoAspectRatioName=null),void 0===h.photoQuality&&(h.photoQuality=0),void 0===h.videoWidth&&(h.videoWidth=0),void 0===h.videoAspectRatio&&(h.videoAspectRatio=null),void 0===h.videoAspectRatioName&&(h.videoAspectRatioName=null),void 0===h.videoQuality&&(h.videoQuality=0),void 0===h.videoSpeed&&(h.videoSpeed=0),void 0===h.videoFrameRate&&(h.videoFrameRate=0),void 0===h.cameraPath&&(h.cameraPath=null),void 0===h.observerCameraElevationAdjusted&&(h.observerCameraElevationAdjusted=!1),void 0===h.groundColor&&(h.groundColor=0),void 0===h.groundTexture&&(h.groundTexture=null),void 0===h.backgroundImageVisibleOnGround3D&&(h.backgroundImageVisibleOnGround3D=!1),void 0===h.skyColor&&(h.skyColor=0),void 0===h.skyTexture&&(h.skyTexture=null),void 0===h.lightColor&&(h.lightColor=0),void 0===h.ceilingLightColor&&(h.ceilingLightColor=0),void 0===h.wallsAlpha&&(h.wallsAlpha=0),void 0===h.drawingMode&&(h.drawingMode=null),void 0===h.subpartSizeUnderLight&&(h.subpartSizeUnderLight=0),void 0===h.allLevelsVisible&&(h.allLevelsVisible=!1),void 0===h.photoWidth&&(h.photoWidth=0),void 0===h.photoHeight&&(h.photoHeight=0),void 0===h.photoAspectRatio&&(h.photoAspectRatio=null),void 0===h.photoAspectRatioName&&(h.photoAspectRatioName=null),void 0===h.photoQuality&&(h.photoQuality=0),void 0===h.videoWidth&&(h.videoWidth=0),void 0===h.videoAspectRatio&&(h.videoAspectRatio=null),void 0===h.videoAspectRatioName&&(h.videoAspectRatioName=null),void 0===h.videoQuality&&(h.videoQuality=0),void 0===h.videoSpeed&&(h.videoSpeed=0),void 0===h.videoFrameRate&&(h.videoFrameRate=0),void 0===h.cameraPath&&(h.cameraPath=null)}else{P=arguments;void 0===(h=e.call(this,i)||this).observerCameraElevationAdjusted&&(h.observerCameraElevationAdjusted=!1),void 0===h.groundColor&&(h.groundColor=0),void 0===h.groundTexture&&(h.groundTexture=null),void 0===h.backgroundImageVisibleOnGround3D&&(h.backgroundImageVisibleOnGround3D=!1),void 0===h.skyColor&&(h.skyColor=0),void 0===h.skyTexture&&(h.skyTexture=null),void 0===h.lightColor&&(h.lightColor=0),void 0===h.ceilingLightColor&&(h.ceilingLightColor=0),void 0===h.wallsAlpha&&(h.wallsAlpha=0),void 0===h.drawingMode&&(h.drawingMode=null),void 0===h.subpartSizeUnderLight&&(h.subpartSizeUnderLight=0),void 0===h.allLevelsVisible&&(h.allLevelsVisible=!1),void 0===h.photoWidth&&(h.photoWidth=0),void 0===h.photoHeight&&(h.photoHeight=0),void 0===h.photoAspectRatio&&(h.photoAspectRatio=null),void 0===h.photoAspectRatioName&&(h.photoAspectRatioName=null),void 0===h.photoQuality&&(h.photoQuality=0),void 0===h.videoWidth&&(h.videoWidth=0),void 0===h.videoAspectRatio&&(h.videoAspectRatio=null),void 0===h.videoAspectRatioName&&(h.videoAspectRatioName=null),void 0===h.videoQuality&&(h.videoQuality=0),void 0===h.videoSpeed&&(h.videoSpeed=0),void 0===h.videoFrameRate&&(h.videoFrameRate=0),void 0===h.cameraPath&&(h.cameraPath=null),h.observerCameraElevationAdjusted=!0,h.groundColor=11053224,h.groundTexture=null,h.skyColor=13427964,h.skyTexture=null,h.lightColor=13684944,h.ceilingLightColor=13684944,h.wallsAlpha=0,h.drawingMode=t.DrawingMode.FILL,h.photoWidth=400,h.photoHeight=300,h.photoAspectRatio=AspectRatio.VIEW_3D_RATIO,h.videoWidth=320,h.videoAspectRatio=AspectRatio.RATIO_4_3,h.videoSpeed=2400/3600,h.videoFrameRate=25,h.cameraPath=[],void 0===h.observerCameraElevationAdjusted&&(h.observerCameraElevationAdjusted=!1),void 0===h.groundColor&&(h.groundColor=0),void 0===h.groundTexture&&(h.groundTexture=null),void 0===h.backgroundImageVisibleOnGround3D&&(h.backgroundImageVisibleOnGround3D=!1),void 0===h.skyColor&&(h.skyColor=0),void 0===h.skyTexture&&(h.skyTexture=null),void 0===h.lightColor&&(h.lightColor=0),void 0===h.ceilingLightColor&&(h.ceilingLightColor=0),void 0===h.wallsAlpha&&(h.wallsAlpha=0),void 0===h.drawingMode&&(h.drawingMode=null),void 0===h.subpartSizeUnderLight&&(h.subpartSizeUnderLight=0),void 0===h.allLevelsVisible&&(h.allLevelsVisible=!1),void 0===h.photoWidth&&(h.photoWidth=0),void 0===h.photoHeight&&(h.photoHeight=0),void 0===h.photoAspectRatio&&(h.photoAspectRatio=null),void 0===h.photoAspectRatioName&&(h.photoAspectRatioName=null),void 0===h.photoQuality&&(h.photoQuality=0),void 0===h.videoWidth&&(h.videoWidth=0),void 0===h.videoAspectRatio&&(h.videoAspectRatio=null),void 0===h.videoAspectRatioName&&(h.videoAspectRatioName=null),void 0===h.videoQuality&&(h.videoQuality=0),void 0===h.videoSpeed&&(h.videoSpeed=0),void 0===h.videoFrameRate&&(h.videoFrameRate=0),void 0===h.cameraPath&&(h.cameraPath=null)}else{var d=(P=arguments)[0],c=P[1],p=P[2],g=P[3],v=P[4],f=HomeObject.createId("environment");void 0===(h=e.call(this,f)||this).observerCameraElevationAdjusted&&(h.observerCameraElevationAdjusted=!1),void 0===h.groundColor&&(h.groundColor=0),void 0===h.groundTexture&&(h.groundTexture=null),void 0===h.backgroundImageVisibleOnGround3D&&(h.backgroundImageVisibleOnGround3D=!1),void 0===h.skyColor&&(h.skyColor=0),void 0===h.skyTexture&&(h.skyTexture=null),void 0===h.lightColor&&(h.lightColor=0),void 0===h.ceilingLightColor&&(h.ceilingLightColor=0),void 0===h.wallsAlpha&&(h.wallsAlpha=0),void 0===h.drawingMode&&(h.drawingMode=null),void 0===h.subpartSizeUnderLight&&(h.subpartSizeUnderLight=0),void 0===h.allLevelsVisible&&(h.allLevelsVisible=!1),void 0===h.photoWidth&&(h.photoWidth=0),void 0===h.photoHeight&&(h.photoHeight=0),void 0===h.photoAspectRatio&&(h.photoAspectRatio=null),void 0===h.photoAspectRatioName&&(h.photoAspectRatioName=null),void 0===h.photoQuality&&(h.photoQuality=0),void 0===h.videoWidth&&(h.videoWidth=0),void 0===h.videoAspectRatio&&(h.videoAspectRatio=null),void 0===h.videoAspectRatioName&&(h.videoAspectRatioName=null),void 0===h.videoQuality&&(h.videoQuality=0),void 0===h.videoSpeed&&(h.videoSpeed=0),void 0===h.videoFrameRate&&(h.videoFrameRate=0),void 0===h.cameraPath&&(h.cameraPath=null),h.observerCameraElevationAdjusted=!0,h.groundColor=d,h.groundTexture=c,h.skyColor=p,h.skyTexture=null,h.lightColor=g,h.ceilingLightColor=13684944,h.wallsAlpha=v,h.drawingMode=t.DrawingMode.FILL,h.photoWidth=400,h.photoHeight=300,h.photoAspectRatio=AspectRatio.VIEW_3D_RATIO,h.videoWidth=320,h.videoAspectRatio=AspectRatio.RATIO_4_3,h.videoSpeed=2400/3600,h.videoFrameRate=25,h.cameraPath=[],void 0===h.observerCameraElevationAdjusted&&(h.observerCameraElevationAdjusted=!1),void 0===h.groundColor&&(h.groundColor=0),void 0===h.groundTexture&&(h.groundTexture=null),void 0===h.backgroundImageVisibleOnGround3D&&(h.backgroundImageVisibleOnGround3D=!1),void 0===h.skyColor&&(h.skyColor=0),void 0===h.skyTexture&&(h.skyTexture=null),void 0===h.lightColor&&(h.lightColor=0),void 0===h.ceilingLightColor&&(h.ceilingLightColor=0),void 0===h.wallsAlpha&&(h.wallsAlpha=0),void 0===h.drawingMode&&(h.drawingMode=null),void 0===h.subpartSizeUnderLight&&(h.subpartSizeUnderLight=0),void 0===h.allLevelsVisible&&(h.allLevelsVisible=!1),void 0===h.photoWidth&&(h.photoWidth=0),void 0===h.photoHeight&&(h.photoHeight=0),void 0===h.photoAspectRatio&&(h.photoAspectRatio=null),void 0===h.photoAspectRatioName&&(h.photoAspectRatioName=null),void 0===h.photoQuality&&(h.photoQuality=0),void 0===h.videoWidth&&(h.videoWidth=0),void 0===h.videoAspectRatio&&(h.videoAspectRatio=null),void 0===h.videoAspectRatioName&&(h.videoAspectRatioName=null),void 0===h.videoQuality&&(h.videoQuality=0),void 0===h.videoSpeed&&(h.videoSpeed=0),void 0===h.videoFrameRate&&(h.videoFrameRate=0),void 0===h.cameraPath&&(h.cameraPath=null),void 0===h.observerCameraElevationAdjusted&&(h.observerCameraElevationAdjusted=!1),void 0===h.groundColor&&(h.groundColor=0),void 0===h.groundTexture&&(h.groundTexture=null),void 0===h.backgroundImageVisibleOnGround3D&&(h.backgroundImageVisibleOnGround3D=!1),void 0===h.skyColor&&(h.skyColor=0),void 0===h.skyTexture&&(h.skyTexture=null),void 0===h.lightColor&&(h.lightColor=0),void 0===h.ceilingLightColor&&(h.ceilingLightColor=0),void 0===h.wallsAlpha&&(h.wallsAlpha=0),void 0===h.drawingMode&&(h.drawingMode=null),void 0===h.subpartSizeUnderLight&&(h.subpartSizeUnderLight=0),void 0===h.allLevelsVisible&&(h.allLevelsVisible=!1),void 0===h.photoWidth&&(h.photoWidth=0),void 0===h.photoHeight&&(h.photoHeight=0),void 0===h.photoAspectRatio&&(h.photoAspectRatio=null),void 0===h.photoAspectRatioName&&(h.photoAspectRatioName=null),void 0===h.photoQuality&&(h.photoQuality=0),void 0===h.videoWidth&&(h.videoWidth=0),void 0===h.videoAspectRatio&&(h.videoAspectRatio=null),void 0===h.videoAspectRatioName&&(h.videoAspectRatioName=null),void 0===h.videoQuality&&(h.videoQuality=0),void 0===h.videoSpeed&&(h.videoSpeed=0),void 0===h.videoFrameRate&&(h.videoFrameRate=0),void 0===h.cameraPath&&(h.cameraPath=null)}else{var m=(P=arguments)[0],y=P[1],C=P[2],S=P[3],E=P[4],A=P[5],_=HomeObject.createId("environment");void 0===(h=e.call(this,_)||this).observerCameraElevationAdjusted&&(h.observerCameraElevationAdjusted=!1),void 0===h.groundColor&&(h.groundColor=0),void 0===h.groundTexture&&(h.groundTexture=null),void 0===h.backgroundImageVisibleOnGround3D&&(h.backgroundImageVisibleOnGround3D=!1),void 0===h.skyColor&&(h.skyColor=0),void 0===h.skyTexture&&(h.skyTexture=null),void 0===h.lightColor&&(h.lightColor=0),void 0===h.ceilingLightColor&&(h.ceilingLightColor=0),void 0===h.wallsAlpha&&(h.wallsAlpha=0),void 0===h.drawingMode&&(h.drawingMode=null),void 0===h.subpartSizeUnderLight&&(h.subpartSizeUnderLight=0),void 0===h.allLevelsVisible&&(h.allLevelsVisible=!1),void 0===h.photoWidth&&(h.photoWidth=0),void 0===h.photoHeight&&(h.photoHeight=0),void 0===h.photoAspectRatio&&(h.photoAspectRatio=null),void 0===h.photoAspectRatioName&&(h.photoAspectRatioName=null),void 0===h.photoQuality&&(h.photoQuality=0),void 0===h.videoWidth&&(h.videoWidth=0),void 0===h.videoAspectRatio&&(h.videoAspectRatio=null),void 0===h.videoAspectRatioName&&(h.videoAspectRatioName=null),void 0===h.videoQuality&&(h.videoQuality=0),void 0===h.videoSpeed&&(h.videoSpeed=0),void 0===h.videoFrameRate&&(h.videoFrameRate=0),void 0===h.cameraPath&&(h.cameraPath=null),h.observerCameraElevationAdjusted=!0,h.groundColor=m,h.groundTexture=y,h.skyColor=C,h.skyTexture=S,h.lightColor=E,h.ceilingLightColor=13684944,h.wallsAlpha=A,h.drawingMode=t.DrawingMode.FILL,h.photoWidth=400,h.photoHeight=300,h.photoAspectRatio=AspectRatio.VIEW_3D_RATIO,h.videoWidth=320,h.videoAspectRatio=AspectRatio.RATIO_4_3,h.videoSpeed=2400/3600,h.videoFrameRate=25,h.cameraPath=[],void 0===h.observerCameraElevationAdjusted&&(h.observerCameraElevationAdjusted=!1),void 0===h.groundColor&&(h.groundColor=0),void 0===h.groundTexture&&(h.groundTexture=null),void 0===h.backgroundImageVisibleOnGround3D&&(h.backgroundImageVisibleOnGround3D=!1),void 0===h.skyColor&&(h.skyColor=0),void 0===h.skyTexture&&(h.skyTexture=null),void 0===h.lightColor&&(h.lightColor=0),void 0===h.ceilingLightColor&&(h.ceilingLightColor=0),void 0===h.wallsAlpha&&(h.wallsAlpha=0),void 0===h.drawingMode&&(h.drawingMode=null),void 0===h.subpartSizeUnderLight&&(h.subpartSizeUnderLight=0),void 0===h.allLevelsVisible&&(h.allLevelsVisible=!1),void 0===h.photoWidth&&(h.photoWidth=0),void 0===h.photoHeight&&(h.photoHeight=0),void 0===h.photoAspectRatio&&(h.photoAspectRatio=null),void 0===h.photoAspectRatioName&&(h.photoAspectRatioName=null),void 0===h.photoQuality&&(h.photoQuality=0),void 0===h.videoWidth&&(h.videoWidth=0),void 0===h.videoAspectRatio&&(h.videoAspectRatio=null),void 0===h.videoAspectRatioName&&(h.videoAspectRatioName=null),void 0===h.videoQuality&&(h.videoQuality=0),void 0===h.videoSpeed&&(h.videoSpeed=0),void 0===h.videoFrameRate&&(h.videoFrameRate=0),void 0===h.cameraPath&&(h.cameraPath=null)}else{var P=arguments;void 0===(h=e.call(this,i)||this).observerCameraElevationAdjusted&&(h.observerCameraElevationAdjusted=!1),void 0===h.groundColor&&(h.groundColor=0),void 0===h.groundTexture&&(h.groundTexture=null),void 0===h.backgroundImageVisibleOnGround3D&&(h.backgroundImageVisibleOnGround3D=!1),void 0===h.skyColor&&(h.skyColor=0),void 0===h.skyTexture&&(h.skyTexture=null),void 0===h.lightColor&&(h.lightColor=0),void 0===h.ceilingLightColor&&(h.ceilingLightColor=0),void 0===h.wallsAlpha&&(h.wallsAlpha=0),void 0===h.drawingMode&&(h.drawingMode=null),void 0===h.subpartSizeUnderLight&&(h.subpartSizeUnderLight=0),void 0===h.allLevelsVisible&&(h.allLevelsVisible=!1),void 0===h.photoWidth&&(h.photoWidth=0),void 0===h.photoHeight&&(h.photoHeight=0),void 0===h.photoAspectRatio&&(h.photoAspectRatio=null),void 0===h.photoAspectRatioName&&(h.photoAspectRatioName=null),void 0===h.photoQuality&&(h.photoQuality=0),void 0===h.videoWidth&&(h.videoWidth=0),void 0===h.videoAspectRatio&&(h.videoAspectRatio=null),void 0===h.videoAspectRatioName&&(h.videoAspectRatioName=null),void 0===h.videoQuality&&(h.videoQuality=0),void 0===h.videoSpeed&&(h.videoSpeed=0),void 0===h.videoFrameRate&&(h.videoFrameRate=0),void 0===h.cameraPath&&(h.cameraPath=null),h.observerCameraElevationAdjusted=!0,h.groundColor=n,h.groundTexture=o,h.skyColor=r,h.skyTexture=l,h.lightColor=a,h.ceilingLightColor=13684944,h.wallsAlpha=s,h.drawingMode=t.DrawingMode.FILL,h.photoWidth=400,h.photoHeight=300,h.photoAspectRatio=AspectRatio.VIEW_3D_RATIO,h.videoWidth=320,h.videoAspectRatio=AspectRatio.RATIO_4_3,h.videoSpeed=2400/3600,h.videoFrameRate=25,h.cameraPath=[]}return h}return __extends(t,e),t.prototype.isObserverCameraElevationAdjusted=function(){return this.observerCameraElevationAdjusted},t.prototype.setObserverCameraElevationAdjusted=function(e){this.observerCameraElevationAdjusted!==e&&(this.observerCameraElevationAdjusted=e,this.firePropertyChange("OBSERVER_CAMERA_ELEVATION_ADJUSTED",!e,e))},t.prototype.getGroundColor=function(){return this.groundColor},t.prototype.setGroundColor=function(e){if(e!==this.groundColor){var t=this.groundColor;this.groundColor=e,this.firePropertyChange("GROUND_COLOR",t,e)}},t.prototype.getGroundTexture=function(){return this.groundTexture},t.prototype.setGroundTexture=function(e){if(e!==this.groundTexture){var t=this.groundTexture;this.groundTexture=e,this.firePropertyChange("GROUND_TEXTURE",t,e)}},t.prototype.isBackgroundImageVisibleOnGround3D=function(){return this.backgroundImageVisibleOnGround3D},t.prototype.setBackgroundImageVisibleOnGround3D=function(e){this.backgroundImageVisibleOnGround3D!==e&&(this.backgroundImageVisibleOnGround3D=e,this.firePropertyChange("BACKGROUND_IMAGE_VISIBLE_ON_GROUND_3D",!e,e))},t.prototype.getSkyColor=function(){return this.skyColor},t.prototype.setSkyColor=function(e){if(e!==this.skyColor){var t=this.skyColor;this.skyColor=e,this.firePropertyChange("SKY_COLOR",t,e)}},t.prototype.getSkyTexture=function(){return this.skyTexture},t.prototype.setSkyTexture=function(e){if(e!==this.skyTexture){var t=this.skyTexture;this.skyTexture=e,this.firePropertyChange("SKY_TEXTURE",t,e)}},t.prototype.getLightColor=function(){return this.lightColor},t.prototype.setLightColor=function(e){if(e!==this.lightColor){var t=this.lightColor;this.lightColor=e,this.firePropertyChange("LIGHT_COLOR",t,e)}},t.prototype.getCeillingLightColor=function(){return this.ceilingLightColor},t.prototype.setCeillingLightColor=function(e){if(e!==this.ceilingLightColor){var t=this.ceilingLightColor;this.ceilingLightColor=e,this.firePropertyChange("CEILING_LIGHT_COLOR",t,e)}},t.prototype.getWallsAlpha=function(){return this.wallsAlpha},t.prototype.setWallsAlpha=function(e){if(e!==this.wallsAlpha){var t=this.wallsAlpha;this.wallsAlpha=e,this.firePropertyChange("WALLS_ALPHA",t,e)}},t.prototype.getDrawingMode=function(){return this.drawingMode},t.prototype.setDrawingMode=function(e){if(e!==this.drawingMode){var t=this.drawingMode;this.drawingMode=e,this.firePropertyChange("DRAWING_MODE",t,e)}},t.prototype.getSubpartSizeUnderLight=function(){return this.subpartSizeUnderLight},t.prototype.setSubpartSizeUnderLight=function(e){if(e!==this.subpartSizeUnderLight){var t=this.subpartSizeUnderLight;this.subpartSizeUnderLight=e,this.firePropertyChange("SUBPART_SIZE_UNDER_LIGHT",t,e)}},t.prototype.isAllLevelsVisible=function(){return this.allLevelsVisible},t.prototype.setAllLevelsVisible=function(e){e!==this.allLevelsVisible&&(this.allLevelsVisible=e,this.firePropertyChange("ALL_LEVELS_VISIBLE",!e,e))},t.prototype.getPhotoWidth=function(){return this.photoWidth},t.prototype.setPhotoWidth=function(e){if(this.photoWidth!==e){var t=this.photoWidth;this.photoWidth=e,this.firePropertyChange("PHOTO_WIDTH",t,e)}},t.prototype.getPhotoHeight=function(){return this.photoHeight},t.prototype.setPhotoHeight=function(e){if(this.photoHeight!==e){var t=this.photoHeight;this.photoHeight=e,this.firePropertyChange("PHOTO_HEIGHT",t,e)}},t.prototype.getPhotoAspectRatio=function(){return this.photoAspectRatio},t.prototype.setPhotoAspectRatio=function(e){if(this.photoAspectRatio!==e){var t=this.photoAspectRatio;this.photoAspectRatio=e,this.photoAspectRatioName=AspectRatio[this.photoAspectRatio],this.firePropertyChange("PHOTO_ASPECT_RATIO",t,e)}},t.prototype.getPhotoQuality=function(){return this.photoQuality},t.prototype.setPhotoQuality=function(e){if(this.photoQuality!==e){var t=this.photoQuality;this.photoQuality=e,this.firePropertyChange("PHOTO_QUALITY",t,e)}},t.prototype.getVideoWidth=function(){return this.videoWidth},t.prototype.setVideoWidth=function(e){if(this.videoWidth!==e){var t=this.videoWidth;this.videoWidth=e,this.firePropertyChange("VIDEO_WIDTH",t,e)}},t.prototype.getVideoHeight=function(){return Math.round(this.getVideoWidth()/{FREE_RATIO:null,VIEW_3D_RATIO:null,RATIO_4_3:4/3,RATIO_3_2:1.5,RATIO_16_9:16/9,RATIO_2_1:2,SQUARE_RATIO:1}[this.getVideoAspectRatio()])},t.prototype.getVideoAspectRatio=function(){return this.videoAspectRatio},t.prototype.setVideoAspectRatio=function(e){if(this.videoAspectRatio!==e){if(null=={FREE_RATIO:null,VIEW_3D_RATIO:null,RATIO_4_3:4/3,RATIO_3_2:1.5,RATIO_16_9:16/9,RATIO_2_1:2,SQUARE_RATIO:1}[e])throw new IllegalArgumentException("Unsupported aspect ratio "+e);var t=this.videoAspectRatio;this.videoAspectRatio=e,this.videoAspectRatioName=AspectRatio[this.videoAspectRatio],this.firePropertyChange("VIDEO_ASPECT_RATIO",t,e)}},t.prototype.getVideoQuality=function(){return this.videoQuality},t.prototype.setVideoQuality=function(e){if(this.videoQuality!==e){var t=this.videoQuality;this.videoQuality=e,this.firePropertyChange("VIDEO_QUALITY",t,e)}},t.prototype.getVideoSpeed=function(){return this.videoSpeed},t.prototype.setVideoSpeed=function(e){if(this.videoSpeed!==e){var t=this.videoSpeed;this.videoSpeed=e,this.firePropertyChange("VIDEO_SPEED",t,e)}},t.prototype.getVideoFrameRate=function(){return this.videoFrameRate},t.prototype.setVideoFrameRate=function(e){if(this.videoFrameRate!==e){var t=this.videoFrameRate;this.videoFrameRate=e,this.firePropertyChange("VIDEO_FRAME_RATE",t,e)}},t.prototype.getVideoCameraPath=function(){return this.cameraPath.slice(0)},t.prototype.setVideoCameraPath=function(e){if(this.cameraPath!==e){var t=this.cameraPath;this.cameraPath=null!=e?e.slice(0):[],this.firePropertyChange("VIDEO_CAMERA_PATH",t,e)}},t.prototype.clone=function(){var t=this,i=function(i){if(null!=e.prototype.clone)return e.prototype.clone.call(t);var n=Object.create(i);for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o]);return n}(this);i.cameraPath=[];for(var n=0;n<this.cameraPath.length;n++){var o=this.cameraPath[n];i.cameraPath.push(function(e){if(null!=e.clone)return e.clone();var t=Object.create(e);for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}(o))}return i},t}(HomeObject);HomeEnvironment.__class="com.eteks.sweethome3d.model.HomeEnvironment",function(e){var t;(t=e.DrawingMode||(e.DrawingMode={}))[t.FILL=0]="FILL",t[t.OUTLINE=1]="OUTLINE",t[t.FILL_AND_OUTLINE=2]="FILL_AND_OUTLINE"}(HomeEnvironment||(HomeEnvironment={})),HomeEnvironment.__transients=["photoAspectRatio","videoAspectRatio","propertyChangeSupport"];var HomePieceOfFurniture=function(e){function t(i,n,o){var r=this;if(("string"==typeof i||null===i)&&(null!=n&&null!=n.constructor&&null!=n.constructor.__interfaces&&n.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.PieceOfFurniture")>=0||null===n)&&(null!=o&&o instanceof Array&&(0==o.length||null==o[0]||"string"==typeof o[0])||null===o)){var l=arguments;if(void 0===(r=e.call(this,i)||this).catalogId&&(r.catalogId=null),void 0===r.name&&(r.name=null),void 0===r.nameVisible&&(r.nameVisible=!1),void 0===r.nameXOffset&&(r.nameXOffset=0),void 0===r.nameYOffset&&(r.nameYOffset=0),void 0===r.nameStyle&&(r.nameStyle=null),void 0===r.nameAngle&&(r.nameAngle=0),void 0===r.description&&(r.description=null),void 0===r.information&&(r.information=null),void 0===r.creator&&(r.creator=null),void 0===r.license&&(r.license=null),void 0===r.icon&&(r.icon=null),void 0===r.planIcon&&(r.planIcon=null),void 0===r.model&&(r.model=null),void 0===r.modelSize&&(r.modelSize=null),void 0===r.width&&(r.width=0),void 0===r.widthInPlan&&(r.widthInPlan=0),void 0===r.depth&&(r.depth=0),void 0===r.depthInPlan&&(r.depthInPlan=0),void 0===r.height&&(r.height=0),void 0===r.heightInPlan&&(r.heightInPlan=0),void 0===r.elevation&&(r.elevation=0),void 0===r.dropOnTopElevation&&(r.dropOnTopElevation=0),void 0===r.movable&&(r.movable=!1),void 0===r.doorOrWindow&&(r.doorOrWindow=!1),void 0===r.modelMaterials&&(r.modelMaterials=null),void 0===r.color&&(r.color=null),void 0===r.texture&&(r.texture=null),void 0===r.shininess&&(r.shininess=null),void 0===r.modelRotation&&(r.modelRotation=null),void 0===r.modelFlags&&(r.modelFlags=0),void 0===r.modelCenteredAtOrigin&&(r.modelCenteredAtOrigin=!1),void 0===r.modelTransformations&&(r.modelTransformations=null),void 0===r.staircaseCutOutShape&&(r.staircaseCutOutShape=null),void 0===r.backFaceShown&&(r.backFaceShown=!1),void 0===r.resizable&&(r.resizable=!1),void 0===r.deformable&&(r.deformable=!1),void 0===r.texturable&&(r.texturable=!1),void 0===r.horizontallyRotatable&&(r.horizontallyRotatable=!1),void 0===r.price&&(r.price=null),void 0===r.valueAddedTaxPercentage&&(r.valueAddedTaxPercentage=null),void 0===r.currency&&(r.currency=null),void 0===r.visible&&(r.visible=!1),void 0===r.x&&(r.x=0),void 0===r.y&&(r.y=0),void 0===r.angle&&(r.angle=0),void 0===r.pitch&&(r.pitch=0),void 0===r.roll&&(r.roll=0),void 0===r.modelMirrored&&(r.modelMirrored=!1),void 0===r.level&&(r.level=null),void 0===r.shapeCache&&(r.shapeCache=null),r.name=n.getName(),r.description=n.getDescription(),r.information=n.getInformation(),r.creator=n.getCreator(),r.license=n.getLicense(),r.icon=n.getIcon(),r.planIcon=n.getPlanIcon(),r.model=n.getModel(),r.modelSize=n.getModelSize(),r.width=n.getWidth(),r.depth=n.getDepth(),r.height=n.getHeight(),r.elevation=n.getElevation(),r.dropOnTopElevation=n.getDropOnTopElevation(),r.movable=n.isMovable(),r.doorOrWindow=n.isDoorOrWindow(),r.color=n.getColor(),r.modelRotation=n.getModelRotation(),r.staircaseCutOutShape=n.getStaircaseCutOutShape(),r.modelFlags=n.getModelFlags(),r.resizable=n.isResizable(),r.deformable=n.isDeformable(),r.texturable=n.isTexturable(),r.horizontallyRotatable=n.isHorizontallyRotatable(),r.price=n.getPrice(),r.valueAddedTaxPercentage=n.getValueAddedTaxPercentage(),r.currency=n.getCurrency(),null!=n&&n instanceof t){var a=n;r.catalogId=a.getCatalogId(),r.nameVisible=a.isNameVisible(),r.nameXOffset=a.getNameXOffset(),r.nameYOffset=a.getNameYOffset(),r.nameAngle=a.getNameAngle(),r.nameStyle=a.getNameStyle(),r.visible=a.isVisible(),r.widthInPlan=a.getWidthInPlan(),r.depthInPlan=a.getDepthInPlan(),r.heightInPlan=a.getHeightInPlan(),r.modelCenteredAtOrigin=a.isModelCenteredAtOrigin(),r.modelTransformations=a.getModelTransformations(),r.angle=a.getAngle(),r.pitch=a.getPitch(),r.roll=a.getRoll(),r.x=a.getX(),r.y=a.getY(),r.modelMirrored=a.isModelMirrored(),r.texture=a.getTexture(),r.shininess=a.getShininess(),r.modelMaterials=a.getModelMaterials();for(var s=null!=o?o.slice(0):a.getPropertyNames(),h=0;h<s.length;h++){var u=s[h];null!=(C=a.isContentProperty(u)?a.getContentProperty(u):a.getProperty(u))&&r.setProperty$java_lang_String$java_lang_Object(u,C)}}else{if(null!=n&&n instanceof CatalogPieceOfFurniture){var d=n;r.catalogId=d.getId();for(s=null!=o?o.slice(0):d.getPropertyNames(),h=0;h<s.length;h++){u=s[h];null!=(C=d.isContentProperty(u)?d.getContentProperty(u):d.getProperty(u))&&r.setProperty$java_lang_String$java_lang_Object(u,C)}}r.visible=!0,r.widthInPlan=r.width,r.depthInPlan=r.depth,r.heightInPlan=r.height,r.modelCenteredAtOrigin=!0,r.x=r.width/2,r.y=r.depth/2}}else if((null!=i&&null!=i.constructor&&null!=i.constructor.__interfaces&&i.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.PieceOfFurniture")>=0||null===i)&&(null!=n&&n instanceof Array&&(0==n.length||null==n[0]||"string"==typeof n[0])||null===n)&&void 0===o){var c=(l=arguments)[0],p=l[1],g=HomeObject.createId("pieceOfFurniture");if(void 0===(r=e.call(this,g)||this).catalogId&&(r.catalogId=null),void 0===r.name&&(r.name=null),void 0===r.nameVisible&&(r.nameVisible=!1),void 0===r.nameXOffset&&(r.nameXOffset=0),void 0===r.nameYOffset&&(r.nameYOffset=0),void 0===r.nameStyle&&(r.nameStyle=null),void 0===r.nameAngle&&(r.nameAngle=0),void 0===r.description&&(r.description=null),void 0===r.information&&(r.information=null),void 0===r.creator&&(r.creator=null),void 0===r.license&&(r.license=null),void 0===r.icon&&(r.icon=null),void 0===r.planIcon&&(r.planIcon=null),void 0===r.model&&(r.model=null),void 0===r.modelSize&&(r.modelSize=null),void 0===r.width&&(r.width=0),void 0===r.widthInPlan&&(r.widthInPlan=0),void 0===r.depth&&(r.depth=0),void 0===r.depthInPlan&&(r.depthInPlan=0),void 0===r.height&&(r.height=0),void 0===r.heightInPlan&&(r.heightInPlan=0),void 0===r.elevation&&(r.elevation=0),void 0===r.dropOnTopElevation&&(r.dropOnTopElevation=0),void 0===r.movable&&(r.movable=!1),void 0===r.doorOrWindow&&(r.doorOrWindow=!1),void 0===r.modelMaterials&&(r.modelMaterials=null),void 0===r.color&&(r.color=null),void 0===r.texture&&(r.texture=null),void 0===r.shininess&&(r.shininess=null),void 0===r.modelRotation&&(r.modelRotation=null),void 0===r.modelFlags&&(r.modelFlags=0),void 0===r.modelCenteredAtOrigin&&(r.modelCenteredAtOrigin=!1),void 0===r.modelTransformations&&(r.modelTransformations=null),void 0===r.staircaseCutOutShape&&(r.staircaseCutOutShape=null),void 0===r.backFaceShown&&(r.backFaceShown=!1),void 0===r.resizable&&(r.resizable=!1),void 0===r.deformable&&(r.deformable=!1),void 0===r.texturable&&(r.texturable=!1),void 0===r.horizontallyRotatable&&(r.horizontallyRotatable=!1),void 0===r.price&&(r.price=null),void 0===r.valueAddedTaxPercentage&&(r.valueAddedTaxPercentage=null),void 0===r.currency&&(r.currency=null),void 0===r.visible&&(r.visible=!1),void 0===r.x&&(r.x=0),void 0===r.y&&(r.y=0),void 0===r.angle&&(r.angle=0),void 0===r.pitch&&(r.pitch=0),void 0===r.roll&&(r.roll=0),void 0===r.modelMirrored&&(r.modelMirrored=!1),void 0===r.level&&(r.level=null),void 0===r.shapeCache&&(r.shapeCache=null),r.name=c.getName(),r.description=c.getDescription(),r.information=c.getInformation(),r.creator=c.getCreator(),r.license=c.getLicense(),r.icon=c.getIcon(),r.planIcon=c.getPlanIcon(),r.model=c.getModel(),r.modelSize=c.getModelSize(),r.width=c.getWidth(),r.depth=c.getDepth(),r.height=c.getHeight(),r.elevation=c.getElevation(),r.dropOnTopElevation=c.getDropOnTopElevation(),r.movable=c.isMovable(),r.doorOrWindow=c.isDoorOrWindow(),r.color=c.getColor(),r.modelRotation=c.getModelRotation(),r.staircaseCutOutShape=c.getStaircaseCutOutShape(),r.modelFlags=c.getModelFlags(),r.resizable=c.isResizable(),r.deformable=c.isDeformable(),r.texturable=c.isTexturable(),r.horizontallyRotatable=c.isHorizontallyRotatable(),r.price=c.getPrice(),r.valueAddedTaxPercentage=c.getValueAddedTaxPercentage(),r.currency=c.getCurrency(),null!=c&&c instanceof t){a=c;r.catalogId=a.getCatalogId(),r.nameVisible=a.isNameVisible(),r.nameXOffset=a.getNameXOffset(),r.nameYOffset=a.getNameYOffset(),r.nameAngle=a.getNameAngle(),r.nameStyle=a.getNameStyle(),r.visible=a.isVisible(),r.widthInPlan=a.getWidthInPlan(),r.depthInPlan=a.getDepthInPlan(),r.heightInPlan=a.getHeightInPlan(),r.modelCenteredAtOrigin=a.isModelCenteredAtOrigin(),r.modelTransformations=a.getModelTransformations(),r.angle=a.getAngle(),r.pitch=a.getPitch(),r.roll=a.getRoll(),r.x=a.getX(),r.y=a.getY(),r.modelMirrored=a.isModelMirrored(),r.texture=a.getTexture(),r.shininess=a.getShininess(),r.modelMaterials=a.getModelMaterials();for(s=null!=p?p.slice(0):a.getPropertyNames(),h=0;h<s.length;h++){u=s[h];null!=(C=a.isContentProperty(u)?a.getContentProperty(u):a.getProperty(u))&&r.setProperty$java_lang_String$java_lang_Object(u,C)}}else{if(null!=c&&c instanceof CatalogPieceOfFurniture){d=c;r.catalogId=d.getId();for(s=null!=p?p.slice(0):d.getPropertyNames(),h=0;h<s.length;h++){u=s[h];null!=(C=d.isContentProperty(u)?d.getContentProperty(u):d.getProperty(u))&&r.setProperty$java_lang_String$java_lang_Object(u,C)}}r.visible=!0,r.widthInPlan=r.width,r.depthInPlan=r.depth,r.heightInPlan=r.height,r.modelCenteredAtOrigin=!0,r.x=r.width/2,r.y=r.depth/2}void 0===r.catalogId&&(r.catalogId=null),void 0===r.name&&(r.name=null),void 0===r.nameVisible&&(r.nameVisible=!1),void 0===r.nameXOffset&&(r.nameXOffset=0),void 0===r.nameYOffset&&(r.nameYOffset=0),void 0===r.nameStyle&&(r.nameStyle=null),void 0===r.nameAngle&&(r.nameAngle=0),void 0===r.description&&(r.description=null),void 0===r.information&&(r.information=null),void 0===r.creator&&(r.creator=null),void 0===r.license&&(r.license=null),void 0===r.icon&&(r.icon=null),void 0===r.planIcon&&(r.planIcon=null),void 0===r.model&&(r.model=null),void 0===r.modelSize&&(r.modelSize=null),void 0===r.width&&(r.width=0),void 0===r.widthInPlan&&(r.widthInPlan=0),void 0===r.depth&&(r.depth=0),void 0===r.depthInPlan&&(r.depthInPlan=0),void 0===r.height&&(r.height=0),void 0===r.heightInPlan&&(r.heightInPlan=0),void 0===r.elevation&&(r.elevation=0),void 0===r.dropOnTopElevation&&(r.dropOnTopElevation=0),void 0===r.movable&&(r.movable=!1),void 0===r.doorOrWindow&&(r.doorOrWindow=!1),void 0===r.modelMaterials&&(r.modelMaterials=null),void 0===r.color&&(r.color=null),void 0===r.texture&&(r.texture=null),void 0===r.shininess&&(r.shininess=null),void 0===r.modelRotation&&(r.modelRotation=null),void 0===r.modelFlags&&(r.modelFlags=0),void 0===r.modelCenteredAtOrigin&&(r.modelCenteredAtOrigin=!1),void 0===r.modelTransformations&&(r.modelTransformations=null),void 0===r.staircaseCutOutShape&&(r.staircaseCutOutShape=null),void 0===r.backFaceShown&&(r.backFaceShown=!1),void 0===r.resizable&&(r.resizable=!1),void 0===r.deformable&&(r.deformable=!1),void 0===r.texturable&&(r.texturable=!1),void 0===r.horizontallyRotatable&&(r.horizontallyRotatable=!1),void 0===r.price&&(r.price=null),void 0===r.valueAddedTaxPercentage&&(r.valueAddedTaxPercentage=null),void 0===r.currency&&(r.currency=null),void 0===r.visible&&(r.visible=!1),void 0===r.x&&(r.x=0),void 0===r.y&&(r.y=0),void 0===r.angle&&(r.angle=0),void 0===r.pitch&&(r.pitch=0),void 0===r.roll&&(r.roll=0),void 0===r.modelMirrored&&(r.modelMirrored=!1),void 0===r.level&&(r.level=null),void 0===r.shapeCache&&(r.shapeCache=null)}else if("string"!=typeof i&&null!==i||!(null!=n&&null!=n.constructor&&null!=n.constructor.__interfaces&&n.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.PieceOfFurniture")>=0||null===n)||void 0!==o){if(!(null!=i&&null!=i.constructor&&null!=i.constructor.__interfaces&&i.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.PieceOfFurniture")>=0||null===i)||void 0!==n||void 0!==o)throw new Error("invalid overload");var v=(l=arguments)[0],f=t.EMPTY_PROPERTY_ARRAY_$LI$(),m=HomeObject.createId("pieceOfFurniture");if(void 0===(r=e.call(this,m)||this).catalogId&&(r.catalogId=null),void 0===r.name&&(r.name=null),void 0===r.nameVisible&&(r.nameVisible=!1),void 0===r.nameXOffset&&(r.nameXOffset=0),void 0===r.nameYOffset&&(r.nameYOffset=0),void 0===r.nameStyle&&(r.nameStyle=null),void 0===r.nameAngle&&(r.nameAngle=0),void 0===r.description&&(r.description=null),void 0===r.information&&(r.information=null),void 0===r.creator&&(r.creator=null),void 0===r.license&&(r.license=null),void 0===r.icon&&(r.icon=null),void 0===r.planIcon&&(r.planIcon=null),void 0===r.model&&(r.model=null),void 0===r.modelSize&&(r.modelSize=null),void 0===r.width&&(r.width=0),void 0===r.widthInPlan&&(r.widthInPlan=0),void 0===r.depth&&(r.depth=0),void 0===r.depthInPlan&&(r.depthInPlan=0),void 0===r.height&&(r.height=0),void 0===r.heightInPlan&&(r.heightInPlan=0),void 0===r.elevation&&(r.elevation=0),void 0===r.dropOnTopElevation&&(r.dropOnTopElevation=0),void 0===r.movable&&(r.movable=!1),void 0===r.doorOrWindow&&(r.doorOrWindow=!1),void 0===r.modelMaterials&&(r.modelMaterials=null),void 0===r.color&&(r.color=null),void 0===r.texture&&(r.texture=null),void 0===r.shininess&&(r.shininess=null),void 0===r.modelRotation&&(r.modelRotation=null),void 0===r.modelFlags&&(r.modelFlags=0),void 0===r.modelCenteredAtOrigin&&(r.modelCenteredAtOrigin=!1),void 0===r.modelTransformations&&(r.modelTransformations=null),void 0===r.staircaseCutOutShape&&(r.staircaseCutOutShape=null),void 0===r.backFaceShown&&(r.backFaceShown=!1),void 0===r.resizable&&(r.resizable=!1),void 0===r.deformable&&(r.deformable=!1),void 0===r.texturable&&(r.texturable=!1),void 0===r.horizontallyRotatable&&(r.horizontallyRotatable=!1),void 0===r.price&&(r.price=null),void 0===r.valueAddedTaxPercentage&&(r.valueAddedTaxPercentage=null),void 0===r.currency&&(r.currency=null),void 0===r.visible&&(r.visible=!1),void 0===r.x&&(r.x=0),void 0===r.y&&(r.y=0),void 0===r.angle&&(r.angle=0),void 0===r.pitch&&(r.pitch=0),void 0===r.roll&&(r.roll=0),void 0===r.modelMirrored&&(r.modelMirrored=!1),void 0===r.level&&(r.level=null),void 0===r.shapeCache&&(r.shapeCache=null),r.name=v.getName(),r.description=v.getDescription(),r.information=v.getInformation(),r.creator=v.getCreator(),r.license=v.getLicense(),r.icon=v.getIcon(),r.planIcon=v.getPlanIcon(),r.model=v.getModel(),r.modelSize=v.getModelSize(),r.width=v.getWidth(),r.depth=v.getDepth(),r.height=v.getHeight(),r.elevation=v.getElevation(),r.dropOnTopElevation=v.getDropOnTopElevation(),r.movable=v.isMovable(),r.doorOrWindow=v.isDoorOrWindow(),r.color=v.getColor(),r.modelRotation=v.getModelRotation(),r.staircaseCutOutShape=v.getStaircaseCutOutShape(),r.modelFlags=v.getModelFlags(),r.resizable=v.isResizable(),r.deformable=v.isDeformable(),r.texturable=v.isTexturable(),r.horizontallyRotatable=v.isHorizontallyRotatable(),r.price=v.getPrice(),r.valueAddedTaxPercentage=v.getValueAddedTaxPercentage(),r.currency=v.getCurrency(),null!=v&&v instanceof t){a=v;r.catalogId=a.getCatalogId(),r.nameVisible=a.isNameVisible(),r.nameXOffset=a.getNameXOffset(),r.nameYOffset=a.getNameYOffset(),r.nameAngle=a.getNameAngle(),r.nameStyle=a.getNameStyle(),r.visible=a.isVisible(),r.widthInPlan=a.getWidthInPlan(),r.depthInPlan=a.getDepthInPlan(),r.heightInPlan=a.getHeightInPlan(),r.modelCenteredAtOrigin=a.isModelCenteredAtOrigin(),r.modelTransformations=a.getModelTransformations(),r.angle=a.getAngle(),r.pitch=a.getPitch(),r.roll=a.getRoll(),r.x=a.getX(),r.y=a.getY(),r.modelMirrored=a.isModelMirrored(),r.texture=a.getTexture(),r.shininess=a.getShininess(),r.modelMaterials=a.getModelMaterials();for(s=null!=f?f.slice(0):a.getPropertyNames(),h=0;h<s.length;h++){u=s[h];null!=(C=a.isContentProperty(u)?a.getContentProperty(u):a.getProperty(u))&&r.setProperty$java_lang_String$java_lang_Object(u,C)}}else{if(null!=v&&v instanceof CatalogPieceOfFurniture){d=v;r.catalogId=d.getId();for(s=null!=f?f.slice(0):d.getPropertyNames(),h=0;h<s.length;h++){u=s[h];null!=(C=d.isContentProperty(u)?d.getContentProperty(u):d.getProperty(u))&&r.setProperty$java_lang_String$java_lang_Object(u,C)}}r.visible=!0,r.widthInPlan=r.width,r.depthInPlan=r.depth,r.heightInPlan=r.height,r.modelCenteredAtOrigin=!0,r.x=r.width/2,r.y=r.depth/2}void 0===r.catalogId&&(r.catalogId=null),void 0===r.name&&(r.name=null),void 0===r.nameVisible&&(r.nameVisible=!1),void 0===r.nameXOffset&&(r.nameXOffset=0),void 0===r.nameYOffset&&(r.nameYOffset=0),void 0===r.nameStyle&&(r.nameStyle=null),void 0===r.nameAngle&&(r.nameAngle=0),void 0===r.description&&(r.description=null),void 0===r.information&&(r.information=null),void 0===r.creator&&(r.creator=null),void 0===r.license&&(r.license=null),void 0===r.icon&&(r.icon=null),void 0===r.planIcon&&(r.planIcon=null),void 0===r.model&&(r.model=null),void 0===r.modelSize&&(r.modelSize=null),void 0===r.width&&(r.width=0),void 0===r.widthInPlan&&(r.widthInPlan=0),void 0===r.depth&&(r.depth=0),void 0===r.depthInPlan&&(r.depthInPlan=0),void 0===r.height&&(r.height=0),void 0===r.heightInPlan&&(r.heightInPlan=0),void 0===r.elevation&&(r.elevation=0),void 0===r.dropOnTopElevation&&(r.dropOnTopElevation=0),void 0===r.movable&&(r.movable=!1),void 0===r.doorOrWindow&&(r.doorOrWindow=!1),void 0===r.modelMaterials&&(r.modelMaterials=null),void 0===r.color&&(r.color=null),void 0===r.texture&&(r.texture=null),void 0===r.shininess&&(r.shininess=null),void 0===r.modelRotation&&(r.modelRotation=null),void 0===r.modelFlags&&(r.modelFlags=0),void 0===r.modelCenteredAtOrigin&&(r.modelCenteredAtOrigin=!1),void 0===r.modelTransformations&&(r.modelTransformations=null),void 0===r.staircaseCutOutShape&&(r.staircaseCutOutShape=null),void 0===r.backFaceShown&&(r.backFaceShown=!1),void 0===r.resizable&&(r.resizable=!1),void 0===r.deformable&&(r.deformable=!1),void 0===r.texturable&&(r.texturable=!1),void 0===r.horizontallyRotatable&&(r.horizontallyRotatable=!1),void 0===r.price&&(r.price=null),void 0===r.valueAddedTaxPercentage&&(r.valueAddedTaxPercentage=null),void 0===r.currency&&(r.currency=null),void 0===r.visible&&(r.visible=!1),void 0===r.x&&(r.x=0),void 0===r.y&&(r.y=0),void 0===r.angle&&(r.angle=0),void 0===r.pitch&&(r.pitch=0),void 0===r.roll&&(r.roll=0),void 0===r.modelMirrored&&(r.modelMirrored=!1),void 0===r.level&&(r.level=null),void 0===r.shapeCache&&(r.shapeCache=null),void 0===r.catalogId&&(r.catalogId=null),void 0===r.name&&(r.name=null),void 0===r.nameVisible&&(r.nameVisible=!1),void 0===r.nameXOffset&&(r.nameXOffset=0),void 0===r.nameYOffset&&(r.nameYOffset=0),void 0===r.nameStyle&&(r.nameStyle=null),void 0===r.nameAngle&&(r.nameAngle=0),void 0===r.description&&(r.description=null),void 0===r.information&&(r.information=null),void 0===r.creator&&(r.creator=null),void 0===r.license&&(r.license=null),void 0===r.icon&&(r.icon=null),void 0===r.planIcon&&(r.planIcon=null),void 0===r.model&&(r.model=null),void 0===r.modelSize&&(r.modelSize=null),void 0===r.width&&(r.width=0),void 0===r.widthInPlan&&(r.widthInPlan=0),void 0===r.depth&&(r.depth=0),void 0===r.depthInPlan&&(r.depthInPlan=0),void 0===r.height&&(r.height=0),void 0===r.heightInPlan&&(r.heightInPlan=0),void 0===r.elevation&&(r.elevation=0),void 0===r.dropOnTopElevation&&(r.dropOnTopElevation=0),void 0===r.movable&&(r.movable=!1),void 0===r.doorOrWindow&&(r.doorOrWindow=!1),void 0===r.modelMaterials&&(r.modelMaterials=null),void 0===r.color&&(r.color=null),void 0===r.texture&&(r.texture=null),void 0===r.shininess&&(r.shininess=null),void 0===r.modelRotation&&(r.modelRotation=null),void 0===r.modelFlags&&(r.modelFlags=0),void 0===r.modelCenteredAtOrigin&&(r.modelCenteredAtOrigin=!1),void 0===r.modelTransformations&&(r.modelTransformations=null),void 0===r.staircaseCutOutShape&&(r.staircaseCutOutShape=null),void 0===r.backFaceShown&&(r.backFaceShown=!1),void 0===r.resizable&&(r.resizable=!1),void 0===r.deformable&&(r.deformable=!1),void 0===r.texturable&&(r.texturable=!1),void 0===r.horizontallyRotatable&&(r.horizontallyRotatable=!1),void 0===r.price&&(r.price=null),void 0===r.valueAddedTaxPercentage&&(r.valueAddedTaxPercentage=null),void 0===r.currency&&(r.currency=null),void 0===r.visible&&(r.visible=!1),void 0===r.x&&(r.x=0),void 0===r.y&&(r.y=0),void 0===r.angle&&(r.angle=0),void 0===r.pitch&&(r.pitch=0),void 0===r.roll&&(r.roll=0),void 0===r.modelMirrored&&(r.modelMirrored=!1),void 0===r.level&&(r.level=null),void 0===r.shapeCache&&(r.shapeCache=null)}else{var l=arguments,y=t.EMPTY_PROPERTY_ARRAY_$LI$();if(void 0===(r=e.call(this,i)||this).catalogId&&(r.catalogId=null),void 0===r.name&&(r.name=null),void 0===r.nameVisible&&(r.nameVisible=!1),void 0===r.nameXOffset&&(r.nameXOffset=0),void 0===r.nameYOffset&&(r.nameYOffset=0),void 0===r.nameStyle&&(r.nameStyle=null),void 0===r.nameAngle&&(r.nameAngle=0),void 0===r.description&&(r.description=null),void 0===r.information&&(r.information=null),void 0===r.creator&&(r.creator=null),void 0===r.license&&(r.license=null),void 0===r.icon&&(r.icon=null),void 0===r.planIcon&&(r.planIcon=null),void 0===r.model&&(r.model=null),void 0===r.modelSize&&(r.modelSize=null),void 0===r.width&&(r.width=0),void 0===r.widthInPlan&&(r.widthInPlan=0),void 0===r.depth&&(r.depth=0),void 0===r.depthInPlan&&(r.depthInPlan=0),void 0===r.height&&(r.height=0),void 0===r.heightInPlan&&(r.heightInPlan=0),void 0===r.elevation&&(r.elevation=0),void 0===r.dropOnTopElevation&&(r.dropOnTopElevation=0),void 0===r.movable&&(r.movable=!1),void 0===r.doorOrWindow&&(r.doorOrWindow=!1),void 0===r.modelMaterials&&(r.modelMaterials=null),void 0===r.color&&(r.color=null),void 0===r.texture&&(r.texture=null),void 0===r.shininess&&(r.shininess=null),void 0===r.modelRotation&&(r.modelRotation=null),void 0===r.modelFlags&&(r.modelFlags=0),void 0===r.modelCenteredAtOrigin&&(r.modelCenteredAtOrigin=!1),void 0===r.modelTransformations&&(r.modelTransformations=null),void 0===r.staircaseCutOutShape&&(r.staircaseCutOutShape=null),void 0===r.backFaceShown&&(r.backFaceShown=!1),void 0===r.resizable&&(r.resizable=!1),void 0===r.deformable&&(r.deformable=!1),void 0===r.texturable&&(r.texturable=!1),void 0===r.horizontallyRotatable&&(r.horizontallyRotatable=!1),void 0===r.price&&(r.price=null),void 0===r.valueAddedTaxPercentage&&(r.valueAddedTaxPercentage=null),void 0===r.currency&&(r.currency=null),void 0===r.visible&&(r.visible=!1),void 0===r.x&&(r.x=0),void 0===r.y&&(r.y=0),void 0===r.angle&&(r.angle=0),void 0===r.pitch&&(r.pitch=0),void 0===r.roll&&(r.roll=0),void 0===r.modelMirrored&&(r.modelMirrored=!1),void 0===r.level&&(r.level=null),void 0===r.shapeCache&&(r.shapeCache=null),r.name=n.getName(),r.description=n.getDescription(),r.information=n.getInformation(),r.creator=n.getCreator(),r.license=n.getLicense(),r.icon=n.getIcon(),r.planIcon=n.getPlanIcon(),r.model=n.getModel(),r.modelSize=n.getModelSize(),r.width=n.getWidth(),r.depth=n.getDepth(),r.height=n.getHeight(),r.elevation=n.getElevation(),r.dropOnTopElevation=n.getDropOnTopElevation(),r.movable=n.isMovable(),r.doorOrWindow=n.isDoorOrWindow(),r.color=n.getColor(),r.modelRotation=n.getModelRotation(),r.staircaseCutOutShape=n.getStaircaseCutOutShape(),r.modelFlags=n.getModelFlags(),r.resizable=n.isResizable(),r.deformable=n.isDeformable(),r.texturable=n.isTexturable(),r.horizontallyRotatable=n.isHorizontallyRotatable(),r.price=n.getPrice(),r.valueAddedTaxPercentage=n.getValueAddedTaxPercentage(),r.currency=n.getCurrency(),null!=n&&n instanceof t){var a=n;r.catalogId=a.getCatalogId(),r.nameVisible=a.isNameVisible(),r.nameXOffset=a.getNameXOffset(),r.nameYOffset=a.getNameYOffset(),r.nameAngle=a.getNameAngle(),r.nameStyle=a.getNameStyle(),r.visible=a.isVisible(),r.widthInPlan=a.getWidthInPlan(),r.depthInPlan=a.getDepthInPlan(),r.heightInPlan=a.getHeightInPlan(),r.modelCenteredAtOrigin=a.isModelCenteredAtOrigin(),r.modelTransformations=a.getModelTransformations(),r.angle=a.getAngle(),r.pitch=a.getPitch(),r.roll=a.getRoll(),r.x=a.getX(),r.y=a.getY(),r.modelMirrored=a.isModelMirrored(),r.texture=a.getTexture(),r.shininess=a.getShininess(),r.modelMaterials=a.getModelMaterials();for(var s=null!=y?y.slice(0):a.getPropertyNames(),h=0;h<s.length;h++){var u=s[h];null!=(C=a.isContentProperty(u)?a.getContentProperty(u):a.getProperty(u))&&r.setProperty$java_lang_String$java_lang_Object(u,C)}}else{if(null!=n&&n instanceof CatalogPieceOfFurniture){var d=n;r.catalogId=d.getId();for(var s=null!=y?y.slice(0):d.getPropertyNames(),h=0;h<s.length;h++){var C,u=s[h];null!=(C=d.isContentProperty(u)?d.getContentProperty(u):d.getProperty(u))&&r.setProperty$java_lang_String$java_lang_Object(u,C)}}r.visible=!0,r.widthInPlan=r.width,r.depthInPlan=r.depth,r.heightInPlan=r.height,r.modelCenteredAtOrigin=!0,r.x=r.width/2,r.y=r.depth/2}void 0===r.catalogId&&(r.catalogId=null),void 0===r.name&&(r.name=null),void 0===r.nameVisible&&(r.nameVisible=!1),void 0===r.nameXOffset&&(r.nameXOffset=0),void 0===r.nameYOffset&&(r.nameYOffset=0),void 0===r.nameStyle&&(r.nameStyle=null),void 0===r.nameAngle&&(r.nameAngle=0),void 0===r.description&&(r.description=null),void 0===r.information&&(r.information=null),void 0===r.creator&&(r.creator=null),void 0===r.license&&(r.license=null),void 0===r.icon&&(r.icon=null),void 0===r.planIcon&&(r.planIcon=null),void 0===r.model&&(r.model=null),void 0===r.modelSize&&(r.modelSize=null),void 0===r.width&&(r.width=0),void 0===r.widthInPlan&&(r.widthInPlan=0),void 0===r.depth&&(r.depth=0),void 0===r.depthInPlan&&(r.depthInPlan=0),void 0===r.height&&(r.height=0),void 0===r.heightInPlan&&(r.heightInPlan=0),void 0===r.elevation&&(r.elevation=0),void 0===r.dropOnTopElevation&&(r.dropOnTopElevation=0),void 0===r.movable&&(r.movable=!1),void 0===r.doorOrWindow&&(r.doorOrWindow=!1),void 0===r.modelMaterials&&(r.modelMaterials=null),void 0===r.color&&(r.color=null),void 0===r.texture&&(r.texture=null),void 0===r.shininess&&(r.shininess=null),void 0===r.modelRotation&&(r.modelRotation=null),void 0===r.modelFlags&&(r.modelFlags=0),void 0===r.modelCenteredAtOrigin&&(r.modelCenteredAtOrigin=!1),void 0===r.modelTransformations&&(r.modelTransformations=null),void 0===r.staircaseCutOutShape&&(r.staircaseCutOutShape=null),void 0===r.backFaceShown&&(r.backFaceShown=!1),void 0===r.resizable&&(r.resizable=!1),void 0===r.deformable&&(r.deformable=!1),void 0===r.texturable&&(r.texturable=!1),void 0===r.horizontallyRotatable&&(r.horizontallyRotatable=!1),void 0===r.price&&(r.price=null),void 0===r.valueAddedTaxPercentage&&(r.valueAddedTaxPercentage=null),void 0===r.currency&&(r.currency=null),void 0===r.visible&&(r.visible=!1),void 0===r.x&&(r.x=0),void 0===r.y&&(r.y=0),void 0===r.angle&&(r.angle=0),void 0===r.pitch&&(r.pitch=0),void 0===r.roll&&(r.roll=0),void 0===r.modelMirrored&&(r.modelMirrored=!1),void 0===r.level&&(r.level=null),void 0===r.shapeCache&&(r.shapeCache=null)}return r}return __extends(t,e),t.__static_initialize=function(){t.__static_initialized||(t.__static_initialized=!0,t.__static_initializer_0())},t.TWICE_PI_$LI$=function(){return t.__static_initialize(),null==t.TWICE_PI&&(t.TWICE_PI=2*Math.PI),t.TWICE_PI},t.STRAIGHT_WALL_ANGLE_MARGIN_$LI$=function(){return t.__static_initialize(),null==t.STRAIGHT_WALL_ANGLE_MARGIN&&(t.STRAIGHT_WALL_ANGLE_MARGIN=1*Math.PI/180),t.STRAIGHT_WALL_ANGLE_MARGIN},t.ROUND_WALL_ANGLE_MARGIN_$LI$=function(){return t.__static_initialize(),null==t.ROUND_WALL_ANGLE_MARGIN&&(t.ROUND_WALL_ANGLE_MARGIN=10*Math.PI/180),t.ROUND_WALL_ANGLE_MARGIN},t.EMPTY_PROPERTY_ARRAY_$LI$=function(){return t.__static_initialize(),null==t.EMPTY_PROPERTY_ARRAY&&(t.EMPTY_PROPERTY_ARRAY=[]),t.EMPTY_PROPERTY_ARRAY},t.SORTABLE_PROPERTY_COMPARATORS_$LI$=function(){return t.__static_initialize(),t.SORTABLE_PROPERTY_COMPARATORS},t.__static_initializer_0=function(){var e={compare:function(e,t){return e.toString().localeCompare(t.toString())},equals:function(e,t){return 0===e.toString().localeCompare(t.toString())}};t.SORTABLE_PROPERTY_COMPARATORS={},function(e,t,i){null==e.entries&&(e.entries=[]);for(var n=0;n<e.entries.length;n++)if(e.entries[n].key,null!=e.entries[n].key.equals&&e.entries[n].key.equals(t)||e.entries[n].key===t)return void(e.entries[n].value=i);e.entries.push({key:t,value:i,getKey:function(){return this.key},getValue:function(){return this.value}})}(t.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"CATALOG_ID",new t.HomePieceOfFurniture$0(e)),function(e,t,i){null==e.entries&&(e.entries=[]);for(var n=0;n<e.entries.length;n++)if(e.entries[n].key,null!=e.entries[n].key.equals&&e.entries[n].key.equals(t)||e.entries[n].key===t)return void(e.entries[n].value=i);e.entries.push({key:t,value:i,getKey:function(){return this.key},getValue:function(){return this.value}})}(t.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"NAME",new t.HomePieceOfFurniture$1(e)),function(e,t,i){null==e.entries&&(e.entries=[]);for(var n=0;n<e.entries.length;n++)if(e.entries[n].key,null!=e.entries[n].key.equals&&e.entries[n].key.equals(t)||e.entries[n].key===t)return void(e.entries[n].value=i);e.entries.push({key:t,value:i,getKey:function(){return this.key},getValue:function(){return this.value}})}(t.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"DESCRIPTION",new t.HomePieceOfFurniture$2(e)),function(e,t,i){null==e.entries&&(e.entries=[]);for(var n=0;n<e.entries.length;n++)if(e.entries[n].key,null!=e.entries[n].key.equals&&e.entries[n].key.equals(t)||e.entries[n].key===t)return void(e.entries[n].value=i);e.entries.push({key:t,value:i,getKey:function(){return this.key},getValue:function(){return this.value}})}(t.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"CREATOR",new t.HomePieceOfFurniture$3(e)),function(e,t,i){null==e.entries&&(e.entries=[]);for(var n=0;n<e.entries.length;n++)if(e.entries[n].key,null!=e.entries[n].key.equals&&e.entries[n].key.equals(t)||e.entries[n].key===t)return void(e.entries[n].value=i);e.entries.push({key:t,value:i,getKey:function(){return this.key},getValue:function(){return this.value}})}(t.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"LICENSE",new t.HomePieceOfFurniture$4(e)),function(e,t,i){null==e.entries&&(e.entries=[]);for(var n=0;n<e.entries.length;n++)if(e.entries[n].key,null!=e.entries[n].key.equals&&e.entries[n].key.equals(t)||e.entries[n].key===t)return void(e.entries[n].value=i);e.entries.push({key:t,value:i,getKey:function(){return this.key},getValue:function(){return this.value}})}(t.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"WIDTH",new t.HomePieceOfFurniture$5),function(e,t,i){null==e.entries&&(e.entries=[]);for(var n=0;n<e.entries.length;n++)if(e.entries[n].key,null!=e.entries[n].key.equals&&e.entries[n].key.equals(t)||e.entries[n].key===t)return void(e.entries[n].value=i);e.entries.push({key:t,value:i,getKey:function(){return this.key},getValue:function(){return this.value}})}(t.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"HEIGHT",new t.HomePieceOfFurniture$6),function(e,t,i){null==e.entries&&(e.entries=[]);for(var n=0;n<e.entries.length;n++)if(e.entries[n].key,null!=e.entries[n].key.equals&&e.entries[n].key.equals(t)||e.entries[n].key===t)return void(e.entries[n].value=i);e.entries.push({key:t,value:i,getKey:function(){return this.key},getValue:function(){return this.value}})}(t.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"DEPTH",new t.HomePieceOfFurniture$7),function(e,t,i){null==e.entries&&(e.entries=[]);for(var n=0;n<e.entries.length;n++)if(e.entries[n].key,null!=e.entries[n].key.equals&&e.entries[n].key.equals(t)||e.entries[n].key===t)return void(e.entries[n].value=i);e.entries.push({key:t,value:i,getKey:function(){return this.key},getValue:function(){return this.value}})}(t.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"MOVABLE",new t.HomePieceOfFurniture$8),function(e,t,i){null==e.entries&&(e.entries=[]);for(var n=0;n<e.entries.length;n++)if(e.entries[n].key,null!=e.entries[n].key.equals&&e.entries[n].key.equals(t)||e.entries[n].key===t)return void(e.entries[n].value=i);e.entries.push({key:t,value:i,getKey:function(){return this.key},getValue:function(){return this.value}})}(t.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"DOOR_OR_WINDOW",new t.HomePieceOfFurniture$9),function(e,t,i){null==e.entries&&(e.entries=[]);for(var n=0;n<e.entries.length;n++)if(e.entries[n].key,null!=e.entries[n].key.equals&&e.entries[n].key.equals(t)||e.entries[n].key===t)return void(e.entries[n].value=i);e.entries.push({key:t,value:i,getKey:function(){return this.key},getValue:function(){return this.value}})}(t.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"COLOR",new t.HomePieceOfFurniture$10),function(e,t,i){null==e.entries&&(e.entries=[]);for(var n=0;n<e.entries.length;n++)if(e.entries[n].key,null!=e.entries[n].key.equals&&e.entries[n].key.equals(t)||e.entries[n].key===t)return void(e.entries[n].value=i);e.entries.push({key:t,value:i,getKey:function(){return this.key},getValue:function(){return this.value}})}(t.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"TEXTURE",new t.HomePieceOfFurniture$11(e)),function(e,t,i){null==e.entries&&(e.entries=[]);for(var n=0;n<e.entries.length;n++)if(e.entries[n].key,null!=e.entries[n].key.equals&&e.entries[n].key.equals(t)||e.entries[n].key===t)return void(e.entries[n].value=i);e.entries.push({key:t,value:i,getKey:function(){return this.key},getValue:function(){return this.value}})}(t.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"VISIBLE",new t.HomePieceOfFurniture$12),function(e,t,i){null==e.entries&&(e.entries=[]);for(var n=0;n<e.entries.length;n++)if(e.entries[n].key,null!=e.entries[n].key.equals&&e.entries[n].key.equals(t)||e.entries[n].key===t)return void(e.entries[n].value=i);e.entries.push({key:t,value:i,getKey:function(){return this.key},getValue:function(){return this.value}})}(t.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"X",new t.HomePieceOfFurniture$13),function(e,t,i){null==e.entries&&(e.entries=[]);for(var n=0;n<e.entries.length;n++)if(e.entries[n].key,null!=e.entries[n].key.equals&&e.entries[n].key.equals(t)||e.entries[n].key===t)return void(e.entries[n].value=i);e.entries.push({key:t,value:i,getKey:function(){return this.key},getValue:function(){return this.value}})}(t.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"Y",new t.HomePieceOfFurniture$14),function(e,t,i){null==e.entries&&(e.entries=[]);for(var n=0;n<e.entries.length;n++)if(e.entries[n].key,null!=e.entries[n].key.equals&&e.entries[n].key.equals(t)||e.entries[n].key===t)return void(e.entries[n].value=i);e.entries.push({key:t,value:i,getKey:function(){return this.key},getValue:function(){return this.value}})}(t.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"ELEVATION",new t.HomePieceOfFurniture$15),function(e,t,i){null==e.entries&&(e.entries=[]);for(var n=0;n<e.entries.length;n++)if(e.entries[n].key,null!=e.entries[n].key.equals&&e.entries[n].key.equals(t)||e.entries[n].key===t)return void(e.entries[n].value=i);e.entries.push({key:t,value:i,getKey:function(){return this.key},getValue:function(){return this.value}})}(t.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"ANGLE",new t.HomePieceOfFurniture$16),function(e,t,i){null==e.entries&&(e.entries=[]);for(var n=0;n<e.entries.length;n++)if(e.entries[n].key,null!=e.entries[n].key.equals&&e.entries[n].key.equals(t)||e.entries[n].key===t)return void(e.entries[n].value=i);e.entries.push({key:t,value:i,getKey:function(){return this.key},getValue:function(){return this.value}})}(t.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"MODEL_SIZE",new t.HomePieceOfFurniture$17),function(e,t,i){null==e.entries&&(e.entries=[]);for(var n=0;n<e.entries.length;n++)if(e.entries[n].key,null!=e.entries[n].key.equals&&e.entries[n].key.equals(t)||e.entries[n].key===t)return void(e.entries[n].value=i);e.entries.push({key:t,value:i,getKey:function(){return this.key},getValue:function(){return this.value}})}(t.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"LEVEL",new t.HomePieceOfFurniture$18),function(e,t,i){null==e.entries&&(e.entries=[]);for(var n=0;n<e.entries.length;n++)if(e.entries[n].key,null!=e.entries[n].key.equals&&e.entries[n].key.equals(t)||e.entries[n].key===t)return void(e.entries[n].value=i);e.entries.push({key:t,value:i,getKey:function(){return this.key},getValue:function(){return this.value}})}(t.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"PRICE",new t.HomePieceOfFurniture$19),function(e,t,i){null==e.entries&&(e.entries=[]);for(var n=0;n<e.entries.length;n++)if(e.entries[n].key,null!=e.entries[n].key.equals&&e.entries[n].key.equals(t)||e.entries[n].key===t)return void(e.entries[n].value=i);e.entries.push({key:t,value:i,getKey:function(){return this.key},getValue:function(){return this.value}})}(t.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"VALUE_ADDED_TAX_PERCENTAGE",new t.HomePieceOfFurniture$20),function(e,t,i){null==e.entries&&(e.entries=[]);for(var n=0;n<e.entries.length;n++)if(e.entries[n].key,null!=e.entries[n].key.equals&&e.entries[n].key.equals(t)||e.entries[n].key===t)return void(e.entries[n].value=i);e.entries.push({key:t,value:i,getKey:function(){return this.key},getValue:function(){return this.value}})}(t.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"VALUE_ADDED_TAX",new t.HomePieceOfFurniture$21),function(e,t,i){null==e.entries&&(e.entries=[]);for(var n=0;n<e.entries.length;n++)if(e.entries[n].key,null!=e.entries[n].key.equals&&e.entries[n].key.equals(t)||e.entries[n].key===t)return void(e.entries[n].value=i);e.entries.push({key:t,value:i,getKey:function(){return this.key},getValue:function(){return this.value}})}(t.SORTABLE_PROPERTY_COMPARATORS_$LI$(),"PRICE_VALUE_ADDED_TAX_INCLUDED",new t.HomePieceOfFurniture$22)},t.compare$float$float=function(e,t){return e-t},t.compare$boolean$boolean=function(e,t){return e===t?0:e?-1:1},t.compare$java_math_BigDecimal$java_math_BigDecimal=function(e,t){return e===t?0:null==e?-1:null==t?1:e.cmp(t)},t.compare=function(e,i){if((null!=e&&e instanceof Big||null===e)&&(null!=i&&i instanceof Big||null===i))return t.compare$java_math_BigDecimal$java_math_BigDecimal(e,i);if((null!=e&&e instanceof Level||null===e)&&(null!=i&&i instanceof Level||null===i))return t.compare$com_eteks_sweethome3d_model_Level$com_eteks_sweethome3d_model_Level(e,i);if("number"!=typeof e&&null!==e||"number"!=typeof i&&null!==i){if("boolean"!=typeof e&&null!==e||"boolean"!=typeof i&&null!==i)throw new Error("invalid overload");return t.compare$boolean$boolean(e,i)}return t.compare$float$float(e,i)},t.compare$com_eteks_sweethome3d_model_Level$com_eteks_sweethome3d_model_Level=function(e,t){return e===t?0:null==e?-1:null==t?1:e.getElevation()-t.getElevation()},t.getComparableModelSize=function(e){if(null!=e&&e instanceof HomeFurnitureGroup){for(var i=null,n=e.getFurniture(),o=0;o<n.length;o++){var r=n[o],l=t.getComparableModelSize(r);null!=l&&(null==i||i<l)&&(i=l)}return i}return e.modelSize},t.prototype.getCatalogId=function(){return this.catalogId},t.prototype.setCatalogId=function(e){if(e!==this.catalogId&&(null==e||e!==this.catalogId)){var t=this.catalogId;this.catalogId=e,this.firePropertyChange("CATALOG_ID",t,e)}},t.prototype.getName=function(){return this.name},t.prototype.setName=function(e){if(e!==this.name&&(null==e||e!==this.name)){var t=this.name;this.name=e,this.firePropertyChange("NAME",t,e)}},t.prototype.isNameVisible=function(){return this.nameVisible},t.prototype.setNameVisible=function(e){e!==this.nameVisible&&(this.nameVisible=e,this.firePropertyChange("NAME_VISIBLE",!e,e))},t.prototype.getNameXOffset=function(){return this.nameXOffset},t.prototype.setNameXOffset=function(e){if(e!==this.nameXOffset){var t=this.nameXOffset;this.nameXOffset=e,this.firePropertyChange("NAME_X_OFFSET",t,e)}},t.prototype.getNameYOffset=function(){return this.nameYOffset},t.prototype.setNameYOffset=function(e){if(e!==this.nameYOffset){var t=this.nameYOffset;this.nameYOffset=e,this.firePropertyChange("NAME_Y_OFFSET",t,e)}},t.prototype.getNameStyle=function(){return this.nameStyle},t.prototype.setNameStyle=function(e){if(e!==this.nameStyle){var t=this.nameStyle;this.nameStyle=e,this.firePropertyChange("NAME_STYLE",t,e)}},t.prototype.getNameAngle=function(){return this.nameAngle},t.prototype.setNameAngle=function(e){if((e=(e%t.TWICE_PI_$LI$()+t.TWICE_PI_$LI$())%t.TWICE_PI_$LI$())!==this.nameAngle){var i=this.nameAngle;this.nameAngle=e,this.firePropertyChange("NAME_ANGLE",i,e)}},t.prototype.getDescription=function(){return this.description},t.prototype.setDescription=function(e){if(e!==this.description&&(null==e||e!==this.description)){var t=this.description;this.description=e,this.firePropertyChange("DESCRIPTION",t,e)}},t.prototype.getInformation=function(){return this.information},t.prototype.setInformation=function(e){if(e!==this.information&&(null==e||e!==this.information)){var t=this.information;this.information=e,this.firePropertyChange("INFORMATION",t,e)}},t.prototype.getCreator=function(){return this.creator},t.prototype.setCreator=function(e){if(e!==this.creator&&(null==e||e!==this.creator)){var t=this.creator;this.creator=e,this.firePropertyChange("CREATOR",t,e)}},t.prototype.getLicense=function(){return this.license},t.prototype.setLicense=function(e){if(e!==this.license&&(null==e||e!==this.license)){var t=this.license;this.license=e,this.firePropertyChange("LICENSE",t,e)}},t.prototype.getDepth=function(){return this.depth},t.prototype.setDepth=function(e){if(!this.isResizable())throw new IllegalStateException("Piece isn't resizable");if(e!==this.depth){var t=this.depth;this.depth=e,this.shapeCache=null,this.firePropertyChange("DEPTH",t,e)}},t.prototype.getDepthInPlan=function(){return this.depthInPlan},t.prototype.setDepthInPlan=function(e){if(e!==this.depthInPlan){var t=this.depthInPlan;this.depthInPlan=e,this.shapeCache=null,this.firePropertyChange("DEPTH_IN_PLAN",t,e)}},t.prototype.getHeight=function(){return this.height},t.prototype.setHeight=function(e){if(!this.isResizable())throw new IllegalStateException("Piece isn't resizable");if(e!==this.height){var t=this.height;this.height=e,this.firePropertyChange("HEIGHT",t,e)}},t.prototype.getHeightInPlan=function(){return this.heightInPlan},t.prototype.setHeightInPlan=function(e){if(e!==this.heightInPlan){var t=this.heightInPlan;this.heightInPlan=e,this.firePropertyChange("HEIGHT_IN_PLAN",t,e)}},t.prototype.getWidth=function(){return this.width},t.prototype.setWidth=function(e){if(!this.isResizable())throw new IllegalStateException("Piece isn't resizable");if(e!==this.width){var t=this.width;this.width=e,this.shapeCache=null,this.firePropertyChange("WIDTH",t,e)}},t.prototype.getWidthInPlan=function(){return this.widthInPlan},t.prototype.setWidthInPlan=function(e){if(e!==this.widthInPlan){var t=this.widthInPlan;this.widthInPlan=e,this.shapeCache=null,this.firePropertyChange("WIDTH_IN_PLAN",t,e)}},t.prototype.scale=function(e){this.setWidth(this.getWidth()*e),this.setDepth(this.getDepth()*e),this.setHeight(this.getHeight()*e)},t.prototype.getElevation=function(){return this.elevation},t.prototype.getDropOnTopElevation=function(){return this.dropOnTopElevation},t.prototype.getGroundElevation=function(){return null!=this.level?this.elevation+this.level.getElevation():this.elevation},t.prototype.setElevation=function(e){if(e!==this.elevation){var t=this.elevation;this.elevation=e,this.firePropertyChange("ELEVATION",t,e)}},t.prototype.isMovable=function(){return this.movable},t.prototype.setMovable=function(e){e!==this.movable&&(this.movable=e,this.firePropertyChange("MOVABLE",!e,e))},t.prototype.isDoorOrWindow=function(){return this.doorOrWindow},t.prototype.getIcon=function(){return this.icon},t.prototype.setIcon=function(e){if(e!==this.icon&&(null==e||(i=e,n=this.icon,!(i&&i.equals?i.equals(n):i===n)))){var t=this.icon;this.icon=e,this.firePropertyChange("ICON",t,e)}var i,n},t.prototype.getPlanIcon=function(){return this.planIcon},t.prototype.setPlanIcon=function(e){if(e!==this.planIcon&&(null==e||(i=e,n=this.planIcon,!(i&&i.equals?i.equals(n):i===n)))){var t=this.planIcon;this.planIcon=e,this.firePropertyChange("PLAN_ICON",t,e)}var i,n},t.prototype.getModel=function(){return this.model},t.prototype.setModel=function(e){if(e!==this.model&&(null==e||(i=e,n=this.model,!(i&&i.equals?i.equals(n):i===n)))){var t=this.model;this.model=e,this.firePropertyChange("MODEL",t,e)}var i,n},t.prototype.getModelSize=function(){return this.modelSize},t.prototype.setModelSize=function(e){this.modelSize=e},t.prototype.getModelMaterials=function(){return null!=this.modelMaterials?this.modelMaterials.slice(0):null},t.prototype.setModelMaterials=function(e){if(!this.isTexturable())throw new IllegalStateException("Piece isn't texturable");if(!function(e,t){if(null==e&&null==t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!=t[i])return!1;return!0}(e,this.modelMaterials)){var t=this.modelMaterials;this.modelMaterials=null!=e?e.slice(0):null,this.firePropertyChange("MODEL_MATERIALS",t,e)}},t.prototype.getColor=function(){return this.color},t.prototype.setColor=function(e){if(!this.isTexturable())throw new IllegalStateException("Piece isn't texturable");if(e!==this.color&&(null==e||e!==this.color)){var t=this.color;this.color=e,this.firePropertyChange("COLOR",t,e)}},t.prototype.getTexture=function(){return this.texture},t.prototype.setTexture=function(e){if(!this.isTexturable())throw new IllegalStateException("Piece isn't texturable");if(e!==this.texture&&(null==e||!e.equals(this.texture))){var t=this.texture;this.texture=e,this.firePropertyChange("TEXTURE",t,e)}},t.prototype.getShininess=function(){return this.shininess},t.prototype.setShininess=function(e){if(!this.isTexturable())throw new IllegalStateException("Piece isn't texturable");if(e!==this.shininess&&(null==e||e!==this.shininess)){var t=this.shininess;this.shininess=e,this.firePropertyChange("SHININESS",t,e)}},t.prototype.isResizable=function(){return this.resizable},t.prototype.isDeformable=function(){return this.deformable},t.prototype.isWidthDepthDeformable=function(){return this.isDeformable()},t.prototype.isTexturable=function(){return this.texturable},t.prototype.isHorizontallyRotatable=function(){return this.horizontallyRotatable},t.prototype.getPrice=function(){return this.price},t.prototype.setPrice=function(e){if(e!==this.price&&(null==e||!(null!=this.price?e.eq(this.price):e===this.price))){var t=this.price;this.price=e,this.firePropertyChange("PRICE",t,e)}},t.prototype.getValueAddedTaxPercentage=function(){return this.valueAddedTaxPercentage},t.prototype.setValueAddedTaxPercentage=function(e){if(e!==this.valueAddedTaxPercentage&&(null==e||!(null!=this.valueAddedTaxPercentage?e.eq(this.valueAddedTaxPercentage):e===this.valueAddedTaxPercentage))){var t=this.valueAddedTaxPercentage;this.valueAddedTaxPercentage=e,this.firePropertyChange("VALUE_ADDED_TAX_PERCENTAGE",t,e)}},t.prototype.getValueAddedTax=function(){return null!=this.price&&null!=this.valueAddedTaxPercentage?this.price.times(this.valueAddedTaxPercentage).round(2):null},t.prototype.getPriceValueAddedTaxIncluded=function(){return null!=this.price&&null!=this.valueAddedTaxPercentage?this.price.plus(this.getValueAddedTax()):this.price},t.prototype.getCurrency=function(){return this.currency},t.prototype.setCurrency=function(e){if(e!==this.currency&&(null==e||e!==this.currency)){var t=this.currency;this.currency=e,this.firePropertyChange("CURRENCY",t,e)}},t.prototype.isVisible=function(){return this.visible},t.prototype.setVisible=function(e){e!==this.visible&&(this.visible=e,this.firePropertyChange("VISIBLE",!e,e))},t.prototype.getX=function(){return this.x},t.prototype.setX=function(e){if(e!==this.x){var t=this.x;this.x=e,this.shapeCache=null,this.firePropertyChange("X",t,e)}},t.prototype.getY=function(){return this.y},t.prototype.setY=function(e){if(e!==this.y){var t=this.y;this.y=e,this.shapeCache=null,this.firePropertyChange("Y",t,e)}},t.prototype.getAngle=function(){return this.angle},t.prototype.setAngle=function(e){if((e=(e%t.TWICE_PI_$LI$()+t.TWICE_PI_$LI$())%t.TWICE_PI_$LI$())!==this.angle){var i=this.angle;this.angle=e,this.shapeCache=null,this.firePropertyChange("ANGLE",i,e)}},t.prototype.getPitch=function(){return this.pitch},t.prototype.setPitch=function(e){if(!this.isHorizontallyRotatable())throw new IllegalStateException("Piece can't be rotated around an horizontal axis");if((e=(e%t.TWICE_PI_$LI$()+t.TWICE_PI_$LI$())%t.TWICE_PI_$LI$())!==this.pitch){var i=this.pitch;this.pitch=e,this.shapeCache=null,this.firePropertyChange("PITCH",i,e)}},t.prototype.getRoll=function(){return this.roll},t.prototype.setRoll=function(e){if(!this.isHorizontallyRotatable())throw new IllegalStateException("Piece can't be rotated around an horizontal axis");if((e=(e%t.TWICE_PI_$LI$()+t.TWICE_PI_$LI$())%t.TWICE_PI_$LI$())!==this.roll){var i=this.roll;this.roll=e,this.shapeCache=null,this.firePropertyChange("ROLL",i,e)}},t.prototype.isHorizontallyRotated=function(){return 0!==this.roll||0!==this.pitch},t.prototype.getModelRotation=function(){return CatalogPieceOfFurniture.deepClone(this.modelRotation)},t.prototype.setModelRotation=function(e){if(JSON.stringify(e)!==JSON.stringify(this.modelRotation)){var t=CatalogPieceOfFurniture.deepClone(this.modelRotation);this.modelRotation=CatalogPieceOfFurniture.deepClone(e),this.firePropertyChange("MODEL_ROTATION",t,e)}},t.prototype.isModelMirrored=function(){return this.modelMirrored},t.prototype.setModelMirrored=function(e){if(!this.isResizable())throw new IllegalStateException("Piece isn't resizable");e!==this.modelMirrored&&(this.modelMirrored=e,this.firePropertyChange("MODEL_MIRRORED",!e,e))},t.prototype.isModelCenteredAtOrigin=function(){return this.modelCenteredAtOrigin},t.prototype.setModelCenteredAtOrigin=function(e){this.modelCenteredAtOrigin=e},t.prototype.isBackFaceShown=function(){return(this.modelFlags&PieceOfFurniture.SHOW_BACK_FACE)===PieceOfFurniture.SHOW_BACK_FACE},t.prototype.setBackFaceShown=function(e){this.setModelFlags(this.getModelFlags()&~PieceOfFurniture.SHOW_BACK_FACE|(e?PieceOfFurniture.SHOW_BACK_FACE:0))},t.prototype.getModelFlags=function(){return this.modelFlags},t.prototype.setModelFlags=function(e){if(e!==this.modelFlags){var t=this.modelFlags;this.modelFlags=e,this.backFaceShown=(e&PieceOfFurniture.SHOW_BACK_FACE)===PieceOfFurniture.SHOW_BACK_FACE,this.firePropertyChange("MODEL_FLAGS",t,e)}},t.prototype.getModelTransformations=function(){return null!=this.modelTransformations?this.modelTransformations.slice(0):null},t.prototype.setModelTransformations=function(e){if(!function(e,t){if(null==e&&null==t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!=t[i])return!1;return!0}(e,this.modelTransformations)){var t=this.modelTransformations;this.modelTransformations=null!=e&&e.length>0?e.slice(0):null,this.firePropertyChange("MODEL_MATERIALS",t,e)}},t.prototype.getStaircaseCutOutShape=function(){return this.staircaseCutOutShape},t.prototype.setStaircaseCutOutShape=function(e){if(e!==this.staircaseCutOutShape&&(null==e||e!==this.staircaseCutOutShape)){var t=this.staircaseCutOutShape;this.staircaseCutOutShape=e,this.firePropertyChange("STAIRCASE_CUT_OUT_SHAPE",t,e)}},t.prototype.getLevel=function(){return this.level},t.prototype.setLevel=function(e){if(e!==this.level){var t=this.level;this.level=e,this.firePropertyChange("LEVEL",t,e)}},t.prototype.isAtLevel=function(e){if(this.level===e)return!0;if(null!=this.level&&null!=e){var t=this.level.getElevation(),i=e.getElevation();return t===i&&this.level.getElevationIndex()<e.getElevationIndex()||t<i&&this.isTopAtLevel(e)}return!1},t.prototype.isTopAtLevel=function(e){var t=this.level.getElevation()+this.elevation+this.heightInPlan;return null!=this.staircaseCutOutShape?t>=e.getElevation():t>e.getElevation()},t.prototype.getPoints=function(){for(var e,t=(e=function(t){if(0===t.length)return 0;for(var i=[],n=0;n<t[0];n++)i.push(e(t.slice(1)));return i})([4,2]),i=this.getShape().getPathIterator(null),n=0;n<t.length;n++)i.currentSegment(t[n]),i.next();return t},t.prototype.intersectsRectangle=function(e,t,i,n){var o=new java.awt.geom.Rectangle2D.Float(e,t,0,0);return o.add(i,n),this.getShape().intersects(o)},t.prototype.containsPoint=function(e,t,i){return 0===i?this.getShape().contains(e,t):this.getShape().intersects(e-i,t-i,2*i,2*i)},t.prototype.isPointAt=function(e,t,i){for(var n=this.getPoints(),o=0;o<n.length;o++){var r=n[o];if(Math.abs(e-r[0])<=i&&Math.abs(t-r[1])<=i)return!0}return!1},t.prototype.isTopLeftPointAt=function(e,t,i){var n=this.getPoints(),o=java.awt.geom.Point2D.distanceSq(e,t,n[0][0],n[0][1]);return o<=i*i&&o<java.awt.geom.Point2D.distanceSq(e,t,n[1][0],n[1][1])&&o<java.awt.geom.Point2D.distanceSq(e,t,n[3][0],n[3][1])},t.prototype.isTopRightPointAt=function(e,t,i){var n=this.getPoints(),o=java.awt.geom.Point2D.distanceSq(e,t,n[1][0],n[1][1]);return o<=i*i&&o<java.awt.geom.Point2D.distanceSq(e,t,n[0][0],n[0][1])&&o<java.awt.geom.Point2D.distanceSq(e,t,n[2][0],n[2][1])},t.prototype.isBottomLeftPointAt=function(e,t,i){var n=this.getPoints(),o=java.awt.geom.Point2D.distanceSq(e,t,n[3][0],n[3][1]);return o<=i*i&&o<java.awt.geom.Point2D.distanceSq(e,t,n[0][0],n[0][1])&&o<java.awt.geom.Point2D.distanceSq(e,t,n[2][0],n[2][1])},t.prototype.isBottomRightPointAt=function(e,t,i){var n=this.getPoints(),o=java.awt.geom.Point2D.distanceSq(e,t,n[2][0],n[2][1]);return o<=i*i&&o<java.awt.geom.Point2D.distanceSq(e,t,n[1][0],n[1][1])&&o<java.awt.geom.Point2D.distanceSq(e,t,n[3][0],n[3][1])},t.prototype.isNameCenterPointAt=function(e,t,i){return Math.abs(e-this.getX()-this.getNameXOffset())<=i&&Math.abs(t-this.getY()-this.getNameYOffset())<=i},t.prototype.isParallelToWall=function(e){if(null==e.getArcExtent()){var i=e.getYEnd()-e.getYStart(),n=e.getXEnd()-e.getXStart();if(0===n&&0===i)return!1;var o=Math.atan2(i,n);return(r=Math.abs(o-this.getAngle())%Math.PI)<=t.STRAIGHT_WALL_ANGLE_MARGIN_$LI$()||Math.PI-r<=t.STRAIGHT_WALL_ANGLE_MARGIN_$LI$()}var r,l=Math.PI/2+Math.atan2(e.getYArcCircleCenter()-this.getY(),e.getXArcCircleCenter()-this.getX());return(r=Math.abs(l-this.getAngle())%Math.PI)<=t.ROUND_WALL_ANGLE_MARGIN_$LI$()||Math.PI-r<=t.ROUND_WALL_ANGLE_MARGIN_$LI$()},t.prototype.getShape=function(){if(null==this.shapeCache){var e=new java.awt.geom.Rectangle2D.Float(this.getX()-this.getWidthInPlan()/2,this.getY()-this.getDepthInPlan()/2,this.getWidthInPlan(),this.getDepthInPlan()),t=java.awt.geom.AffineTransform.getRotateInstance(this.getAngle(),this.getX(),this.getY()),i=e.getPathIterator(t),n=new java.awt.geom.GeneralPath;n.append(i,!1),this.shapeCache=n}return this.shapeCache},t.prototype.move=function(e,t){this.setX(this.getX()+e),this.setY(this.getY()+t)},t.prototype.clone=function(){var t=this,i=function(i){if(null!=e.prototype.clone)return e.prototype.clone.call(t);var n=Object.create(i);for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o]);return n}(this);return i.level=null,i},t.getFurnitureComparator=function(e){return null==(i=function(e,t){null==e.entries&&(e.entries=[]);for(var i=0;i<e.entries.length;i++)if(null==e.entries[i].key&&null==t||null!=e.entries[i].key.equals&&e.entries[i].key.equals(t)||e.entries[i].key===t)return e.entries[i].value;return null}(t.SORTABLE_PROPERTY_COMPARATORS_$LI$(),e))||"function"==typeof i?i:function(e,t){return(i.compare?i.compare:i).call(i,e,t)};var i},t.__static_initialized=!1,t}(HomeObject);HomePieceOfFurniture.__class="com.eteks.sweethome3d.model.HomePieceOfFurniture",HomePieceOfFurniture.__interfaces=["com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.PieceOfFurniture","com.eteks.sweethome3d.model.Elevatable"],function(e){var t=function(){function e(e){this.collator=e}return e.prototype.compare=function(e,t){return e.catalogId===t.catalogId?0:null==e.catalogId?-1:null==t.catalogId?1:this.collator.compare(e.catalogId,t.catalogId)},e}();e.HomePieceOfFurniture$0=t;var i=function(){function e(e){this.collator=e}return e.prototype.compare=function(e,t){return e.name===t.name?0:null==e.name?-1:null==t.name?1:this.collator.compare(e.name,t.name)},e}();e.HomePieceOfFurniture$1=i;var n=function(){function e(e){this.collator=e}return e.prototype.compare=function(e,t){return e.description===t.description?0:null==e.description?-1:null==t.description?1:this.collator.compare(e.description,t.description)},e}();e.HomePieceOfFurniture$2=n;var o=function(){function e(e){this.collator=e}return e.prototype.compare=function(e,t){return e.creator===t.creator?0:null==e.creator?-1:null==t.creator?1:this.collator.compare(e.creator,t.creator)},e}();e.HomePieceOfFurniture$3=o;var r=function(){function e(e){this.collator=e}return e.prototype.compare=function(e,t){return e.license===t.license?0:null==e.license?-1:null==t.license?1:this.collator.compare(e.license,t.license)},e}();e.HomePieceOfFurniture$4=r;var l=function(){function t(){}return t.prototype.compare=function(t,i){return e.compare$float$float(t.width,i.width)},t}();e.HomePieceOfFurniture$5=l;var a=function(){function t(){}return t.prototype.compare=function(t,i){return e.compare$float$float(t.height,i.height)},t}();e.HomePieceOfFurniture$6=a;var s=function(){function t(){}return t.prototype.compare=function(t,i){return e.compare$float$float(t.depth,i.depth)},t}();e.HomePieceOfFurniture$7=s;var h=function(){function t(){}return t.prototype.compare=function(t,i){return e.compare$boolean$boolean(t.movable,i.movable)},t}();e.HomePieceOfFurniture$8=h;var u=function(){function t(){}return t.prototype.compare=function(t,i){return e.compare$boolean$boolean(t.doorOrWindow,i.doorOrWindow)},t}();e.HomePieceOfFurniture$9=u;var d=function(){function e(){}return e.prototype.compare=function(e,t){return e.color===t.color?0:null==e.color?-1:null==t.color?1:e.color-t.color},e}();e.HomePieceOfFurniture$10=d;var c=function(){function e(e){this.collator=e}return e.prototype.compare=function(e,t){return e.texture===t.texture?0:null==e.texture?-1:null==t.texture?1:this.collator.compare(e.texture.getName(),t.texture.getName())},e}();e.HomePieceOfFurniture$11=c;var p=function(){function t(){}return t.prototype.compare=function(t,i){return e.compare$boolean$boolean(t.visible,i.visible)},t}();e.HomePieceOfFurniture$12=p;var g=function(){function t(){}return t.prototype.compare=function(t,i){return e.compare$float$float(t.x,i.x)},t}();e.HomePieceOfFurniture$13=g;var v=function(){function t(){}return t.prototype.compare=function(t,i){return e.compare$float$float(t.y,i.y)},t}();e.HomePieceOfFurniture$14=v;var f=function(){function t(){}return t.prototype.compare=function(t,i){return e.compare$float$float(t.elevation,i.elevation)},t}();e.HomePieceOfFurniture$15=f;var m=function(){function t(){}return t.prototype.compare=function(t,i){return e.compare$float$float(t.angle,i.angle)},t}();e.HomePieceOfFurniture$16=m;var y=function(){function t(){}return t.prototype.compare=function(t,i){var n=e.getComparableModelSize(t),o=e.getComparableModelSize(i);return n===o?0:null==n?-1:null==o?1:n<o?-1:n===o?0:1},t}();e.HomePieceOfFurniture$17=y;var C=function(){function t(){}return t.prototype.compare=function(t,i){return e.compare$com_eteks_sweethome3d_model_Level$com_eteks_sweethome3d_model_Level(t.getLevel(),i.getLevel())},t}();e.HomePieceOfFurniture$18=C;var S=function(){function t(){}return t.prototype.compare=function(t,i){return e.compare$java_math_BigDecimal$java_math_BigDecimal(t.price,i.price)},t}();e.HomePieceOfFurniture$19=S;var E=function(){function t(){}return t.prototype.compare=function(t,i){return e.compare$java_math_BigDecimal$java_math_BigDecimal(t.valueAddedTaxPercentage,i.valueAddedTaxPercentage)},t}();e.HomePieceOfFurniture$20=E;var A=function(){function t(){}return t.prototype.compare=function(t,i){return e.compare$java_math_BigDecimal$java_math_BigDecimal(t.getValueAddedTax(),i.getValueAddedTax())},t}();e.HomePieceOfFurniture$21=A;var _=function(){function t(){}return t.prototype.compare=function(t,i){return e.compare$java_math_BigDecimal$java_math_BigDecimal(t.getPriceValueAddedTaxIncluded(),i.getPriceValueAddedTaxIncluded())},t}();e.HomePieceOfFurniture$22=_}(HomePieceOfFurniture||(HomePieceOfFurniture={})),HomePieceOfFurniture.__transients=["shapeCache","propertyChangeSupport"];var Compass=function(e){function t(t,i,n,o){var r=this;if("string"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o){if("number"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||void 0!==o)throw new Error("invalid overload");var l=(u=arguments)[0],a=u[1],s=u[2],h=HomeObject.createId("compass");void 0===(r=e.call(this,h)||this).x&&(r.x=0),void 0===r.y&&(r.y=0),void 0===r.diameter&&(r.diameter=0),void 0===r.visible&&(r.visible=!1),void 0===r.northDirection&&(r.northDirection=0),void 0===r.latitude&&(r.latitude=0),void 0===r.longitude&&(r.longitude=0),void 0===r.timeZone&&(r.timeZone=null),void 0===r.pointsCache&&(r.pointsCache=null),void 0===r.dateCache&&(r.dateCache=null),void 0===r.sunElevationCache&&(r.sunElevationCache=0),void 0===r.sunAzimuthCache&&(r.sunAzimuthCache=0),r.x=l,r.y=a,r.diameter=s,r.visible=!0,r.timeZone="UTC",r.initGeographicPoint(),void 0===r.x&&(r.x=0),void 0===r.y&&(r.y=0),void 0===r.diameter&&(r.diameter=0),void 0===r.visible&&(r.visible=!1),void 0===r.northDirection&&(r.northDirection=0),void 0===r.latitude&&(r.latitude=0),void 0===r.longitude&&(r.longitude=0),void 0===r.timeZone&&(r.timeZone=null),void 0===r.pointsCache&&(r.pointsCache=null),void 0===r.dateCache&&(r.dateCache=null),void 0===r.sunElevationCache&&(r.sunElevationCache=0),void 0===r.sunAzimuthCache&&(r.sunAzimuthCache=0)}else{var u=arguments;void 0===(r=e.call(this,t)||this).x&&(r.x=0),void 0===r.y&&(r.y=0),void 0===r.diameter&&(r.diameter=0),void 0===r.visible&&(r.visible=!1),void 0===r.northDirection&&(r.northDirection=0),void 0===r.latitude&&(r.latitude=0),void 0===r.longitude&&(r.longitude=0),void 0===r.timeZone&&(r.timeZone=null),void 0===r.pointsCache&&(r.pointsCache=null),void 0===r.dateCache&&(r.dateCache=null),void 0===r.sunElevationCache&&(r.sunElevationCache=0),void 0===r.sunAzimuthCache&&(r.sunAzimuthCache=0),r.x=i,r.y=n,r.diameter=o,r.visible=!0,r.timeZone="UTC",r.initGeographicPoint()}return r}return __extends(t,e),t.prototype.getX=function(){return this.x},t.prototype.setX=function(e){if(e!==this.x){var t=this.x;this.x=e,this.pointsCache=null,this.firePropertyChange("X",t,e)}},t.prototype.getY=function(){return this.y},t.prototype.setY=function(e){if(e!==this.y){var t=this.y;this.y=e,this.pointsCache=null,this.firePropertyChange("Y",t,e)}},t.prototype.getDiameter=function(){return this.diameter},t.prototype.setDiameter=function(e){if(e!==this.diameter){var t=this.diameter;this.diameter=e,this.pointsCache=null,this.firePropertyChange("DIAMETER",t,e)}},t.prototype.isVisible=function(){return this.visible},t.prototype.setVisible=function(e){e!==this.visible&&(this.visible=e,this.firePropertyChange("VISIBLE",!e,e))},t.prototype.getNorthDirection=function(){return this.northDirection},t.prototype.setNorthDirection=function(e){if(e!==this.northDirection){var t=this.northDirection;this.northDirection=e,this.pointsCache=null,this.firePropertyChange("NORTH_DIRECTION",t,e)}},t.prototype.getLatitude=function(){return this.latitude},t.prototype.setLatitude=function(e){if(e!==this.latitude){var t=this.latitude;this.latitude=e,this.dateCache=null,this.firePropertyChange("LATITUDE",t,e)}},t.prototype.getLongitude=function(){return this.longitude},t.prototype.setLongitude=function(e){if(e!==this.longitude){var t=this.longitude;this.longitude=e,this.dateCache=null,this.firePropertyChange("LONGITUDE",t,e)}},t.prototype.getTimeZone=function(){return this.timeZone},t.prototype.setTimeZone=function(e){if(this.timeZone!==e){if(null==e)throw new IllegalArgumentException("Time zone ID can't be null");var t=this.timeZone;this.timeZone=e,this.dateCache=null,this.firePropertyChange("TIME_ZONE",t,e)}},t.prototype.getPoints=function(){if(null==this.pointsCache){var e=new java.awt.geom.Rectangle2D.Float(this.getX()-this.getDiameter()/2,this.getY()-this.getDiameter()/2,this.getDiameter(),this.getDiameter()),t=java.awt.geom.AffineTransform.getRotateInstance(this.getNorthDirection(),this.getX(),this.getY());this.pointsCache=(o=function(e){if(0===e.length)return 0;for(var t=[],i=0;i<e[0];i++)t.push(o(e.slice(1)));return t})([4,2]);for(var i=e.getPathIterator(t),n=0;n<this.pointsCache.length;n++)i.currentSegment(this.pointsCache[n]),i.next()}var o;return[this.pointsCache[0].slice(0),this.pointsCache[1].slice(0),this.pointsCache[2].slice(0),this.pointsCache[3].slice(0)]},t.prototype.intersectsRectangle=function(e,t,i,n){var o=new java.awt.geom.Rectangle2D.Float(e,t,0,0);return o.add(i,n),new java.awt.geom.Ellipse2D.Float(this.getX()-this.getDiameter()/2,this.getY()-this.getDiameter()/2,this.getDiameter(),this.getDiameter()).intersects(o)},t.prototype.containsPoint=function(e,t,i){var n=new java.awt.geom.Ellipse2D.Float(this.getX()-this.getDiameter()/2,this.getY()-this.getDiameter()/2,this.getDiameter(),this.getDiameter());return 0===i?n.contains(e,t):n.intersects(e-i,t-i,2*i,2*i)},t.prototype.move=function(e,t){this.setX(this.getX()+e),this.setY(this.getY()+t)},t.prototype.clone=function(){var t=this;return function(i){if(null!=e.prototype.clone)return e.prototype.clone.call(t);var n=Object.create(i);for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o]);return n}(this)},t.prototype.computeJulianDay=function(e,t,i,n,o,r,l,a){1!==t&&2!==t||(e-=1,t+=12);var s=e/100|0,h=(365.25*(e+4716)|0)+(30.6001*(t+1)|0)+(i+n/24+o/1440+r/86400)+(2-s+(s/4|0))-1524.5;return h-=(l+a)/24,h-=2451545},t.prototype.toSiderealTime=function(e){var t=e/36525,i=(24110.54841+8640184.812866*t+.093104*Math.pow(t,2)-62e-7*Math.pow(t,3))/3600;return 24*(i/24-(i/24|0))},t.prototype.initGeographicPoint=function(){var e;if(null==(e=null!=t.timeZoneGeographicPointsReference?t.timeZoneGeographicPointsReference:null)){e={};var i=new t.GeographicPoint(-13.833333,-171.73334);e["Etc/GMT+11"]=i,e["Pacific/Apia"]=i,e["Pacific/Midway"]=new t.GeographicPoint(28.2,-177.35),e["Pacific/Niue"]=new t.GeographicPoint(-19.055,-169.92),e["Pacific/Pago_Pago"]=new t.GeographicPoint(-14.278055,-170.7025),e["Pacific/Samoa"]=i,e["US/Samoa"]=i,e["America/Adak"]=new t.GeographicPoint(51.88,-176.65805),e["America/Atka"]=new t.GeographicPoint(52.19611,-174.20056);var n=new t.GeographicPoint(21.306944,-157.85834);e["Etc/GMT+10"]=n,e["Pacific/Fakaofo"]=new t.GeographicPoint(-9.3653,-171.215),e["Pacific/Honolulu"]=n,e["Pacific/Johnston"]=new t.GeographicPoint(16.75,-169.517),e["Pacific/Rarotonga"]=new t.GeographicPoint(-21.233,-159.783),e["Pacific/Tahiti"]=new t.GeographicPoint(-17.533333,-149.56667),e["SystemV/HST10"]=n,e["US/Aleutian"]=new t.GeographicPoint(54.817,164.033),e["US/Hawaii"]=n,e["Pacific/Marquesas"]=new t.GeographicPoint(-9.45,-139.38);var o=new t.GeographicPoint(61.218056,-149.90028);e["America/Anchorage"]=o,e["America/Juneau"]=new t.GeographicPoint(58.301945,-134.41972),e["America/Nome"]=new t.GeographicPoint(64.501114,-165.40639),e["America/Yakutat"]=new t.GeographicPoint(59.546944,-139.72722),e["Etc/GMT+9"]=o,e["Pacific/Gambier"]=new t.GeographicPoint(-23.1178,-134.97),e["SystemV/YST9"]=o,e["SystemV/YST9YDT"]=o,e["US/Alaska"]=o,e["America/Dawson"]=new t.GeographicPoint(64.066666,-139.41667),e["America/Ensenada"]=new t.GeographicPoint(31.866667,-116.61667);var r=new t.GeographicPoint(34.052223,-118.242775);e["America/Los_Angeles"]=r,e["America/Santa_Isabel"]=new t.GeographicPoint(28.383333,-113.35),e["America/Tijuana"]=new t.GeographicPoint(32.533333,-117.01667),e["America/Vancouver"]=new t.GeographicPoint(49.25,-123.13333),e["America/Whitehorse"]=new t.GeographicPoint(60.716667,-135.05),e["Canada/Pacific"]=new t.GeographicPoint(49.25,-123.13333),e["Canada/Yukon"]=new t.GeographicPoint(60.716667,-135.05),e["Etc/GMT+8"]=r,e["Mexico/BajaNorte"]=new t.GeographicPoint(32.533333,-117.01667),e["Pacific/Pitcairn"]=new t.GeographicPoint(-25.0667,-130.1),e["SystemV/PST8"]=r,e["SystemV/PST8PDT"]=r,e["US/Pacific"]=r,e["US/Pacific-New"]=r,e["America/Boise"]=new t.GeographicPoint(43.61361,-116.2025),e["America/Cambridge_Bay"]=new t.GeographicPoint(69.11667,-105.03333),e["America/Chihuahua"]=new t.GeographicPoint(28.633333,-106.083336),e["America/Dawson_Creek"]=new t.GeographicPoint(55.766666,-120.23333);var l=new t.GeographicPoint(39.739166,-104.98417);e["America/Denver"]=l,e["America/Edmonton"]=new t.GeographicPoint(53.55,-113.5),e["America/Hermosillo"]=new t.GeographicPoint(29.066668,-110.96667),e["America/Inuvik"]=new t.GeographicPoint(68.35,-133.7),e["America/Mazatlan"]=new t.GeographicPoint(23.216667,-106.416664),e["America/Ojinaga"]=new t.GeographicPoint(29.566668,-104.416664),e["America/Phoenix"]=new t.GeographicPoint(33.448334,-112.07333),e["America/Shiprock"]=new t.GeographicPoint(36.785557,-108.686386),e["America/Yellowknife"]=new t.GeographicPoint(62.45,-114.35),e["Canada/Mountain"]=new t.GeographicPoint(53.55,-113.5),e["Etc/GMT+7"]=l,e["Mexico/BajaSur"]=new t.GeographicPoint(32.567,-116.633),e["SystemV/MST7"]=l,e["SystemV/MST7MDT"]=l,e["US/Arizona"]=new t.GeographicPoint(33.448334,-112.07333),e["US/Mountain"]=l,e["America/Belize"]=new t.GeographicPoint(17.483334,-88.183334),e["America/Cancun"]=new t.GeographicPoint(21.166668,-86.833336);var a=new t.GeographicPoint(41.85,-87.65);e["America/Chicago"]=a,e["America/Costa_Rica"]=new t.GeographicPoint(9.933333,-84.083336),e["America/El_Salvador"]=new t.GeographicPoint(13.7086115,-89.20306),e["America/Guatemala"]=new t.GeographicPoint(14.621111,-90.52695),e["America/Knox_IN"]=new t.GeographicPoint(41.295834,-86.625),e["America/Managua"]=new t.GeographicPoint(12.150833,-86.26833),e["America/Matamoros"]=new t.GeographicPoint(25.883333,-97.5),e["America/Menominee"]=new t.GeographicPoint(45.107777,-87.61417),e["America/Merida"]=new t.GeographicPoint(20.966667,-89.61667),e["America/Mexico_City"]=new t.GeographicPoint(19.434168,-99.13861),e["America/Monterrey"]=new t.GeographicPoint(25.666668,-100.316666),e["America/Rainy_River"]=new t.GeographicPoint(48.716667,-94.566666),e["America/Rankin_Inlet"]=new t.GeographicPoint(62.816666,-92.083336),e["America/Regina"]=new t.GeographicPoint(50.45,-104.61667),e["America/Swift_Current"]=new t.GeographicPoint(50.283333,-107.76667),e["America/Tegucigalpa"]=new t.GeographicPoint(14.1,-87.21667),e["America/Winnipeg"]=new t.GeographicPoint(49.88333,-97.166664),e["Canada/Central"]=new t.GeographicPoint(50.45,-104.61667),e["Canada/East-Saskatchewan"]=new t.GeographicPoint(51.216667,-102.46667),e["Canada/Saskatchewan"]=new t.GeographicPoint(50.45,-104.61667),e["Chile/EasterIsland"]=new t.GeographicPoint(-27.15,-109.425),e["Etc/GMT+6"]=a,e["Mexico/General"]=new t.GeographicPoint(19.434168,-99.13861),e["Pacific/Easter"]=new t.GeographicPoint(-27.15,-109.425),e["Pacific/Galapagos"]=new t.GeographicPoint(-.667,-90.55),e["SystemV/CST6"]=a,e["SystemV/CST6CDT"]=a,e["US/Central"]=a,e["US/Indiana-Starke"]=new t.GeographicPoint(41.295834,-86.625),e["America/Atikokan"]=new t.GeographicPoint(48.75,-91.61667),e["America/Bogota"]=new t.GeographicPoint(4.6,-74.083336),e["America/Cayman"]=new t.GeographicPoint(19.3,-81.38333),e["America/Coral_Harbour"]=new t.GeographicPoint(64.13333,-83.166664),e["America/Detroit"]=new t.GeographicPoint(42.33139,-83.04583),e["America/Fort_Wayne"]=new t.GeographicPoint(41.130554,-85.12889),e["America/Grand_Turk"]=new t.GeographicPoint(21.466667,-71.13333),e["America/Guayaquil"]=new t.GeographicPoint(-2.1666667,-79.9),e["America/Havana"]=new t.GeographicPoint(23.131945,-82.36417),e["America/Indianapolis"]=new t.GeographicPoint(39.768333,-86.15806),e["America/Iqaluit"]=new t.GeographicPoint(63.733334,-68.5),e["America/Jamaica"]=new t.GeographicPoint(18,-76.8),e["America/Lima"]=new t.GeographicPoint(-12.05,-77.05),e["America/Louisville"]=new t.GeographicPoint(38.254166,-85.759445),e["America/Montreal"]=new t.GeographicPoint(45.5,-73.583336),e["America/Nassau"]=new t.GeographicPoint(25.083334,-77.35);var s=new t.GeographicPoint(40.71417,-74.006386);e["America/New_York"]=s,e["America/Nipigon"]=new t.GeographicPoint(49.016666,-88.25),e["America/Panama"]=new t.GeographicPoint(8.966667,-79.53333),e["America/Pangnirtung"]=new t.GeographicPoint(66.13333,-65.75),e["America/Port-au-Prince"]=new t.GeographicPoint(18.539167,-72.335),e["America/Resolute"]=new t.GeographicPoint(74.683334,-94.9),e["America/Thunder_Bay"]=new t.GeographicPoint(48.4,-89.23333),e["America/Toronto"]=new t.GeographicPoint(43.666668,-79.416664),e["Canada/Eastern"]=new t.GeographicPoint(43.666668,-79.416664),e["Etc/GMT+5"]=s,e["SystemV/EST5"]=s,e["SystemV/EST5EDT"]=s,e["US/East-Indiana"]=new t.GeographicPoint(36.8381,-84.85),e["US/Eastern"]=s,e["US/Michigan"]=new t.GeographicPoint(42.33139,-83.04583),e["America/Caracas"]=new t.GeographicPoint(10.5,-66.916664),e["America/Anguilla"]=new t.GeographicPoint(18.216667,-63.05),e["America/Antigua"]=new t.GeographicPoint(17.116667,-61.85),e["America/Aruba"]=new t.GeographicPoint(10.541111,-72.9175),e["America/Asuncion"]=new t.GeographicPoint(-25.266666,-57.666668),e["America/Barbados"]=new t.GeographicPoint(13.1,-59.616665),e["America/Blanc-Sablon"]=new t.GeographicPoint(51.433334,-57.11667),e["America/Boa_Vista"]=new t.GeographicPoint(2.8166666,-60.666668),e["America/Campo_Grande"]=new t.GeographicPoint(-20.45,-54.616665),e["America/Cuiaba"]=new t.GeographicPoint(-15.583333,-56.083332),e["America/Curacao"]=new t.GeographicPoint(12.1167,-68.933),e["America/Dominica"]=new t.GeographicPoint(15.3,-61.4),e["America/Eirunepe"]=new t.GeographicPoint(-6.6666665,-69.86667),e["America/Glace_Bay"]=new t.GeographicPoint(46.2,-59.966667),e["America/Goose_Bay"]=new t.GeographicPoint(53.333332,-60.416668),e["America/Grenada"]=new t.GeographicPoint(12.05,-61.75),e["America/Guadeloupe"]=new t.GeographicPoint(16.233334,-61.516666),e["America/Guyana"]=new t.GeographicPoint(6.8,-58.166668),e["America/Halifax"]=new t.GeographicPoint(44.65,-63.6),e["America/La_Paz"]=new t.GeographicPoint(-16.5,-68.15),e["America/Manaus"]=new t.GeographicPoint(-3.1133332,-60.025276),e["America/Marigot"]=new t.GeographicPoint(18.073,63.0844),e["America/Martinique"]=new t.GeographicPoint(14.6,-61.083332),e["America/Moncton"]=new t.GeographicPoint(46.083332,-64.76667),e["America/Montserrat"]=new t.GeographicPoint(16.7,-62.216667),e["America/Port_of_Spain"]=new t.GeographicPoint(10.65,-61.516666),e["America/Porto_Acre"]=new t.GeographicPoint(-9.587778,-67.53555),e["America/Porto_Velho"]=new t.GeographicPoint(-8.766666,-63.9),e["America/Puerto_Rico"]=new t.GeographicPoint(18.467,66.117),e["America/Rio_Branco"]=new t.GeographicPoint(-9.966667,-67.8);var h=new t.GeographicPoint(-33.45,-70.666664);e["America/Santiago"]=h,e["America/Santo_Domingo"]=new t.GeographicPoint(18.466667,-69.9),e["America/St_Barthelemy"]=new t.GeographicPoint(17.8978,-62.851),e["America/St_Kitts"]=new t.GeographicPoint(17.3,-62.733),e["America/St_Lucia"]=new t.GeographicPoint(14.0167,-60.9833),e["America/St_Thomas"]=new t.GeographicPoint(18.3333,-64.9167),e["America/St_Vincent"]=new t.GeographicPoint(13.1667,-61.2333),e["America/Thule"]=new t.GeographicPoint(-54.27667,-36.511665),e["America/Tortola"]=new t.GeographicPoint(18.416666,-64.61667),e["America/Virgin"]=new t.GeographicPoint(18.34389,-64.931114),e["Antarctica/Palmer"]=new t.GeographicPoint(-64.25,-62.833),e["Atlantic/Bermuda"]=new t.GeographicPoint(32.294167,-64.78389),e["Atlantic/Stanley"]=new t.GeographicPoint(-51.7,-57.85),e["Brazil/Acre"]=new t.GeographicPoint(-10.883333,-45.083332),e["Brazil/West"]=new t.GeographicPoint(-10.883333,-45.083332),e["Canada/Atlantic"]=new t.GeographicPoint(44.65,-63.6),e["Chile/Continental"]=h,e["Etc/GMT+4"]=h,e["SystemV/AST4"]=new t.GeographicPoint(44.65,-63.6),e["SystemV/AST4ADT"]=new t.GeographicPoint(44.65,-63.6),e["America/St_Johns"]=new t.GeographicPoint(47.5675,-52.7072),e["Canada/Newfoundland"]=new t.GeographicPoint(47.5675,-52.7072),e["America/Araguaina"]=new t.GeographicPoint(-7.16,-48.0575),e["America/Bahia"]=new t.GeographicPoint(-12.983334,-38.516666),e["America/Belem"]=new t.GeographicPoint(-1.45,-48.483334),e["America/Buenos_Aires"]=new t.GeographicPoint(-34.5875,-58.6725),e["America/Catamarca"]=new t.GeographicPoint(-28.466667,-65.78333),e["America/Cayenne"]=new t.GeographicPoint(4.9333334,-52.333332),e["America/Cordoba"]=new t.GeographicPoint(-31.4,-64.183334),e["America/Fortaleza"]=new t.GeographicPoint(-3.7166667,-38.5),e["America/Godthab"]=new t.GeographicPoint(64.183334,-51.75),e["America/Jujuy"]=new t.GeographicPoint(-24.183332,-65.3),e["America/Maceio"]=new t.GeographicPoint(-9.666667,-35.716667),e["America/Mendoza"]=new t.GeographicPoint(-32.883335,-68.816666),e["America/Miquelon"]=new t.GeographicPoint(47.0975,-56.38139),e["America/Montevideo"]=new t.GeographicPoint(-34.858055,-56.170834),e["America/Paramaribo"]=new t.GeographicPoint(5.8333335,-55.166668),e["America/Recife"]=new t.GeographicPoint(-8.05,-34.9),e["America/Rosario"]=new t.GeographicPoint(-32.95111,-60.66639),e["America/Santarem"]=new t.GeographicPoint(-2.4333334,-54.7);var u=new t.GeographicPoint(-23.533333,-46.616665);e["America/Sao_Paulo"]=u,e["Antarctica/Rothera"]=new t.GeographicPoint(67.567,68.133),e["Brazil/East"]=u,e["Etc/GMT+3"]=u,e["America/Noronha"]=new t.GeographicPoint(3.85,25.417);var d=new t.GeographicPoint(54.25,36.75);e["Atlantic/South_Georgia"]=d,e["Brazil/DeNoronha"]=new t.GeographicPoint(3.85,25.417),e["Etc/GMT+2"]=d,e["America/Scoresbysund"]=new t.GeographicPoint(70.48333,-21.966667);var c=new t.GeographicPoint(37.483334,-2.5666666);e["Atlantic/Azores"]=c,e["Atlantic/Cape_Verde"]=new t.GeographicPoint(14.916667,-23.516666),e["Etc/GMT+1"]=c,e["Africa/Abidjan"]=new t.GeographicPoint(5.341111,-4.028056),e["Africa/Accra"]=new t.GeographicPoint(5.55,-.2166667),e["Africa/Bamako"]=new t.GeographicPoint(12.65,-8),e["Africa/Banjul"]=new t.GeographicPoint(13.453055,-16.5775),e["Africa/Bissau"]=new t.GeographicPoint(11.85,-15.583333),e["Africa/Casablanca"]=new t.GeographicPoint(33.593056,-7.616389),e["Africa/Conakry"]=new t.GeographicPoint(9.509167,-13.712222),e["Africa/Dakar"]=new t.GeographicPoint(14.670834,-17.438055),e["Africa/El_Aaiun"]=new t.GeographicPoint(27.15361,-13.203333),e["Africa/Freetown"]=new t.GeographicPoint(8.49,-13.234167),e["Africa/Lome"]=new t.GeographicPoint(6.131944,1.2227778),e["Africa/Monrovia"]=new t.GeographicPoint(6.3105555,-10.804722),e["Africa/Nouakchott"]=new t.GeographicPoint(18.08639,-15.975278),e["Africa/Ouagadougou"]=new t.GeographicPoint(12.370277,-1.5247222),e["Africa/Sao_Tome"]=new t.GeographicPoint(.3333333,6.733333),e["Africa/Timbuktu"]=new t.GeographicPoint(16.766666,-3.0166667),e["America/Danmarkshavn"]=new t.GeographicPoint(76.767,18.667),e["Atlantic/Canary"]=new t.GeographicPoint(28.45,-16.233334),e["Atlantic/Faeroe"]=new t.GeographicPoint(62.016666,-6.766667),e["Atlantic/Faroe"]=new t.GeographicPoint(62.016666,-6.766667),e["Atlantic/Madeira"]=new t.GeographicPoint(32.633335,-16.9),e["Atlantic/Reykjavik"]=new t.GeographicPoint(64.15,-21.95),e["Atlantic/St_Helena"]=new t.GeographicPoint(-15.933333,-5.7166667);var p=new t.GeographicPoint(51.466667,0);e["Etc/GMT"]=p,e["Etc/GMT+0"]=p,e["Etc/GMT-0"]=p,e["Etc/GMT0"]=p,e["Etc/Greenwich"]=p,e["Etc/UCT"]=p,e["Etc/UTC"]=p,e["Etc/Universal"]=p,e["Etc/Zulu"]=p,e["Europe/Belfast"]=new t.GeographicPoint(54.583332,-5.933333),e["Europe/Dublin"]=new t.GeographicPoint(53.333057,-6.248889),e["Europe/Guernsey"]=new t.GeographicPoint(49.45,-2.533),e["Europe/Isle_of_Man"]=new t.GeographicPoint(54.14521,-4.48172),e["Europe/Jersey"]=new t.GeographicPoint(49.2,-2.117),e["Europe/Lisbon"]=new t.GeographicPoint(38.716667,-9.133333),e["Europe/London"]=new t.GeographicPoint(51.5,-.116667),e["Africa/Algiers"]=new t.GeographicPoint(36.763054,3.0505557),e["Africa/Bangui"]=new t.GeographicPoint(4.366667,18.583334),e["Africa/Brazzaville"]=new t.GeographicPoint(-4.2591667,15.284722),e["Africa/Ceuta"]=new t.GeographicPoint(35.890278,-5.3075),e["Africa/Douala"]=new t.GeographicPoint(4.0502777,9.7),e["Africa/Kinshasa"]=new t.GeographicPoint(-4.3,15.3),e["Africa/Lagos"]=new t.GeographicPoint(6.4530554,3.3958333),e["Africa/Libreville"]=new t.GeographicPoint(.3833333,9.45),e["Africa/Luanda"]=new t.GeographicPoint(-8.838333,13.234445),e["Africa/Malabo"]=new t.GeographicPoint(3.75,8.783333),e["Africa/Ndjamena"]=new t.GeographicPoint(12.113055,15.049167),e["Africa/Niamey"]=new t.GeographicPoint(13.516666,2.1166668),e["Africa/Porto-Novo"]=new t.GeographicPoint(6.483333,2.6166668),e["Africa/Tunis"]=new t.GeographicPoint(36.802776,10.179722),e["Africa/Windhoek"]=new t.GeographicPoint(-22.57,17.08361),e["Arctic/Longyearbyen"]=new t.GeographicPoint(78.21667,15.633333),e["Atlantic/Jan_Mayen"]=new t.GeographicPoint(71,-8.333);var g=new t.GeographicPoint(48.86667,2.333333);e["Etc/GMT-1"]=g,e["Europe/Amsterdam"]=new t.GeographicPoint(52.35,4.9166665),e["Europe/Andorra"]=new t.GeographicPoint(42.5,1.5166667),e["Europe/Belgrade"]=new t.GeographicPoint(44.81861,20.468056),e["Europe/Berlin"]=new t.GeographicPoint(52.516666,13.4),e["Europe/Bratislava"]=new t.GeographicPoint(48.15,17.116667),e["Europe/Brussels"]=new t.GeographicPoint(50.833332,4.333333),e["Europe/Budapest"]=new t.GeographicPoint(47.5,19.083334),e["Europe/Copenhagen"]=new t.GeographicPoint(55.666668,12.583333),e["Europe/Gibraltar"]=new t.GeographicPoint(36.133335,-5.35),e["Europe/Ljubljana"]=new t.GeographicPoint(46.05528,14.514444),e["Europe/Luxembourg"]=new t.GeographicPoint(49.611668,6.13),e["Europe/Madrid"]=new t.GeographicPoint(40.4,-3.6833334),e["Europe/Malta"]=new t.GeographicPoint(35.899723,14.514722),e["Europe/Monaco"]=new t.GeographicPoint(43.733334,7.4166665),e["Europe/Oslo"]=new t.GeographicPoint(59.916668,10.75),e["Europe/Paris"]=g,e["Europe/Podgorica"]=new t.GeographicPoint(42.441113,19.26361),e["Europe/Prague"]=new t.GeographicPoint(50.083332,14.466667),e["Europe/Rome"]=new t.GeographicPoint(41.9,12.483334),e["Europe/San_Marino"]=new t.GeographicPoint(43.933334,12.45),e["Europe/Sarajevo"]=new t.GeographicPoint(43.85,18.383333),e["Europe/Skopje"]=new t.GeographicPoint(42,21.433332),e["Europe/Stockholm"]=new t.GeographicPoint(59.333332,18.05),e["Europe/Tirane"]=new t.GeographicPoint(41.3275,19.81889),e["Europe/Vaduz"]=new t.GeographicPoint(47.133335,9.516666),e["Europe/Vatican"]=new t.GeographicPoint(41.9,12.45),e["Europe/Vienna"]=new t.GeographicPoint(48.2,16.366667),e["Europe/Warsaw"]=new t.GeographicPoint(52.25,21),e["Europe/Zagreb"]=new t.GeographicPoint(45.8,16),e["Europe/Zurich"]=new t.GeographicPoint(47.366665,8.55),e["Africa/Blantyre"]=new t.GeographicPoint(-15.783333,35),e["Africa/Bujumbura"]=new t.GeographicPoint(-3.376111,29.36),e["Africa/Cairo"]=new t.GeographicPoint(30.05,31.25),e["Africa/Gaborone"]=new t.GeographicPoint(-24.646389,25.911945),e["Africa/Harare"]=new t.GeographicPoint(-17.817778,31.044722),e["Africa/Johannesburg"]=new t.GeographicPoint(-26.2,28.083334),e["Africa/Kigali"]=new t.GeographicPoint(-1.9536111,30.060556),e["Africa/Lubumbashi"]=new t.GeographicPoint(-11.666667,27.466667),e["Africa/Lusaka"]=new t.GeographicPoint(-15.416667,28.283333),e["Africa/Maputo"]=new t.GeographicPoint(-25.965279,32.58917),e["Africa/Maseru"]=new t.GeographicPoint(-29.316668,27.483334),e["Africa/Mbabane"]=new t.GeographicPoint(-26.316668,31.133333),e["Africa/Tripoli"]=new t.GeographicPoint(32.8925,13.18),e["Asia/Amman"]=new t.GeographicPoint(31.95,35.933334),e["Asia/Beirut"]=new t.GeographicPoint(33.871944,35.509724),e["Asia/Damascus"]=new t.GeographicPoint(33.5,36.3),e["Asia/Gaza"]=new t.GeographicPoint(31.5,34.466667),e["Asia/Istanbul"]=new t.GeographicPoint(41.018612,28.964722),e["Asia/Jerusalem"]=new t.GeographicPoint(31.78,35.23),e["Asia/Nicosia"]=new t.GeographicPoint(35.166668,33.366665),e["Asia/Tel_Aviv"]=new t.GeographicPoint(32.066666,34.766666);var v=new t.GeographicPoint(37.983334,23.733334);e["Etc/GMT-2"]=v,e["Europe/Athens"]=new t.GeographicPoint(37.983334,23.733334),e["Europe/Bucharest"]=new t.GeographicPoint(44.433334,26.1),e["Europe/Chisinau"]=new t.GeographicPoint(47.005554,28.8575),e["Europe/Helsinki"]=new t.GeographicPoint(60.175556,24.934166),e["Europe/Istanbul"]=new t.GeographicPoint(41.018612,28.964722),e["Europe/Kaliningrad"]=new t.GeographicPoint(54.71,20.5),e["Europe/Kiev"]=new t.GeographicPoint(50.433334,30.516666),e["Europe/Mariehamn"]=new t.GeographicPoint(60.1,19.95),e["Europe/Minsk"]=new t.GeographicPoint(53.9,27.566668),e["Europe/Nicosia"]=new t.GeographicPoint(35.166668,33.366665),e["Europe/Riga"]=new t.GeographicPoint(56.95,24.1),e["Europe/Simferopol"]=new t.GeographicPoint(44.95,34.1),e["Europe/Sofia"]=new t.GeographicPoint(42.683334,23.316668),e["Europe/Tallinn"]=new t.GeographicPoint(59.433887,24.728056),e["Europe/Tiraspol"]=new t.GeographicPoint(46.84028,29.643333),e["Europe/Uzhgorod"]=new t.GeographicPoint(48.616665,22.3),e["Europe/Vilnius"]=new t.GeographicPoint(54.683334,25.316668),e["Europe/Zaporozhye"]=new t.GeographicPoint(47.833,35.1667),e["Africa/Addis_Ababa"]=new t.GeographicPoint(9.033333,38.7),e["Africa/Asmara"]=new t.GeographicPoint(15.333333,38.933334),e["Africa/Asmera"]=new t.GeographicPoint(15.333333,38.933334),e["Africa/Dar_es_Salaam"]=new t.GeographicPoint(-6.8,39.283333),e["Africa/Djibouti"]=new t.GeographicPoint(11.595,43.148056),e["Africa/Kampala"]=new t.GeographicPoint(.3155556,32.565556),e["Africa/Khartoum"]=new t.GeographicPoint(15.588056,32.53417),e["Africa/Mogadishu"]=new t.GeographicPoint(2.0666666,45.366665),e["Africa/Nairobi"]=new t.GeographicPoint(-1.2833333,36.816666),e["Antarctica/Syowa"]=new t.GeographicPoint(-69,39.5833),e["Asia/Aden"]=new t.GeographicPoint(12.779445,45.036667),e["Asia/Baghdad"]=new t.GeographicPoint(33.33861,44.39389),e["Asia/Bahrain"]=new t.GeographicPoint(26.23611,50.583057),e["Asia/Kuwait"]=new t.GeographicPoint(29.369722,47.978333),e["Asia/Qatar"]=new t.GeographicPoint(25.286667,51.533333),e["Asia/Riyadh"]=new t.GeographicPoint(24.640833,46.772778);var f=new t.GeographicPoint(55.752224,37.615555);e["Etc/GMT-3"]=f,e["Europe/Moscow"]=f,e["Europe/Volgograd"]=new t.GeographicPoint(48.80472,44.585835),e["Indian/Antananarivo"]=new t.GeographicPoint(-18.916666,47.516666),e["Indian/Comoro"]=new t.GeographicPoint(-11.704166,43.240276),e["Indian/Mayotte"]=new t.GeographicPoint(-12.779445,45.227222),e["Asia/Riyadh87"]=new t.GeographicPoint(24.640833,46.772778),e["Asia/Riyadh88"]=new t.GeographicPoint(24.640833,46.772778),e["Asia/Riyadh89"]=new t.GeographicPoint(24.640833,46.772778),e["Mideast/Riyadh87"]=new t.GeographicPoint(24.640833,46.772778),e["Mideast/Riyadh88"]=new t.GeographicPoint(24.640833,46.772778),e["Mideast/Riyadh89"]=new t.GeographicPoint(24.640833,46.772778),e["Asia/Tehran"]=new t.GeographicPoint(35.671944,51.424446),e["Asia/Baku"]=new t.GeographicPoint(40.39528,49.88222);var m=new t.GeographicPoint(25.252222,55.28);e["Asia/Dubai"]=m,e["Asia/Muscat"]=new t.GeographicPoint(23.613333,58.593334),e["Asia/Tbilisi"]=new t.GeographicPoint(41.725,44.790833),e["Asia/Yerevan"]=new t.GeographicPoint(40.18111,44.51361),e["Etc/GMT-4"]=m,e["Europe/Samara"]=new t.GeographicPoint(53.2,50.15),e["Indian/Mahe"]=new t.GeographicPoint(-4.616667,55.45),e["Indian/Mauritius"]=new t.GeographicPoint(-20.161945,57.49889),e["Indian/Reunion"]=new t.GeographicPoint(-20.866667,55.466667),e["Asia/Kabul"]=new t.GeographicPoint(34.516666,69.183334),e["Antarctica/Davis"]=new t.GeographicPoint(-68.5764,77.9689),e["Antarctica/Mawson"]=new t.GeographicPoint(-53.104,73.514),e["Asia/Aqtau"]=new t.GeographicPoint(43.65,51.2),e["Asia/Aqtobe"]=new t.GeographicPoint(50.298054,57.18139),e["Asia/Ashgabat"]=new t.GeographicPoint(37.95,58.383335),e["Asia/Ashkhabad"]=new t.GeographicPoint(37.95,58.383335),e["Asia/Dushanbe"]=new t.GeographicPoint(38.56,68.77389),e["Asia/Karachi"]=new t.GeographicPoint(24.866667,67.05),e["Asia/Oral"]=new t.GeographicPoint(51.233334,51.366665),e["Asia/Samarkand"]=new t.GeographicPoint(39.654167,66.959724),e["Asia/Tashkent"]=new t.GeographicPoint(41.316666,69.25),e["Asia/Yekaterinburg"]=new t.GeographicPoint(56.85,60.6);var y=new t.GeographicPoint(22.569721,88.36972);e["Etc/GMT-5"]=y,e["Indian/Kerguelen"]=new t.GeographicPoint(-49.25,69.583),e["Indian/Maldives"]=new t.GeographicPoint(4.1666665,73.5),e["Asia/Calcutta"]=y,e["Asia/Colombo"]=new t.GeographicPoint(6.9319444,79.84778),e["Asia/Kolkata"]=y,e["Asia/Kathmandu"]=new t.GeographicPoint(27.716667,85.316666),e["Asia/Katmandu"]=new t.GeographicPoint(27.716667,85.316666),e["Antarctica/Vostok"]=new t.GeographicPoint(-78.4644,106.8372),e["Asia/Almaty"]=new t.GeographicPoint(43.25,76.95),e["Asia/Bishkek"]=new t.GeographicPoint(42.873055,74.60028);var C=new t.GeographicPoint(23.723055,90.40861);e["Asia/Dacca"]=C,e["Asia/Dhaka"]=C,e["Asia/Novokuznetsk"]=new t.GeographicPoint(53.75,87.1),e["Asia/Novosibirsk"]=new t.GeographicPoint(55.04111,82.93444),e["Asia/Omsk"]=new t.GeographicPoint(55,73.4),e["Asia/Qyzylorda"]=new t.GeographicPoint(44.85278,65.50916),e["Asia/Thimbu"]=new t.GeographicPoint(27.483334,89.6),e["Asia/Thimphu"]=new t.GeographicPoint(27.483334,89.6),e["Etc/GMT-6"]=C,e["Indian/Chagos"]=new t.GeographicPoint(-6,71.5),e["Asia/Rangoon"]=new t.GeographicPoint(16.783333,96.166664),e["Indian/Cocos"]=new t.GeographicPoint(-12.1167,96.9);var S=new t.GeographicPoint(13.75,100.51667);e["Asia/Bangkok"]=S,e["Asia/Ho_Chi_Minh"]=new t.GeographicPoint(10.75,106.666664),e["Asia/Hovd"]=new t.GeographicPoint(48.016666,91.63333),e["Asia/Jakarta"]=new t.GeographicPoint(-6.174444,106.829445),e["Asia/Krasnoyarsk"]=new t.GeographicPoint(56.009724,92.791664),e["Asia/Phnom_Penh"]=new t.GeographicPoint(11.55,104.916664),e["Asia/Pontianak"]=new t.GeographicPoint(-.0333333,109.333336),e["Asia/Saigon"]=new t.GeographicPoint(10.75,106.666664),e["Asia/Vientiane"]=new t.GeographicPoint(17.966667,102.6),e["Etc/GMT-7"]=S,e["Indian/Christmas"]=new t.GeographicPoint(-10.416667,105.71667),e["Asia/Brunei"]=new t.GeographicPoint(4.883333,114.933334),e["Asia/Choibalsan"]=new t.GeographicPoint(48.066666,114.5),e["Asia/Chongqing"]=new t.GeographicPoint(29.562778,106.55278),e["Asia/Chungking"]=new t.GeographicPoint(29.562778,106.55278),e["Asia/Harbin"]=new t.GeographicPoint(45.75,126.65),e["Asia/Hong_Kong"]=new t.GeographicPoint(22.283333,114.15),e["Asia/Irkutsk"]=new t.GeographicPoint(52.266666,104.333336),e["Asia/Kashgar"]=new t.GeographicPoint(39.391388,76.04),e["Asia/Kuala_Lumpur"]=new t.GeographicPoint(3.1666667,101.7),e["Asia/Kuching"]=new t.GeographicPoint(1.55,110.333336),e["Asia/Macao"]=new t.GeographicPoint(22.2,113.55),e["Asia/Macau"]=new t.GeographicPoint(22.2,113.55),e["Asia/Makassar"]=new t.GeographicPoint(2.45,99.78333),e["Asia/Manila"]=new t.GeographicPoint(14.604167,120.98222);var E=new t.GeographicPoint(31.005,121.40861);e["Asia/Shanghai"]=E,e["Asia/Singapore"]=new t.GeographicPoint(1.2930557,103.855835),e["Asia/Taipei"]=new t.GeographicPoint(25.039167,121.525),e["Asia/Ujung_Pandang"]=new t.GeographicPoint(-5.1305556,119.406944),e["Asia/Ulaanbaatar"]=new t.GeographicPoint(47.916668,106.916664),e["Asia/Ulan_Bator"]=new t.GeographicPoint(47.916668,106.916664),e["Asia/Urumqi"]=new t.GeographicPoint(43.8,87.583336),e["Australia/Perth"]=new t.GeographicPoint(-31.933332,115.833336),e["Australia/West"]=new t.GeographicPoint(-31.933332,115.833336),e["Etc/GMT-8"]=E,e["Australia/Eucla"]=new t.GeographicPoint(-31.716667,128.86667),e["Asia/Dili"]=new t.GeographicPoint(-8.55,125.5833),e["Asia/Jayapura"]=new t.GeographicPoint(-2.5333333,140.7),e["Asia/Pyongyang"]=new t.GeographicPoint(39.019444,125.75472),e["Asia/Seoul"]=new t.GeographicPoint(37.566387,126.999725);var A=new t.GeographicPoint(35.685,139.75139);e["Asia/Tokyo"]=A,e["Asia/Yakutsk"]=new t.GeographicPoint(62.03389,129.73306),e["Etc/GMT-9"]=A,e["Pacific/Palau"]=new t.GeographicPoint(7.5,134.6241),e["Australia/Adelaide"]=new t.GeographicPoint(-34.933334,138.6),e["Australia/Broken_Hill"]=new t.GeographicPoint(-31.95,141.43333),e["Australia/Darwin"]=new t.GeographicPoint(-12.466667,130.83333),e["Australia/North"]=new t.GeographicPoint(-12.466667,130.83333),e["Australia/South"]=new t.GeographicPoint(-34.933334,138.6),e["Australia/Yancowinna"]=new t.GeographicPoint(-31.7581,141.7178),e["Antarctica/DumontDUrville"]=new t.GeographicPoint(-66.66277,140.0014),e["Asia/Sakhalin"]=new t.GeographicPoint(51,143),e["Asia/Vladivostok"]=new t.GeographicPoint(43.133335,131.9),e["Australia/ACT"]=new t.GeographicPoint(-35.283333,149.21666),e["Australia/Brisbane"]=new t.GeographicPoint(-27.5,153.01666),e["Australia/Canberra"]=new t.GeographicPoint(-35.283333,149.21666),e["Australia/Currie"]=new t.GeographicPoint(-39.933334,143.86667),e["Australia/Hobart"]=new t.GeographicPoint(-42.916668,147.33333),e["Australia/Lindeman"]=new t.GeographicPoint(-20.45,149.0333),e["Australia/Melbourne"]=new t.GeographicPoint(-37.816666,144.96666);var _=new t.GeographicPoint(-33.88333,151.21666);e["Australia/NSW"]=_,e["Australia/Queensland"]=new t.GeographicPoint(-27.5,153.01666),e["Australia/Sydney"]=_,e["Australia/Tasmania"]=new t.GeographicPoint(-42.916668,147.33333),e["Australia/Victoria"]=new t.GeographicPoint(-37.816666,144.96666),e["Etc/GMT-10"]=_,e["Pacific/Guam"]=new t.GeographicPoint(13.467,144.75),e["Pacific/Port_Moresby"]=new t.GeographicPoint(-9.464723,147.1925),e["Pacific/Saipan"]=new t.GeographicPoint(15.1833,145.75),e["Pacific/Truk"]=new t.GeographicPoint(7.4167,151.7833),e["Pacific/Yap"]=new t.GeographicPoint(9.514444,138.12917),e["Australia/LHI"]=new t.GeographicPoint(-31.55,159.083),e["Australia/Lord_Howe"]=new t.GeographicPoint(-31.55,159.083),e["Antarctica/Casey"]=new t.GeographicPoint(-66.2833,110.5333),e["Asia/Magadan"]=new t.GeographicPoint(59.566666,150.8);var P=new t.GeographicPoint(-22.266666,166.45);e["Etc/GMT-11"]=P,e["Pacific/Efate"]=new t.GeographicPoint(-17.667,168.417),e["Pacific/Guadalcanal"]=new t.GeographicPoint(-9.617,160.183),e["Pacific/Kosrae"]=new t.GeographicPoint(5.317,162.983),e["Pacific/Noumea"]=P,e["Pacific/Ponape"]=new t.GeographicPoint(6.963889,158.20833),e["Pacific/Norfolk"]=new t.GeographicPoint(-29.05,167.95),e["Antarctica/McMurdo"]=new t.GeographicPoint(-77.85,166.667),e["Antarctica/South_Pole"]=new t.GeographicPoint(-90,0),e["Asia/Anadyr"]=new t.GeographicPoint(64.75,177.48334),e["Asia/Kamchatka"]=new t.GeographicPoint(57,160);var w=new t.GeographicPoint(-36.86667,174.76666);e["Etc/GMT-12"]=w,e["Pacific/Auckland"]=w,e["Pacific/Fiji"]=new t.GeographicPoint(-18.133333,178.41667),e["Pacific/Funafuti"]=new t.GeographicPoint(-8.516666,179.21666),e["Pacific/Kwajalein"]=new t.GeographicPoint(9.1939,167.4597),e["Pacific/Majuro"]=new t.GeographicPoint(7.1,171.38333),e["Pacific/Nauru"]=new t.GeographicPoint(-.5322,166.9328),e["Pacific/Tarawa"]=new t.GeographicPoint(1.4167,173.0333),e["Pacific/Wake"]=new t.GeographicPoint(19.2833,166.6),e["Pacific/Wallis"]=new t.GeographicPoint(-13.273,-176.205),e["Pacific/Chatham"]=new t.GeographicPoint(-43.883,-176.517);var L=new t.GeographicPoint(-3.133,-171.0833);e["Etc/GMT-13"]=L,e["Pacific/Enderbury"]=L,e["Pacific/Tongatapu"]=new t.GeographicPoint(-21.2114,-175.153);var T=new t.GeographicPoint(1.883,-157.4);e["Etc/GMT-14"]=T,e["Pacific/Kiritimati"]=T,e.MIT=i,e.HST=n,e.PST=r,e.PST8PDT=r,e.MST=l,e.MST7MDT=l,e.Navajo=new t.GeographicPoint(35.6728,-109.0622),e.PNT=new t.GeographicPoint(33.448334,-112.07333),e["America/Indiana/Knox"]=new t.GeographicPoint(41.295834,-86.625),e["America/Indiana/Tell_City"]=new t.GeographicPoint(37.953,-86.7614),e["America/North_Dakota/Center"]=new t.GeographicPoint(47.115,-101.3003),e["America/North_Dakota/New_Salem"]=new t.GeographicPoint(46.843,101.4119),e.CST=a,e.CST6CDT=a,e["America/Indiana/Indianapolis"]=new t.GeographicPoint(39.768333,-86.15806),e["America/Indiana/Marengo"]=new t.GeographicPoint(36.3706,-86.3433),e["America/Indiana/Petersburg"]=new t.GeographicPoint(38.4917,-87.2803),e["America/Indiana/Vevay"]=new t.GeographicPoint(38.7458,-85.0711),e["America/Indiana/Vincennes"]=new t.GeographicPoint(38.6783,-87.5164),e["America/Indiana/Winamac"]=new t.GeographicPoint(41.0525,-86.6044),e["America/Kentucky/Louisville"]=new t.GeographicPoint(38.2542,-85.7603),e["America/Kentucky/Monticello"]=new t.GeographicPoint(36.8381,-84.85),e.Cuba=new t.GeographicPoint(23.131945,-82.36417),e.EST=s,e.EST5EDT=s,e.IET=s,e.AST=new t.GeographicPoint(44.65,-63.6),e.Jamaica=new t.GeographicPoint(18,-76.8),e["America/Argentina/San_Luis"]=new t.GeographicPoint(-33.3,-66.333),e.PRT=new t.GeographicPoint(18.467,66.117),e.CNT=new t.GeographicPoint(47.5675,-52.7072),e.AGT=new t.GeographicPoint(-34.5875,-58.6725),e["America/Argentina/Buenos_Aires"]=new t.GeographicPoint(-34.5875,-58.6725),e["America/Argentina/Catamarca"]=new t.GeographicPoint(-28.466667,-65.78333),e["America/Argentina/ComodRivadavia"]=new t.GeographicPoint(-42.7578,-65.0297),e["America/Argentina/Cordoba"]=new t.GeographicPoint(-31.4,-64.183334),e["America/Argentina/Jujuy"]=new t.GeographicPoint(-24.183332,-65.3),e["America/Argentina/La_Rioja"]=new t.GeographicPoint(-29.4144,-66.8552),e["America/Argentina/Mendoza"]=new t.GeographicPoint(-32.883335,-68.816666),e["America/Argentina/Rio_Gallegos"]=new t.GeographicPoint(-51.625,-69.2286),e["America/Argentina/Salta"]=new t.GeographicPoint(-24.783333,-65.416664),e["America/Argentina/San_Juan"]=new t.GeographicPoint(-31.5333,-68.5167),e["America/Argentina/Tucuman"]=new t.GeographicPoint(-26.8167,65.2167),e["America/Argentina/Ushuaia"]=new t.GeographicPoint(-54.6,-68.3),e.BET=u,e.Eire=new t.GeographicPoint(53.333057,-6.248889),e.GB=p,e["GB-Eire"]=new t.GeographicPoint(53.333057,-6.248889),e.GMT=p,e.GMT0=p,e.Greenwich=p,e.Iceland=new t.GeographicPoint(64.1333,-21.9333),e.Portugal=new t.GeographicPoint(38.716667,-9.133333),e.UCT=p,e.UTC=p,e.Universal=p,e.WET=p,e.Zulu=p,e.CET=g,e.ECT=g,e.MET=new t.GeographicPoint(35.671944,51.424446),e.Poland=new t.GeographicPoint(52.25,21),e.ART=new t.GeographicPoint(-34.5875,-58.6725),e.CAT=new t.GeographicPoint(-1.9536111,30.060556),e.EET=new t.GeographicPoint(37.983334,23.733334),e.Egypt=new t.GeographicPoint(30.05,31.25),e.Israel=new t.GeographicPoint(32.066666,34.766666),e.Libya=new t.GeographicPoint(32.8925,13.18),e.Turkey=new t.GeographicPoint(41.018612,28.964722),e.EAT=new t.GeographicPoint(-1.2833333,36.816666),e["W-SU"]=f,e.Iran=new t.GeographicPoint(35.671944,51.424446),e.NET=new t.GeographicPoint(40.18111,44.51361),e.PLT=new t.GeographicPoint(24.866667,67.05),e.IST=y,e.BST=C,e.VST=S,e.CTT=E,e.Hongkong=new t.GeographicPoint(22.283333,114.15),e.PRC=E,e.Singapore=new t.GeographicPoint(1.2930557,103.855835),e.JST=A,e.Japan=A,e.ROK=new t.GeographicPoint(37.566387,126.999725),e.ACT=new t.GeographicPoint(-35.283333,149.21666),e.AET=_,e.SST=new t.GeographicPoint(-28.4667,159.8167),e.Kwajalein=new t.GeographicPoint(9.1939,167.4597),e.NST=w,e.NZ=w,e["NZ-CHAT"]=new t.GeographicPoint(-43.883,-176.517),t.timeZoneGeographicPointsReference=e}var b,O=void 0===(b=e).UTC?null:b.UTC;null==O&&(O=function(e,t){return void 0===e[t]?null:e[t]}(e,"Etc/GMT")),this.latitude=function(e){return e*Math.PI/180}(O.getLatitudeInDegrees()),this.longitude=function(e){return e*Math.PI/180}(O.getLongitudeInDegrees())},t.timeZoneGeographicPointsReference=null,t}(HomeObject);Compass.__class="com.eteks.sweethome3d.model.Compass",Compass.__interfaces=["com.eteks.sweethome3d.model.Selectable"],function(e){var t=function(){function e(e,t){void 0===this.latitudeInDegrees&&(this.latitudeInDegrees=0),void 0===this.longitudeInDegrees&&(this.longitudeInDegrees=0),this.latitudeInDegrees=e,this.longitudeInDegrees=t}return e.prototype.getLatitudeInDegrees=function(){return this.latitudeInDegrees},e.prototype.getLongitudeInDegrees=function(){return this.longitudeInDegrees},e}();e.GeographicPoint=t,t.__class="com.eteks.sweethome3d.model.Compass.GeographicPoint"}(Compass||(Compass={})),Compass.__transients=["pointsCache","dateCache","sunElevationCache","sunAzimuthCache","propertyChangeSupport"];var Wall=function(e){function t(t,i,n,o,r,l,a,s){var h=this;if("string"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||"number"!=typeof l&&null!==l||"number"!=typeof a&&null!==a||!(null!=s&&null!=s.constructor&&null!=s.constructor.__interfaces&&s.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0||null===s))if("string"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||"number"!=typeof l&&null!==l||"number"!=typeof a&&null!==a||void 0!==s)if("number"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||"number"!=typeof l&&null!==l||!(null!=a&&null!=a.constructor&&null!=a.constructor.__interfaces&&a.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.TextureImage")>=0||null===a)||void 0!==s)if("number"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||"number"!=typeof l&&null!==l||void 0!==a||void 0!==s){if("number"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||void 0!==l||void 0!==a||void 0!==s)throw new Error("invalid overload");var u=(D=arguments)[0],d=D[1],c=D[2],p=D[3],g=D[4],v=HomeObject.createId("wall");void 0===(h=e.call(this,v)||this).xStart&&(h.xStart=0),void 0===h.yStart&&(h.yStart=0),void 0===h.xEnd&&(h.xEnd=0),void 0===h.yEnd&&(h.yEnd=0),void 0===h.arcExtent&&(h.arcExtent=null),void 0===h.wallAtStart&&(h.wallAtStart=null),void 0===h.wallAtEnd&&(h.wallAtEnd=null),void 0===h.thickness&&(h.thickness=0),void 0===h.height&&(h.height=null),void 0===h.heightAtEnd&&(h.heightAtEnd=null),void 0===h.leftSideColor&&(h.leftSideColor=null),void 0===h.leftSideTexture&&(h.leftSideTexture=null),void 0===h.leftSideShininess&&(h.leftSideShininess=0),void 0===h.leftSideBaseboard&&(h.leftSideBaseboard=null),void 0===h.rightSideColor&&(h.rightSideColor=null),void 0===h.rightSideTexture&&(h.rightSideTexture=null),void 0===h.rightSideShininess&&(h.rightSideShininess=0),void 0===h.rightSideBaseboard&&(h.rightSideBaseboard=null),void 0===h.pattern&&(h.pattern=null),void 0===h.topColor&&(h.topColor=null),void 0===h.level&&(h.level=null),void 0===h.shapeCache&&(h.shapeCache=null),void 0===h.arcCircleCenterCache&&(h.arcCircleCenterCache=null),void 0===h.pointsCache&&(h.pointsCache=null),void 0===h.pointsIncludingBaseboardsCache&&(h.pointsIncludingBaseboardsCache=null),h.symmetric=!0,h.xStart=u,h.yStart=d,h.xEnd=c,h.yEnd=p,h.thickness=g,h.height=0,h.pattern=null,void 0===h.xStart&&(h.xStart=0),void 0===h.yStart&&(h.yStart=0),void 0===h.xEnd&&(h.xEnd=0),void 0===h.yEnd&&(h.yEnd=0),void 0===h.arcExtent&&(h.arcExtent=null),void 0===h.wallAtStart&&(h.wallAtStart=null),void 0===h.wallAtEnd&&(h.wallAtEnd=null),void 0===h.thickness&&(h.thickness=0),void 0===h.height&&(h.height=null),void 0===h.heightAtEnd&&(h.heightAtEnd=null),void 0===h.leftSideColor&&(h.leftSideColor=null),void 0===h.leftSideTexture&&(h.leftSideTexture=null),void 0===h.leftSideShininess&&(h.leftSideShininess=0),void 0===h.leftSideBaseboard&&(h.leftSideBaseboard=null),void 0===h.rightSideColor&&(h.rightSideColor=null),void 0===h.rightSideTexture&&(h.rightSideTexture=null),void 0===h.rightSideShininess&&(h.rightSideShininess=0),void 0===h.rightSideBaseboard&&(h.rightSideBaseboard=null),void 0===h.pattern&&(h.pattern=null),void 0===h.topColor&&(h.topColor=null),void 0===h.level&&(h.level=null),void 0===h.shapeCache&&(h.shapeCache=null),void 0===h.arcCircleCenterCache&&(h.arcCircleCenterCache=null),void 0===h.pointsCache&&(h.pointsCache=null),void 0===h.pointsIncludingBaseboardsCache&&(h.pointsIncludingBaseboardsCache=null),h.symmetric=!0,void 0===h.xStart&&(h.xStart=0),void 0===h.yStart&&(h.yStart=0),void 0===h.xEnd&&(h.xEnd=0),void 0===h.yEnd&&(h.yEnd=0),void 0===h.arcExtent&&(h.arcExtent=null),void 0===h.wallAtStart&&(h.wallAtStart=null),void 0===h.wallAtEnd&&(h.wallAtEnd=null),void 0===h.thickness&&(h.thickness=0),void 0===h.height&&(h.height=null),void 0===h.heightAtEnd&&(h.heightAtEnd=null),void 0===h.leftSideColor&&(h.leftSideColor=null),void 0===h.leftSideTexture&&(h.leftSideTexture=null),void 0===h.leftSideShininess&&(h.leftSideShininess=0),void 0===h.leftSideBaseboard&&(h.leftSideBaseboard=null),void 0===h.rightSideColor&&(h.rightSideColor=null),void 0===h.rightSideTexture&&(h.rightSideTexture=null),void 0===h.rightSideShininess&&(h.rightSideShininess=0),void 0===h.rightSideBaseboard&&(h.rightSideBaseboard=null),void 0===h.pattern&&(h.pattern=null),void 0===h.topColor&&(h.topColor=null),void 0===h.level&&(h.level=null),void 0===h.shapeCache&&(h.shapeCache=null),void 0===h.arcCircleCenterCache&&(h.arcCircleCenterCache=null),void 0===h.pointsCache&&(h.pointsCache=null),void 0===h.pointsIncludingBaseboardsCache&&(h.pointsIncludingBaseboardsCache=null),h.symmetric=!0,void 0===h.xStart&&(h.xStart=0),void 0===h.yStart&&(h.yStart=0),void 0===h.xEnd&&(h.xEnd=0),void 0===h.yEnd&&(h.yEnd=0),void 0===h.arcExtent&&(h.arcExtent=null),void 0===h.wallAtStart&&(h.wallAtStart=null),void 0===h.wallAtEnd&&(h.wallAtEnd=null),void 0===h.thickness&&(h.thickness=0),void 0===h.height&&(h.height=null),void 0===h.heightAtEnd&&(h.heightAtEnd=null),void 0===h.leftSideColor&&(h.leftSideColor=null),void 0===h.leftSideTexture&&(h.leftSideTexture=null),void 0===h.leftSideShininess&&(h.leftSideShininess=0),void 0===h.leftSideBaseboard&&(h.leftSideBaseboard=null),void 0===h.rightSideColor&&(h.rightSideColor=null),void 0===h.rightSideTexture&&(h.rightSideTexture=null),void 0===h.rightSideShininess&&(h.rightSideShininess=0),void 0===h.rightSideBaseboard&&(h.rightSideBaseboard=null),void 0===h.pattern&&(h.pattern=null),void 0===h.topColor&&(h.topColor=null),void 0===h.level&&(h.level=null),void 0===h.shapeCache&&(h.shapeCache=null),void 0===h.arcCircleCenterCache&&(h.arcCircleCenterCache=null),void 0===h.pointsCache&&(h.pointsCache=null),void 0===h.pointsIncludingBaseboardsCache&&(h.pointsIncludingBaseboardsCache=null),h.symmetric=!0}else{var f=(D=arguments)[0],m=D[1],y=D[2],C=D[3],S=D[4],E=D[5],A=HomeObject.createId("wall");void 0===(h=e.call(this,A)||this).xStart&&(h.xStart=0),void 0===h.yStart&&(h.yStart=0),void 0===h.xEnd&&(h.xEnd=0),void 0===h.yEnd&&(h.yEnd=0),void 0===h.arcExtent&&(h.arcExtent=null),void 0===h.wallAtStart&&(h.wallAtStart=null),void 0===h.wallAtEnd&&(h.wallAtEnd=null),void 0===h.thickness&&(h.thickness=0),void 0===h.height&&(h.height=null),void 0===h.heightAtEnd&&(h.heightAtEnd=null),void 0===h.leftSideColor&&(h.leftSideColor=null),void 0===h.leftSideTexture&&(h.leftSideTexture=null),void 0===h.leftSideShininess&&(h.leftSideShininess=0),void 0===h.leftSideBaseboard&&(h.leftSideBaseboard=null),void 0===h.rightSideColor&&(h.rightSideColor=null),void 0===h.rightSideTexture&&(h.rightSideTexture=null),void 0===h.rightSideShininess&&(h.rightSideShininess=0),void 0===h.rightSideBaseboard&&(h.rightSideBaseboard=null),void 0===h.pattern&&(h.pattern=null),void 0===h.topColor&&(h.topColor=null),void 0===h.level&&(h.level=null),void 0===h.shapeCache&&(h.shapeCache=null),void 0===h.arcCircleCenterCache&&(h.arcCircleCenterCache=null),void 0===h.pointsCache&&(h.pointsCache=null),void 0===h.pointsIncludingBaseboardsCache&&(h.pointsIncludingBaseboardsCache=null),h.symmetric=!0,h.xStart=f,h.yStart=m,h.xEnd=y,h.yEnd=C,h.thickness=S,h.height=E,h.pattern=null,void 0===h.xStart&&(h.xStart=0),void 0===h.yStart&&(h.yStart=0),void 0===h.xEnd&&(h.xEnd=0),void 0===h.yEnd&&(h.yEnd=0),void 0===h.arcExtent&&(h.arcExtent=null),void 0===h.wallAtStart&&(h.wallAtStart=null),void 0===h.wallAtEnd&&(h.wallAtEnd=null),void 0===h.thickness&&(h.thickness=0),void 0===h.height&&(h.height=null),void 0===h.heightAtEnd&&(h.heightAtEnd=null),void 0===h.leftSideColor&&(h.leftSideColor=null),void 0===h.leftSideTexture&&(h.leftSideTexture=null),void 0===h.leftSideShininess&&(h.leftSideShininess=0),void 0===h.leftSideBaseboard&&(h.leftSideBaseboard=null),void 0===h.rightSideColor&&(h.rightSideColor=null),void 0===h.rightSideTexture&&(h.rightSideTexture=null),void 0===h.rightSideShininess&&(h.rightSideShininess=0),void 0===h.rightSideBaseboard&&(h.rightSideBaseboard=null),void 0===h.pattern&&(h.pattern=null),void 0===h.topColor&&(h.topColor=null),void 0===h.level&&(h.level=null),void 0===h.shapeCache&&(h.shapeCache=null),void 0===h.arcCircleCenterCache&&(h.arcCircleCenterCache=null),void 0===h.pointsCache&&(h.pointsCache=null),void 0===h.pointsIncludingBaseboardsCache&&(h.pointsIncludingBaseboardsCache=null),h.symmetric=!0,void 0===h.xStart&&(h.xStart=0),void 0===h.yStart&&(h.yStart=0),void 0===h.xEnd&&(h.xEnd=0),void 0===h.yEnd&&(h.yEnd=0),void 0===h.arcExtent&&(h.arcExtent=null),void 0===h.wallAtStart&&(h.wallAtStart=null),void 0===h.wallAtEnd&&(h.wallAtEnd=null),void 0===h.thickness&&(h.thickness=0),void 0===h.height&&(h.height=null),void 0===h.heightAtEnd&&(h.heightAtEnd=null),void 0===h.leftSideColor&&(h.leftSideColor=null),void 0===h.leftSideTexture&&(h.leftSideTexture=null),void 0===h.leftSideShininess&&(h.leftSideShininess=0),void 0===h.leftSideBaseboard&&(h.leftSideBaseboard=null),void 0===h.rightSideColor&&(h.rightSideColor=null),void 0===h.rightSideTexture&&(h.rightSideTexture=null),void 0===h.rightSideShininess&&(h.rightSideShininess=0),void 0===h.rightSideBaseboard&&(h.rightSideBaseboard=null),void 0===h.pattern&&(h.pattern=null),void 0===h.topColor&&(h.topColor=null),void 0===h.level&&(h.level=null),void 0===h.shapeCache&&(h.shapeCache=null),void 0===h.arcCircleCenterCache&&(h.arcCircleCenterCache=null),void 0===h.pointsCache&&(h.pointsCache=null),void 0===h.pointsIncludingBaseboardsCache&&(h.pointsIncludingBaseboardsCache=null),h.symmetric=!0}else{var _=(D=arguments)[0],P=D[1],w=D[2],L=D[3],T=D[4],b=D[5],O=D[6],I=HomeObject.createId("wall");void 0===(h=e.call(this,I)||this).xStart&&(h.xStart=0),void 0===h.yStart&&(h.yStart=0),void 0===h.xEnd&&(h.xEnd=0),void 0===h.yEnd&&(h.yEnd=0),void 0===h.arcExtent&&(h.arcExtent=null),void 0===h.wallAtStart&&(h.wallAtStart=null),void 0===h.wallAtEnd&&(h.wallAtEnd=null),void 0===h.thickness&&(h.thickness=0),void 0===h.height&&(h.height=null),void 0===h.heightAtEnd&&(h.heightAtEnd=null),void 0===h.leftSideColor&&(h.leftSideColor=null),void 0===h.leftSideTexture&&(h.leftSideTexture=null),void 0===h.leftSideShininess&&(h.leftSideShininess=0),void 0===h.leftSideBaseboard&&(h.leftSideBaseboard=null),void 0===h.rightSideColor&&(h.rightSideColor=null),void 0===h.rightSideTexture&&(h.rightSideTexture=null),void 0===h.rightSideShininess&&(h.rightSideShininess=0),void 0===h.rightSideBaseboard&&(h.rightSideBaseboard=null),void 0===h.pattern&&(h.pattern=null),void 0===h.topColor&&(h.topColor=null),void 0===h.level&&(h.level=null),void 0===h.shapeCache&&(h.shapeCache=null),void 0===h.arcCircleCenterCache&&(h.arcCircleCenterCache=null),void 0===h.pointsCache&&(h.pointsCache=null),void 0===h.pointsIncludingBaseboardsCache&&(h.pointsIncludingBaseboardsCache=null),h.symmetric=!0,h.xStart=_,h.yStart=P,h.xEnd=w,h.yEnd=L,h.thickness=T,h.height=b,h.pattern=O,void 0===h.xStart&&(h.xStart=0),void 0===h.yStart&&(h.yStart=0),void 0===h.xEnd&&(h.xEnd=0),void 0===h.yEnd&&(h.yEnd=0),void 0===h.arcExtent&&(h.arcExtent=null),void 0===h.wallAtStart&&(h.wallAtStart=null),void 0===h.wallAtEnd&&(h.wallAtEnd=null),void 0===h.thickness&&(h.thickness=0),void 0===h.height&&(h.height=null),void 0===h.heightAtEnd&&(h.heightAtEnd=null),void 0===h.leftSideColor&&(h.leftSideColor=null),void 0===h.leftSideTexture&&(h.leftSideTexture=null),void 0===h.leftSideShininess&&(h.leftSideShininess=0),void 0===h.leftSideBaseboard&&(h.leftSideBaseboard=null),void 0===h.rightSideColor&&(h.rightSideColor=null),void 0===h.rightSideTexture&&(h.rightSideTexture=null),void 0===h.rightSideShininess&&(h.rightSideShininess=0),void 0===h.rightSideBaseboard&&(h.rightSideBaseboard=null),void 0===h.pattern&&(h.pattern=null),void 0===h.topColor&&(h.topColor=null),void 0===h.level&&(h.level=null),void 0===h.shapeCache&&(h.shapeCache=null),void 0===h.arcCircleCenterCache&&(h.arcCircleCenterCache=null),void 0===h.pointsCache&&(h.pointsCache=null),void 0===h.pointsIncludingBaseboardsCache&&(h.pointsIncludingBaseboardsCache=null),h.symmetric=!0}else{var D=arguments;void 0===(h=e.call(this,t)||this).xStart&&(h.xStart=0),void 0===h.yStart&&(h.yStart=0),void 0===h.xEnd&&(h.xEnd=0),void 0===h.yEnd&&(h.yEnd=0),void 0===h.arcExtent&&(h.arcExtent=null),void 0===h.wallAtStart&&(h.wallAtStart=null),void 0===h.wallAtEnd&&(h.wallAtEnd=null),void 0===h.thickness&&(h.thickness=0),void 0===h.height&&(h.height=null),void 0===h.heightAtEnd&&(h.heightAtEnd=null),void 0===h.leftSideColor&&(h.leftSideColor=null),void 0===h.leftSideTexture&&(h.leftSideTexture=null),void 0===h.leftSideShininess&&(h.leftSideShininess=0),void 0===h.leftSideBaseboard&&(h.leftSideBaseboard=null),void 0===h.rightSideColor&&(h.rightSideColor=null),void 0===h.rightSideTexture&&(h.rightSideTexture=null),void 0===h.rightSideShininess&&(h.rightSideShininess=0),void 0===h.rightSideBaseboard&&(h.rightSideBaseboard=null),void 0===h.pattern&&(h.pattern=null),void 0===h.topColor&&(h.topColor=null),void 0===h.level&&(h.level=null),void 0===h.shapeCache&&(h.shapeCache=null),void 0===h.arcCircleCenterCache&&(h.arcCircleCenterCache=null),void 0===h.pointsCache&&(h.pointsCache=null),void 0===h.pointsIncludingBaseboardsCache&&(h.pointsIncludingBaseboardsCache=null),h.symmetric=!0,h.xStart=i,h.yStart=n,h.xEnd=o,h.yEnd=r,h.thickness=l,h.height=a,h.pattern=null,void 0===h.xStart&&(h.xStart=0),void 0===h.yStart&&(h.yStart=0),void 0===h.xEnd&&(h.xEnd=0),void 0===h.yEnd&&(h.yEnd=0),void 0===h.arcExtent&&(h.arcExtent=null),void 0===h.wallAtStart&&(h.wallAtStart=null),void 0===h.wallAtEnd&&(h.wallAtEnd=null),void 0===h.thickness&&(h.thickness=0),void 0===h.height&&(h.height=null),void 0===h.heightAtEnd&&(h.heightAtEnd=null),void 0===h.leftSideColor&&(h.leftSideColor=null),void 0===h.leftSideTexture&&(h.leftSideTexture=null),void 0===h.leftSideShininess&&(h.leftSideShininess=0),void 0===h.leftSideBaseboard&&(h.leftSideBaseboard=null),void 0===h.rightSideColor&&(h.rightSideColor=null),void 0===h.rightSideTexture&&(h.rightSideTexture=null),void 0===h.rightSideShininess&&(h.rightSideShininess=0),void 0===h.rightSideBaseboard&&(h.rightSideBaseboard=null),void 0===h.pattern&&(h.pattern=null),void 0===h.topColor&&(h.topColor=null),void 0===h.level&&(h.level=null),void 0===h.shapeCache&&(h.shapeCache=null),void 0===h.arcCircleCenterCache&&(h.arcCircleCenterCache=null),void 0===h.pointsCache&&(h.pointsCache=null),void 0===h.pointsIncludingBaseboardsCache&&(h.pointsIncludingBaseboardsCache=null),h.symmetric=!0}else{var D=arguments;void 0===(h=e.call(this,t)||this).xStart&&(h.xStart=0),void 0===h.yStart&&(h.yStart=0),void 0===h.xEnd&&(h.xEnd=0),void 0===h.yEnd&&(h.yEnd=0),void 0===h.arcExtent&&(h.arcExtent=null),void 0===h.wallAtStart&&(h.wallAtStart=null),void 0===h.wallAtEnd&&(h.wallAtEnd=null),void 0===h.thickness&&(h.thickness=0),void 0===h.height&&(h.height=null),void 0===h.heightAtEnd&&(h.heightAtEnd=null),void 0===h.leftSideColor&&(h.leftSideColor=null),void 0===h.leftSideTexture&&(h.leftSideTexture=null),void 0===h.leftSideShininess&&(h.leftSideShininess=0),void 0===h.leftSideBaseboard&&(h.leftSideBaseboard=null),void 0===h.rightSideColor&&(h.rightSideColor=null),void 0===h.rightSideTexture&&(h.rightSideTexture=null),void 0===h.rightSideShininess&&(h.rightSideShininess=0),void 0===h.rightSideBaseboard&&(h.rightSideBaseboard=null),void 0===h.pattern&&(h.pattern=null),void 0===h.topColor&&(h.topColor=null),void 0===h.level&&(h.level=null),void 0===h.shapeCache&&(h.shapeCache=null),void 0===h.arcCircleCenterCache&&(h.arcCircleCenterCache=null),void 0===h.pointsCache&&(h.pointsCache=null),void 0===h.pointsIncludingBaseboardsCache&&(h.pointsIncludingBaseboardsCache=null),h.symmetric=!0,h.xStart=i,h.yStart=n,h.xEnd=o,h.yEnd=r,h.thickness=l,h.height=a,h.pattern=s}return h}return __extends(t,e),t.prototype.getXStart=function(){return this.xStart},t.prototype.setXStart=function(e){if(e!==this.xStart){var t=this.xStart;this.xStart=e,this.clearPointsCache(),this.arcCircleCenterCache=null,this.firePropertyChange("X_START",t,e)}},t.prototype.getYStart=function(){return this.yStart},t.prototype.setYStart=function(e){if(e!==this.yStart){var t=this.yStart;this.yStart=e,this.clearPointsCache(),this.arcCircleCenterCache=null,this.firePropertyChange("Y_START",t,e)}},t.prototype.getXEnd=function(){return this.xEnd},t.prototype.setXEnd=function(e){if(e!==this.xEnd){var t=this.xEnd;this.xEnd=e,this.clearPointsCache(),this.arcCircleCenterCache=null,this.firePropertyChange("X_END",t,e)}},t.prototype.getYEnd=function(){return this.yEnd},t.prototype.setYEnd=function(e){if(e!==this.yEnd){var t=this.yEnd;this.yEnd=e,this.clearPointsCache(),this.arcCircleCenterCache=null,this.firePropertyChange("Y_END",t,e)}},t.prototype.getLength=function(){if(null==this.arcExtent||0===this.arcExtent)return java.awt.geom.Point2D.distance(this.xStart,this.yStart,this.xEnd,this.yEnd);var e=this.getArcCircleCenter(),t=java.awt.geom.Point2D.distance(this.xStart,this.yStart,e[0],e[1]);return Math.abs(this.arcExtent)*t},t.prototype.getStartPointToEndPointDistance=function(){return java.awt.geom.Point2D.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)},t.prototype.setArcExtent=function(e){if(e!==this.arcExtent&&(null==e||e!==this.arcExtent)){var t=this.arcExtent;this.arcExtent=e,this.clearPointsCache(),this.arcCircleCenterCache=null,this.firePropertyChange("ARC_EXTENT",t,e)}},t.prototype.getArcExtent=function(){return this.arcExtent},t.prototype.getXArcCircleCenter=function(){return null==this.arcExtent?(this.xStart+this.xEnd)/2:this.getArcCircleCenter()[0]},t.prototype.getYArcCircleCenter=function(){return null==this.arcExtent?(this.yStart+this.yEnd)/2:this.getArcCircleCenter()[1]},t.prototype.getArcCircleCenter=function(){if(null==this.arcCircleCenterCache){var e=java.awt.geom.Point2D.distance(this.xStart,this.yStart,this.xEnd,this.yEnd),t=Math.abs(this.arcExtent)>Math.PI?-(Math.PI+this.arcExtent)/2:(Math.PI-this.arcExtent)/2,i=-Math.tan(t)*e/2,n=(this.xStart+this.xEnd)/2,o=(this.yStart+this.yEnd)/2,r=Math.atan2(this.xStart-this.xEnd,this.yEnd-this.yStart);this.arcCircleCenterCache=[n+i*Math.cos(r),o+i*Math.sin(r)]}return this.arcCircleCenterCache},t.prototype.getWallAtStart=function(){return this.wallAtStart},t.prototype.setWallAtStart=function(e,t){if(void 0===t&&(t=!0),e!==this.wallAtStart){var i=this.wallAtStart;this.wallAtStart=e,this.clearPointsCache(),this.firePropertyChange("WALL_AT_START",i,e),t&&this.detachJoinedWall(i)}},t.prototype.getWallAtEnd=function(){return this.wallAtEnd},t.prototype.setWallAtEnd=function(e,t){if(void 0===t&&(t=!0),e!==this.wallAtEnd){var i=this.wallAtEnd;this.wallAtEnd=e,this.clearPointsCache(),this.firePropertyChange("WALL_AT_END",i,e),t&&this.detachJoinedWall(i)}},t.prototype.detachJoinedWall=function(e){null!=e&&(e.getWallAtStart()===this?e.setWallAtStart(null,!1):e.getWallAtEnd()===this&&e.setWallAtEnd(null,!1))},t.prototype.getThickness=function(){return this.thickness},t.prototype.setThickness=function(e){if(e!==this.thickness){var t=this.thickness;this.thickness=e,this.clearPointsCache(),this.firePropertyChange("THICKNESS",t,e)}},t.prototype.getHeight=function(){return this.height},t.prototype.setHeight=function(e){if(e!==this.height&&(null==e||e!==this.height)){var t=this.height;this.height=e,this.firePropertyChange("HEIGHT",t,e)}},t.prototype.getHeightAtEnd=function(){return this.heightAtEnd},t.prototype.setHeightAtEnd=function(e){if(e!==this.heightAtEnd&&(null==e||e!==this.heightAtEnd)){var t=this.heightAtEnd;this.heightAtEnd=e,this.firePropertyChange("HEIGHT_AT_END",t,e)}},t.prototype.isTrapezoidal=function(){return null!=this.height&&null!=this.heightAtEnd&&!(this.height===this.heightAtEnd)},t.prototype.getLeftSideColor=function(){return this.leftSideColor},t.prototype.setLeftSideColor=function(e){if(e!==this.leftSideColor&&(null==e||e!==this.leftSideColor)){var t=this.leftSideColor;this.leftSideColor=e,this.firePropertyChange("LEFT_SIDE_COLOR",t,e)}},t.prototype.getRightSideColor=function(){return this.rightSideColor},t.prototype.setRightSideColor=function(e){if(e!==this.rightSideColor&&(null==e||e!==this.rightSideColor)){var t=this.rightSideColor;this.rightSideColor=e,this.firePropertyChange("RIGHT_SIDE_COLOR",t,e)}},t.prototype.getLeftSideTexture=function(){return this.leftSideTexture},t.prototype.setLeftSideTexture=function(e){if(e!==this.leftSideTexture&&(null==e||!e.equals(this.leftSideTexture))){var t=this.leftSideTexture;this.leftSideTexture=e,this.firePropertyChange("LEFT_SIDE_TEXTURE",t,e)}},t.prototype.getRightSideTexture=function(){return this.rightSideTexture},t.prototype.setRightSideTexture=function(e){if(e!==this.rightSideTexture&&(null==e||!e.equals(this.rightSideTexture))){var t=this.rightSideTexture;this.rightSideTexture=e,this.firePropertyChange("RIGHT_SIDE_TEXTURE",t,e)}},t.prototype.getLeftSideShininess=function(){return this.leftSideShininess},t.prototype.setLeftSideShininess=function(e){if(e!==this.leftSideShininess){var t=this.leftSideShininess;this.leftSideShininess=e,this.firePropertyChange("LEFT_SIDE_SHININESS",t,e)}},t.prototype.getRightSideShininess=function(){return this.rightSideShininess},t.prototype.setRightSideShininess=function(e){if(e!==this.rightSideShininess){var t=this.rightSideShininess;this.rightSideShininess=e,this.firePropertyChange("RIGHT_SIDE_SHININESS",t,e)}},t.prototype.getLeftSideBaseboard=function(){return this.leftSideBaseboard},t.prototype.setLeftSideBaseboard=function(e){if(e!==this.leftSideBaseboard&&(null==e||!e.equals(this.leftSideBaseboard))){var t=this.leftSideBaseboard;this.leftSideBaseboard=e,this.clearPointsCache(),this.firePropertyChange("LEFT_SIDE_BASEBOARD",t,e)}},t.prototype.getRightSideBaseboard=function(){return this.rightSideBaseboard},t.prototype.setRightSideBaseboard=function(e){if(e!==this.rightSideBaseboard&&(null==e||!e.equals(this.rightSideBaseboard))){var t=this.rightSideBaseboard;this.rightSideBaseboard=e,this.clearPointsCache(),this.firePropertyChange("RIGHT_SIDE_BASEBOARD",t,e)}},t.prototype.getPattern=function(){return this.pattern},t.prototype.setPattern=function(e){if(this.pattern!==e){var t=this.pattern;this.pattern=e,this.firePropertyChange("PATTERN",t,e)}},t.prototype.getTopColor=function(){return this.topColor},t.prototype.setTopColor=function(e){if(this.topColor!==e&&(null==e||e!==this.topColor)){var t=this.topColor;this.topColor=e,this.firePropertyChange("TOP_COLOR",t,e)}},t.prototype.getLevel=function(){return this.level},t.prototype.setLevel=function(e){if(e!==this.level){var t=this.level;this.level=e,this.firePropertyChange("LEVEL",t,e)}},t.prototype.isAtLevel=function(e){if(this.level===e)return!0;if(null!=this.level&&null!=e){var t=this.level.getElevation(),i=e.getElevation();return t===i&&this.level.getElevationIndex()<e.getElevationIndex()||t<i&&t+this.getWallMaximumHeight()>i}return!1},t.prototype.getWallMaximumHeight=function(){return null==this.height?0:this.isTrapezoidal()?Math.max(this.height,this.heightAtEnd):this.height},t.prototype.clearPointsCache=function(){this.shapeCache=null,this.pointsCache=null,this.pointsIncludingBaseboardsCache=null,null!=this.wallAtStart&&(this.wallAtStart.pointsCache=null,this.wallAtStart.pointsIncludingBaseboardsCache=null),null!=this.wallAtEnd&&(this.wallAtEnd.pointsCache=null,this.wallAtEnd.pointsIncludingBaseboardsCache=null)},t.prototype.getPoints$=function(){return this.getPoints$boolean(!1)},t.prototype.getPoints$boolean=function(e){return!e||null==this.leftSideBaseboard&&null==this.rightSideBaseboard?(null==this.pointsCache&&(this.pointsCache=this.getShapePoints(!1)),this.clonePoints(this.pointsCache)):(null==this.pointsIncludingBaseboardsCache&&(this.pointsIncludingBaseboardsCache=this.getShapePoints(!0)),this.clonePoints(this.pointsIncludingBaseboardsCache))},t.prototype.getPoints=function(e){if("boolean"==typeof e||null===e)return this.getPoints$boolean(e);if(void 0===e)return this.getPoints$();throw new Error("invalid overload")},t.prototype.clonePoints=function(e){for(var t=function(e){for(var t=[];e-- >0;)t.push(null);return t}(e.length),i=0;i<e.length;i++)t[i]=e[i].slice(0);return t},t.prototype.getShapePoints=function(e){var t=.01,i=this.getUnjoinedShapePoints(e),n=i.length-1,o=(i.length/2|0)-1,r=i.length/2|0;if(null!=this.wallAtStart){var l=this.wallAtStart.getUnjoinedShapePoints(e),a=l.length-1,s=(l.length/2|0)-1,h=l.length/2|0,u=this.wallAtStart.getWallAtEnd()===this&&(this.wallAtStart.getWallAtStart()!==this||this.wallAtStart.xEnd===this.xStart&&this.wallAtStart.yEnd===this.yStart),d=this.wallAtStart.getWallAtStart()===this&&(this.wallAtStart.getWallAtEnd()!==this||this.wallAtStart.xStart===this.xStart&&this.wallAtStart.yStart===this.yStart),c=e?this.wallAtStart.pointsIncludingBaseboardsCache:this.wallAtStart.pointsCache,p=2*Math.max(this.thickness,this.wallAtStart.getThickness());u?(this.computeIntersection(i[0],i[1],l[s],l[s-1],p),this.computeIntersection(i[n],i[n-1],l[h],l[h+1],p),null!=c&&(Math.abs(i[0][0]-c[s][0])<t&&Math.abs(i[0][1]-c[s][1])<t&&(i[0]=c[s]),Math.abs(i[n][0]-c[h][0])<t&&Math.abs(i[n][1]-c[h][1])<t&&(i[n]=c[h]))):d&&(this.computeIntersection(i[0],i[1],l[a],l[a-1],p),this.computeIntersection(i[n],i[n-1],l[0],l[1],p),null!=c&&(Math.abs(i[0][0]-c[a][0])<t&&Math.abs(i[0][1]-c[a][1])<t&&(i[0]=c[a]),null!=c&&Math.abs(i[n][0]-c[0][0])<t&&Math.abs(i[n][1]-c[0][1])<t&&(i[n]=c[0])))}if(null!=this.wallAtEnd){var g=this.wallAtEnd.getUnjoinedShapePoints(e),v=g.length-1,f=(g.length/2|0)-1,m=g.length/2|0,y=this.wallAtEnd.getWallAtStart()===this&&(this.wallAtEnd.getWallAtEnd()!==this||this.wallAtEnd.xStart===this.xEnd&&this.wallAtEnd.yStart===this.yEnd),C=this.wallAtEnd.getWallAtEnd()===this&&(this.wallAtEnd.getWallAtStart()!==this||this.wallAtEnd.xEnd===this.xEnd&&this.wallAtEnd.yEnd===this.yEnd),S=e?this.wallAtEnd.pointsIncludingBaseboardsCache:this.wallAtEnd.pointsCache;p=2*Math.max(this.thickness,this.wallAtEnd.getThickness());y?(this.computeIntersection(i[o],i[o-1],g[0],g[1],p),this.computeIntersection(i[r],i[r+1],g[v],g[v-1],p),null!=S&&(Math.abs(i[o][0]-S[0][0])<t&&Math.abs(i[o][1]-S[0][1])<t&&(i[o]=S[0]),Math.abs(i[r][0]-S[v][0])<t&&Math.abs(i[r][1]-S[v][1])<t&&(i[r]=S[v]))):C&&(this.computeIntersection(i[o],i[o-1],g[m],g[m+1],p),this.computeIntersection(i[r],i[r+1],g[f],g[f-1],p),null!=S&&(Math.abs(i[o][0]-S[m][0])<t&&Math.abs(i[o][1]-S[m][1])<t&&(i[o]=S[m]),Math.abs(i[r][0]-S[f][0])<t&&Math.abs(i[r][1]-S[f][1])<t&&(i[r]=S[f])))}return i},t.prototype.getUnjoinedShapePoints=function(e){if(null!=this.arcExtent&&0!==this.arcExtent&&java.awt.geom.Point2D.distanceSq(this.xStart,this.yStart,this.xEnd,this.yEnd)>1e-10){var t=this.getArcCircleCenter(),i=Math.atan2(t[1]-this.yStart,t[0]-this.xStart);i+=2*Math.atan2(this.yStart-this.yEnd,this.xEnd-this.xStart);var n=java.awt.geom.Point2D.distance(t[0],t[1],this.xStart,this.yStart),o=n+this.thickness/2,r=Math.max(0,n-this.thickness/2),l=o*Math.abs(this.arcExtent),a=this.arcExtent/Math.sqrt(l),s=this.arcExtent/a|0;e&&(a>0?(null!=this.leftSideBaseboard&&(o+=this.leftSideBaseboard.getThickness()),null!=this.rightSideBaseboard&&(r-=this.rightSideBaseboard.getThickness())):(null!=this.leftSideBaseboard&&(r-=this.leftSideBaseboard.getThickness()),null!=this.rightSideBaseboard&&(o+=this.rightSideBaseboard.getThickness())));var h=[];if(this.symmetric){Math.abs(this.arcExtent-s*a)>1e-6&&(a=this.arcExtent/++s);for(var u=0;u<=s;u++)this.computeRoundWallShapePoint(h,i+this.arcExtent-u*a,u,a,t,o,r)}else{u=0;for(var d=this.arcExtent;a>0?d>=.1*a:d<=.1*-a;d-=a,u++)this.computeRoundWallShapePoint(h,i+d,u,a,t,o,r);this.computeRoundWallShapePoint(h,i,u,a,t,o,r)}return h.slice(0)}d=Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart);var c=Math.sin(d),p=Math.cos(d),g=this.thickness/2;e&&null!=this.leftSideBaseboard&&(g+=this.leftSideBaseboard.getThickness());var v=c*g,f=p*g,m=this.thickness/2;e&&null!=this.rightSideBaseboard&&(m+=this.rightSideBaseboard.getThickness());var y=c*m,C=p*m;return[[this.xStart+v,this.yStart-f],[this.xEnd+v,this.yEnd-f],[this.xEnd-y,this.yEnd+C],[this.xStart-y,this.yStart+C]]},t.prototype.computeRoundWallShapePoint=function(e,t,i,n,o,r,l){var a=Math.cos(t),s=Math.sin(t),h=[o[0]+l*a,o[1]-l*s],u=[o[0]+r*a,o[1]-r*s];n>0?(e.splice(i,0,h),e.splice(e.length-1-i,0,u)):(e.splice(i,0,u),e.splice(e.length-1-i,0,h))},t.prototype.computeIntersection=function(e,t,i,n,o){var r,l=(t[1]-e[1])/(t[0]-e[0]),a=(n[1]-i[1])/(n[0]-i[0]);if(l!==a){var s=e[0],h=e[1];if(Math.abs(l)>4e3){if(Math.abs(a)<4e3)h=a*(s=e[0])+(n[1]-a*n[0])}else if(Math.abs(a)>4e3){if(Math.abs(l)<4e3)h=l*(s=i[0])+(d=t[1]-l*t[0])}else{var u=((r=l)>0?1:r<0?-1:0)===function(e){return e>0?1:e<0?-1:0}(a);if(Math.abs(l-a)>1e-5&&(!u||(Math.abs(l)>Math.abs(a)?l/a:a/l)>1.004)){var d=t[1]-l*t[0];h=l*(s=(n[1]-a*n[0]-d)/(l-a))+d}}java.awt.geom.Point2D.distanceSq(s,h,e[0],e[1])<o*o&&(e[0]=s,e[1]=h)}},t.prototype.intersectsRectangle=function(e,t,i,n){var o=new java.awt.geom.Rectangle2D.Float(e,t,0,0);return o.add(i,n),this.getShape(!1).intersects(o)},t.prototype.containsPoint$float$float$float=function(e,t,i){return this.containsPoint$float$float$boolean$float(e,t,!1,i)},t.prototype.containsPoint$float$float$boolean$float=function(e,t,i,n){return this.containsShapeAtWithMargin(this.getShape(i),e,t,n)},t.prototype.containsPoint=function(e,t,i,n){if("number"!=typeof e&&null!==e||"number"!=typeof t&&null!==t||"boolean"!=typeof i&&null!==i||"number"!=typeof n&&null!==n){if("number"!=typeof e&&null!==e||"number"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||void 0!==n)throw new Error("invalid overload");return this.containsPoint$float$float$float(e,t,i)}return this.containsPoint$float$float$boolean$float(e,t,i,n)},t.prototype.isMiddlePointAt=function(e,t,i){var n=this.getPoints$(),o=n.length/4|0,r=n.length-1-o,l=n.length%4==0?new java.awt.geom.Line2D.Float((n[o-1][0]+n[o][0])/2,(n[o-1][1]+n[o][1])/2,(n[r][0]+n[r+1][0])/2,(n[r][1]+n[r+1][1])/2):new java.awt.geom.Line2D.Float(n[o][0],n[o][1],n[r][0],n[r][1]);return this.containsShapeAtWithMargin(l,e,t,i)},t.prototype.containsWallStartAt=function(e,t,i){var n=this.getPoints$(),o=new java.awt.geom.Line2D.Float(n[0][0],n[0][1],n[n.length-1][0],n[n.length-1][1]);return this.containsShapeAtWithMargin(o,e,t,i)},t.prototype.containsWallEndAt=function(e,t,i){var n=this.getPoints$(),o=new java.awt.geom.Line2D.Float(n[(n.length/2|0)-1][0],n[(n.length/2|0)-1][1],n[n.length/2|0][0],n[n.length/2|0][1]);return this.containsShapeAtWithMargin(o,e,t,i)},t.prototype.containsShapeAtWithMargin=function(e,t,i,n){return 0===n?e.contains(t,i):e.intersects(t-n,i-n,2*n,2*n)},t.prototype.getShape=function(e){if(null==this.shapeCache){var t=this.getPoints$boolean(e),i=new java.awt.geom.GeneralPath;i.moveTo(t[0][0],t[0][1]);for(var n=1;n<t.length;n++)i.lineTo(t[n][0],t[n][1]);i.closePath(),this.shapeCache=i}return this.shapeCache},t.prototype.move=function(e,t){this.setXStart(this.getXStart()+e),this.setYStart(this.getYStart()+t),this.setXEnd(this.getXEnd()+e),this.setYEnd(this.getYEnd()+t)},t.duplicate=function(e){for(var i=[],n=0;n<e.length;n++){var o=e[n];i.push(o.duplicate())}return t.updateBoundWalls(i,e),i},t.clone=function(e){for(var i=[],n=0;n<e.length;n++){var o=e[n];i.push(function(e){if(null!=e.clone)return e.clone();var t=Object.create(e);for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}(o))}return t.updateBoundWalls(i,e),i},t.updateBoundWalls=function(e,t){for(var i=0;i<t.length;i++){var n=t[i],o=t.indexOf(n.getWallAtStart());-1!==o&&e[i].setWallAtStart(e[o]);var r=t.indexOf(n.getWallAtEnd());-1!==r&&e[i].setWallAtEnd(e[r])}},t.prototype.clone=function(){var t=this,i=function(i){if(null!=e.prototype.clone)return e.prototype.clone.call(t);var n=Object.create(i);for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o]);return n}(this);return i.wallAtStart=null,i.wallAtEnd=null,i.level=null,i.shapeCache=null,i.pointsCache=null,i.pointsIncludingBaseboardsCache=null,i},t}(HomeObject);Wall.__class="com.eteks.sweethome3d.model.Wall",Wall.__interfaces=["com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.Elevatable"],Wall.__transients=["shapeCache","arcCircleCenterCache","pointsCache","pointsIncludingBaseboardsCache","propertyChangeSupport"];var DimensionLine=function(e){function t(t,i,n,o,r,l,a,s){var h=this;if("string"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||"number"!=typeof l&&null!==l||"number"!=typeof a&&null!==a||"number"!=typeof s&&null!==s)if("number"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||"number"!=typeof l&&null!==l||"number"!=typeof a&&null!==a||void 0!==s)if("string"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||"number"!=typeof l&&null!==l||void 0!==a||void 0!==s){if("number"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||void 0!==l||void 0!==a||void 0!==s)throw new Error("invalid overload");var u=(T=arguments)[0],d=T[1],c=T[2],p=T[3],g=T[4],v=HomeObject.createId("dimensionLine");void 0===(h=e.call(this,v)||this).xStart&&(h.xStart=0),void 0===h.yStart&&(h.yStart=0),void 0===h.elevationStart&&(h.elevationStart=0),void 0===h.xEnd&&(h.xEnd=0),void 0===h.yEnd&&(h.yEnd=0),void 0===h.elevationEnd&&(h.elevationEnd=0),void 0===h.offset&&(h.offset=0),void 0===h.endMarkSize&&(h.endMarkSize=0),void 0===h.pitch&&(h.pitch=0),void 0===h.lengthStyle&&(h.lengthStyle=null),void 0===h.color&&(h.color=null),void 0===h.visibleIn3D&&(h.visibleIn3D=!1),void 0===h.level&&(h.level=null),void 0===h.shapeCache&&(h.shapeCache=null),h.xStart=u,h.yStart=d,h.elevationStart=0,h.xEnd=c,h.yEnd=p,h.elevationEnd=0,h.offset=g,h.endMarkSize=10,void 0===h.xStart&&(h.xStart=0),void 0===h.yStart&&(h.yStart=0),void 0===h.elevationStart&&(h.elevationStart=0),void 0===h.xEnd&&(h.xEnd=0),void 0===h.yEnd&&(h.yEnd=0),void 0===h.elevationEnd&&(h.elevationEnd=0),void 0===h.offset&&(h.offset=0),void 0===h.endMarkSize&&(h.endMarkSize=0),void 0===h.pitch&&(h.pitch=0),void 0===h.lengthStyle&&(h.lengthStyle=null),void 0===h.color&&(h.color=null),void 0===h.visibleIn3D&&(h.visibleIn3D=!1),void 0===h.level&&(h.level=null),void 0===h.shapeCache&&(h.shapeCache=null),void 0===h.xStart&&(h.xStart=0),void 0===h.yStart&&(h.yStart=0),void 0===h.elevationStart&&(h.elevationStart=0),void 0===h.xEnd&&(h.xEnd=0),void 0===h.yEnd&&(h.yEnd=0),void 0===h.elevationEnd&&(h.elevationEnd=0),void 0===h.offset&&(h.offset=0),void 0===h.endMarkSize&&(h.endMarkSize=0),void 0===h.pitch&&(h.pitch=0),void 0===h.lengthStyle&&(h.lengthStyle=null),void 0===h.color&&(h.color=null),void 0===h.visibleIn3D&&(h.visibleIn3D=!1),void 0===h.level&&(h.level=null),void 0===h.shapeCache&&(h.shapeCache=null)}else{var f=(T=arguments)[3],m=T[4],y=T[5];void 0===(h=e.call(this,t)||this).xStart&&(h.xStart=0),void 0===h.yStart&&(h.yStart=0),void 0===h.elevationStart&&(h.elevationStart=0),void 0===h.xEnd&&(h.xEnd=0),void 0===h.yEnd&&(h.yEnd=0),void 0===h.elevationEnd&&(h.elevationEnd=0),void 0===h.offset&&(h.offset=0),void 0===h.endMarkSize&&(h.endMarkSize=0),void 0===h.pitch&&(h.pitch=0),void 0===h.lengthStyle&&(h.lengthStyle=null),void 0===h.color&&(h.color=null),void 0===h.visibleIn3D&&(h.visibleIn3D=!1),void 0===h.level&&(h.level=null),void 0===h.shapeCache&&(h.shapeCache=null),h.xStart=i,h.yStart=n,h.elevationStart=0,h.xEnd=f,h.yEnd=m,h.elevationEnd=0,h.offset=y,h.endMarkSize=10,void 0===h.xStart&&(h.xStart=0),void 0===h.yStart&&(h.yStart=0),void 0===h.elevationStart&&(h.elevationStart=0),void 0===h.xEnd&&(h.xEnd=0),void 0===h.yEnd&&(h.yEnd=0),void 0===h.elevationEnd&&(h.elevationEnd=0),void 0===h.offset&&(h.offset=0),void 0===h.endMarkSize&&(h.endMarkSize=0),void 0===h.pitch&&(h.pitch=0),void 0===h.lengthStyle&&(h.lengthStyle=null),void 0===h.color&&(h.color=null),void 0===h.visibleIn3D&&(h.visibleIn3D=!1),void 0===h.level&&(h.level=null),void 0===h.shapeCache&&(h.shapeCache=null)}else{var C=(T=arguments)[0],S=T[1],E=T[2],A=T[3],_=T[4],P=T[5],w=T[6],L=HomeObject.createId("dimensionLine");void 0===(h=e.call(this,L)||this).xStart&&(h.xStart=0),void 0===h.yStart&&(h.yStart=0),void 0===h.elevationStart&&(h.elevationStart=0),void 0===h.xEnd&&(h.xEnd=0),void 0===h.yEnd&&(h.yEnd=0),void 0===h.elevationEnd&&(h.elevationEnd=0),void 0===h.offset&&(h.offset=0),void 0===h.endMarkSize&&(h.endMarkSize=0),void 0===h.pitch&&(h.pitch=0),void 0===h.lengthStyle&&(h.lengthStyle=null),void 0===h.color&&(h.color=null),void 0===h.visibleIn3D&&(h.visibleIn3D=!1),void 0===h.level&&(h.level=null),void 0===h.shapeCache&&(h.shapeCache=null),h.xStart=C,h.yStart=S,h.elevationStart=E,h.xEnd=A,h.yEnd=_,h.elevationEnd=P,h.offset=w,h.endMarkSize=10,void 0===h.xStart&&(h.xStart=0),void 0===h.yStart&&(h.yStart=0),void 0===h.elevationStart&&(h.elevationStart=0),void 0===h.xEnd&&(h.xEnd=0),void 0===h.yEnd&&(h.yEnd=0),void 0===h.elevationEnd&&(h.elevationEnd=0),void 0===h.offset&&(h.offset=0),void 0===h.endMarkSize&&(h.endMarkSize=0),void 0===h.pitch&&(h.pitch=0),void 0===h.lengthStyle&&(h.lengthStyle=null),void 0===h.color&&(h.color=null),void 0===h.visibleIn3D&&(h.visibleIn3D=!1),void 0===h.level&&(h.level=null),void 0===h.shapeCache&&(h.shapeCache=null)}else{var T=arguments;void 0===(h=e.call(this,t)||this).xStart&&(h.xStart=0),void 0===h.yStart&&(h.yStart=0),void 0===h.elevationStart&&(h.elevationStart=0),void 0===h.xEnd&&(h.xEnd=0),void 0===h.yEnd&&(h.yEnd=0),void 0===h.elevationEnd&&(h.elevationEnd=0),void 0===h.offset&&(h.offset=0),void 0===h.endMarkSize&&(h.endMarkSize=0),void 0===h.pitch&&(h.pitch=0),void 0===h.lengthStyle&&(h.lengthStyle=null),void 0===h.color&&(h.color=null),void 0===h.visibleIn3D&&(h.visibleIn3D=!1),void 0===h.level&&(h.level=null),void 0===h.shapeCache&&(h.shapeCache=null),h.xStart=i,h.yStart=n,h.elevationStart=o,h.xEnd=r,h.yEnd=l,h.elevationEnd=a,h.offset=s,h.endMarkSize=10}return h}return __extends(t,e),t.prototype.getXStart=function(){return this.xStart},t.prototype.setXStart=function(e){if(e!==this.xStart){var t=this.xStart;this.xStart=e,this.shapeCache=null,this.firePropertyChange("X_START",t,e)}},t.prototype.getYStart=function(){return this.yStart},t.prototype.setYStart=function(e){if(e!==this.yStart){var t=this.yStart;this.yStart=e,this.shapeCache=null,this.firePropertyChange("Y_START",t,e)}},t.prototype.getElevationStart=function(){return this.elevationStart},t.prototype.setElevationStart=function(e){if(e!==this.elevationStart){var t=this.elevationStart;this.elevationStart=e,this.shapeCache=null,this.firePropertyChange("ELEVATION_START",t,e)}},t.prototype.getXEnd=function(){return this.xEnd},t.prototype.setXEnd=function(e){if(e!==this.xEnd){var t=this.xEnd;this.xEnd=e,this.shapeCache=null,this.firePropertyChange("X_END",t,e)}},t.prototype.getYEnd=function(){return this.yEnd},t.prototype.setYEnd=function(e){if(e!==this.yEnd){var t=this.yEnd;this.yEnd=e,this.shapeCache=null,this.firePropertyChange("Y_END",t,e)}},t.prototype.getElevationEnd=function(){return this.elevationEnd},t.prototype.setElevationEnd=function(e){if(e!==this.elevationEnd){var t=this.elevationEnd;this.elevationEnd=e,this.shapeCache=null,this.firePropertyChange("ELEVATION_END",t,e)}},t.prototype.isElevationDimensionLine=function(){return this.xStart===this.xEnd&&this.yStart===this.yEnd&&this.elevationStart!==this.elevationEnd},t.prototype.getOffset=function(){return this.offset},t.prototype.setOffset=function(e){if(e!==this.offset){var t=this.offset;this.offset=e,this.shapeCache=null,this.firePropertyChange("OFFSET",t,e)}},t.prototype.getPitch=function(){return this.pitch},t.prototype.setPitch=function(e){if(e!==this.pitch){var t=this.pitch;this.pitch=e,this.shapeCache=null,this.firePropertyChange("PITCH",t,e)}},t.prototype.getLength=function(){var e=this.xEnd-this.xStart,t=this.yEnd-this.yStart,i=this.elevationEnd-this.elevationStart;return Math.sqrt(e*e+t*t+i*i)},t.prototype.getLengthStyle=function(){return this.lengthStyle},t.prototype.setLengthStyle=function(e){if(e!==this.lengthStyle){var t=this.lengthStyle;this.lengthStyle=e,this.firePropertyChange("LENGTH_STYLE",t,e)}},t.prototype.getColor=function(){return this.color},t.prototype.setColor=function(e){if(e!==this.color){var t=this.color;this.color=e,this.firePropertyChange("COLOR",t,e)}},t.prototype.getEndMarkSize=function(){return this.endMarkSize},t.prototype.setEndMarkSize=function(e){if(e!==this.endMarkSize){var t=this.endMarkSize;this.endMarkSize=e,this.shapeCache=null,this.firePropertyChange("END_MARK_SIZE",t,e)}},t.prototype.isVisibleIn3D=function(){return this.visibleIn3D},t.prototype.setVisibleIn3D=function(e){e!==this.visibleIn3D&&(this.visibleIn3D=e,this.firePropertyChange("VISIBLE_IN_3D",!e,e))},t.prototype.getLevel=function(){return this.level},t.prototype.setLevel=function(e){if(e!==this.level){var t=this.level;this.level=e,this.firePropertyChange("LEVEL",t,e)}},t.prototype.isAtLevel=function(e){if(this.level===e)return!0;if(null!=this.level&&null!=e){var t=this.level.getElevation(),i=e.getElevation();return t===i&&this.level.getElevationIndex()<e.getElevationIndex()||t<i&&t+Math.max(this.elevationStart,this.elevationEnd)>i}return!1},t.prototype.getPoints=function(){var e=this.isElevationDimensionLine()?this.pitch:Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart),t=-Math.sin(e)*this.offset,i=Math.cos(e)*this.offset;return[[this.xStart,this.yStart],[this.xStart+t,this.yStart+i],[this.xEnd+t,this.yEnd+i],[this.xEnd,this.yEnd]]},t.prototype.intersectsRectangle=function(e,t,i,n){var o=new java.awt.geom.Rectangle2D.Float(e,t,0,0);return o.add(i,n),this.getShape().intersects(o)},t.prototype.containsPoint=function(e,t,i){return this.containsShapeAtWithMargin(this.getShape(),e,t,i)},t.prototype.isMiddlePointAt=function(e,t,i){if(this.elevationStart===this.elevationEnd){var n=Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart),o=-Math.sin(n)*this.offset,r=Math.cos(n)*this.offset,l=(this.xStart+this.xEnd)/2+o,a=(this.yStart+this.yEnd)/2+r;return Math.abs(e-l)<=i&&Math.abs(t-a)<=i}return!1},t.prototype.containsStartExtensionLinetAt=function(e,t,i){if(this.elevationStart===this.elevationEnd){var n=Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart),o=new java.awt.geom.Line2D.Float(this.xStart,this.yStart,this.xStart+-Math.sin(n)*this.offset,this.yStart+Math.cos(n)*this.offset);return this.containsShapeAtWithMargin(o,e,t,i)}return!1},t.prototype.containsEndExtensionLineAt=function(e,t,i){if(this.elevationStart===this.elevationEnd){var n=Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart),o=new java.awt.geom.Line2D.Float(this.xEnd,this.yEnd,this.xEnd+-Math.sin(n)*this.offset,this.yEnd+Math.cos(n)*this.offset);return this.containsShapeAtWithMargin(o,e,t,i)}return!1},t.prototype.isTopPointAt=function(e,t,i){if(this.elevationStart!==this.elevationEnd){var n=this.yEnd!==this.yStart||this.xEnd!==this.xStart?Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart):this.pitch,o=-Math.sin(n)*(this.offset-this.endMarkSize/2*(0==((l=this.offset)>0?1:l<0?-1:0)?-1:function(e){return e>0?1:e<0?-1:0}(this.offset))),r=Math.cos(n)*(this.offset-this.endMarkSize/2*(0===function(e){return e>0?1:e<0?-1:0}(this.offset)?-1:function(e){return e>0?1:e<0?-1:0}(this.offset)));return java.awt.geom.Point2D.distanceSq(e,t,this.xStart+o,this.yStart+r)<=i*i}return!1;var l},t.prototype.isRightPointAt=function(e,t,i){if(this.elevationStart!==this.elevationEnd){var n=this.yEnd!==this.yStart||this.xEnd!==this.xStart?Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart):this.pitch,o=Math.sin(n),r=Math.cos(n),l=-o*this.offset+r*this.endMarkSize/2,a=r*this.offset+o*this.endMarkSize/2;return java.awt.geom.Point2D.distanceSq(e,t,this.xStart+l,this.yStart+a)<=i*i}return!1},t.prototype.isBottomPointAt=function(e,t,i){if(this.elevationStart!==this.elevationEnd){var n=this.yEnd!==this.yStart||this.xEnd!==this.xStart?Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart):this.pitch,o=-Math.sin(n)*(this.offset+this.endMarkSize/2*(0==((l=this.offset)>0?1:l<0?-1:0)?-1:function(e){return e>0?1:e<0?-1:0}(this.offset))),r=Math.cos(n)*(this.offset+this.endMarkSize/2*(0===function(e){return e>0?1:e<0?-1:0}(this.offset)?-1:function(e){return e>0?1:e<0?-1:0}(this.offset)));return java.awt.geom.Point2D.distanceSq(e,t,this.xStart+o,this.yStart+r)<=i*i}return!1;var l},t.prototype.isLeftPointAt=function(e,t,i){if(this.elevationStart!==this.elevationEnd){var n=this.yEnd!==this.yStart||this.xEnd!==this.xStart?Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart):this.pitch,o=Math.sin(n),r=Math.cos(n),l=-o*this.offset-r*this.endMarkSize/2,a=r*this.offset-o*this.endMarkSize/2;return java.awt.geom.Point2D.distanceSq(e,t,this.xStart+l,this.yStart+a)<=i*i}return!1},t.prototype.containsShapeAtWithMargin=function(e,t,i,n){return 0===n?e.contains(t,i):e.intersects(t-n,i-n,2*n,2*n)},t.prototype.getShape=function(){if(null==this.shapeCache){var e=this.yEnd!==this.yStart||this.xEnd!==this.xStart?Math.atan2(this.yEnd-this.yStart,this.xEnd-this.xStart):this.pitch,t=this.elevationStart===this.elevationEnd,i=-Math.sin(e)*this.offset,n=Math.cos(e)*this.offset,o=new java.awt.geom.GeneralPath;t?(o.append(new java.awt.geom.Line2D.Float(this.xStart+i,this.yStart+n,this.xEnd+i,this.yEnd+n),!1),o.append(new java.awt.geom.Line2D.Float(this.xEnd,this.yEnd,this.xEnd+i,this.yEnd+n),!1)):o.append(new java.awt.geom.Ellipse2D.Float(this.xStart+i-this.endMarkSize/2,this.yStart+n-this.endMarkSize/2,this.endMarkSize,this.endMarkSize),!1),o.append(new java.awt.geom.Line2D.Float(this.xStart,this.yStart,this.xStart+i,this.yStart+n),!1),this.shapeCache=o}return this.shapeCache},t.prototype.move=function(e,t){this.setXStart(this.getXStart()+e),this.setYStart(this.getYStart()+t),this.setXEnd(this.getXEnd()+e),this.setYEnd(this.getYEnd()+t)},t.prototype.clone=function(){var t=this,i=function(i){if(null!=e.prototype.clone)return e.prototype.clone.call(t);var n=Object.create(i);for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o]);return n}(this);return i.level=null,i},t}(HomeObject);DimensionLine.__class="com.eteks.sweethome3d.model.DimensionLine",DimensionLine.__interfaces=["com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.Elevatable"],DimensionLine.__transients=["shapeCache","propertyChangeSupport"];var Camera=function(e){function t(i,n,o,r,l,a,s,h,u){var d=this;if("string"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||"number"!=typeof l&&null!==l||"number"!=typeof a&&null!==a||"number"!=typeof s&&null!==s||"number"!=typeof h&&null!==h||"number"!=typeof u&&null!==u)if("number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||"number"!=typeof l&&null!==l||"number"!=typeof a&&null!==a||"number"!=typeof s&&null!==s||"number"!=typeof h&&null!==h||void 0!==u)if("string"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||"number"!=typeof l&&null!==l||"number"!=typeof a&&null!==a||"number"!=typeof s&&null!==s||void 0!==h||void 0!==u){if("number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||"number"!=typeof l&&null!==l||"number"!=typeof a&&null!==a||void 0!==s||void 0!==h||void 0!==u)throw new Error("invalid overload");var c=(R=arguments)[0],p=R[1],g=R[2],v=R[3],f=R[4],m=R[5],y=t.midday(),C=t.Lens.PINHOLE,S=HomeObject.createId("camera");void 0===(d=e.call(this,S)||this).name&&(d.name=null),void 0===d.x&&(d.x=0),void 0===d.y&&(d.y=0),void 0===d.z&&(d.z=0),void 0===d.yaw&&(d.yaw=0),void 0===d.pitch&&(d.pitch=0),void 0===d.fieldOfView&&(d.fieldOfView=0),void 0===d.time&&(d.time=0),void 0===d.lens&&(d.lens=null),void 0===d.lensName&&(d.lensName=null),void 0===d.renderer&&(d.renderer=null),d.x=c,d.y=p,d.z=g,d.yaw=v,d.pitch=f,d.fieldOfView=m,d.time=y,d.lens=C,void 0===d.name&&(d.name=null),void 0===d.x&&(d.x=0),void 0===d.y&&(d.y=0),void 0===d.z&&(d.z=0),void 0===d.yaw&&(d.yaw=0),void 0===d.pitch&&(d.pitch=0),void 0===d.fieldOfView&&(d.fieldOfView=0),void 0===d.time&&(d.time=0),void 0===d.lens&&(d.lens=null),void 0===d.lensName&&(d.lensName=null),void 0===d.renderer&&(d.renderer=null),void 0===d.name&&(d.name=null),void 0===d.x&&(d.x=0),void 0===d.y&&(d.y=0),void 0===d.z&&(d.z=0),void 0===d.yaw&&(d.yaw=0),void 0===d.pitch&&(d.pitch=0),void 0===d.fieldOfView&&(d.fieldOfView=0),void 0===d.time&&(d.time=0),void 0===d.lens&&(d.lens=null),void 0===d.lensName&&(d.lensName=null),void 0===d.renderer&&(d.renderer=null)}else{R=arguments;var E=t.midday(),A=t.Lens.PINHOLE;void 0===(d=e.call(this,i)||this).name&&(d.name=null),void 0===d.x&&(d.x=0),void 0===d.y&&(d.y=0),void 0===d.z&&(d.z=0),void 0===d.yaw&&(d.yaw=0),void 0===d.pitch&&(d.pitch=0),void 0===d.fieldOfView&&(d.fieldOfView=0),void 0===d.time&&(d.time=0),void 0===d.lens&&(d.lens=null),void 0===d.lensName&&(d.lensName=null),void 0===d.renderer&&(d.renderer=null),d.x=n,d.y=o,d.z=r,d.yaw=l,d.pitch=a,d.fieldOfView=s,d.time=E,d.lens=A,void 0===d.name&&(d.name=null),void 0===d.x&&(d.x=0),void 0===d.y&&(d.y=0),void 0===d.z&&(d.z=0),void 0===d.yaw&&(d.yaw=0),void 0===d.pitch&&(d.pitch=0),void 0===d.fieldOfView&&(d.fieldOfView=0),void 0===d.time&&(d.time=0),void 0===d.lens&&(d.lens=null),void 0===d.lensName&&(d.lensName=null),void 0===d.renderer&&(d.renderer=null)}else{var _=(R=arguments)[0],P=R[1],w=R[2],L=R[3],T=R[4],b=R[5],O=R[6],I=R[7],D=HomeObject.createId("camera");void 0===(d=e.call(this,D)||this).name&&(d.name=null),void 0===d.x&&(d.x=0),void 0===d.y&&(d.y=0),void 0===d.z&&(d.z=0),void 0===d.yaw&&(d.yaw=0),void 0===d.pitch&&(d.pitch=0),void 0===d.fieldOfView&&(d.fieldOfView=0),void 0===d.time&&(d.time=0),void 0===d.lens&&(d.lens=null),void 0===d.lensName&&(d.lensName=null),void 0===d.renderer&&(d.renderer=null),d.x=_,d.y=P,d.z=w,d.yaw=L,d.pitch=T,d.fieldOfView=b,d.time=O,d.lens=I,void 0===d.name&&(d.name=null),void 0===d.x&&(d.x=0),void 0===d.y&&(d.y=0),void 0===d.z&&(d.z=0),void 0===d.yaw&&(d.yaw=0),void 0===d.pitch&&(d.pitch=0),void 0===d.fieldOfView&&(d.fieldOfView=0),void 0===d.time&&(d.time=0),void 0===d.lens&&(d.lens=null),void 0===d.lensName&&(d.lensName=null),void 0===d.renderer&&(d.renderer=null)}else{var R=arguments;void 0===(d=e.call(this,i)||this).name&&(d.name=null),void 0===d.x&&(d.x=0),void 0===d.y&&(d.y=0),void 0===d.z&&(d.z=0),void 0===d.yaw&&(d.yaw=0),void 0===d.pitch&&(d.pitch=0),void 0===d.fieldOfView&&(d.fieldOfView=0),void 0===d.time&&(d.time=0),void 0===d.lens&&(d.lens=null),void 0===d.lensName&&(d.lensName=null),void 0===d.renderer&&(d.renderer=null),d.x=n,d.y=o,d.z=r,d.yaw=l,d.pitch=a,d.fieldOfView=s,d.time=h,d.lens=u}return d}return __extends(t,e),t.midday=function(){var e,t=new Date;return(e=t).UTC?e.setUTCHours(12):e.setHours(12),function(e,t){e.UTC?e.setUTCMinutes(0):e.setMinutes(0)}(t),function(e,t){e.UTC?e.setUTCSeconds(0):e.setSeconds(0)}(t),function(e,t){e.UTC?e.setUTCMilliseconds(0):e.setMilliseconds(0)}(t),t.getTime()},t.prototype.getName=function(){return this.name},t.prototype.setName=function(e){if(e!==this.name&&(null==e||e!==this.name)){var t=this.name;this.name=e,this.firePropertyChange("NAME",t,e)}},t.prototype.getYaw=function(){return this.yaw},t.prototype.setYaw=function(e){if(e!==this.yaw){var t=this.yaw;this.yaw=e,this.firePropertyChange("YAW",t,e)}},t.prototype.getPitch=function(){return this.pitch},t.prototype.setPitch=function(e){if(e!==this.pitch){var t=this.pitch;this.pitch=e,this.firePropertyChange("PITCH",t,e)}},t.prototype.getFieldOfView=function(){return this.fieldOfView},t.prototype.setFieldOfView=function(e){if(e!==this.fieldOfView){var t=this.fieldOfView;this.fieldOfView=e,this.firePropertyChange("FIELD_OF_VIEW",t,e)}},t.prototype.getX=function(){return this.x},t.prototype.setX=function(e){if(e!==this.x){var t=this.x;this.x=e,this.firePropertyChange("X",t,e)}},t.prototype.getY=function(){return this.y},t.prototype.setY=function(e){if(e!==this.y){var t=this.y;this.y=e,this.firePropertyChange("Y",t,e)}},t.prototype.getZ=function(){return this.z},t.prototype.setZ=function(e){if(e!==this.z){var t=this.z;this.z=e,this.firePropertyChange("Z",t,e)}},t.prototype.getTime=function(){return this.time},t.prototype.setTime=function(e){if(this.time!==e){var t=this.time;this.time=e,this.firePropertyChange("TIME",t,e)}},t.convertTimeToTimeZone=function(e,t){var i=new Date;i.setTime(e);var n,o=new Date;return function(e,t){e.UTC?e.setUTCFullYear(t):e.setFullYear(t)}(o,(n=i).UTC?n.getUTCFullYear():n.getFullYear()),function(e,t){e.UTC?e.setUTCMonth(t):e.setMonth(t)}(o,function(e){return e.UTC?e.getUTCMonth():e.getMonth()}(i)),function(e,t){e.UTC?e.setUTCDate(t):e.setDate(t)}(o,function(e){return e.UTC?e.getUTCDate():e.getDate()}(i)),function(e,t){e.UTC?e.setUTCHours(t):e.setHours(t)}(o,function(e){return e.UTC?e.getUTCHours():e.getHours()}(i)),function(e,t){e.UTC?e.setUTCMinutes(t):e.setMinutes(t)}(o,function(e){return e.UTC?e.getUTCMinutes():e.getMinutes()}(i)),function(e,t){e.UTC?e.setUTCSeconds(t):e.setSeconds(t)}(o,function(e){return e.UTC?e.getUTCSeconds():e.getSeconds()}(i)),function(e,t){e.UTC?e.setUTCMilliseconds(t):e.setMilliseconds(t)}(o,function(e){return e.UTC?e.getUTCMilliseconds():e.getMilliseconds()}(i)),o.getTime()},t.prototype.getLens=function(){return this.lens},t.prototype.setLens=function(e){if(e!==this.lens){var i=this.lens;this.lens=e,this.lensName=t.Lens[this.lens],this.firePropertyChange("LENS",i,e)}},t.prototype.setRenderer=function(e){if(e!==this.renderer&&(null==e||e!==this.renderer)){var t=this.renderer;this.renderer=e,this.firePropertyChange("RENDERER",t,e)}},t.prototype.getRenderer=function(){return this.renderer},t.prototype.setCamera=function(e){this.setX(e.getX()),this.setY(e.getY()),this.setZ(e.getZ()),this.setYaw(e.getYaw()),this.setPitch(e.getPitch()),this.setFieldOfView(e.getFieldOfView())},t.prototype.clone=function(){var t=this;return function(i){if(null!=e.prototype.clone)return e.prototype.clone.call(t);var n=Object.create(i);for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o]);return n}(this)},t}(HomeObject);Camera.__class="com.eteks.sweethome3d.model.Camera",function(e){var t;(t=e.Lens||(e.Lens={}))[t.PINHOLE=0]="PINHOLE",t[t.NORMAL=1]="NORMAL",t[t.FISHEYE=2]="FISHEYE",t[t.SPHERICAL=3]="SPHERICAL"}(Camera||(Camera={})),Camera.__transients=["lens","propertyChangeSupport"];var Level=function(e){function t(t,i,n,o,r){var l=this;if("string"!=typeof t&&null!==t||"string"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o||"number"!=typeof r&&null!==r){if("string"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o||void 0!==r)throw new Error("invalid overload");var a=(c=arguments)[0],s=c[1],h=c[2],u=c[3],d=HomeObject.createId("level");void 0===(l=e.call(this,d)||this).name&&(l.name=null),void 0===l.elevation&&(l.elevation=0),void 0===l.floorThickness&&(l.floorThickness=0),void 0===l.height&&(l.height=0),void 0===l.backgroundImage&&(l.backgroundImage=null),void 0===l.visible&&(l.visible=!1),void 0===l.viewable&&(l.viewable=!1),void 0===l.elevationIndex&&(l.elevationIndex=0),l.name=a,l.elevation=s,l.floorThickness=h,l.height=u,l.visible=!0,l.viewable=!0,l.elevationIndex=-1,void 0===l.name&&(l.name=null),void 0===l.elevation&&(l.elevation=0),void 0===l.floorThickness&&(l.floorThickness=0),void 0===l.height&&(l.height=0),void 0===l.backgroundImage&&(l.backgroundImage=null),void 0===l.visible&&(l.visible=!1),void 0===l.viewable&&(l.viewable=!1),void 0===l.elevationIndex&&(l.elevationIndex=0)}else{var c=arguments;void 0===(l=e.call(this,t)||this).name&&(l.name=null),void 0===l.elevation&&(l.elevation=0),void 0===l.floorThickness&&(l.floorThickness=0),void 0===l.height&&(l.height=0),void 0===l.backgroundImage&&(l.backgroundImage=null),void 0===l.visible&&(l.visible=!1),void 0===l.viewable&&(l.viewable=!1),void 0===l.elevationIndex&&(l.elevationIndex=0),l.name=i,l.elevation=n,l.floorThickness=o,l.height=r,l.visible=!0,l.viewable=!0,l.elevationIndex=-1}return l}return __extends(t,e),t.prototype.getName=function(){return this.name},t.prototype.setName=function(e){if(e!==this.name&&(null==e||e!==this.name)){var t=this.name;this.name=e,this.firePropertyChange("NAME",t,e)}},t.prototype.getElevation=function(){return this.elevation},t.prototype.setElevation=function(e){if(e!==this.elevation){var t=this.elevation;this.elevation=e,this.firePropertyChange("ELEVATION",t,e)}},t.prototype.getFloorThickness=function(){return this.floorThickness},t.prototype.setFloorThickness=function(e){if(e!==this.floorThickness){var t=this.floorThickness;this.floorThickness=e,this.firePropertyChange("FLOOR_THICKNESS",t,e)}},t.prototype.getHeight=function(){return this.height},t.prototype.setHeight=function(e){if(e!==this.height){var t=this.height;this.height=e,this.firePropertyChange("HEIGHT",t,e)}},t.prototype.getBackgroundImage=function(){return this.backgroundImage},t.prototype.setBackgroundImage=function(e){if(e!==this.backgroundImage){var t=this.backgroundImage;this.backgroundImage=e,this.firePropertyChange("BACKGROUND_IMAGE",t,e)}},t.prototype.isVisible=function(){return this.visible},t.prototype.setVisible=function(e){e!==this.visible&&(this.visible=e,this.firePropertyChange("VISIBLE",!e,e))},t.prototype.isViewable=function(){return this.viewable},t.prototype.setViewable=function(e){e!==this.viewable&&(this.viewable=e,this.firePropertyChange("VIEWABLE",!e,e))},t.prototype.isViewableAndVisible=function(){return this.viewable&&this.visible},t.prototype.getElevationIndex=function(){return this.elevationIndex},t.prototype.setElevationIndex=function(e){if(e!==this.elevationIndex){var t=this.elevationIndex;this.elevationIndex=e,this.firePropertyChange("ELEVATION_INDEX",t,e)}},t.prototype.clone=function(){var t=this;return function(i){if(null!=e.prototype.clone)return e.prototype.clone.call(t);var n=Object.create(i);for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o]);return n}(this)},t}(HomeObject);Level.__class="com.eteks.sweethome3d.model.Level",Level.__transients=["propertyChangeSupport"];var Polyline=function(e){function t(i,n,o,r,l,a,s,h,u,d,c){var p=this;if("string"!=typeof i&&null!==i||!(null!=n&&n instanceof Array&&(0==n.length||null==n[0]||n[0]instanceof Array)||null===n)||"number"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||"number"!=typeof l&&null!==l||"number"!=typeof a&&null!==a||"number"!=typeof s&&null!==s||"number"!=typeof h&&null!==h||"number"!=typeof u&&null!==u||"boolean"!=typeof d&&null!==d||"number"!=typeof c&&null!==c)if(!(null!=i&&i instanceof Array&&(0==i.length||null==i[0]||i[0]instanceof Array)||null===i)||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||"number"!=typeof l&&null!==l||"number"!=typeof a&&null!==a||"number"!=typeof s&&null!==s||"number"!=typeof h&&null!==h||"boolean"!=typeof u&&null!==u||"number"!=typeof d&&null!==d||void 0!==c)if(!(null!=i&&i instanceof Array&&(0==i.length||null==i[0]||i[0]instanceof Array)||null===i)||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||"number"!=typeof l&&null!==l||"number"!=typeof a&&null!==a||"number"!=typeof s&&null!==s||"boolean"!=typeof h&&null!==h||"number"!=typeof u&&null!==u||void 0!==d||void 0!==c)if("string"!=typeof i&&null!==i||!(null!=n&&n instanceof Array&&(0==n.length||null==n[0]||n[0]instanceof Array)||null===n)||void 0!==o||void 0!==r||void 0!==l||void 0!==a||void 0!==s||void 0!==h||void 0!==u||void 0!==d||void 0!==c){if(!(null!=i&&i instanceof Array&&(0==i.length||null==i[0]||i[0]instanceof Array)||null===i)||void 0!==n||void 0!==o||void 0!==r||void 0!==l||void 0!==a||void 0!==s||void 0!==h||void 0!==u||void 0!==d||void 0!==c)throw new Error("invalid overload");var g=($=arguments)[0],v=t.CapStyle.BUTT,f=t.JoinStyle.MITER,m=t.DashStyle.SOLID,y=t.ArrowStyle.NONE,C=t.ArrowStyle.NONE,S=HomeObject.createId("polyline");void 0===(p=e.call(this,S)||this).points&&(p.points=null),void 0===p.thickness&&(p.thickness=0),void 0===p.capStyle&&(p.capStyle=null),void 0===p.capStyleName&&(p.capStyleName=null),void 0===p.joinStyle&&(p.joinStyle=null),void 0===p.joinStyleName&&(p.joinStyleName=null),void 0===p.dashStyle&&(p.dashStyle=null),void 0===p.dashStyleName&&(p.dashStyleName=null),void 0===p.dashPattern&&(p.dashPattern=null),void 0===p.dashOffset&&(p.dashOffset=0),void 0===p.startArrowStyle&&(p.startArrowStyle=null),void 0===p.startArrowStyleName&&(p.startArrowStyleName=null),void 0===p.endArrowStyle&&(p.endArrowStyle=null),void 0===p.endArrowStyleName&&(p.endArrowStyleName=null),void 0===p.closedPath&&(p.closedPath=!1),void 0===p.color&&(p.color=0),void 0===p.elevation&&(p.elevation=null),void 0===p.level&&(p.level=null),void 0===p.polylinePathCache&&(p.polylinePathCache=null),void 0===p.shapeCache&&(p.shapeCache=null),p.points=p.deepCopy(g),p.thickness=1,p.capStyle=v,p.joinStyle=f,p.dashStyle=m,p.dashOffset=0,p.startArrowStyle=y,p.endArrowStyle=C,p.closedPath=!1,p.color=-16777216,void 0===p.points&&(p.points=null),void 0===p.thickness&&(p.thickness=0),void 0===p.capStyle&&(p.capStyle=null),void 0===p.capStyleName&&(p.capStyleName=null),void 0===p.joinStyle&&(p.joinStyle=null),void 0===p.joinStyleName&&(p.joinStyleName=null),void 0===p.dashStyle&&(p.dashStyle=null),void 0===p.dashStyleName&&(p.dashStyleName=null),void 0===p.dashPattern&&(p.dashPattern=null),void 0===p.dashOffset&&(p.dashOffset=0),void 0===p.startArrowStyle&&(p.startArrowStyle=null),void 0===p.startArrowStyleName&&(p.startArrowStyleName=null),void 0===p.endArrowStyle&&(p.endArrowStyle=null),void 0===p.endArrowStyleName&&(p.endArrowStyleName=null),void 0===p.closedPath&&(p.closedPath=!1),void 0===p.color&&(p.color=0),void 0===p.elevation&&(p.elevation=null),void 0===p.level&&(p.level=null),void 0===p.polylinePathCache&&(p.polylinePathCache=null),void 0===p.shapeCache&&(p.shapeCache=null),void 0===p.points&&(p.points=null),void 0===p.thickness&&(p.thickness=0),void 0===p.capStyle&&(p.capStyle=null),void 0===p.capStyleName&&(p.capStyleName=null),void 0===p.joinStyle&&(p.joinStyle=null),void 0===p.joinStyleName&&(p.joinStyleName=null),void 0===p.dashStyle&&(p.dashStyle=null),void 0===p.dashStyleName&&(p.dashStyleName=null),void 0===p.dashPattern&&(p.dashPattern=null),void 0===p.dashOffset&&(p.dashOffset=0),void 0===p.startArrowStyle&&(p.startArrowStyle=null),void 0===p.startArrowStyleName&&(p.startArrowStyleName=null),void 0===p.endArrowStyle&&(p.endArrowStyle=null),void 0===p.endArrowStyleName&&(p.endArrowStyleName=null),void 0===p.closedPath&&(p.closedPath=!1),void 0===p.color&&(p.color=0),void 0===p.elevation&&(p.elevation=null),void 0===p.level&&(p.level=null),void 0===p.polylinePathCache&&(p.polylinePathCache=null),void 0===p.shapeCache&&(p.shapeCache=null),void 0===p.points&&(p.points=null),void 0===p.thickness&&(p.thickness=0),void 0===p.capStyle&&(p.capStyle=null),void 0===p.capStyleName&&(p.capStyleName=null),void 0===p.joinStyle&&(p.joinStyle=null),void 0===p.joinStyleName&&(p.joinStyleName=null),void 0===p.dashStyle&&(p.dashStyle=null),void 0===p.dashStyleName&&(p.dashStyleName=null),void 0===p.dashPattern&&(p.dashPattern=null),void 0===p.dashOffset&&(p.dashOffset=0),void 0===p.startArrowStyle&&(p.startArrowStyle=null),void 0===p.startArrowStyleName&&(p.startArrowStyleName=null),void 0===p.endArrowStyle&&(p.endArrowStyle=null),void 0===p.endArrowStyleName&&(p.endArrowStyleName=null),void 0===p.closedPath&&(p.closedPath=!1),void 0===p.color&&(p.color=0),void 0===p.elevation&&(p.elevation=null),void 0===p.level&&(p.level=null),void 0===p.polylinePathCache&&(p.polylinePathCache=null),void 0===p.shapeCache&&(p.shapeCache=null)}else{$=arguments;var E=t.CapStyle.BUTT,A=t.JoinStyle.MITER,_=t.DashStyle.SOLID,P=t.ArrowStyle.NONE,w=t.ArrowStyle.NONE;void 0===(p=e.call(this,i)||this).points&&(p.points=null),void 0===p.thickness&&(p.thickness=0),void 0===p.capStyle&&(p.capStyle=null),void 0===p.capStyleName&&(p.capStyleName=null),void 0===p.joinStyle&&(p.joinStyle=null),void 0===p.joinStyleName&&(p.joinStyleName=null),void 0===p.dashStyle&&(p.dashStyle=null),void 0===p.dashStyleName&&(p.dashStyleName=null),void 0===p.dashPattern&&(p.dashPattern=null),void 0===p.dashOffset&&(p.dashOffset=0),void 0===p.startArrowStyle&&(p.startArrowStyle=null),void 0===p.startArrowStyleName&&(p.startArrowStyleName=null),void 0===p.endArrowStyle&&(p.endArrowStyle=null),void 0===p.endArrowStyleName&&(p.endArrowStyleName=null),void 0===p.closedPath&&(p.closedPath=!1),void 0===p.color&&(p.color=0),void 0===p.elevation&&(p.elevation=null),void 0===p.level&&(p.level=null),void 0===p.polylinePathCache&&(p.polylinePathCache=null),void 0===p.shapeCache&&(p.shapeCache=null),p.points=p.deepCopy(n),p.thickness=1,p.capStyle=E,p.joinStyle=A,p.dashStyle=_,p.dashOffset=0,p.startArrowStyle=P,p.endArrowStyle=w,p.closedPath=!1,p.color=-16777216,void 0===p.points&&(p.points=null),void 0===p.thickness&&(p.thickness=0),void 0===p.capStyle&&(p.capStyle=null),void 0===p.capStyleName&&(p.capStyleName=null),void 0===p.joinStyle&&(p.joinStyle=null),void 0===p.joinStyleName&&(p.joinStyleName=null),void 0===p.dashStyle&&(p.dashStyle=null),void 0===p.dashStyleName&&(p.dashStyleName=null),void 0===p.dashPattern&&(p.dashPattern=null),void 0===p.dashOffset&&(p.dashOffset=0),void 0===p.startArrowStyle&&(p.startArrowStyle=null),void 0===p.startArrowStyleName&&(p.startArrowStyleName=null),void 0===p.endArrowStyle&&(p.endArrowStyle=null),void 0===p.endArrowStyleName&&(p.endArrowStyleName=null),void 0===p.closedPath&&(p.closedPath=!1),void 0===p.color&&(p.color=0),void 0===p.elevation&&(p.elevation=null),void 0===p.level&&(p.level=null),void 0===p.polylinePathCache&&(p.polylinePathCache=null),void 0===p.shapeCache&&(p.shapeCache=null)}else{var L=($=arguments)[0],T=$[1],b=$[2],O=$[3],I=$[4],D=$[5],R=$[6],x=$[7],M=$[8],F=HomeObject.createId("polyline");void 0===(p=e.call(this,F)||this).points&&(p.points=null),void 0===p.thickness&&(p.thickness=0),void 0===p.capStyle&&(p.capStyle=null),void 0===p.capStyleName&&(p.capStyleName=null),void 0===p.joinStyle&&(p.joinStyle=null),void 0===p.joinStyleName&&(p.joinStyleName=null),void 0===p.dashStyle&&(p.dashStyle=null),void 0===p.dashStyleName&&(p.dashStyleName=null),void 0===p.dashPattern&&(p.dashPattern=null),void 0===p.dashOffset&&(p.dashOffset=0),void 0===p.startArrowStyle&&(p.startArrowStyle=null),void 0===p.startArrowStyleName&&(p.startArrowStyleName=null),void 0===p.endArrowStyle&&(p.endArrowStyle=null),void 0===p.endArrowStyleName&&(p.endArrowStyleName=null),void 0===p.closedPath&&(p.closedPath=!1),void 0===p.color&&(p.color=0),void 0===p.elevation&&(p.elevation=null),void 0===p.level&&(p.level=null),void 0===p.polylinePathCache&&(p.polylinePathCache=null),void 0===p.shapeCache&&(p.shapeCache=null),p.points=p.deepCopy(L),p.thickness=T,p.capStyle=b,p.joinStyle=O,p.dashStyle=I,p.dashOffset=0,p.startArrowStyle=D,p.endArrowStyle=R,p.closedPath=x,p.color=M,void 0===p.points&&(p.points=null),void 0===p.thickness&&(p.thickness=0),void 0===p.capStyle&&(p.capStyle=null),void 0===p.capStyleName&&(p.capStyleName=null),void 0===p.joinStyle&&(p.joinStyle=null),void 0===p.joinStyleName&&(p.joinStyleName=null),void 0===p.dashStyle&&(p.dashStyle=null),void 0===p.dashStyleName&&(p.dashStyleName=null),void 0===p.dashPattern&&(p.dashPattern=null),void 0===p.dashOffset&&(p.dashOffset=0),void 0===p.startArrowStyle&&(p.startArrowStyle=null),void 0===p.startArrowStyleName&&(p.startArrowStyleName=null),void 0===p.endArrowStyle&&(p.endArrowStyle=null),void 0===p.endArrowStyleName&&(p.endArrowStyleName=null),void 0===p.closedPath&&(p.closedPath=!1),void 0===p.color&&(p.color=0),void 0===p.elevation&&(p.elevation=null),void 0===p.level&&(p.level=null),void 0===p.polylinePathCache&&(p.polylinePathCache=null),void 0===p.shapeCache&&(p.shapeCache=null),void 0===p.points&&(p.points=null),void 0===p.thickness&&(p.thickness=0),void 0===p.capStyle&&(p.capStyle=null),void 0===p.capStyleName&&(p.capStyleName=null),void 0===p.joinStyle&&(p.joinStyle=null),void 0===p.joinStyleName&&(p.joinStyleName=null),void 0===p.dashStyle&&(p.dashStyle=null),void 0===p.dashStyleName&&(p.dashStyleName=null),void 0===p.dashPattern&&(p.dashPattern=null),void 0===p.dashOffset&&(p.dashOffset=0),void 0===p.startArrowStyle&&(p.startArrowStyle=null),void 0===p.startArrowStyleName&&(p.startArrowStyleName=null),void 0===p.endArrowStyle&&(p.endArrowStyle=null),void 0===p.endArrowStyleName&&(p.endArrowStyleName=null),void 0===p.closedPath&&(p.closedPath=!1),void 0===p.color&&(p.color=0),void 0===p.elevation&&(p.elevation=null),void 0===p.level&&(p.level=null),void 0===p.polylinePathCache&&(p.polylinePathCache=null),void 0===p.shapeCache&&(p.shapeCache=null)}else{var N=($=arguments)[0],U=$[1],H=$[2],G=$[3],k=$[4],V=$[5],W=$[6],B=$[7],j=$[8],Y=$[9],z=HomeObject.createId("polyline");void 0===(p=e.call(this,z)||this).points&&(p.points=null),void 0===p.thickness&&(p.thickness=0),void 0===p.capStyle&&(p.capStyle=null),void 0===p.capStyleName&&(p.capStyleName=null),void 0===p.joinStyle&&(p.joinStyle=null),void 0===p.joinStyleName&&(p.joinStyleName=null),void 0===p.dashStyle&&(p.dashStyle=null),void 0===p.dashStyleName&&(p.dashStyleName=null),void 0===p.dashPattern&&(p.dashPattern=null),void 0===p.dashOffset&&(p.dashOffset=0),void 0===p.startArrowStyle&&(p.startArrowStyle=null),void 0===p.startArrowStyleName&&(p.startArrowStyleName=null),void 0===p.endArrowStyle&&(p.endArrowStyle=null),void 0===p.endArrowStyleName&&(p.endArrowStyleName=null),void 0===p.closedPath&&(p.closedPath=!1),void 0===p.color&&(p.color=0),void 0===p.elevation&&(p.elevation=null),void 0===p.level&&(p.level=null),void 0===p.polylinePathCache&&(p.polylinePathCache=null),void 0===p.shapeCache&&(p.shapeCache=null),p.points=p.deepCopy(N),p.thickness=U,p.capStyle=H,p.joinStyle=G,p.dashStyle=k,p.dashOffset=V,p.startArrowStyle=W,p.endArrowStyle=B,p.closedPath=j,p.color=Y,void 0===p.points&&(p.points=null),void 0===p.thickness&&(p.thickness=0),void 0===p.capStyle&&(p.capStyle=null),void 0===p.capStyleName&&(p.capStyleName=null),void 0===p.joinStyle&&(p.joinStyle=null),void 0===p.joinStyleName&&(p.joinStyleName=null),void 0===p.dashStyle&&(p.dashStyle=null),void 0===p.dashStyleName&&(p.dashStyleName=null),void 0===p.dashPattern&&(p.dashPattern=null),void 0===p.dashOffset&&(p.dashOffset=0),void 0===p.startArrowStyle&&(p.startArrowStyle=null),void 0===p.startArrowStyleName&&(p.startArrowStyleName=null),void 0===p.endArrowStyle&&(p.endArrowStyle=null),void 0===p.endArrowStyleName&&(p.endArrowStyleName=null),void 0===p.closedPath&&(p.closedPath=!1),void 0===p.color&&(p.color=0),void 0===p.elevation&&(p.elevation=null),void 0===p.level&&(p.level=null),void 0===p.polylinePathCache&&(p.polylinePathCache=null),void 0===p.shapeCache&&(p.shapeCache=null)}else{var $=arguments;void 0===(p=e.call(this,i)||this).points&&(p.points=null),void 0===p.thickness&&(p.thickness=0),void 0===p.capStyle&&(p.capStyle=null),void 0===p.capStyleName&&(p.capStyleName=null),void 0===p.joinStyle&&(p.joinStyle=null),void 0===p.joinStyleName&&(p.joinStyleName=null),void 0===p.dashStyle&&(p.dashStyle=null),void 0===p.dashStyleName&&(p.dashStyleName=null),void 0===p.dashPattern&&(p.dashPattern=null),void 0===p.dashOffset&&(p.dashOffset=0),void 0===p.startArrowStyle&&(p.startArrowStyle=null),void 0===p.startArrowStyleName&&(p.startArrowStyleName=null),void 0===p.endArrowStyle&&(p.endArrowStyle=null),void 0===p.endArrowStyleName&&(p.endArrowStyleName=null),void 0===p.closedPath&&(p.closedPath=!1),void 0===p.color&&(p.color=0),void 0===p.elevation&&(p.elevation=null),void 0===p.level&&(p.level=null),void 0===p.polylinePathCache&&(p.polylinePathCache=null),void 0===p.shapeCache&&(p.shapeCache=null),p.points=p.deepCopy(n),p.thickness=o,p.capStyle=r,p.joinStyle=l,p.dashStyle=a,p.dashOffset=s,p.startArrowStyle=h,p.endArrowStyle=u,p.closedPath=d,p.color=c}return p}return __extends(t,e),t.prototype.getPoints=function(){return this.deepCopy(this.points)},t.prototype.getPointCount=function(){return this.points.length},t.prototype.deepCopy=function(e){for(var t=function(e){for(var t=[];e-- >0;)t.push(null);return t}(e.length),i=0;i<e.length;i++)t[i]=e[i].slice(0);return t},t.prototype.setPoints=function(e){JSON.stringify(this.points)!==JSON.stringify(e)&&this.updatePoints(e)},t.prototype.updatePoints=function(e){var t=this.points;this.points=this.deepCopy(e),this.polylinePathCache=null,this.shapeCache=null,this.firePropertyChange("POINTS",t,e)},t.prototype.addPoint$float$float=function(e,t){this.addPoint$float$float$int(e,t,this.points.length)},t.prototype.addPoint$float$float$int=function(e,t,i){if(i<0||i>this.points.length)throw Object.defineProperty(new Error("Invalid index "+i),"__classes",{configurable:!0,value:["java.lang.Throwable","java.lang.IndexOutOfBoundsException","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]});var n=function(e){for(var t=[];e-- >0;)t.push(null);return t}(this.points.length+1);!function(e,t,i,n,o){if(e!==i||n>=t+o)for(;--o>=0;)i[n++]=e[t++];else for(var r=e.slice(t,t+o),l=0;l<o;l++)i[n++]=r[l]}(this.points,0,n,0,i),n[i]=[e,t],function(e,t,i,n,o){if(e!==i||n>=t+o)for(;--o>=0;)i[n++]=e[t++];else for(var r=e.slice(t,t+o),l=0;l<o;l++)i[n++]=r[l]}(this.points,i,n,i+1,this.points.length-i);var o=this.points;this.points=n,this.polylinePathCache=null,this.shapeCache=null,this.firePropertyChange("POINTS",o,this.deepCopy(this.points))},t.prototype.addPoint=function(e,t,i){if("number"!=typeof e&&null!==e||"number"!=typeof t&&null!==t||"number"!=typeof i&&null!==i){if("number"!=typeof e&&null!==e||"number"!=typeof t&&null!==t||void 0!==i)throw new Error("invalid overload");return this.addPoint$float$float(e,t)}return this.addPoint$float$float$int(e,t,i)},t.prototype.setPoint=function(e,t,i){if(i<0||i>=this.points.length)throw Object.defineProperty(new Error("Invalid index "+i),"__classes",{configurable:!0,value:["java.lang.Throwable","java.lang.IndexOutOfBoundsException","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]});if(this.points[i][0]!==e||this.points[i][1]!==t){var n=this.points;this.points=this.deepCopy(this.points),this.points[i][0]=e,this.points[i][1]=t,this.polylinePathCache=null,this.shapeCache=null,this.firePropertyChange("POINTS",n,this.deepCopy(this.points))}},t.prototype.removePoint=function(e){if(e<0||e>=this.points.length)throw Object.defineProperty(new Error("Invalid index "+e),"__classes",{configurable:!0,value:["java.lang.Throwable","java.lang.IndexOutOfBoundsException","java.lang.Object","java.lang.RuntimeException","java.lang.Exception"]});var t=function(e){for(var t=[];e-- >0;)t.push(null);return t}(this.points.length-1);!function(e,t,i,n,o){if(e!==i||n>=t+o)for(;--o>=0;)i[n++]=e[t++];else for(var r=e.slice(t,t+o),l=0;l<o;l++)i[n++]=r[l]}(this.points,0,t,0,e),function(e,t,i,n,o){if(e!==i||n>=t+o)for(;--o>=0;)i[n++]=e[t++];else for(var r=e.slice(t,t+o),l=0;l<o;l++)i[n++]=r[l]}(this.points,e+1,t,e,this.points.length-e-1);var i=this.points;this.points=t,this.polylinePathCache=null,this.shapeCache=null,this.firePropertyChange("POINTS",i,this.deepCopy(this.points))},t.prototype.getThickness=function(){return this.thickness},t.prototype.setThickness=function(e){if(e!==this.thickness){var t=this.thickness;this.thickness=e,this.firePropertyChange("THICKNESS",t,e)}},t.prototype.getCapStyle=function(){return this.capStyle},t.prototype.setCapStyle=function(e){if(e!==this.capStyle){var i=this.capStyle;this.capStyle=e,this.capStyleName=t.CapStyle[this.capStyle],this.firePropertyChange("CAP_STYLE",i,e)}},t.prototype.getJoinStyle=function(){return this.joinStyle},t.prototype.setJoinStyle=function(e){if(e!==this.joinStyle){var i=this.joinStyle;this.joinStyle=e,this.joinStyleName=t.JoinStyle[this.joinStyle],this.polylinePathCache=null,this.shapeCache=null,this.firePropertyChange("JOIN_STYLE",i,e)}},t.prototype.getDashStyle=function(){return this.dashStyle},t.prototype.setDashStyle=function(e){if(e!==this.dashStyle){var i=this.getDashPattern(),n=this.dashStyle;this.dashStyle=e,this.dashStyleName=t.DashStyle[this.dashStyle],e!==t.DashStyle.CUSTOMIZED&&(this.dashPattern=null),this.firePropertyChange("DASH_PATTERN",i,this.getDashPattern()),this.firePropertyChange("DASH_STYLE",n,e)}},t.prototype.getDashPattern=function(){var e=null;return this.dashStyle!==t.DashStyle.CUSTOMIZED?t.DashStyle._$wrappers[this.dashStyle].getDashPattern():(null!=this.dashPattern&&(e=this.dashPattern.slice(0)),e)},t.prototype.setDashPattern=function(e){for(var i=function(){var e=[];for(var i in t.DashStyle)isNaN(i)||e.push(parseInt(i,10));return e}(),n=0;n<i.length;n++){var o=i[n];if(this.dashStyle!==t.DashStyle.CUSTOMIZED&&function(e,t){if(null==e&&null==t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!=t[i])return!1;return!0}(e,t.DashStyle._$wrappers[o].getDashPattern()))return void this.setDashStyle(o)}if(!function(e,t){if(null==e&&null==t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!=t[i])return!1;return!0}(e,this.dashPattern)){var r=this.getDashPattern();this.dashPattern=e.slice(0),this.firePropertyChange("DASH_PATTERN",r,e);var l=this.dashStyle;this.dashStyle=t.DashStyle.CUSTOMIZED,this.dashStyleName=t.DashStyle[this.dashStyle],this.firePropertyChange("DASH_STYLE",l,t.DashStyle.CUSTOMIZED)}},t.prototype.getDashOffset=function(){return this.dashOffset},t.prototype.setDashOffset=function(e){if(e!==this.dashOffset){var t=this.dashOffset;this.dashOffset=e,this.firePropertyChange("DASH_OFFSET",t,e)}},t.prototype.getStartArrowStyle=function(){return this.startArrowStyle},t.prototype.setStartArrowStyle=function(e){if(e!==this.startArrowStyle){var i=this.startArrowStyle;this.startArrowStyle=e,this.startArrowStyleName=t.ArrowStyle[this.startArrowStyle],this.firePropertyChange("START_ARROW_STYLE",i,e)}},t.prototype.getEndArrowStyle=function(){return this.endArrowStyle},t.prototype.setEndArrowStyle=function(e){if(e!==this.endArrowStyle){var i=this.endArrowStyle;this.endArrowStyle=e,this.endArrowStyleName=t.ArrowStyle[this.endArrowStyle],this.firePropertyChange("END_ARROW_STYLE",i,e)}},t.prototype.isClosedPath=function(){return this.closedPath},t.prototype.setClosedPath=function(e){e!==this.closedPath&&(this.closedPath=e,this.firePropertyChange("CLOSED_PATH",!e,e))},t.prototype.getColor=function(){return this.color},t.prototype.setColor=function(e){if(e!==this.color){var t=this.color;this.color=e,this.firePropertyChange("COLOR",t,e)}},t.prototype.getGroundElevation=function(){var e=this.getElevation();return null!=this.level?e+this.level.getElevation():e},t.prototype.getElevation=function(){return null!=this.elevation?this.elevation:0},t.prototype.setElevation=function(e){if(null!=this.elevation&&e!==this.elevation){var t=this.elevation;this.elevation=e,this.firePropertyChange("ELEVATION",t,e)}},t.prototype.isVisibleIn3D=function(){return null!=this.elevation},t.prototype.setVisibleIn3D=function(e){e!==(null!=this.elevation)&&(this.elevation=e?0:null,this.firePropertyChange("VISIBLE_IN_3D",!e,e))},t.prototype.getLevel=function(){return this.level},t.prototype.setLevel=function(e){if(e!==this.level){var t=this.level;this.level=e,this.firePropertyChange("LEVEL",t,e)}},t.prototype.isAtLevel=function(e){return this.level===e||null!=this.level&&null!=e&&this.level.getElevation()===e.getElevation()&&this.level.getElevationIndex()<e.getElevationIndex()},t.prototype.getLength=function(){for(var e=[0,0],t=[0,0],i=[0,0],n=0,o=this.getPolylinePath().getPathIterator(null,.1);!o.isDone();o.next())switch(o.currentSegment(i)){case java.awt.geom.PathIterator.SEG_CLOSE:n+=java.awt.geom.Point2D.distance(e[0],e[1],t[0],t[1]);break;case java.awt.geom.PathIterator.SEG_MOVETO:!function(e,t,i,n,o){if(e!==i||n>=t+o)for(;--o>=0;)i[n++]=e[t++];else for(var r=e.slice(t,t+o),l=0;l<o;l++)i[n++]=r[l]}(i,0,e,0,2),function(e,t,i,n,o){if(e!==i||n>=t+o)for(;--o>=0;)i[n++]=e[t++];else for(var r=e.slice(t,t+o),l=0;l<o;l++)i[n++]=r[l]}(i,0,t,0,2);break;case java.awt.geom.PathIterator.SEG_LINETO:n+=java.awt.geom.Point2D.distance(t[0],t[1],i[0],i[1]),function(e,t,i,n,o){if(e!==i||n>=t+o)for(;--o>=0;)i[n++]=e[t++];else for(var r=e.slice(t,t+o),l=0;l<o;l++)i[n++]=r[l]}(i,0,t,0,2)}return n},t.prototype.intersectsRectangle=function(e,t,i,n){var o=new java.awt.geom.Rectangle2D.Float(e,t,0,0);return o.add(i,n),this.getShape().intersects(o)},t.prototype.containsPoint=function(e,t,i){return this.containsShapeAtWithMargin(this.getShape(),e,t,i)},t.prototype.getPointIndexAt=function(e,t,i){for(var n=0;n<this.points.length;n++)if(Math.abs(e-this.points[n][0])<=i&&Math.abs(t-this.points[n][1])<=i)return n;return-1},t.prototype.containsShapeAtWithMargin=function(e,t,i,n){return 0===n?e.contains(t,i):e.intersects(t-n,i-n,2*n,2*n)},t.prototype.getPolylinePath=function(){if(null==this.polylinePathCache){var e=new java.awt.geom.GeneralPath;if(this.joinStyle===t.JoinStyle.CURVED)for(var i=0,n=this.closedPath?this.points.length:this.points.length-1;i<n;i++){var o=new java.awt.geom.CubicCurve2D.Float,r=this.points[0===i?this.points.length-1:i-1],l=this.points[i],a=this.points[i===this.points.length-1?0:i+1],s=[a[0]-r[0],a[1]-r[1]],h=this.points[(i+2)%this.points.length],u=[l[0]-h[0],l[1]-h[1]];o.setCurve(l[0],l[1],l[0]+(0!==i||this.closedPath?s[0]/3.625:0),l[1]+(0!==i||this.closedPath?s[1]/3.625:0),a[0]+(i!==this.points.length-2||this.closedPath?u[0]/3.625:0),a[1]+(i!==this.points.length-2||this.closedPath?u[1]/3.625:0),a[0],a[1]),e.append(o,!0)}else{e.moveTo(this.points[0][0],this.points[0][1]);for(i=1;i<this.points.length;i++)e.lineTo(this.points[i][0],this.points[i][1]);this.closedPath&&e.closePath()}this.polylinePathCache=e}return this.polylinePathCache},t.prototype.getShape=function(){return null==this.shapeCache&&(this.shapeCache=new java.awt.BasicStroke(this.thickness).createStrokedShape(this.getPolylinePath())),this.shapeCache},t.prototype.move=function(e,t){if(0!==e||0!==t){for(var i=this.getPoints(),n=0;n<i.length;n++)i[n][0]+=e,i[n][1]+=t;this.updatePoints(i)}},t.prototype.clone=function(){var t=this,i=function(i){if(null!=e.prototype.clone)return e.prototype.clone.call(t);var n=Object.create(i);for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o]);return n}(this);return i.level=null,i},t}(HomeObject);Polyline.__class="com.eteks.sweethome3d.model.Polyline",Polyline.__interfaces=["com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.Elevatable"],function(e){var t,i;(t=e.CapStyle||(e.CapStyle={}))[t.BUTT=0]="BUTT",t[t.SQUARE=1]="SQUARE",t[t.ROUND=2]="ROUND",function(e){e[e.BEVEL=0]="BEVEL",e[e.MITER=1]="MITER",e[e.ROUND=2]="ROUND",e[e.CURVED=3]="CURVED"}(e.JoinStyle||(e.JoinStyle={})),function(e){e[e.NONE=0]="NONE",e[e.DELTA=1]="DELTA",e[e.OPEN=2]="OPEN",e[e.DISC=3]="DISC"}(e.ArrowStyle||(e.ArrowStyle={})),function(e){e[e.SOLID=0]="SOLID",e[e.DOT=1]="DOT",e[e.DASH=2]="DASH",e[e.DASH_DOT=3]="DASH_DOT",e[e.DASH_DOT_DOT=4]="DASH_DOT_DOT",e[e.CUSTOMIZED=5]="CUSTOMIZED"}(i=e.DashStyle||(e.DashStyle={}));var n=function(){function t(e,t){this._$ordinal=e,this._$name=t}return t.prototype.getDashPattern=function(){switch(this._$ordinal){case e.DashStyle.SOLID:return[1,0];case e.DashStyle.DOT:return[1,1];case e.DashStyle.DASH:return[4,2];case e.DashStyle.DASH_DOT:return[8,2,2,2];case e.DashStyle.DASH_DOT_DOT:return[8,2,2,2,2,2];default:return null}},t.prototype.name=function(){return this._$name},t.prototype.ordinal=function(){return this._$ordinal},t.prototype.compareTo=function(e){return this._$ordinal-(isNaN(e)?e._$ordinal:e)},t}();e.DashStyle_$WRAPPER=n,i.__class="com.eteks.sweethome3d.model.Polyline.DashStyle",i._$wrappers={0:new n(0,"SOLID"),1:new n(1,"DOT"),2:new n(2,"DASH"),3:new n(3,"DASH_DOT"),4:new n(4,"DASH_DOT_DOT"),5:new n(5,"CUSTOMIZED")}}(Polyline||(Polyline={})),Polyline.__transients=["capStyle","joinStyle","dashStyle","startArrowStyle","endArrowStyle","polylinePathCache","shapeCache","propertyChangeSupport"];var CatalogDoorOrWindow=function(e){function t(t,i,n,o,r,l,a,s,h,u,d,c,p,g,v,f,m,y,C,S,E,A,_,P,w,L,T,b,O,I,D,R,x,M,F){var N=this;if("string"!=typeof t&&null!==t||"string"!=typeof i&&null!==i||"string"!=typeof n&&null!==n||"string"!=typeof o&&null!==o||"string"!=typeof r&&null!==r||!(null!=l&&l instanceof Array&&(0==l.length||null==l[0]||"string"==typeof l[0])||null===l)||"number"!=typeof a&&null!==a||"number"!=typeof s&&null!==s||!(null!=h&&null!=h.constructor&&null!=h.constructor.__interfaces&&h.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===h)||!(null!=u&&null!=u.constructor&&null!=u.constructor.__interfaces&&u.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===u)||!(null!=d&&null!=d.constructor&&null!=d.constructor.__interfaces&&d.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===d)||"number"!=typeof c&&null!==c||"number"!=typeof p&&null!==p||"number"!=typeof g&&null!==g||"number"!=typeof v&&null!==v||"number"!=typeof f&&null!==f||"boolean"!=typeof m&&null!==m||"string"!=typeof y&&null!==y||"number"!=typeof C&&null!==C||"number"!=typeof S&&null!==S||"boolean"!=typeof E&&null!==E||"boolean"!=typeof A&&null!==A||!(null!=_&&_ instanceof Array&&(0==_.length||null==_[0]||null!=_[0]&&_[0]instanceof Sash)||null===_)||!(null!=P&&P instanceof Array&&(0==P.length||null==P[0]||P[0]instanceof Array)||null===P)||"number"!=typeof w&&null!==w||"number"!=typeof L&&null!==L||"string"!=typeof T&&null!==T||"boolean"!=typeof b&&null!==b||"boolean"!=typeof O&&null!==O||"boolean"!=typeof I&&null!==I||!(null!=D&&D instanceof Big||null===D)||!(null!=R&&R instanceof Big||null===R)||"string"!=typeof x&&null!==x||!(null!=M&&M instanceof Object||null===M)||!(null!=F&&F instanceof Object||null===F))if("string"!=typeof t&&null!==t||"string"!=typeof i&&null!==i||"string"!=typeof n&&null!==n||"string"!=typeof o&&null!==o||!(null!=r&&r instanceof Array&&(0==r.length||null==r[0]||"string"==typeof r[0])||null===r)||"number"!=typeof l&&null!==l||"number"!=typeof a&&null!==a||!(null!=s&&null!=s.constructor&&null!=s.constructor.__interfaces&&s.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===s)||!(null!=h&&null!=h.constructor&&null!=h.constructor.__interfaces&&h.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===h)||!(null!=u&&null!=u.constructor&&null!=u.constructor.__interfaces&&u.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===u)||"number"!=typeof d&&null!==d||"number"!=typeof c&&null!==c||"number"!=typeof p&&null!==p||"number"!=typeof g&&null!==g||"number"!=typeof v&&null!==v||"boolean"!=typeof f&&null!==f||"string"!=typeof m&&null!==m||"number"!=typeof y&&null!==y||"number"!=typeof C&&null!==C||"boolean"!=typeof S&&null!==S||"boolean"!=typeof E&&null!==E||!(null!=A&&A instanceof Array&&(0==A.length||null==A[0]||null!=A[0]&&A[0]instanceof Sash)||null===A)||!(null!=_&&_ instanceof Array&&(0==_.length||null==_[0]||_[0]instanceof Array)||null===_)||"boolean"!=typeof P&&null!==P||"number"!=typeof w&&null!==w||"string"!=typeof L&&null!==L||"boolean"!=typeof T&&null!==T||"boolean"!=typeof b&&null!==b||"boolean"!=typeof O&&null!==O||!(null!=I&&I instanceof Big||null===I)||!(null!=D&&D instanceof Big||null===D)||"string"!=typeof R&&null!==R||!(null!=x&&x instanceof Object||null===x)||void 0!==M||void 0!==F)if("string"!=typeof t&&null!==t||"string"!=typeof i&&null!==i||"string"!=typeof n&&null!==n||"string"!=typeof o&&null!==o||!(null!=r&&r instanceof Array&&(0==r.length||null==r[0]||"string"==typeof r[0])||null===r)||"number"!=typeof l&&null!==l||"number"!=typeof a&&null!==a||!(null!=s&&null!=s.constructor&&null!=s.constructor.__interfaces&&s.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===s)||!(null!=h&&null!=h.constructor&&null!=h.constructor.__interfaces&&h.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===h)||!(null!=u&&null!=u.constructor&&null!=u.constructor.__interfaces&&u.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===u)||"number"!=typeof d&&null!==d||"number"!=typeof c&&null!==c||"number"!=typeof p&&null!==p||"number"!=typeof g&&null!==g||"number"!=typeof v&&null!==v||"boolean"!=typeof f&&null!==f||"string"!=typeof m&&null!==m||"number"!=typeof y&&null!==y||"number"!=typeof C&&null!==C||"boolean"!=typeof S&&null!==S||"boolean"!=typeof E&&null!==E||!(null!=A&&A instanceof Array&&(0==A.length||null==A[0]||null!=A[0]&&A[0]instanceof Sash)||null===A)||!(null!=_&&_ instanceof Array&&(0==_.length||null==_[0]||_[0]instanceof Array)||null===_)||"number"!=typeof P&&null!==P||"number"!=typeof w&&null!==w||"string"!=typeof L&&null!==L||"boolean"!=typeof T&&null!==T||"boolean"!=typeof b&&null!==b||"boolean"!=typeof O&&null!==O||!(null!=I&&I instanceof Big||null===I)||!(null!=D&&D instanceof Big||null===D)||"string"!=typeof R&&null!==R||!(null!=x&&x instanceof Object||null===x)||void 0!==M||void 0!==F)if("string"!=typeof t&&null!==t||"string"!=typeof i&&null!==i||"string"!=typeof n&&null!==n||"string"!=typeof o&&null!==o||!(null!=r&&r instanceof Array&&(0==r.length||null==r[0]||"string"==typeof r[0])||null===r)||"number"!=typeof l&&null!==l||"number"!=typeof a&&null!==a||!(null!=s&&null!=s.constructor&&null!=s.constructor.__interfaces&&s.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===s)||!(null!=h&&null!=h.constructor&&null!=h.constructor.__interfaces&&h.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===h)||!(null!=u&&null!=u.constructor&&null!=u.constructor.__interfaces&&u.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===u)||"number"!=typeof d&&null!==d||"number"!=typeof c&&null!==c||"number"!=typeof p&&null!==p||"number"!=typeof g&&null!==g||"number"!=typeof v&&null!==v||"boolean"!=typeof f&&null!==f||"string"!=typeof m&&null!==m||"number"!=typeof y&&null!==y||"number"!=typeof C&&null!==C||"boolean"!=typeof S&&null!==S||"boolean"!=typeof E&&null!==E||!(null!=A&&A instanceof Array&&(0==A.length||null==A[0]||null!=A[0]&&A[0]instanceof Sash)||null===A)||!(null!=_&&_ instanceof Array&&(0==_.length||null==_[0]||_[0]instanceof Array)||null===_)||"boolean"!=typeof P&&null!==P||"number"!=typeof w&&null!==w||"string"!=typeof L&&null!==L||"boolean"!=typeof T&&null!==T||"boolean"!=typeof b&&null!==b||"boolean"!=typeof O&&null!==O||!(null!=I&&I instanceof Big||null===I)||!(null!=D&&D instanceof Big||null===D)||"string"!=typeof R&&null!==R||void 0!==x||void 0!==M||void 0!==F)if("string"!=typeof t&&null!==t||!(null!=i&&null!=i.constructor&&null!=i.constructor.__interfaces&&i.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===i)||!(null!=n&&null!=n.constructor&&null!=n.constructor.__interfaces&&n.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===n)||"number"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||"number"!=typeof l&&null!==l||"number"!=typeof a&&null!==a||"boolean"!=typeof s&&null!==s||"number"!=typeof h&&null!==h||"number"!=typeof u&&null!==u||!(null!=d&&d instanceof Array&&(0==d.length||null==d[0]||null!=d[0]&&d[0]instanceof Sash)||null===d)||"number"!=typeof c&&null!==c||!(null!=p&&p instanceof Array&&(0==p.length||null==p[0]||p[0]instanceof Array)||null===p)||"boolean"!=typeof g&&null!==g||"number"!=typeof v&&null!==v||"string"!=typeof f&&null!==f||"number"!=typeof m&&null!==m||"boolean"!=typeof y&&null!==y||void 0!==C||void 0!==S||void 0!==E||void 0!==A||void 0!==_||void 0!==P||void 0!==w||void 0!==L||void 0!==T||void 0!==b||void 0!==O||void 0!==I||void 0!==D||void 0!==R||void 0!==x||void 0!==M||void 0!==F){if("string"!=typeof t&&null!==t||"string"!=typeof i&&null!==i||"string"!=typeof n&&null!==n||!(null!=o&&null!=o.constructor&&null!=o.constructor.__interfaces&&o.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===o)||!(null!=r&&null!=r.constructor&&null!=r.constructor.__interfaces&&r.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===r)||"number"!=typeof l&&null!==l||"number"!=typeof a&&null!==a||"number"!=typeof s&&null!==s||"number"!=typeof h&&null!==h||"boolean"!=typeof u&&null!==u||"number"!=typeof d&&null!==d||"number"!=typeof c&&null!==c||!(null!=p&&p instanceof Array&&(0==p.length||null==p[0]||null!=p[0]&&p[0]instanceof Sash)||null===p)||!(null!=g&&g instanceof Array&&(0==g.length||null==g[0]||g[0]instanceof Array)||null===g)||"string"!=typeof v&&null!==v||"boolean"!=typeof f&&null!==f||!(null!=m&&m instanceof Big||null===m)||!(null!=y&&y instanceof Big||null===y)||void 0!==C||void 0!==S||void 0!==E||void 0!==A||void 0!==_||void 0!==P||void 0!==w||void 0!==L||void 0!==T||void 0!==b||void 0!==O||void 0!==I||void 0!==D||void 0!==R||void 0!==x||void 0!==M||void 0!==F)throw new Error("invalid overload");ft=arguments,ft[4],ft[5],ft[6],ft[7],ft[8],ft[9],ft[10],ft[11],ft[12],ft[13],ft[14],ft[15],ft[16],ft[17];void 0===N.wallThickness&&(N.wallThickness=0),void 0===N.wallDistance&&(N.wallDistance=0),void 0===N.wallCutOutOnBothSides&&(N.wallCutOutOnBothSides=!1),void 0===N.widthDepthDeformable&&(N.widthDepthDeformable=!1),void 0===N.sashes&&(N.sashes=null),void 0===N.cutOutShape&&(N.cutOutShape=null)}else{ft=arguments,ft[1],ft[2],ft[3],ft[4],ft[5],ft[6],ft[7],ft[8],ft[9],ft[10],ft[11],ft[12],ie=ft[13],ft[14],ft[15],ft[16],ft[17];void 0===N.wallThickness&&(N.wallThickness=0),void 0===N.wallDistance&&(N.wallDistance=0),void 0===N.wallCutOutOnBothSides&&(N.wallCutOutOnBothSides=!1),void 0===N.widthDepthDeformable&&(N.widthDepthDeformable=!1),void 0===N.sashes&&(N.sashes=null),void 0===N.cutOutShape&&(N.cutOutShape=null)}else{var U=(ft=arguments)[4],H=ft[5],G=ft[6],k=ft[7],V=ft[8],W=ft[9],B=ft[10],j=ft[11],Y=ft[12],z=ft[13],$=ft[14],X=ft[15],K=ft[16],q=ft[17],Z=ft[18],Q=ft[19],J=ft[20],ee=ft[21],te=ft[22],ie=ft[23],ne=ft[24],oe=ft[25],re=ft[26],le=ft[27],ae=ft[28],se=ft[29],he=ft[30],ue=ft[31],de=ie?PieceOfFurniture.SHOW_BACK_FACE:0;void 0===(N=e.call(this,t,i,n,o,null,U,H,G,k,V,W,B,j,Y,z,$,X,null,te,de,ne,oe,re,le,ae,!1,se,he,ue,null,null)||this).wallThickness&&(N.wallThickness=0),void 0===N.wallDistance&&(N.wallDistance=0),void 0===N.wallCutOutOnBothSides&&(N.wallCutOutOnBothSides=!1),void 0===N.widthDepthDeformable&&(N.widthDepthDeformable=!1),void 0===N.sashes&&(N.sashes=null),void 0===N.cutOutShape&&(N.cutOutShape=null),N.cutOutShape=K,N.wallThickness=q,N.wallDistance=Z,N.wallCutOutOnBothSides=Q,N.widthDepthDeformable=J,N.sashes=ee,void 0===N.wallThickness&&(N.wallThickness=0),void 0===N.wallDistance&&(N.wallDistance=0),void 0===N.wallCutOutOnBothSides&&(N.wallCutOutOnBothSides=!1),void 0===N.widthDepthDeformable&&(N.widthDepthDeformable=!1),void 0===N.sashes&&(N.sashes=null),void 0===N.cutOutShape&&(N.cutOutShape=null),void 0===N.wallThickness&&(N.wallThickness=0),void 0===N.wallDistance&&(N.wallDistance=0),void 0===N.wallCutOutOnBothSides&&(N.wallCutOutOnBothSides=!1),void 0===N.widthDepthDeformable&&(N.widthDepthDeformable=!1),void 0===N.sashes&&(N.sashes=null),void 0===N.cutOutShape&&(N.cutOutShape=null),void 0===N.wallThickness&&(N.wallThickness=0),void 0===N.wallDistance&&(N.wallDistance=0),void 0===N.wallCutOutOnBothSides&&(N.wallCutOutOnBothSides=!1),void 0===N.widthDepthDeformable&&(N.widthDepthDeformable=!1),void 0===N.sashes&&(N.sashes=null),void 0===N.cutOutShape&&(N.cutOutShape=null)}else{var ce=(ft=arguments)[4],pe=ft[5],ge=ft[6],ve=ft[7],fe=ft[8],me=ft[9],ye=ft[10],Ce=ft[11],Se=ft[12],Ee=ft[13],Ae=ft[14],_e=ft[15],Pe=ft[16],we=ft[17],Le=ft[18],Te=ft[19],be=ft[20],Oe=ft[21],Ie=ft[22],De=ft[23],Re=ft[24],xe=ft[25],Me=ft[26],Fe=ft[27],Ne=ft[28],Ue=ft[29],He=ft[30],Ge=ft[31],ke=ft[32];void 0===(N=e.call(this,t,i,n,o,null,ce,pe,ge,ve,fe,me,ye,Ce,Se,Ee,Ae,_e,null,Ie,De,Re,xe,Me,Fe,Ne,!1,Ue,He,Ge,ke,null)||this).wallThickness&&(N.wallThickness=0),void 0===N.wallDistance&&(N.wallDistance=0),void 0===N.wallCutOutOnBothSides&&(N.wallCutOutOnBothSides=!1),void 0===N.widthDepthDeformable&&(N.widthDepthDeformable=!1),void 0===N.sashes&&(N.sashes=null),void 0===N.cutOutShape&&(N.cutOutShape=null),N.cutOutShape=Pe,N.wallThickness=we,N.wallDistance=Le,N.wallCutOutOnBothSides=Te,N.widthDepthDeformable=be,N.sashes=Oe,void 0===N.wallThickness&&(N.wallThickness=0),void 0===N.wallDistance&&(N.wallDistance=0),void 0===N.wallCutOutOnBothSides&&(N.wallCutOutOnBothSides=!1),void 0===N.widthDepthDeformable&&(N.widthDepthDeformable=!1),void 0===N.sashes&&(N.sashes=null),void 0===N.cutOutShape&&(N.cutOutShape=null)}else{var Ve=(ft=arguments)[4],We=ft[5],Be=ft[6],je=ft[7],Ye=ft[8],ze=ft[9],$e=ft[10],Xe=ft[11],Ke=ft[12],qe=ft[13],Ze=ft[14],Qe=ft[15],Je=ft[16],et=ft[17],tt=ft[18],it=ft[19],nt=ft[20],ot=ft[21],rt=ft[22],ie=ft[23],lt=ft[24],at=ft[25],st=ft[26],ht=ft[27],ut=ft[28],dt=ft[29],ct=ft[30],pt=ft[31],gt=ft[32],vt=ie?PieceOfFurniture.SHOW_BACK_FACE:0;void 0===(N=e.call(this,t,i,n,o,null,Ve,We,Be,je,Ye,ze,$e,Xe,Ke,qe,Ze,Qe,null,rt,vt,lt,at,st,ht,ut,!1,dt,ct,pt,gt,null)||this).wallThickness&&(N.wallThickness=0),void 0===N.wallDistance&&(N.wallDistance=0),void 0===N.wallCutOutOnBothSides&&(N.wallCutOutOnBothSides=!1),void 0===N.widthDepthDeformable&&(N.widthDepthDeformable=!1),void 0===N.sashes&&(N.sashes=null),void 0===N.cutOutShape&&(N.cutOutShape=null),N.cutOutShape=Je,N.wallThickness=et,N.wallDistance=tt,N.wallCutOutOnBothSides=it,N.widthDepthDeformable=nt,N.sashes=ot,void 0===N.wallThickness&&(N.wallThickness=0),void 0===N.wallDistance&&(N.wallDistance=0),void 0===N.wallCutOutOnBothSides&&(N.wallCutOutOnBothSides=!1),void 0===N.widthDepthDeformable&&(N.widthDepthDeformable=!1),void 0===N.sashes&&(N.sashes=null),void 0===N.cutOutShape&&(N.cutOutShape=null),void 0===N.wallThickness&&(N.wallThickness=0),void 0===N.wallDistance&&(N.wallDistance=0),void 0===N.wallCutOutOnBothSides&&(N.wallCutOutOnBothSides=!1),void 0===N.widthDepthDeformable&&(N.widthDepthDeformable=!1),void 0===N.sashes&&(N.sashes=null),void 0===N.cutOutShape&&(N.cutOutShape=null)}else{var ft=arguments;void 0===(N=e.call(this,t,i,n,o,r,l,a,s,h,u,d,c,p,g,v,f,m,null,P,w,L,T,b,O,I,!1,D,R,x,M,F)||this).wallThickness&&(N.wallThickness=0),void 0===N.wallDistance&&(N.wallDistance=0),void 0===N.wallCutOutOnBothSides&&(N.wallCutOutOnBothSides=!1),void 0===N.widthDepthDeformable&&(N.widthDepthDeformable=!1),void 0===N.sashes&&(N.sashes=null),void 0===N.cutOutShape&&(N.cutOutShape=null),N.cutOutShape=y,N.wallThickness=C,N.wallDistance=S,N.wallCutOutOnBothSides=E,N.widthDepthDeformable=A,N.sashes=_}return N}return __extends(t,e),t.prototype.getWallThickness=function(){return this.wallThickness},t.prototype.getWallDistance=function(){return this.wallDistance},t.prototype.isWallCutOutOnBothSides=function(){return this.wallCutOutOnBothSides},t.prototype.isWidthDepthDeformable=function(){return this.widthDepthDeformable},t.prototype.getSashes=function(){return 0===this.sashes.length?this.sashes:this.sashes.slice(0)},t.prototype.getCutOutShape=function(){return this.cutOutShape},t.prototype.isDoorOrWindow=function(){return!0},t.prototype.isHorizontallyRotatable=function(){return!1},t}(CatalogPieceOfFurniture);CatalogDoorOrWindow.__class="com.eteks.sweethome3d.model.CatalogDoorOrWindow",CatalogDoorOrWindow.__interfaces=["com.eteks.sweethome3d.model.CatalogItem","com.eteks.sweethome3d.model.DoorOrWindow","com.eteks.sweethome3d.model.PieceOfFurniture"];var CatalogShelfUnit=function(e){function t(i,n,o,r,l,a,s,h,u,d,c,p,g,v,f,m,y,C,S,E,A,_,P,w,L,T,b,O,I,D,R,x,M){var F=e.call(this,i,n,o,r,l,a,s,h,u,d,c,p,g,v,f,m,S,E,A,_,P,w,L,T,b,O,I,D,R,x,M)||this;return void 0===F.shelfElevations&&(F.shelfElevations=null),void 0===F.shelfBoxes&&(F.shelfBoxes=null),F.shelfElevations=null!=y&&y.length>0?y.slice(0):t.EMPTY_SHELF_ELEVATIONS_$LI$(),F.shelfBoxes=null!=C&&C.length>0?C.slice(0):t.EMPTY_SHELF_BOXES_$LI$(),F}return __extends(t,e),t.EMPTY_SHELF_ELEVATIONS_$LI$=function(){return null==t.EMPTY_SHELF_ELEVATIONS&&(t.EMPTY_SHELF_ELEVATIONS=[]),t.EMPTY_SHELF_ELEVATIONS},t.EMPTY_SHELF_BOXES_$LI$=function(){return null==t.EMPTY_SHELF_BOXES&&(t.EMPTY_SHELF_BOXES=[]),t.EMPTY_SHELF_BOXES},t.prototype.getShelfElevations=function(){return null!=this.shelfElevations?this.shelfElevations.slice(0):null},t.prototype.getShelfBoxes=function(){return this.shelfBoxes.slice(0)},t}(CatalogPieceOfFurniture);CatalogShelfUnit.__class="com.eteks.sweethome3d.model.CatalogShelfUnit",CatalogShelfUnit.__interfaces=["com.eteks.sweethome3d.model.CatalogItem","com.eteks.sweethome3d.model.PieceOfFurniture","com.eteks.sweethome3d.model.ShelfUnit"];var CatalogLight=function(e){function t(i,n,o,r,l,a,s,h,u,d,c,p,g,v,f,m,y,C,S,E,A,_,P,w,L,T,b,O,I,D,R,x,M){var F=this;if("string"!=typeof i&&null!==i||"string"!=typeof n&&null!==n||"string"!=typeof o&&null!==o||"string"!=typeof r&&null!==r||"string"!=typeof l&&null!==l||!(null!=a&&a instanceof Array&&(0==a.length||null==a[0]||"string"==typeof a[0])||null===a)||"number"!=typeof s&&null!==s||"number"!=typeof h&&null!==h||!(null!=u&&null!=u.constructor&&null!=u.constructor.__interfaces&&u.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===u)||!(null!=d&&null!=d.constructor&&null!=d.constructor.__interfaces&&d.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===d)||!(null!=c&&null!=c.constructor&&null!=c.constructor.__interfaces&&c.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===c)||"number"!=typeof p&&null!==p||"number"!=typeof g&&null!==g||"number"!=typeof v&&null!==v||"number"!=typeof f&&null!==f||"number"!=typeof m&&null!==m||"boolean"!=typeof y&&null!==y||!(null!=C&&C instanceof Array&&(0==C.length||null==C[0]||null!=C[0]&&C[0]instanceof LightSource)||null===C)||!(null!=S&&S instanceof Array&&(0==S.length||null==S[0]||"string"==typeof S[0])||null===S)||"string"!=typeof E&&null!==E||!(null!=A&&A instanceof Array&&(0==A.length||null==A[0]||A[0]instanceof Array)||null===A)||"number"!=typeof _&&null!==_||"number"!=typeof P&&null!==P||"string"!=typeof w&&null!==w||"boolean"!=typeof L&&null!==L||"boolean"!=typeof T&&null!==T||"boolean"!=typeof b&&null!==b||"boolean"!=typeof O&&null!==O||!(null!=I&&I instanceof Big||null===I)||!(null!=D&&D instanceof Big||null===D)||"string"!=typeof R&&null!==R||!(null!=x&&x instanceof Object||null===x)||!(null!=M&&M instanceof Object||null===M))if("string"!=typeof i&&null!==i||"string"!=typeof n&&null!==n||"string"!=typeof o&&null!==o||"string"!=typeof r&&null!==r||!(null!=l&&l instanceof Array&&(0==l.length||null==l[0]||"string"==typeof l[0])||null===l)||"number"!=typeof a&&null!==a||"number"!=typeof s&&null!==s||!(null!=h&&null!=h.constructor&&null!=h.constructor.__interfaces&&h.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===h)||!(null!=u&&null!=u.constructor&&null!=u.constructor.__interfaces&&u.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===u)||!(null!=d&&null!=d.constructor&&null!=d.constructor.__interfaces&&d.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===d)||"number"!=typeof c&&null!==c||"number"!=typeof p&&null!==p||"number"!=typeof g&&null!==g||"number"!=typeof v&&null!==v||"number"!=typeof f&&null!==f||"boolean"!=typeof m&&null!==m||!(null!=y&&y instanceof Array&&(0==y.length||null==y[0]||null!=y[0]&&y[0]instanceof LightSource)||null===y)||!(null!=C&&C instanceof Array&&(0==C.length||null==C[0]||"string"==typeof C[0])||null===C)||"string"!=typeof S&&null!==S||!(null!=E&&E instanceof Array&&(0==E.length||null==E[0]||E[0]instanceof Array)||null===E)||"number"!=typeof A&&null!==A||"number"!=typeof _&&null!==_||"string"!=typeof P&&null!==P||"boolean"!=typeof w&&null!==w||"boolean"!=typeof L&&null!==L||"boolean"!=typeof T&&null!==T||"boolean"!=typeof b&&null!==b||!(null!=O&&O instanceof Big||null===O)||!(null!=I&&I instanceof Big||null===I)||"string"!=typeof D&&null!==D||!(null!=R&&R instanceof Object||null===R)||void 0!==x||void 0!==M)if("string"!=typeof i&&null!==i||"string"!=typeof n&&null!==n||"string"!=typeof o&&null!==o||"string"!=typeof r&&null!==r||!(null!=l&&l instanceof Array&&(0==l.length||null==l[0]||"string"==typeof l[0])||null===l)||"number"!=typeof a&&null!==a||"number"!=typeof s&&null!==s||!(null!=h&&null!=h.constructor&&null!=h.constructor.__interfaces&&h.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===h)||!(null!=u&&null!=u.constructor&&null!=u.constructor.__interfaces&&u.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===u)||!(null!=d&&null!=d.constructor&&null!=d.constructor.__interfaces&&d.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===d)||"number"!=typeof c&&null!==c||"number"!=typeof p&&null!==p||"number"!=typeof g&&null!==g||"number"!=typeof v&&null!==v||"number"!=typeof f&&null!==f||"boolean"!=typeof m&&null!==m||!(null!=y&&y instanceof Array&&(0==y.length||null==y[0]||null!=y[0]&&y[0]instanceof LightSource)||null===y)||"string"!=typeof C&&null!==C||!(null!=S&&S instanceof Array&&(0==S.length||null==S[0]||S[0]instanceof Array)||null===S)||"boolean"!=typeof E&&null!==E||"number"!=typeof A&&null!==A||"string"!=typeof _&&null!==_||"boolean"!=typeof P&&null!==P||"boolean"!=typeof w&&null!==w||"boolean"!=typeof L&&null!==L||"boolean"!=typeof T&&null!==T||!(null!=b&&b instanceof Big||null===b)||!(null!=O&&O instanceof Big||null===O)||"string"!=typeof I&&null!==I||!(null!=D&&D instanceof Object||null===D)||void 0!==R||void 0!==x||void 0!==M){if("string"!=typeof i&&null!==i||"string"!=typeof n&&null!==n||"string"!=typeof o&&null!==o||"string"!=typeof r&&null!==r||!(null!=l&&l instanceof Array&&(0==l.length||null==l[0]||"string"==typeof l[0])||null===l)||"number"!=typeof a&&null!==a||"number"!=typeof s&&null!==s||!(null!=h&&null!=h.constructor&&null!=h.constructor.__interfaces&&h.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===h)||!(null!=u&&null!=u.constructor&&null!=u.constructor.__interfaces&&u.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===u)||!(null!=d&&null!=d.constructor&&null!=d.constructor.__interfaces&&d.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Content")>=0||null===d)||"number"!=typeof c&&null!==c||"number"!=typeof p&&null!==p||"number"!=typeof g&&null!==g||"number"!=typeof v&&null!==v||"number"!=typeof f&&null!==f||"boolean"!=typeof m&&null!==m||!(null!=y&&y instanceof Array&&(0==y.length||null==y[0]||null!=y[0]&&y[0]instanceof LightSource)||null===y)||"string"!=typeof C&&null!==C||!(null!=S&&S instanceof Array&&(0==S.length||null==S[0]||S[0]instanceof Array)||null===S)||"boolean"!=typeof E&&null!==E||"number"!=typeof A&&null!==A||"string"!=typeof _&&null!==_||"boolean"!=typeof P&&null!==P||"boolean"!=typeof w&&null!==w||"boolean"!=typeof L&&null!==L||"boolean"!=typeof T&&null!==T||!(null!=b&&b instanceof Big||null===b)||!(null!=O&&O instanceof Big||null===O)||"string"!=typeof I&&null!==I||void 0!==D||void 0!==R||void 0!==x||void 0!==M)throw new Error("invalid overload");var N=(at=arguments)[4],U=at[5],H=at[6],G=at[7],k=at[8],V=at[9],W=at[10],B=at[11],j=at[12],Y=at[13],z=at[14],$=at[15],X=at[16],K=at[17],q=at[18],Z=(Ae=at[19],at[20]),Q=at[21],J=at[22],ee=at[23],te=at[24],ie=at[25],ne=at[26],oe=at[27],re=at[28],le=Ae?PieceOfFurniture.SHOW_BACK_FACE:0;void 0===(F=e.call(this,i,n,o,r,null,N,U,H,G,k,V,W,B,j,Y,z,$,K,q,le,Z,Q,J,ee,te,ie,ne,oe,re,null,null)||this).lightSources&&(F.lightSources=null),void 0===F.lightSourceMaterialNames&&(F.lightSourceMaterialNames=null),F.lightSources=null!=X&&X.length>0?X.slice(0):t.EMPTY_LIGHT_SOURCES_$LI$(),F.lightSourceMaterialNames=t.EMPTY_LIGHT_SOURCE_MATERIAL_NAMES_$LI$(),void 0===F.lightSources&&(F.lightSources=null),void 0===F.lightSourceMaterialNames&&(F.lightSourceMaterialNames=null),void 0===F.lightSources&&(F.lightSources=null),void 0===F.lightSourceMaterialNames&&(F.lightSourceMaterialNames=null),void 0===F.lightSources&&(F.lightSources=null),void 0===F.lightSourceMaterialNames&&(F.lightSourceMaterialNames=null)}else{var ae=(at=arguments)[4],se=at[5],he=at[6],ue=at[7],de=at[8],ce=at[9],pe=at[10],ge=at[11],ve=at[12],fe=at[13],me=at[14],ye=at[15],Ce=at[16],Se=at[17],Ee=at[18],Ae=at[19],_e=at[20],Pe=at[21],we=at[22],Le=at[23],Te=at[24],be=at[25],Oe=at[26],Ie=at[27],De=at[28],Re=at[29],xe=Ae?PieceOfFurniture.SHOW_BACK_FACE:0;void 0===(F=e.call(this,i,n,o,r,null,ae,se,he,ue,de,ce,pe,ge,ve,fe,me,ye,Se,Ee,xe,_e,Pe,we,Le,Te,be,Oe,Ie,De,Re,null)||this).lightSources&&(F.lightSources=null),void 0===F.lightSourceMaterialNames&&(F.lightSourceMaterialNames=null),F.lightSources=null!=Ce&&Ce.length>0?Ce.slice(0):t.EMPTY_LIGHT_SOURCES_$LI$(),F.lightSourceMaterialNames=t.EMPTY_LIGHT_SOURCE_MATERIAL_NAMES_$LI$(),void 0===F.lightSources&&(F.lightSources=null),void 0===F.lightSourceMaterialNames&&(F.lightSourceMaterialNames=null),void 0===F.lightSources&&(F.lightSources=null),void 0===F.lightSourceMaterialNames&&(F.lightSourceMaterialNames=null)}else{var Me=(at=arguments)[4],Fe=at[5],Ne=at[6],Ue=at[7],He=at[8],Ge=at[9],ke=at[10],Ve=at[11],We=at[12],Be=at[13],je=at[14],Ye=at[15],ze=at[16],$e=at[17],Xe=at[18],Ke=at[19],qe=at[20],Ze=at[21],Qe=at[22],Je=at[23],et=at[24],tt=at[25],it=at[26],nt=at[27],ot=at[28],rt=at[29],lt=at[30];void 0===(F=e.call(this,i,n,o,r,null,Me,Fe,Ne,Ue,He,Ge,ke,Ve,We,Be,je,Ye,Xe,Ke,qe,Ze,Qe,Je,et,tt,it,nt,ot,rt,lt,null)||this).lightSources&&(F.lightSources=null),void 0===F.lightSourceMaterialNames&&(F.lightSourceMaterialNames=null),F.lightSources=null!=ze&&ze.length>0?ze.slice(0):t.EMPTY_LIGHT_SOURCES_$LI$(),F.lightSourceMaterialNames=null!=$e&&$e.length>0?$e.slice(0):t.EMPTY_LIGHT_SOURCE_MATERIAL_NAMES_$LI$(),void 0===F.lightSources&&(F.lightSources=null),void 0===F.lightSourceMaterialNames&&(F.lightSourceMaterialNames=null)}else{var at=arguments;void 0===(F=e.call(this,i,n,o,r,l,a,s,h,u,d,c,p,g,v,f,m,y,E,A,_,P,w,L,T,b,O,I,D,R,x,M)||this).lightSources&&(F.lightSources=null),void 0===F.lightSourceMaterialNames&&(F.lightSourceMaterialNames=null),F.lightSources=null!=C&&C.length>0?C.slice(0):t.EMPTY_LIGHT_SOURCES_$LI$(),F.lightSourceMaterialNames=null!=S&&S.length>0?S.slice(0):t.EMPTY_LIGHT_SOURCE_MATERIAL_NAMES_$LI$()}return F}return __extends(t,e),t.EMPTY_LIGHT_SOURCES_$LI$=function(){return null==t.EMPTY_LIGHT_SOURCES&&(t.EMPTY_LIGHT_SOURCES=[]),t.EMPTY_LIGHT_SOURCES},t.EMPTY_LIGHT_SOURCE_MATERIAL_NAMES_$LI$=function(){return null==t.EMPTY_LIGHT_SOURCE_MATERIAL_NAMES&&(t.EMPTY_LIGHT_SOURCE_MATERIAL_NAMES=[]),t.EMPTY_LIGHT_SOURCE_MATERIAL_NAMES},t.prototype.getLightSources=function(){return 0===this.lightSources.length?this.lightSources:this.lightSources.slice(0)},t.prototype.getLightSourceMaterialNames=function(){return 0===this.lightSourceMaterialNames.length?this.lightSourceMaterialNames:this.lightSourceMaterialNames.slice(0)},t}(CatalogPieceOfFurniture);CatalogLight.__class="com.eteks.sweethome3d.model.CatalogLight",CatalogLight.__interfaces=["com.eteks.sweethome3d.model.CatalogItem","com.eteks.sweethome3d.model.PieceOfFurniture","com.eteks.sweethome3d.model.Light"];var HomeShelfUnit=function(e){function t(t,i,n){var o=this;if(("string"==typeof t||null===t)&&(null!=i&&null!=i.constructor&&null!=i.constructor.__interfaces&&i.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.ShelfUnit")>=0||null===i)&&(null!=n&&n instanceof Array&&(0==n.length||null==n[0]||"string"==typeof n[0])||null===n)){var r=arguments;void 0===(o=e.call(this,t,i,n)||this).shelfElevations&&(o.shelfElevations=null),void 0===o.shelfBoxes&&(o.shelfBoxes=null),o.shelfElevations=i.getShelfElevations(),o.shelfBoxes=i.getShelfBoxes()}else if((null!=t&&null!=t.constructor&&null!=t.constructor.__interfaces&&t.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.ShelfUnit")>=0||null===t)&&(null!=i&&i instanceof Array&&(0==i.length||null==i[0]||"string"==typeof i[0])||null===i)&&void 0===n){var l=(r=arguments)[0],a=r[1],s=HomeObject.createId("shelfUnit");void 0===(o=e.call(this,s,l,a)||this).shelfElevations&&(o.shelfElevations=null),void 0===o.shelfBoxes&&(o.shelfBoxes=null),o.shelfElevations=l.getShelfElevations(),o.shelfBoxes=l.getShelfBoxes(),void 0===o.shelfElevations&&(o.shelfElevations=null),void 0===o.shelfBoxes&&(o.shelfBoxes=null)}else if("string"!=typeof t&&null!==t||!(null!=i&&null!=i.constructor&&null!=i.constructor.__interfaces&&i.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.ShelfUnit")>=0||null===i)||void 0!==n){if(!(null!=t&&null!=t.constructor&&null!=t.constructor.__interfaces&&t.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.ShelfUnit")>=0||null===t)||void 0!==i||void 0!==n)throw new Error("invalid overload");var h=(r=arguments)[0],u=HomePieceOfFurniture.EMPTY_PROPERTY_ARRAY_$LI$(),d=HomeObject.createId("shelfUnit");void 0===(o=e.call(this,d,h,u)||this).shelfElevations&&(o.shelfElevations=null),void 0===o.shelfBoxes&&(o.shelfBoxes=null),o.shelfElevations=h.getShelfElevations(),o.shelfBoxes=h.getShelfBoxes(),void 0===o.shelfElevations&&(o.shelfElevations=null),void 0===o.shelfBoxes&&(o.shelfBoxes=null),void 0===o.shelfElevations&&(o.shelfElevations=null),void 0===o.shelfBoxes&&(o.shelfBoxes=null)}else{var r=arguments,c=HomePieceOfFurniture.EMPTY_PROPERTY_ARRAY_$LI$();void 0===(o=e.call(this,t,i,c)||this).shelfElevations&&(o.shelfElevations=null),void 0===o.shelfBoxes&&(o.shelfBoxes=null),o.shelfElevations=i.getShelfElevations(),o.shelfBoxes=i.getShelfBoxes(),void 0===o.shelfElevations&&(o.shelfElevations=null),void 0===o.shelfBoxes&&(o.shelfBoxes=null)}return o}return __extends(t,e),t.prototype.getShelfElevations=function(){return null!=this.shelfElevations?this.shelfElevations.slice(0):null},t.prototype.setShelfElevations=function(e){if(!function(e,t){if(null==e&&null==t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!=t[i])return!1;return!0}(e,this.shelfElevations)){var t=0===this.shelfElevations.length?this.shelfElevations:this.shelfElevations.slice(0);this.shelfElevations=0===e.length?e:e.slice(0),this.firePropertyChange("SHELF_ELEVATIONS",t,e)}},t.prototype.getShelfBoxes=function(){return this.shelfBoxes.slice(0)},t.prototype.setShelfBoxes=function(e){if(!function(e,t){if(null==e&&null==t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!=t[i])return!1;return!0}(e,this.shelfBoxes)){var t=0===this.shelfBoxes.length?this.shelfBoxes:this.shelfBoxes.slice(0);this.shelfBoxes=0===e.length?e:e.slice(0),this.firePropertyChange("SHELF_BOXES",t,e)}},t.prototype.clone=function(){var t=this;return function(i){if(null!=e.prototype.clone)return e.prototype.clone.call(t);var n=Object.create(i);for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o]);return n}(this)},t}(HomePieceOfFurniture);HomeShelfUnit.__class="com.eteks.sweethome3d.model.HomeShelfUnit",HomeShelfUnit.__interfaces=["com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.PieceOfFurniture","com.eteks.sweethome3d.model.ShelfUnit","com.eteks.sweethome3d.model.Elevatable"],HomeShelfUnit.__transients=["shapeCache","propertyChangeSupport"];var HomeLight=function(e){function t(t,i,n){var o=this;if(("string"==typeof t||null===t)&&(null!=i&&null!=i.constructor&&null!=i.constructor.__interfaces&&i.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Light")>=0||null===i)&&(null!=n&&n instanceof Array&&(0==n.length||null==n[0]||"string"==typeof n[0])||null===n)){var r=arguments;void 0===(o=e.call(this,t,i,n)||this).lightSources&&(o.lightSources=null),void 0===o.lightSourceMaterialNames&&(o.lightSourceMaterialNames=null),void 0===o.power&&(o.power=0),o.lightSources=i.getLightSources(),o.lightSourceMaterialNames=i.getLightSourceMaterialNames(),o.power=.5}else if((null!=t&&null!=t.constructor&&null!=t.constructor.__interfaces&&t.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Light")>=0||null===t)&&(null!=i&&i instanceof Array&&(0==i.length||null==i[0]||"string"==typeof i[0])||null===i)&&void 0===n){var l=(r=arguments)[0],a=r[1],s=HomeObject.createId("light");void 0===(o=e.call(this,s,l,a)||this).lightSources&&(o.lightSources=null),void 0===o.lightSourceMaterialNames&&(o.lightSourceMaterialNames=null),void 0===o.power&&(o.power=0),o.lightSources=l.getLightSources(),o.lightSourceMaterialNames=l.getLightSourceMaterialNames(),o.power=.5,void 0===o.lightSources&&(o.lightSources=null),void 0===o.lightSourceMaterialNames&&(o.lightSourceMaterialNames=null),void 0===o.power&&(o.power=0)}else if("string"!=typeof t&&null!==t||!(null!=i&&null!=i.constructor&&null!=i.constructor.__interfaces&&i.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Light")>=0||null===i)||void 0!==n){if(!(null!=t&&null!=t.constructor&&null!=t.constructor.__interfaces&&t.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Light")>=0||null===t)||void 0!==i||void 0!==n)throw new Error("invalid overload");var h=(r=arguments)[0],u=HomePieceOfFurniture.EMPTY_PROPERTY_ARRAY_$LI$(),d=HomeObject.createId("light");void 0===(o=e.call(this,d,h,u)||this).lightSources&&(o.lightSources=null),void 0===o.lightSourceMaterialNames&&(o.lightSourceMaterialNames=null),void 0===o.power&&(o.power=0),o.lightSources=h.getLightSources(),o.lightSourceMaterialNames=h.getLightSourceMaterialNames(),o.power=.5,void 0===o.lightSources&&(o.lightSources=null),void 0===o.lightSourceMaterialNames&&(o.lightSourceMaterialNames=null),void 0===o.power&&(o.power=0),void 0===o.lightSources&&(o.lightSources=null),void 0===o.lightSourceMaterialNames&&(o.lightSourceMaterialNames=null),void 0===o.power&&(o.power=0)}else{var r=arguments,c=HomePieceOfFurniture.EMPTY_PROPERTY_ARRAY_$LI$();void 0===(o=e.call(this,t,i,c)||this).lightSources&&(o.lightSources=null),void 0===o.lightSourceMaterialNames&&(o.lightSourceMaterialNames=null),void 0===o.power&&(o.power=0),o.lightSources=i.getLightSources(),o.lightSourceMaterialNames=i.getLightSourceMaterialNames(),o.power=.5,void 0===o.lightSources&&(o.lightSources=null),void 0===o.lightSourceMaterialNames&&(o.lightSourceMaterialNames=null),void 0===o.power&&(o.power=0)}return o}return __extends(t,e),t.prototype.getLightSources=function(){return 0===this.lightSources.length?this.lightSources:this.lightSources.slice(0)},t.prototype.setLightSources=function(e){if(!function(e,t){if(null==e&&null==t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!=t[i])return!1;return!0}(e,this.lightSources)){var t=0===this.lightSources.length?this.lightSources:this.lightSources.slice(0);this.lightSources=0===e.length?e:e.slice(0),this.firePropertyChange("LIGHT_SOURCES",t,e)}},t.prototype.getLightSourceMaterialNames=function(){return 0===this.lightSourceMaterialNames.length?this.lightSourceMaterialNames:this.lightSourceMaterialNames.slice(0)},t.prototype.setLightSourceMaterialNames=function(e){if(!function(e,t){if(null==e&&null==t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!=t[i])return!1;return!0}(e,this.lightSourceMaterialNames)){var t=0===this.lightSourceMaterialNames.length?this.lightSourceMaterialNames:this.lightSourceMaterialNames.slice(0);this.lightSourceMaterialNames=0===e.length?e:e.slice(0),this.firePropertyChange("LIGHT_SOURCE_MATERIAL_NAMES",t,e)}},t.prototype.getPower=function(){return this.power},t.prototype.setPower=function(e){if(e!==this.power){var t=this.power;this.power=e,this.firePropertyChange("POWER",t,e)}},t.prototype.clone=function(){var t=this;return function(i){if(null!=e.prototype.clone)return e.prototype.clone.call(t);var n=Object.create(i);for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o]);return n}(this)},t}(HomePieceOfFurniture);HomeLight.__class="com.eteks.sweethome3d.model.HomeLight",HomeLight.__interfaces=["com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.PieceOfFurniture","com.eteks.sweethome3d.model.Elevatable","com.eteks.sweethome3d.model.Light"],HomeLight.__transients=["shapeCache","propertyChangeSupport"];var HomeDoorOrWindow=function(e){function t(t,i,n){var o=this;if(("string"==typeof t||null===t)&&(null!=i&&null!=i.constructor&&null!=i.constructor.__interfaces&&i.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.DoorOrWindow")>=0||null===i)&&(null!=n&&n instanceof Array&&(0==n.length||null==n[0]||"string"==typeof n[0])||null===n)){var r=arguments;void 0===(o=e.call(this,t,i,n)||this).wallThickness&&(o.wallThickness=0),void 0===o.wallDistance&&(o.wallDistance=0),void 0===o.wallWidth&&(o.wallWidth=0),void 0===o.wallLeft&&(o.wallLeft=0),void 0===o.wallHeight&&(o.wallHeight=0),void 0===o.wallTop&&(o.wallTop=0),void 0===o.wallCutOutOnBothSides&&(o.wallCutOutOnBothSides=!1),void 0===o.widthDepthDeformable&&(o.widthDepthDeformable=!1),void 0===o.sashes&&(o.sashes=null),void 0===o.cutOutShape&&(o.cutOutShape=null),void 0===o.boundToWall&&(o.boundToWall=!1),o.wallThickness=i.getWallThickness(),o.wallDistance=i.getWallDistance(),o.wallWidth=1,o.wallLeft=0,o.wallHeight=1,o.wallTop=0,o.wallCutOutOnBothSides=i.isWallCutOutOnBothSides(),o.widthDepthDeformable=i.isWidthDepthDeformable(),o.sashes=i.getSashes(),o.cutOutShape=i.getCutOutShape()}else if((null!=t&&null!=t.constructor&&null!=t.constructor.__interfaces&&t.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.DoorOrWindow")>=0||null===t)&&(null!=i&&i instanceof Array&&(0==i.length||null==i[0]||"string"==typeof i[0])||null===i)&&void 0===n){var l=(r=arguments)[0],a=r[1],s=HomeObject.createId("doorOrWindow");void 0===(o=e.call(this,s,l,a)||this).wallThickness&&(o.wallThickness=0),void 0===o.wallDistance&&(o.wallDistance=0),void 0===o.wallWidth&&(o.wallWidth=0),void 0===o.wallLeft&&(o.wallLeft=0),void 0===o.wallHeight&&(o.wallHeight=0),void 0===o.wallTop&&(o.wallTop=0),void 0===o.wallCutOutOnBothSides&&(o.wallCutOutOnBothSides=!1),void 0===o.widthDepthDeformable&&(o.widthDepthDeformable=!1),void 0===o.sashes&&(o.sashes=null),void 0===o.cutOutShape&&(o.cutOutShape=null),void 0===o.boundToWall&&(o.boundToWall=!1),o.wallThickness=l.getWallThickness(),o.wallDistance=l.getWallDistance(),o.wallWidth=1,o.wallLeft=0,o.wallHeight=1,o.wallTop=0,o.wallCutOutOnBothSides=l.isWallCutOutOnBothSides(),o.widthDepthDeformable=l.isWidthDepthDeformable(),o.sashes=l.getSashes(),o.cutOutShape=l.getCutOutShape(),void 0===o.wallThickness&&(o.wallThickness=0),void 0===o.wallDistance&&(o.wallDistance=0),void 0===o.wallWidth&&(o.wallWidth=0),void 0===o.wallLeft&&(o.wallLeft=0),void 0===o.wallHeight&&(o.wallHeight=0),void 0===o.wallTop&&(o.wallTop=0),void 0===o.wallCutOutOnBothSides&&(o.wallCutOutOnBothSides=!1),void 0===o.widthDepthDeformable&&(o.widthDepthDeformable=!1),void 0===o.sashes&&(o.sashes=null),void 0===o.cutOutShape&&(o.cutOutShape=null),void 0===o.boundToWall&&(o.boundToWall=!1)}else if("string"!=typeof t&&null!==t||!(null!=i&&null!=i.constructor&&null!=i.constructor.__interfaces&&i.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.DoorOrWindow")>=0||null===i)||void 0!==n){if(!(null!=t&&null!=t.constructor&&null!=t.constructor.__interfaces&&t.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.DoorOrWindow")>=0||null===t)||void 0!==i||void 0!==n)throw new Error("invalid overload");var h=(r=arguments)[0],u=HomePieceOfFurniture.EMPTY_PROPERTY_ARRAY_$LI$(),d=HomeObject.createId("doorOrWindow");void 0===(o=e.call(this,d,h,u)||this).wallThickness&&(o.wallThickness=0),void 0===o.wallDistance&&(o.wallDistance=0),void 0===o.wallWidth&&(o.wallWidth=0),void 0===o.wallLeft&&(o.wallLeft=0),void 0===o.wallHeight&&(o.wallHeight=0),void 0===o.wallTop&&(o.wallTop=0),void 0===o.wallCutOutOnBothSides&&(o.wallCutOutOnBothSides=!1),void 0===o.widthDepthDeformable&&(o.widthDepthDeformable=!1),void 0===o.sashes&&(o.sashes=null),void 0===o.cutOutShape&&(o.cutOutShape=null),void 0===o.boundToWall&&(o.boundToWall=!1),o.wallThickness=h.getWallThickness(),o.wallDistance=h.getWallDistance(),o.wallWidth=1,o.wallLeft=0,o.wallHeight=1,o.wallTop=0,o.wallCutOutOnBothSides=h.isWallCutOutOnBothSides(),o.widthDepthDeformable=h.isWidthDepthDeformable(),o.sashes=h.getSashes(),o.cutOutShape=h.getCutOutShape(),void 0===o.wallThickness&&(o.wallThickness=0),void 0===o.wallDistance&&(o.wallDistance=0),void 0===o.wallWidth&&(o.wallWidth=0),void 0===o.wallLeft&&(o.wallLeft=0),void 0===o.wallHeight&&(o.wallHeight=0),void 0===o.wallTop&&(o.wallTop=0),void 0===o.wallCutOutOnBothSides&&(o.wallCutOutOnBothSides=!1),void 0===o.widthDepthDeformable&&(o.widthDepthDeformable=!1),void 0===o.sashes&&(o.sashes=null),void 0===o.cutOutShape&&(o.cutOutShape=null),void 0===o.boundToWall&&(o.boundToWall=!1),void 0===o.wallThickness&&(o.wallThickness=0),void 0===o.wallDistance&&(o.wallDistance=0),void 0===o.wallWidth&&(o.wallWidth=0),void 0===o.wallLeft&&(o.wallLeft=0),void 0===o.wallHeight&&(o.wallHeight=0),void 0===o.wallTop&&(o.wallTop=0),void 0===o.wallCutOutOnBothSides&&(o.wallCutOutOnBothSides=!1),void 0===o.widthDepthDeformable&&(o.widthDepthDeformable=!1),void 0===o.sashes&&(o.sashes=null),void 0===o.cutOutShape&&(o.cutOutShape=null),void 0===o.boundToWall&&(o.boundToWall=!1)}else{var r=arguments,c=HomePieceOfFurniture.EMPTY_PROPERTY_ARRAY_$LI$();void 0===(o=e.call(this,t,i,c)||this).wallThickness&&(o.wallThickness=0),void 0===o.wallDistance&&(o.wallDistance=0),void 0===o.wallWidth&&(o.wallWidth=0),void 0===o.wallLeft&&(o.wallLeft=0),void 0===o.wallHeight&&(o.wallHeight=0),void 0===o.wallTop&&(o.wallTop=0),void 0===o.wallCutOutOnBothSides&&(o.wallCutOutOnBothSides=!1),void 0===o.widthDepthDeformable&&(o.widthDepthDeformable=!1),void 0===o.sashes&&(o.sashes=null),void 0===o.cutOutShape&&(o.cutOutShape=null),void 0===o.boundToWall&&(o.boundToWall=!1),o.wallThickness=i.getWallThickness(),o.wallDistance=i.getWallDistance(),o.wallWidth=1,o.wallLeft=0,o.wallHeight=1,o.wallTop=0,o.wallCutOutOnBothSides=i.isWallCutOutOnBothSides(),o.widthDepthDeformable=i.isWidthDepthDeformable(),o.sashes=i.getSashes(),o.cutOutShape=i.getCutOutShape(),void 0===o.wallThickness&&(o.wallThickness=0),void 0===o.wallDistance&&(o.wallDistance=0),void 0===o.wallWidth&&(o.wallWidth=0),void 0===o.wallLeft&&(o.wallLeft=0),void 0===o.wallHeight&&(o.wallHeight=0),void 0===o.wallTop&&(o.wallTop=0),void 0===o.wallCutOutOnBothSides&&(o.wallCutOutOnBothSides=!1),void 0===o.widthDepthDeformable&&(o.widthDepthDeformable=!1),void 0===o.sashes&&(o.sashes=null),void 0===o.cutOutShape&&(o.cutOutShape=null),void 0===o.boundToWall&&(o.boundToWall=!1)}return o}return __extends(t,e),t.prototype.getWallThickness=function(){return this.wallThickness},t.prototype.setWallThickness=function(e){if(e!==this.wallThickness){var t=this.wallThickness;this.wallThickness=e,this.firePropertyChange("WALL_THICKNESS",t,e)}},t.prototype.getWallDistance=function(){return this.wallDistance},t.prototype.setWallDistance=function(e){if(e!==this.wallDistance){var t=this.wallDistance;this.wallDistance=e,this.firePropertyChange("WALL_DISTANCE",t,e)}},t.prototype.getWallWidth=function(){return this.wallWidth},t.prototype.setWallWidth=function(e){if(e!==this.wallWidth){var t=this.wallWidth;this.wallWidth=e,this.firePropertyChange("WALL_WIDTH",t,e)}},t.prototype.getWallLeft=function(){return this.wallLeft},t.prototype.setWallLeft=function(e){if(e!==this.wallLeft){var t=this.wallLeft;this.wallLeft=e,this.firePropertyChange("WALL_LEFT",t,e)}},t.prototype.getWallHeight=function(){return this.wallHeight},t.prototype.setWallHeight=function(e){if(e!==this.wallHeight){var t=this.wallHeight;this.wallHeight=e,this.firePropertyChange("WALL_HEIGHT",t,e)}},t.prototype.getWallTop=function(){return this.wallTop},t.prototype.setWallTop=function(e){if(e!==this.wallTop){var t=this.wallTop;this.wallTop=e,this.firePropertyChange("WALL_TOP",t,e)}},t.prototype.getSashes=function(){return 0===this.sashes.length?this.sashes:this.sashes.slice(0)},t.prototype.setSashes=function(e){if(!function(e,t){if(null==e&&null==t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!=t[i])return!1;return!0}(e,this.sashes)){var t=0===this.sashes.length?this.sashes:this.sashes.slice(0);this.sashes=0===e.length?e:e.slice(0),this.firePropertyChange("SASHES",t,e)}},t.prototype.getCutOutShape=function(){return this.cutOutShape},t.prototype.setCutOutShape=function(e){if(e!==this.cutOutShape&&(null==e||e!==this.cutOutShape)){var t=this.cutOutShape;this.cutOutShape=e,this.firePropertyChange("CUT_OUT_SHAPE",t,e)}},t.prototype.isWallCutOutOnBothSides=function(){return this.wallCutOutOnBothSides},t.prototype.setWallCutOutOnBothSides=function(e){e!==this.wallCutOutOnBothSides&&(this.wallCutOutOnBothSides=e,this.firePropertyChange("WALL_CUT_OUT_ON_BOTH_SIDES",!e,e))},t.prototype.isWidthDepthDeformable=function(){return this.widthDepthDeformable},t.prototype.setWidthDepthDeformable=function(e){e!==this.widthDepthDeformable&&(this.widthDepthDeformable=e,this.firePropertyChange("WIDTH_DEPTH_DEFORMABLE",!e,e))},t.prototype.isBoundToWall=function(){return this.boundToWall},t.prototype.setBoundToWall=function(e){e!==this.boundToWall&&(this.boundToWall=e,this.firePropertyChange("BOUND_TO_WALL",!e,e))},t.prototype.setX=function(t){this.getX()!==t&&(this.boundToWall=!1),e.prototype.setX.call(this,t)},t.prototype.setY=function(t){this.getY()!==t&&(this.boundToWall=!1),e.prototype.setY.call(this,t)},t.prototype.setAngle=function(t){this.getAngle()!==t&&(this.boundToWall=!1),e.prototype.setAngle.call(this,t)},t.prototype.setDepth=function(t){this.getDepth()!==t&&(this.boundToWall=!1),e.prototype.setDepth.call(this,t)},t.prototype.isDoorOrWindow=function(){return!0},t.prototype.duplicate=function(){var t=e.prototype.duplicate.call(this);return t.boundToWall=!1,t},t}(HomePieceOfFurniture);HomeDoorOrWindow.__class="com.eteks.sweethome3d.model.HomeDoorOrWindow",HomeDoorOrWindow.__interfaces=["com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.DoorOrWindow","com.eteks.sweethome3d.model.PieceOfFurniture","com.eteks.sweethome3d.model.Elevatable"],HomeDoorOrWindow.__transients=["shapeCache","propertyChangeSupport"];var HomeFurnitureGroup=function(e){function t(t,i,n,o,r){var l=this;if("string"!=typeof t&&null!==t||!(null!=i&&i instanceof Array||null===i)||"number"!=typeof n&&null!==n||"boolean"!=typeof o&&null!==o||"string"!=typeof r&&null!==r)if(!(null!=t&&t instanceof Array||null===t)||"number"!=typeof i&&null!==i||"boolean"!=typeof n&&null!==n||"string"!=typeof o&&null!==o||void 0!==r)if((null!=t&&t instanceof Array||null===t)&&(null!=i&&i instanceof HomePieceOfFurniture||null===i)&&("string"==typeof n||null===n)&&void 0===o&&void 0===r){var a=(P=arguments)[0],s=P[1],h=P[2],u=s.getAngle(),d=HomeObject.createId("furnitureGroup");void 0===(l=e.call(this,d,a[0])||this).furniture&&(l.furniture=null),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=!1),void 0===l.fixedWidth&&(l.fixedWidth=0),void 0===l.fixedDepth&&(l.fixedDepth=0),void 0===l.fixedHeight&&(l.fixedHeight=0),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null),void 0===l.furnitureListener&&(l.furnitureListener=null),l.furniture=a.slice(0),l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=!0,l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=!0,l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=!0;for(E=!0,A=!1,_=0;_<a.length;_++){E=(w=a[_]).isMovable()&&E,A=w.isVisible()||A}l.setName(h),l.setCatalogId(null),l.setDescription(null),l.setInformation(null),l.setCreator(null),l.setNameVisible(!1),l.setNameXOffset(0),l.setNameYOffset(0),l.setNameAngle(0),l.setNameStyle(null),e.prototype.setIcon.call(l,null),e.prototype.setPlanIcon.call(l,null),e.prototype.setModel.call(l,null),e.prototype.setMovable.call(l,E),e.prototype.setAngle.call(l,u),e.prototype.setModelMirrored.call(l,!1),l.setVisible(A),l.updateLocationAndSize(a,u,!0),l.addFurnitureListener(),void 0===l.furniture&&(l.furniture=null),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=!1),void 0===l.fixedWidth&&(l.fixedWidth=0),void 0===l.fixedDepth&&(l.fixedDepth=0),void 0===l.fixedHeight&&(l.fixedHeight=0),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null),void 0===l.furnitureListener&&(l.furnitureListener=null),void 0===l.furniture&&(l.furniture=null),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=!1),void 0===l.fixedWidth&&(l.fixedWidth=0),void 0===l.fixedDepth&&(l.fixedDepth=0),void 0===l.fixedHeight&&(l.fixedHeight=0),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null),void 0===l.furnitureListener&&(l.furnitureListener=null)}else{if(!(null!=t&&t instanceof Array||null===t)||"string"!=typeof i&&null!==i||void 0!==n||void 0!==o||void 0!==r)throw new Error("invalid overload");var c=(P=arguments)[0],p=P[1],g=(s=arguments[0][0]).getAngle(),v=HomeObject.createId("furnitureGroup");void 0===(l=e.call(this,v,c[0])||this).furniture&&(l.furniture=null),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=!1),void 0===l.fixedWidth&&(l.fixedWidth=0),void 0===l.fixedDepth&&(l.fixedDepth=0),void 0===l.fixedHeight&&(l.fixedHeight=0),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null),void 0===l.furnitureListener&&(l.furnitureListener=null),l.furniture=c.slice(0),l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=!0,l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=!0,l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=!0;for(E=!0,A=!1,_=0;_<c.length;_++){E=(w=c[_]).isMovable()&&E,A=w.isVisible()||A}l.setName(p),l.setCatalogId(null),l.setDescription(null),l.setInformation(null),l.setCreator(null),l.setNameVisible(!1),l.setNameXOffset(0),l.setNameYOffset(0),l.setNameAngle(0),l.setNameStyle(null),e.prototype.setIcon.call(l,null),e.prototype.setPlanIcon.call(l,null),e.prototype.setModel.call(l,null),e.prototype.setMovable.call(l,E),e.prototype.setAngle.call(l,g),e.prototype.setModelMirrored.call(l,!1),l.setVisible(A),l.updateLocationAndSize(c,g,!0),l.addFurnitureListener(),void 0===l.furniture&&(l.furniture=null),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=!1),void 0===l.fixedWidth&&(l.fixedWidth=0),void 0===l.fixedDepth&&(l.fixedDepth=0),void 0===l.fixedHeight&&(l.fixedHeight=0),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null),void 0===l.furnitureListener&&(l.furnitureListener=null),void 0===l.furniture&&(l.furniture=null),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=!1),void 0===l.fixedWidth&&(l.fixedWidth=0),void 0===l.fixedDepth&&(l.fixedDepth=0),void 0===l.fixedHeight&&(l.fixedHeight=0),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null),void 0===l.furnitureListener&&(l.furnitureListener=null),void 0===l.furniture&&(l.furniture=null),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=!1),void 0===l.fixedWidth&&(l.fixedWidth=0),void 0===l.fixedDepth&&(l.fixedDepth=0),void 0===l.fixedHeight&&(l.fixedHeight=0),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null),void 0===l.furnitureListener&&(l.furnitureListener=null)}else{var f=(P=arguments)[0],m=P[1],y=P[2],C=P[3],S=HomeObject.createId("furnitureGroup");void 0===(l=e.call(this,S,f[0])||this).furniture&&(l.furniture=null),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=!1),void 0===l.fixedWidth&&(l.fixedWidth=0),void 0===l.fixedDepth&&(l.fixedDepth=0),void 0===l.fixedHeight&&(l.fixedHeight=0),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null),void 0===l.furnitureListener&&(l.furnitureListener=null),l.furniture=f.slice(0),l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=!0,l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=!0,l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=!0;for(var E=!0,A=!1,_=0;_<f.length;_++){E=(w=f[_]).isMovable()&&E,A=w.isVisible()||A}l.setName(C),l.setCatalogId(null),l.setDescription(null),l.setInformation(null),l.setCreator(null),l.setNameVisible(!1),l.setNameXOffset(0),l.setNameYOffset(0),l.setNameAngle(0),l.setNameStyle(null),e.prototype.setIcon.call(l,null),e.prototype.setPlanIcon.call(l,null),e.prototype.setModel.call(l,null),e.prototype.setMovable.call(l,E),e.prototype.setAngle.call(l,m),e.prototype.setModelMirrored.call(l,y),l.setVisible(A),l.updateLocationAndSize(f,m,!0),l.addFurnitureListener(),void 0===l.furniture&&(l.furniture=null),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=!1),void 0===l.fixedWidth&&(l.fixedWidth=0),void 0===l.fixedDepth&&(l.fixedDepth=0),void 0===l.fixedHeight&&(l.fixedHeight=0),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null),void 0===l.furnitureListener&&(l.furnitureListener=null)}else{var P=arguments;void 0===(l=e.call(this,t,i[0])||this).furniture&&(l.furniture=null),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=!1),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=!1),void 0===l.fixedWidth&&(l.fixedWidth=0),void 0===l.fixedDepth&&(l.fixedDepth=0),void 0===l.fixedHeight&&(l.fixedHeight=0),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=0),void 0===l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency&&(l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null),void 0===l.furnitureListener&&(l.furnitureListener=null),l.furniture=i.slice(0),l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=!0,l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=!0,l.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=!0;for(var E=!0,A=!1,_=0;_<i.length;_++){var w;E=(w=i[_]).isMovable()&&E,A=w.isVisible()||A}l.setName(r),l.setCatalogId(null),l.setDescription(null),l.setInformation(null),l.setCreator(null),l.setNameVisible(!1),l.setNameXOffset(0),l.setNameYOffset(0),l.setNameAngle(0),l.setNameStyle(null),e.prototype.setIcon.call(l,null),e.prototype.setPlanIcon.call(l,null),e.prototype.setModel.call(l,null),e.prototype.setMovable.call(l,E),e.prototype.setAngle.call(l,n),e.prototype.setModelMirrored.call(l,o),l.setVisible(A),l.updateLocationAndSize(i,n,!0),l.addFurnitureListener()}return l}return __extends(t,e),t.prototype.updateLocationAndSize=function(t,i,n){this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=!0,this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=!0,this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=!0,this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=!0,this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=t[0].getCurrency();for(var o=0;o<t.length;o++){var r=t[o];this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable=r.isResizable()&&this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable,this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable=r.isDeformable()&&this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable,this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable=r.isTexturable()&&this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable,this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow=r.isDoorOrWindow()&&this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow,null!=this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency&&(null!=r.getCurrency()&&r.getCurrency()===this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency||(this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency=null))}var l=34028235e31;if(n){var a=null;for(o=0;o<t.length;o++){var s=(r=t[o]).getLevel();null!=s&&(null==a||s.getElevation()<a.getElevation())&&(a=s)}for(o=0;o<t.length;o++){null!=(r=t[o]).getLevel()?(l=Math.min(l,r.getGroundElevation()-a.getElevation()),r.setElevation(r.getGroundElevation()-a.getElevation()),r.setLevel(null)):l=Math.min(l,r.getElevation())}}else for(o=0;o<t.length;o++){r=t[o];l=Math.min(l,r.getElevation())}var h=0,u=-1;for(o=0;o<t.length;o++){r=t[o];h=Math.max(h,r.getElevation()+r.getHeightInPlan()),r.getDropOnTopElevation()>=0&&(u=Math.max(u,r.getElevation()+r.getHeightInPlan()*r.getDropOnTopElevation()))}h-=l,u-=l;var d=java.awt.geom.AffineTransform.getRotateInstance(-i),c=null,p=this.getFurnitureWithoutGroups(t);for(o=0;o<p.length;o++){r=p[o];var g=new java.awt.geom.GeneralPath,v=r.getPoints();g.moveTo(v[0][0],v[0][1]);for(var f=1;f<v.length;f++)g.lineTo(v[f][0],v[f][1]);g.closePath(),null==c?c=g.createTransformedShape(d).getBounds2D():c.add(g.createTransformedShape(d).getBounds2D())}var m=new java.awt.geom.Point2D.Float(c.getCenterX(),c.getCenterY());if(d.setToRotation(i),d.transform(m,m),this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable){var y=c.getWidth();e.prototype.setWidth.call(this,y),e.prototype.setWidthInPlan.call(this,y);var C=c.getHeight();e.prototype.setDepth.call(this,C),e.prototype.setDepthInPlan.call(this,C),e.prototype.setHeight.call(this,h),e.prototype.setHeightInPlan.call(this,h)}else this.fixedWidth=c.getWidth(),this.fixedDepth=c.getHeight(),this.fixedHeight=h;this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation=u/h,e.prototype.setX.call(this,m.getX()),e.prototype.setY.call(this,m.getY()),e.prototype.setElevation.call(this,l)},t.prototype.addFurnitureListener=function(){this.furnitureListener=new t.LocationAndSizeChangeListener(this);for(var e=0;e<this.furniture.length;e++){this.furniture[e].addPropertyChangeListener(this.furnitureListener)}},t.prototype.getFurnitureWithoutGroups=function(e){for(var i,n,o=[],r=0;r<e.length;r++){var l=e[r];null!=l&&l instanceof t?(i=o,n=this.getFurnitureWithoutGroups(l.getFurniture()),i.push.apply(i,n)):o.push(l)}return o},t.prototype.getAllFurniture=function(){for(var e,i,n=this.furniture.slice(0),o=this.getFurniture(),r=0;r<o.length;r++){var l=o[r];null!=l&&l instanceof t&&(e=n,i=l.getAllFurniture(),e.push.apply(e,i))}return n},t.prototype.getFurniture=function(){return this.furniture.slice(0)},t.prototype.addPieceOfFurniture=function(e,t){this.furniture=this.furniture.slice(0),e.setLevel(this.getLevel()),this.furniture.splice(t,0,e),e.addPropertyChangeListener(this.furnitureListener),this.updateLocationAndSize(this.furniture,this.getAngle(),!1)},t.prototype.deletePieceOfFurniture=function(e){var t=this.furniture.indexOf(e);if(-1!==t){if(!(this.furniture.length>1))throw new IllegalStateException("Group can't be empty");e.setLevel(null),e.removePropertyChangeListener(this.furnitureListener),this.furniture=this.furniture.slice(0),this.furniture.splice(t,1)[0],this.updateLocationAndSize(this.furniture,this.getAngle(),!1)}},t.prototype.getCatalogId=function(){return e.prototype.getCatalogId.call(this)},t.prototype.getInformation=function(){return e.prototype.getInformation.call(this)},t.prototype.isMovable=function(){return e.prototype.isMovable.call(this)},t.prototype.setMovable=function(t){e.prototype.setMovable.call(this,t)},t.prototype.isDoorOrWindow=function(){return this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_doorOrWindow},t.prototype.isResizable=function(){return this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable},t.prototype.isDeformable=function(){return this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_deformable},t.prototype.isTexturable=function(){return this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_texturable},t.prototype.isHorizontallyRotatable=function(){return!1},t.prototype.getWidth=function(){return this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable?e.prototype.getWidth.call(this):this.fixedWidth},t.prototype.getWidthInPlan=function(){return this.getWidth()},t.prototype.getDepth=function(){return this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable?e.prototype.getDepth.call(this):this.fixedDepth},t.prototype.getDepthInPlan=function(){return this.getDepth()},t.prototype.getHeight=function(){return this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_resizable?e.prototype.getHeight.call(this):this.fixedHeight},t.prototype.getHeightInPlan=function(){return this.getHeight()},t.prototype.isHorizontallyRotated=function(){if(e.prototype.isHorizontallyRotated.call(this))return!0;for(var t=this.getFurniture(),i=0;i<t.length;i++){if(t[i].isHorizontallyRotated())return!0}return!1},t.prototype.getDropOnTopElevation=function(){return this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_dropOnTopElevation},t.prototype.getIcon=function(){return null},t.prototype.setIcon=function(e){throw new IllegalStateException("Can't set icon of a group")},t.prototype.getPlanIcon=function(){return null},t.prototype.setPlanIcon=function(e){throw new IllegalStateException("Can't set plan icon of a group")},t.prototype.getModel=function(){return null},t.prototype.setModel=function(e){throw new IllegalStateException("Can't set model of a group")},t.prototype.getModelSize=function(){return null},t.prototype.setModelSize=function(e){throw new IllegalStateException("Can't set model size of a group")},t.prototype.getModelRotation=function(){return PieceOfFurniture.IDENTITY_ROTATION_$LI$()},t.prototype.setModelRotation=function(e){throw new IllegalStateException("Can't set model rotation of a group")},t.prototype.isModelCenteredAtOrigin=function(){return!0},t.prototype.getModelFlags=function(){return 0},t.prototype.setModelFlags=function(e){throw new IllegalStateException("Can't set model flags attribute of a group")},t.prototype.isBackFaceShown=function(){return!1},t.prototype.setBackFaceShown=function(e){throw new IllegalStateException("Can't set back face shown attribute of a group")},t.prototype.getModelTransformations=function(){return null},t.prototype.setModelTransformations=function(e){if(this.isDeformable())for(var t=0;t<this.furniture.length;t++){this.furniture[t].setModelTransformations(e)}},t.prototype.getPitch=function(){return 0},t.prototype.getRoll=function(){return 0},t.prototype.getStaircaseCutOutShape=function(){return null},t.prototype.setStaircaseCutOutShape=function(e){throw new IllegalStateException("Can't set staircase cut out shape of a group")},t.prototype.getCreator=function(){return e.prototype.getCreator.call(this)},t.prototype.getPrice=function(){for(var t=null,i=0;i<this.furniture.length;i++){var n=this.furniture[i];null!=n.getPrice()&&(t=null==t?n.getPrice():t.plus(n.getPrice()))}return null==t?e.prototype.getPrice.call(this):t},t.prototype.setPrice=function(t){for(var i=0;i<this.furniture.length;i++){if(null!=this.furniture[i].getPrice())throw new UnsupportedOperationException("Can't change the price of a group containing pieces with a price")}e.prototype.setPrice.call(this,t)},t.prototype.getValueAddedTaxPercentage=function(){var e=this.furniture[0].getValueAddedTaxPercentage();if(null!=e)for(var t=0;t<this.furniture.length;t++){var i=this.furniture[t].getValueAddedTaxPercentage();if(null==i||!(null!=e?i.eq(e):i===e))return null}return e},t.prototype.getCurrency=function(){return this.__com_eteks_sweethome3d_model_HomeFurnitureGroup_currency},t.prototype.getValueAddedTax=function(){for(var e=null,t=0;t<this.furniture.length;t++){var i=this.furniture[t].getValueAddedTax();null!=i&&(e=null==e?i:e.plus(i))}return e},t.prototype.getPriceValueAddedTaxIncluded=function(){for(var e=null,t=0;t<this.furniture.length;t++){var i=this.furniture[t];null!=i.getPrice()&&(e=null==e?i.getPriceValueAddedTaxIncluded():e.plus(i.getPriceValueAddedTaxIncluded()))}return e},t.prototype.getColor=function(){return null},t.prototype.setColor=function(e){if(this.isTexturable())for(var t=0;t<this.furniture.length;t++){this.furniture[t].setColor(e)}},t.prototype.getTexture=function(){return null},t.prototype.setTexture=function(e){if(this.isTexturable())for(var t=0;t<this.furniture.length;t++){this.furniture[t].setTexture(e)}},t.prototype.getModelMaterials=function(){return null},t.prototype.setModelMaterials=function(e){if(this.isTexturable())for(var t=0;t<this.furniture.length;t++){this.furniture[t].setModelMaterials(e)}},t.prototype.getShininess=function(){return null},t.prototype.setShininess=function(e){if(this.isTexturable())for(var t=0;t<this.furniture.length;t++){this.furniture[t].setShininess(e)}},t.prototype.setAngle=function(t){if(t!==this.getAngle()){for(var i=t-this.getAngle(),n=Math.cos(i),o=Math.sin(i),r=0;r<this.furniture.length;r++){var l=this.furniture[r];l.removePropertyChangeListener(this.furnitureListener),l.setAngle(l.getAngle()+i);var a=this.getX()+((l.getX()-this.getX())*n-(l.getY()-this.getY())*o),s=this.getY()+((l.getX()-this.getX())*o+(l.getY()-this.getY())*n);l.setX(a),l.setY(s),l.addPropertyChangeListener(this.furnitureListener)}e.prototype.setAngle.call(this,t)}},t.prototype.setX=function(t){if(t!==this.getX()){for(var i=t-this.getX(),n=0;n<this.furniture.length;n++){var o=this.furniture[n];o.removePropertyChangeListener(this.furnitureListener),o.setX(o.getX()+i),o.addPropertyChangeListener(this.furnitureListener)}e.prototype.setX.call(this,t)}},t.prototype.setY=function(t){if(t!==this.getY()){for(var i=t-this.getY(),n=0;n<this.furniture.length;n++){var o=this.furniture[n];o.removePropertyChangeListener(this.furnitureListener),o.setY(o.getY()+i),o.addPropertyChangeListener(this.furnitureListener)}e.prototype.setY.call(this,t)}},t.prototype.setWidth=function(t){if(t!==this.getWidth()){for(var i=t/this.getWidth(),n=this.getAngle(),o=0;o<this.furniture.length;o++){var r=this.furniture[o];r.removePropertyChangeListener(this.furnitureListener);var l=r.getAngle()-n,a=r.getWidth(),s=r.getDepth();r.setWidth(a+a*(i-1)*Math.abs(Math.cos(l))),r.setDepth(s+s*(i-1)*Math.abs(Math.sin(l)));var h=Math.cos(n),u=Math.sin(n),d=this.getX()+((r.getX()-this.getX())*h+(r.getY()-this.getY())*u),c=this.getY()+((r.getX()-this.getX())*-u+(r.getY()-this.getY())*h);d=this.getX()+(d-this.getX())*i,r.setX(this.getX()+((d-this.getX())*h-(c-this.getY())*u)),r.setY(this.getY()+((d-this.getX())*u+(c-this.getY())*h)),r.addPropertyChangeListener(this.furnitureListener)}e.prototype.setWidth.call(this,t)}},t.prototype.setDepth=function(t){if(t!==this.getDepth()){for(var i=t/this.getDepth(),n=this.getAngle(),o=0;o<this.furniture.length;o++){var r=this.furniture[o];r.removePropertyChangeListener(this.furnitureListener);var l=r.getAngle()-n,a=r.getWidth(),s=r.getDepth();r.setWidth(a+a*(i-1)*Math.abs(Math.sin(l))),r.setDepth(s+s*(i-1)*Math.abs(Math.cos(l)));var h=Math.cos(n),u=Math.sin(n),d=this.getX()+((r.getX()-this.getX())*h+(r.getY()-this.getY())*u),c=this.getY()+((r.getX()-this.getX())*-u+(r.getY()-this.getY())*h);c=this.getY()+(c-this.getY())*i,r.setX(this.getX()+((d-this.getX())*h-(c-this.getY())*u)),r.setY(this.getY()+((d-this.getX())*u+(c-this.getY())*h)),r.addPropertyChangeListener(this.furnitureListener)}e.prototype.setDepth.call(this,t)}},t.prototype.setHeight=function(t){if(t!==this.getHeight()){for(var i=t/this.getHeight(),n=0;n<this.furniture.length;n++){var o=this.furniture[n];o.removePropertyChangeListener(this.furnitureListener),o.setHeight(o.getHeight()*i),o.setElevation(this.getElevation()+(o.getElevation()-this.getElevation())*i),o.addPropertyChangeListener(this.furnitureListener)}e.prototype.setHeight.call(this,t)}},t.prototype.scale=function(t){for(var i=this.getAngle(),n=0;n<this.furniture.length;n++){var o=this.furniture[n];o.removePropertyChangeListener(this.furnitureListener),o.setWidth(o.getWidth()*t),o.setDepth(o.getDepth()*t),o.setHeight(o.getHeight()*t);var r=Math.cos(i),l=Math.sin(i),a=this.getX()+((o.getX()-this.getX())*r+(o.getY()-this.getY())*l),s=this.getY()+((o.getX()-this.getX())*-l+(o.getY()-this.getY())*r);a=this.getX()+(a-this.getX())*t,s=this.getY()+(s-this.getY())*t,o.setX(this.getX()+((a-this.getX())*r-(s-this.getY())*l)),o.setY(this.getY()+((a-this.getX())*l+(s-this.getY())*r)),o.setElevation(this.getElevation()+(o.getElevation()-this.getElevation())*t),o.addPropertyChangeListener(this.furnitureListener)}e.prototype.setWidth.call(this,this.getWidth()*t),e.prototype.setDepth.call(this,this.getDepth()*t),e.prototype.setHeight.call(this,this.getHeight()*t)},t.prototype.setElevation=function(t){if(t!==this.getElevation()){for(var i=t-this.getElevation(),n=0;n<this.furniture.length;n++){var o=this.furniture[n];o.removePropertyChangeListener(this.furnitureListener),o.setElevation(o.getElevation()+i),o.addPropertyChangeListener(this.furnitureListener)}e.prototype.setElevation.call(this,t)}},t.prototype.setModelMirrored=function(t){if(t!==this.isModelMirrored()){for(var i=this.getAngle(),n=0;n<this.furniture.length;n++){var o=this.furniture[n];o.removePropertyChangeListener(this.furnitureListener),o.setModelMirrored(!o.isModelMirrored());var r=Math.cos(i),l=Math.sin(i),a=this.getX()+((o.getX()-this.getX())*r+(o.getY()-this.getY())*l),s=this.getY()+((o.getX()-this.getX())*-l+(o.getY()-this.getY())*r);a=this.getX()-(a-this.getX()),o.setX(this.getX()+((a-this.getX())*r-(s-this.getY())*l)),o.setY(this.getY()+((a-this.getX())*l+(s-this.getY())*r)),o.addPropertyChangeListener(this.furnitureListener)}e.prototype.setModelMirrored.call(this,t)}},t.prototype.setVisible=function(t){for(var i=0;i<this.furniture.length;i++){this.furniture[i].setVisible(t)}e.prototype.setVisible.call(this,t)},t.prototype.setLevel=function(t){for(var i=0;i<this.furniture.length;i++){this.furniture[i].setLevel(t)}e.prototype.setLevel.call(this,t)},t.prototype.intersectsRectangle=function(e,t,i,n){for(var o=0;o<this.furniture.length;o++){if(this.furniture[o].intersectsRectangle(e,t,i,n))return!0}return!1},t.prototype.containsPoint=function(e,t,i){for(var n=0;n<this.furniture.length;n++){if(this.furniture[n].containsPoint(e,t,i))return!0}return!1},t.prototype.duplicate=function(){for(var t=e.prototype.duplicate.call(this),i=[],n=0;n<t.furniture.length;n++){var o=t.furniture[n];o.removePropertyChangeListener(t.furnitureListener);var r=o.duplicate();i.push(r),r.addPropertyChangeListener(t.furnitureListener)}return t.furniture=i.slice(0),t},t.prototype.clone=function(){var t=this,i=function(i){if(null!=e.prototype.clone)return e.prototype.clone.call(t);var n=Object.create(i);for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o]);return n}(this);i.furniture=[];for(var n=0;n<this.furniture.length;n++){var o=this.furniture[n];i.furniture.push(function(e){if(null!=e.clone)return e.clone();var t=Object.create(e);for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}(o))}return i.furniture=i.furniture.slice(0),i.addFurnitureListener(),i},t}(HomePieceOfFurniture);HomeFurnitureGroup.__class="com.eteks.sweethome3d.model.HomeFurnitureGroup",HomeFurnitureGroup.__interfaces=["com.eteks.sweethome3d.model.Selectable","com.eteks.sweethome3d.model.PieceOfFurniture","com.eteks.sweethome3d.model.Elevatable"],function(e){var t=function(){function e(e){void 0===this.group&&(this.group=null),this.group=e}return e.prototype.propertyChange=function(e){var t=this.group;null==t?e.getSource().removePropertyChangeListener(this):"X"!==e.getPropertyName()&&"Y"!==e.getPropertyName()&&"ELEVATION"!==e.getPropertyName()&&"ANGLE"!==e.getPropertyName()&&"WIDTH_IN_PLAN"!==e.getPropertyName()&&"DEPTH_IN_PLAN"!==e.getPropertyName()&&"HEIGHT_IN_PLAN"!==e.getPropertyName()||t.updateLocationAndSize(t.getFurniture(),t.getAngle(),!1)},e}();e.LocationAndSizeChangeListener=t,t.__class="com.eteks.sweethome3d.model.HomeFurnitureGroup.LocationAndSizeChangeListener"}(HomeFurnitureGroup||(HomeFurnitureGroup={})),HomeFurnitureGroup.__transients=["furnitureListener","shapeCache","propertyChangeSupport"];var ObserverCamera=function(e){function t(t,i,n,o,r,l,a){var s=this;if("string"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||"number"!=typeof l&&null!==l||"number"!=typeof a&&null!==a){if("number"!=typeof t&&null!==t||"number"!=typeof i&&null!==i||"number"!=typeof n&&null!==n||"number"!=typeof o&&null!==o||"number"!=typeof r&&null!==r||"number"!=typeof l&&null!==l||void 0!==a)throw new Error("invalid overload");var h=(f=arguments)[0],u=f[1],d=f[2],c=f[3],p=f[4],g=f[5],v=HomeObject.createId("observerCamera");void 0===(s=e.call(this,v,h,u,d,c,p,g)||this).fixedSize&&(s.fixedSize=!1),void 0===s.shapeCache&&(s.shapeCache=null),void 0===s.rectangleShapeCache&&(s.rectangleShapeCache=null),s.planScale=1,void 0===s.fixedSize&&(s.fixedSize=!1),void 0===s.shapeCache&&(s.shapeCache=null),void 0===s.rectangleShapeCache&&(s.rectangleShapeCache=null),s.planScale=1}else{var f=arguments;void 0===(s=e.call(this,t,i,n,o,r,l,a)||this).fixedSize&&(s.fixedSize=!1),void 0===s.shapeCache&&(s.shapeCache=null),void 0===s.rectangleShapeCache&&(s.rectangleShapeCache=null),s.planScale=1}return s}return __extends(t,e),t.prototype.setFixedSize=function(e){if(this.fixedSize!==e){var t=this.getWidth(),i=this.getDepth(),n=this.getHeight();this.fixedSize=e,this.shapeCache=null,this.rectangleShapeCache=null,this.firePropertyChange("WIDTH",t,this.getWidth()),this.firePropertyChange("DEPTH",i,this.getDepth()),this.firePropertyChange("HEIGHT",n,this.getHeight())}},t.prototype.isFixedSize=function(){return this.fixedSize},t.prototype.setPlanScale=function(e){if(this.planScale!==e){var t=this.getWidth(),i=this.getDepth(),n=this.getHeight();this.planScale=e,this.shapeCache=null,this.rectangleShapeCache=null,this.firePropertyChange("WIDTH",t,this.getWidth()),this.firePropertyChange("DEPTH",i,this.getDepth()),this.firePropertyChange("HEIGHT",n,this.getHeight())}},t.prototype.getPlanScale=function(){return this.planScale},t.prototype.setYaw=function(t){e.prototype.setYaw.call(this,t),this.shapeCache=null,this.rectangleShapeCache=null},t.prototype.setX=function(t){e.prototype.setX.call(this,t),this.shapeCache=null,this.rectangleShapeCache=null},t.prototype.setY=function(t){e.prototype.setY.call(this,t),this.shapeCache=null,this.rectangleShapeCache=null},t.prototype.setZ=function(t){var i=this.getWidth(),n=this.getDepth(),o=this.getHeight();e.prototype.setZ.call(this,t),this.shapeCache=null,this.rectangleShapeCache=null,this.firePropertyChange("WIDTH",i,this.getWidth()),this.firePropertyChange("DEPTH",n,this.getDepth()),this.firePropertyChange("HEIGHT",o,this.getHeight())},t.prototype.getWidth=function(){if(this.fixedSize||this.planScale>1)return 46.6*this.planScale;var e=4*this.getZ()/14;return Math.min(Math.max(e,20),62.5)*this.planScale},t.prototype.getDepth=function(){if(this.fixedSize||this.planScale>1)return 18.6*this.planScale;var e=8*this.getZ()/70;return Math.min(Math.max(e,8),25)*this.planScale},t.prototype.getHeight=function(){return this.fixedSize||this.planScale>1?175*this.planScale:15*this.getZ()/14*this.planScale},t.prototype.getPoints=function(){for(var e,t=(e=function(t){if(0===t.length)return 0;for(var i=[],n=0;n<t[0];n++)i.push(e(t.slice(1)));return i})([4,2]),i=this.getRectangleShape().getPathIterator(null),n=0;n<t.length;n++)i.currentSegment(t[n]),i.next();return t},t.prototype.intersectsRectangle=function(e,t,i,n){var o=new java.awt.geom.Rectangle2D.Float(e,t,0,0);return o.add(i,n),this.getShape().intersects(o)},t.prototype.containsPoint=function(e,t,i){return 0===i?this.getShape().contains(e,t):this.getShape().intersects(e-i,t-i,2*i,2*i)},t.prototype.getShape=function(){if(null==this.shapeCache)if(this.planScale<=1){var e=new java.awt.geom.Ellipse2D.Float(this.getX()-this.getWidth()/2,this.getY()-this.getDepth()/2,this.getWidth(),this.getDepth()),t=java.awt.geom.AffineTransform.getRotateInstance(this.getYaw(),this.getX(),this.getY()),i=e.getPathIterator(t),n=new java.awt.geom.GeneralPath;n.append(i,!1),this.shapeCache=n}else this.shapeCache=this.getRectangleShape();return this.shapeCache},t.prototype.getRectangleShape=function(){if(null==this.rectangleShapeCache){var e=new java.awt.geom.Rectangle2D.Float(this.getX()-this.getWidth()/2,this.getY()-this.getDepth()/2,this.getWidth(),this.getDepth()),t=java.awt.geom.AffineTransform.getRotateInstance(this.getYaw(),this.getX(),this.getY()),i=e.getPathIterator(t),n=new java.awt.geom.GeneralPath;n.append(i,!1),this.rectangleShapeCache=n}return this.rectangleShapeCache},t.prototype.move=function(e,t){this.setX(this.getX()+e),this.setY(this.getY()+t)},t.prototype.clone=function(){var t=this;return function(i){if(null!=e.prototype.clone)return e.prototype.clone.call(t);var n=Object.create(i);for(var o in i)i.hasOwnProperty(o)&&(n[o]=i[o]);return n}(this)},t}(Camera);ObserverCamera.__class="com.eteks.sweethome3d.model.ObserverCamera",ObserverCamera.__interfaces=["com.eteks.sweethome3d.model.Selectable"],ObserverCamera.__transients=["planScale","shapeCache","rectangleShapeCache","lens","propertyChangeSupport"];var Home=function(){function e(t,i){if(!(null!=t&&t instanceof Array||null===t)||"number"!=typeof i&&null!==i)if((null!=t&&t instanceof Array||null===t)&&void 0===i){void 0===this.furniture&&(this.furniture=null),void 0===this.furnitureChangeSupport&&(this.furnitureChangeSupport=null),void 0===this.selectedItems&&(this.selectedItems=null),void 0===this.selectionListeners&&(this.selectionListeners=null),void 0===this.allLevelsSelection&&(this.allLevelsSelection=!1),void 0===this.levels&&(this.levels=null),void 0===this.selectedLevel&&(this.selectedLevel=null),void 0===this.levelsChangeSupport&&(this.levelsChangeSupport=null),void 0===this.walls&&(this.walls=null),void 0===this.wallsChangeSupport&&(this.wallsChangeSupport=null),void 0===this.rooms&&(this.rooms=null),void 0===this.roomsChangeSupport&&(this.roomsChangeSupport=null),void 0===this.polylines&&(this.polylines=null),void 0===this.polylinesChangeSupport&&(this.polylinesChangeSupport=null),void 0===this.dimensionLines&&(this.dimensionLines=null),void 0===this.dimensionLinesChangeSupport&&(this.dimensionLinesChangeSupport=null),void 0===this.labels&&(this.labels=null),void 0===this.labelsChangeSupport&&(this.labelsChangeSupport=null),void 0===this.camera&&(this.camera=null),void 0===this.name&&(this.name=null),void 0===this.wallHeight&&(this.wallHeight=0),void 0===this.modified&&(this.modified=!1),void 0===this.recovered&&(this.recovered=!1),void 0===this.repaired&&(this.repaired=!1),void 0===this.backgroundImage&&(this.backgroundImage=null),void 0===this.observerCamera&&(this.observerCamera=null),void 0===this.topCamera&&(this.topCamera=null),void 0===this.storedCameras&&(this.storedCameras=null),void 0===this.environment&&(this.environment=null),void 0===this.print&&(this.print=null),void 0===this.furnitureSortedPropertyName&&(this.furnitureSortedPropertyName=null),void 0===this.furnitureVisiblePropertyNames&&(this.furnitureVisiblePropertyNames=null),void 0===this.furnitureDescendingSorted&&(this.furnitureDescendingSorted=!1),void 0===this.visualProperties&&(this.visualProperties=null),void 0===this.properties&&(this.properties=null),void 0===this.propertyChangeSupport&&(this.propertyChangeSupport=null),void 0===this.version&&(this.version=0),void 0===this.basePlanLocked&&(this.basePlanLocked=!1),void 0===this.compass&&(this.compass=null),void 0===this.furnitureAdditionalProperties&&(this.furnitureAdditionalProperties=null),void 0===this.skyColor&&(this.skyColor=0),void 0===this.groundColor&&(this.groundColor=0),void 0===this.groundTexture&&(this.groundTexture=null),void 0===this.lightColor&&(this.lightColor=0),void 0===this.wallsAlpha&&(this.wallsAlpha=0),void 0===this.furnitureSortedProperty&&(this.furnitureSortedProperty=null),void 0===this.furnitureVisibleProperties&&(this.furnitureVisibleProperties=null),void 0===this.furnitureWithDoorsAndWindows&&(this.furnitureWithDoorsAndWindows=null),void 0===this.furnitureWithGroups&&(this.furnitureWithGroups=null),this.furniture=t.slice(0),this.walls=[],this.wallHeight=250,this.furnitureVisibleProperties=["NAME","WIDTH","DEPTH","HEIGHT","VISIBLE"].slice(0),this.furnitureVisiblePropertyNames=[];for(r=0;r<this.furnitureVisibleProperties.length;r++){l=this.furnitureVisibleProperties[r];this.furnitureVisiblePropertyNames.push(l)}this.init(!0),this.addModelListeners(),void 0===this.furniture&&(this.furniture=null),void 0===this.furnitureChangeSupport&&(this.furnitureChangeSupport=null),void 0===this.selectedItems&&(this.selectedItems=null),void 0===this.selectionListeners&&(this.selectionListeners=null),void 0===this.allLevelsSelection&&(this.allLevelsSelection=!1),void 0===this.levels&&(this.levels=null),void 0===this.selectedLevel&&(this.selectedLevel=null),void 0===this.levelsChangeSupport&&(this.levelsChangeSupport=null),void 0===this.walls&&(this.walls=null),void 0===this.wallsChangeSupport&&(this.wallsChangeSupport=null),void 0===this.rooms&&(this.rooms=null),void 0===this.roomsChangeSupport&&(this.roomsChangeSupport=null),void 0===this.polylines&&(this.polylines=null),void 0===this.polylinesChangeSupport&&(this.polylinesChangeSupport=null),void 0===this.dimensionLines&&(this.dimensionLines=null),void 0===this.dimensionLinesChangeSupport&&(this.dimensionLinesChangeSupport=null),void 0===this.labels&&(this.labels=null),void 0===this.labelsChangeSupport&&(this.labelsChangeSupport=null),void 0===this.camera&&(this.camera=null),void 0===this.name&&(this.name=null),void 0===this.wallHeight&&(this.wallHeight=0),void 0===this.modified&&(this.modified=!1),void 0===this.recovered&&(this.recovered=!1),void 0===this.repaired&&(this.repaired=!1),void 0===this.backgroundImage&&(this.backgroundImage=null),void 0===this.observerCamera&&(this.observerCamera=null),void 0===this.topCamera&&(this.topCamera=null),void 0===this.storedCameras&&(this.storedCameras=null),void 0===this.environment&&(this.environment=null),void 0===this.print&&(this.print=null),void 0===this.furnitureSortedPropertyName&&(this.furnitureSortedPropertyName=null),void 0===this.furnitureVisiblePropertyNames&&(this.furnitureVisiblePropertyNames=null),void 0===this.furnitureDescendingSorted&&(this.furnitureDescendingSorted=!1),void 0===this.visualProperties&&(this.visualProperties=null),void 0===this.properties&&(this.properties=null),void 0===this.propertyChangeSupport&&(this.propertyChangeSupport=null),void 0===this.version&&(this.version=0),void 0===this.basePlanLocked&&(this.basePlanLocked=!1),void 0===this.compass&&(this.compass=null),void 0===this.furnitureAdditionalProperties&&(this.furnitureAdditionalProperties=null),void 0===this.skyColor&&(this.skyColor=0),void 0===this.groundColor&&(this.groundColor=0),void 0===this.groundTexture&&(this.groundTexture=null),void 0===this.lightColor&&(this.lightColor=0),void 0===this.wallsAlpha&&(this.wallsAlpha=0),void 0===this.furnitureSortedProperty&&(this.furnitureSortedProperty=null),void 0===this.furnitureVisibleProperties&&(this.furnitureVisibleProperties=null),void 0===this.furnitureWithDoorsAndWindows&&(this.furnitureWithDoorsAndWindows=null),void 0===this.furnitureWithGroups&&(this.furnitureWithGroups=null)}else if((null!=t&&t instanceof e||null===t)&&void 0===i){var n=arguments[0];void 0===this.furniture&&(this.furniture=null),void 0===this.furnitureChangeSupport&&(this.furnitureChangeSupport=null),void 0===this.selectedItems&&(this.selectedItems=null),void 0===this.selectionListeners&&(this.selectionListeners=null),void 0===this.allLevelsSelection&&(this.allLevelsSelection=!1),void 0===this.levels&&(this.levels=null),void 0===this.selectedLevel&&(this.selectedLevel=null),void 0===this.levelsChangeSupport&&(this.levelsChangeSupport=null),void 0===this.walls&&(this.walls=null),void 0===this.wallsChangeSupport&&(this.wallsChangeSupport=null),void 0===this.rooms&&(this.rooms=null),void 0===this.roomsChangeSupport&&(this.roomsChangeSupport=null),void 0===this.polylines&&(this.polylines=null),void 0===this.polylinesChangeSupport&&(this.polylinesChangeSupport=null),void 0===this.dimensionLines&&(this.dimensionLines=null),void 0===this.dimensionLinesChangeSupport&&(this.dimensionLinesChangeSupport=null),void 0===this.labels&&(this.labels=null),void 0===this.labelsChangeSupport&&(this.labelsChangeSupport=null),void 0===this.camera&&(this.camera=null),void 0===this.name&&(this.name=null),void 0===this.wallHeight&&(this.wallHeight=0),void 0===this.modified&&(this.modified=!1),void 0===this.recovered&&(this.recovered=!1),void 0===this.repaired&&(this.repaired=!1),void 0===this.backgroundImage&&(this.backgroundImage=null),void 0===this.observerCamera&&(this.observerCamera=null),void 0===this.topCamera&&(this.topCamera=null),void 0===this.storedCameras&&(this.storedCameras=null),void 0===this.environment&&(this.environment=null),void 0===this.print&&(this.print=null),void 0===this.furnitureSortedPropertyName&&(this.furnitureSortedPropertyName=null),void 0===this.furnitureVisiblePropertyNames&&(this.furnitureVisiblePropertyNames=null),void 0===this.furnitureDescendingSorted&&(this.furnitureDescendingSorted=!1),void 0===this.visualProperties&&(this.visualProperties=null),void 0===this.properties&&(this.properties=null),void 0===this.propertyChangeSupport&&(this.propertyChangeSupport=null),void 0===this.version&&(this.version=0),void 0===this.basePlanLocked&&(this.basePlanLocked=!1),void 0===this.compass&&(this.compass=null),void 0===this.furnitureAdditionalProperties&&(this.furnitureAdditionalProperties=null),void 0===this.skyColor&&(this.skyColor=0),void 0===this.groundColor&&(this.groundColor=0),void 0===this.groundTexture&&(this.groundTexture=null),void 0===this.lightColor&&(this.lightColor=0),void 0===this.wallsAlpha&&(this.wallsAlpha=0),void 0===this.furnitureSortedProperty&&(this.furnitureSortedProperty=null),void 0===this.furnitureVisibleProperties&&(this.furnitureVisibleProperties=null),void 0===this.furnitureWithDoorsAndWindows&&(this.furnitureWithDoorsAndWindows=null),void 0===this.furnitureWithGroups&&(this.furnitureWithGroups=null),this.wallHeight=n.getWallHeight(),e.copyHomeData(n,this),e.initListenersSupport(this),this.addModelListeners()}else if("number"!=typeof t&&null!==t||void 0!==i){if(void 0!==t||void 0!==i)throw new Error("invalid overload");void 0===this.furniture&&(this.furniture=null),void 0===this.furnitureChangeSupport&&(this.furnitureChangeSupport=null),void 0===this.selectedItems&&(this.selectedItems=null),void 0===this.selectionListeners&&(this.selectionListeners=null),void 0===this.allLevelsSelection&&(this.allLevelsSelection=!1),void 0===this.levels&&(this.levels=null),void 0===this.selectedLevel&&(this.selectedLevel=null),void 0===this.levelsChangeSupport&&(this.levelsChangeSupport=null),void 0===this.walls&&(this.walls=null),void 0===this.wallsChangeSupport&&(this.wallsChangeSupport=null),void 0===this.rooms&&(this.rooms=null),void 0===this.roomsChangeSupport&&(this.roomsChangeSupport=null),void 0===this.polylines&&(this.polylines=null),void 0===this.polylinesChangeSupport&&(this.polylinesChangeSupport=null),void 0===this.dimensionLines&&(this.dimensionLines=null),void 0===this.dimensionLinesChangeSupport&&(this.dimensionLinesChangeSupport=null),void 0===this.labels&&(this.labels=null),void 0===this.labelsChangeSupport&&(this.labelsChangeSupport=null),void 0===this.camera&&(this.camera=null),void 0===this.name&&(this.name=null),void 0===this.wallHeight&&(this.wallHeight=0),void 0===this.modified&&(this.modified=!1),void 0===this.recovered&&(this.recovered=!1),void 0===this.repaired&&(this.repaired=!1),void 0===this.backgroundImage&&(this.backgroundImage=null),void 0===this.observerCamera&&(this.observerCamera=null),void 0===this.topCamera&&(this.topCamera=null),void 0===this.storedCameras&&(this.storedCameras=null),void 0===this.environment&&(this.environment=null),void 0===this.print&&(this.print=null),void 0===this.furnitureSortedPropertyName&&(this.furnitureSortedPropertyName=null),void 0===this.furnitureVisiblePropertyNames&&(this.furnitureVisiblePropertyNames=null),void 0===this.furnitureDescendingSorted&&(this.furnitureDescendingSorted=!1),void 0===this.visualProperties&&(this.visualProperties=null),void 0===this.properties&&(this.properties=null),void 0===this.propertyChangeSupport&&(this.propertyChangeSupport=null),void 0===this.version&&(this.version=0),void 0===this.basePlanLocked&&(this.basePlanLocked=!1),void 0===this.compass&&(this.compass=null),void 0===this.furnitureAdditionalProperties&&(this.furnitureAdditionalProperties=null),void 0===this.skyColor&&(this.skyColor=0),void 0===this.groundColor&&(this.groundColor=0),void 0===this.groundTexture&&(this.groundTexture=null),void 0===this.lightColor&&(this.lightColor=0),void 0===this.wallsAlpha&&(this.wallsAlpha=0),void 0===this.furnitureSortedProperty&&(this.furnitureSortedProperty=null),void 0===this.furnitureVisibleProperties&&(this.furnitureVisibleProperties=null),void 0===this.furnitureWithDoorsAndWindows&&(this.furnitureWithDoorsAndWindows=null),void 0===this.furnitureWithGroups&&(this.furnitureWithGroups=null),this.furniture=[].slice(0),this.walls=[],this.wallHeight=250,this.furnitureVisibleProperties=["NAME","WIDTH","DEPTH","HEIGHT","VISIBLE"].slice(0),this.furnitureVisiblePropertyNames=[];for(r=0;r<this.furnitureVisibleProperties.length;r++){l=this.furnitureVisibleProperties[r];this.furnitureVisiblePropertyNames.push(l)}this.init(!0),this.addModelListeners(),void 0===this.furniture&&(this.furniture=null),void 0===this.furnitureChangeSupport&&(this.furnitureChangeSupport=null),void 0===this.selectedItems&&(this.selectedItems=null),void 0===this.selectionListeners&&(this.selectionListeners=null),void 0===this.allLevelsSelection&&(this.allLevelsSelection=!1),void 0===this.levels&&(this.levels=null),void 0===this.selectedLevel&&(this.selectedLevel=null),void 0===this.levelsChangeSupport&&(this.levelsChangeSupport=null),void 0===this.walls&&(this.walls=null),void 0===this.wallsChangeSupport&&(this.wallsChangeSupport=null),void 0===this.rooms&&(this.rooms=null),void 0===this.roomsChangeSupport&&(this.roomsChangeSupport=null),void 0===this.polylines&&(this.polylines=null),void 0===this.polylinesChangeSupport&&(this.polylinesChangeSupport=null),void 0===this.dimensionLines&&(this.dimensionLines=null),void 0===this.dimensionLinesChangeSupport&&(this.dimensionLinesChangeSupport=null),void 0===this.labels&&(this.labels=null),void 0===this.labelsChangeSupport&&(this.labelsChangeSupport=null),void 0===this.camera&&(this.camera=null),void 0===this.name&&(this.name=null),void 0===this.wallHeight&&(this.wallHeight=0),void 0===this.modified&&(this.modified=!1),void 0===this.recovered&&(this.recovered=!1),void 0===this.repaired&&(this.repaired=!1),void 0===this.backgroundImage&&(this.backgroundImage=null),void 0===this.observerCamera&&(this.observerCamera=null),void 0===this.topCamera&&(this.topCamera=null),void 0===this.storedCameras&&(this.storedCameras=null),void 0===this.environment&&(this.environment=null),void 0===this.print&&(this.print=null),void 0===this.furnitureSortedPropertyName&&(this.furnitureSortedPropertyName=null),void 0===this.furnitureVisiblePropertyNames&&(this.furnitureVisiblePropertyNames=null),void 0===this.furnitureDescendingSorted&&(this.furnitureDescendingSorted=!1),void 0===this.visualProperties&&(this.visualProperties=null),void 0===this.properties&&(this.properties=null),void 0===this.propertyChangeSupport&&(this.propertyChangeSupport=null),void 0===this.version&&(this.version=0),void 0===this.basePlanLocked&&(this.basePlanLocked=!1),void 0===this.compass&&(this.compass=null),void 0===this.furnitureAdditionalProperties&&(this.furnitureAdditionalProperties=null),void 0===this.skyColor&&(this.skyColor=0),void 0===this.groundColor&&(this.groundColor=0),void 0===this.groundTexture&&(this.groundTexture=null),void 0===this.lightColor&&(this.lightColor=0),void 0===this.wallsAlpha&&(this.wallsAlpha=0),void 0===this.furnitureSortedProperty&&(this.furnitureSortedProperty=null),void 0===this.furnitureVisibleProperties&&(this.furnitureVisibleProperties=null),void 0===this.furnitureWithDoorsAndWindows&&(this.furnitureWithDoorsAndWindows=null),void 0===this.furnitureWithGroups&&(this.furnitureWithGroups=null),void 0===this.furniture&&(this.furniture=null),void 0===this.furnitureChangeSupport&&(this.furnitureChangeSupport=null),void 0===this.selectedItems&&(this.selectedItems=null),void 0===this.selectionListeners&&(this.selectionListeners=null),void 0===this.allLevelsSelection&&(this.allLevelsSelection=!1),void 0===this.levels&&(this.levels=null),void 0===this.selectedLevel&&(this.selectedLevel=null),void 0===this.levelsChangeSupport&&(this.levelsChangeSupport=null),void 0===this.walls&&(this.walls=null),void 0===this.wallsChangeSupport&&(this.wallsChangeSupport=null),void 0===this.rooms&&(this.rooms=null),void 0===this.roomsChangeSupport&&(this.roomsChangeSupport=null),void 0===this.polylines&&(this.polylines=null),void 0===this.polylinesChangeSupport&&(this.polylinesChangeSupport=null),void 0===this.dimensionLines&&(this.dimensionLines=null),void 0===this.dimensionLinesChangeSupport&&(this.dimensionLinesChangeSupport=null),void 0===this.labels&&(this.labels=null),void 0===this.labelsChangeSupport&&(this.labelsChangeSupport=null),void 0===this.camera&&(this.camera=null),void 0===this.name&&(this.name=null),void 0===this.wallHeight&&(this.wallHeight=0),void 0===this.modified&&(this.modified=!1),void 0===this.recovered&&(this.recovered=!1),void 0===this.repaired&&(this.repaired=!1),void 0===this.backgroundImage&&(this.backgroundImage=null),void 0===this.observerCamera&&(this.observerCamera=null),void 0===this.topCamera&&(this.topCamera=null),void 0===this.storedCameras&&(this.storedCameras=null),void 0===this.environment&&(this.environment=null),void 0===this.print&&(this.print=null),void 0===this.furnitureSortedPropertyName&&(this.furnitureSortedPropertyName=null),void 0===this.furnitureVisiblePropertyNames&&(this.furnitureVisiblePropertyNames=null),void 0===this.furnitureDescendingSorted&&(this.furnitureDescendingSorted=!1),void 0===this.visualProperties&&(this.visualProperties=null),void 0===this.properties&&(this.properties=null),void 0===this.propertyChangeSupport&&(this.propertyChangeSupport=null),void 0===this.version&&(this.version=0),void 0===this.basePlanLocked&&(this.basePlanLocked=!1),void 0===this.compass&&(this.compass=null),void 0===this.furnitureAdditionalProperties&&(this.furnitureAdditionalProperties=null),void 0===this.skyColor&&(this.skyColor=0),void 0===this.groundColor&&(this.groundColor=0),void 0===this.groundTexture&&(this.groundTexture=null),void 0===this.lightColor&&(this.lightColor=0),void 0===this.wallsAlpha&&(this.wallsAlpha=0),void 0===this.furnitureSortedProperty&&(this.furnitureSortedProperty=null),void 0===this.furnitureVisibleProperties&&(this.furnitureVisibleProperties=null),void 0===this.furnitureWithDoorsAndWindows&&(this.furnitureWithDoorsAndWindows=null),void 0===this.furnitureWithGroups&&(this.furnitureWithGroups=null)}else{var o=arguments[0];void 0===this.furniture&&(this.furniture=null),void 0===this.furnitureChangeSupport&&(this.furnitureChangeSupport=null),void 0===this.selectedItems&&(this.selectedItems=null),void 0===this.selectionListeners&&(this.selectionListeners=null),void 0===this.allLevelsSelection&&(this.allLevelsSelection=!1),void 0===this.levels&&(this.levels=null),void 0===this.selectedLevel&&(this.selectedLevel=null),void 0===this.levelsChangeSupport&&(this.levelsChangeSupport=null),void 0===this.walls&&(this.walls=null),void 0===this.wallsChangeSupport&&(this.wallsChangeSupport=null),void 0===this.rooms&&(this.rooms=null),void 0===this.roomsChangeSupport&&(this.roomsChangeSupport=null),void 0===this.polylines&&(this.polylines=null),void 0===this.polylinesChangeSupport&&(this.polylinesChangeSupport=null),void 0===this.dimensionLines&&(this.dimensionLines=null),void 0===this.dimensionLinesChangeSupport&&(this.dimensionLinesChangeSupport=null),void 0===this.labels&&(this.labels=null),void 0===this.labelsChangeSupport&&(this.labelsChangeSupport=null),void 0===this.camera&&(this.camera=null),void 0===this.name&&(this.name=null),void 0===this.wallHeight&&(this.wallHeight=0),void 0===this.modified&&(this.modified=!1),void 0===this.recovered&&(this.recovered=!1),void 0===this.repaired&&(this.repaired=!1),void 0===this.backgroundImage&&(this.backgroundImage=null),void 0===this.observerCamera&&(this.observerCamera=null),void 0===this.topCamera&&(this.topCamera=null),void 0===this.storedCameras&&(this.storedCameras=null),void 0===this.environment&&(this.environment=null),void 0===this.print&&(this.print=null),void 0===this.furnitureSortedPropertyName&&(this.furnitureSortedPropertyName=null),void 0===this.furnitureVisiblePropertyNames&&(this.furnitureVisiblePropertyNames=null),void 0===this.furnitureDescendingSorted&&(this.furnitureDescendingSorted=!1),void 0===this.visualProperties&&(this.visualProperties=null),void 0===this.properties&&(this.properties=null),void 0===this.propertyChangeSupport&&(this.propertyChangeSupport=null),void 0===this.version&&(this.version=0),void 0===this.basePlanLocked&&(this.basePlanLocked=!1),void 0===this.compass&&(this.compass=null),void 0===this.furnitureAdditionalProperties&&(this.furnitureAdditionalProperties=null),void 0===this.skyColor&&(this.skyColor=0),void 0===this.groundColor&&(this.groundColor=0),void 0===this.groundTexture&&(this.groundTexture=null),void 0===this.lightColor&&(this.lightColor=0),void 0===this.wallsAlpha&&(this.wallsAlpha=0),void 0===this.furnitureSortedProperty&&(this.furnitureSortedProperty=null),void 0===this.furnitureVisibleProperties&&(this.furnitureVisibleProperties=null),void 0===this.furnitureWithDoorsAndWindows&&(this.furnitureWithDoorsAndWindows=null),void 0===this.furnitureWithGroups&&(this.furnitureWithGroups=null),this.furniture=[].slice(0),this.walls=[],this.wallHeight=o,this.furnitureVisibleProperties=["NAME","WIDTH","DEPTH","HEIGHT","VISIBLE"].slice(0),this.furnitureVisiblePropertyNames=[];for(var r=0;r<this.furnitureVisibleProperties.length;r++){var l=this.furnitureVisibleProperties[r];this.furnitureVisiblePropertyNames.push(l)}this.init(!0),this.addModelListeners(),void 0===this.furniture&&(this.furniture=null),void 0===this.furnitureChangeSupport&&(this.furnitureChangeSupport=null),void 0===this.selectedItems&&(this.selectedItems=null),void 0===this.selectionListeners&&(this.selectionListeners=null),void 0===this.allLevelsSelection&&(this.allLevelsSelection=!1),void 0===this.levels&&(this.levels=null),void 0===this.selectedLevel&&(this.selectedLevel=null),void 0===this.levelsChangeSupport&&(this.levelsChangeSupport=null),void 0===this.walls&&(this.walls=null),void 0===this.wallsChangeSupport&&(this.wallsChangeSupport=null),void 0===this.rooms&&(this.rooms=null),void 0===this.roomsChangeSupport&&(this.roomsChangeSupport=null),void 0===this.polylines&&(this.polylines=null),void 0===this.polylinesChangeSupport&&(this.polylinesChangeSupport=null),void 0===this.dimensionLines&&(this.dimensionLines=null),void 0===this.dimensionLinesChangeSupport&&(this.dimensionLinesChangeSupport=null),void 0===this.labels&&(this.labels=null),void 0===this.labelsChangeSupport&&(this.labelsChangeSupport=null),void 0===this.camera&&(this.camera=null),void 0===this.name&&(this.name=null),void 0===this.wallHeight&&(this.wallHeight=0),void 0===this.modified&&(this.modified=!1),void 0===this.recovered&&(this.recovered=!1),void 0===this.repaired&&(this.repaired=!1),void 0===this.backgroundImage&&(this.backgroundImage=null),void 0===this.observerCamera&&(this.observerCamera=null),void 0===this.topCamera&&(this.topCamera=null),void 0===this.storedCameras&&(this.storedCameras=null),void 0===this.environment&&(this.environment=null),void 0===this.print&&(this.print=null),void 0===this.furnitureSortedPropertyName&&(this.furnitureSortedPropertyName=null),void 0===this.furnitureVisiblePropertyNames&&(this.furnitureVisiblePropertyNames=null),void 0===this.furnitureDescendingSorted&&(this.furnitureDescendingSorted=!1),void 0===this.visualProperties&&(this.visualProperties=null),void 0===this.properties&&(this.properties=null),void 0===this.propertyChangeSupport&&(this.propertyChangeSupport=null),void 0===this.version&&(this.version=0),void 0===this.basePlanLocked&&(this.basePlanLocked=!1),void 0===this.compass&&(this.compass=null),void 0===this.furnitureAdditionalProperties&&(this.furnitureAdditionalProperties=null),void 0===this.skyColor&&(this.skyColor=0),void 0===this.groundColor&&(this.groundColor=0),void 0===this.groundTexture&&(this.groundTexture=null),void 0===this.lightColor&&(this.lightColor=0),void 0===this.wallsAlpha&&(this.wallsAlpha=0),void 0===this.furnitureSortedProperty&&(this.furnitureSortedProperty=null),void 0===this.furnitureVisibleProperties&&(this.furnitureVisibleProperties=null),void 0===this.furnitureWithDoorsAndWindows&&(this.furnitureWithDoorsAndWindows=null),void 0===this.furnitureWithGroups&&(this.furnitureWithGroups=null)}else{void 0===this.furniture&&(this.furniture=null),void 0===this.furnitureChangeSupport&&(this.furnitureChangeSupport=null),void 0===this.selectedItems&&(this.selectedItems=null),void 0===this.selectionListeners&&(this.selectionListeners=null),void 0===this.allLevelsSelection&&(this.allLevelsSelection=!1),void 0===this.levels&&(this.levels=null),void 0===this.selectedLevel&&(this.selectedLevel=null),void 0===this.levelsChangeSupport&&(this.levelsChangeSupport=null),void 0===this.walls&&(this.walls=null),void 0===this.wallsChangeSupport&&(this.wallsChangeSupport=null),void 0===this.rooms&&(this.rooms=null),void 0===this.roomsChangeSupport&&(this.roomsChangeSupport=null),void 0===this.polylines&&(this.polylines=null),void 0===this.polylinesChangeSupport&&(this.polylinesChangeSupport=null),void 0===this.dimensionLines&&(this.dimensionLines=null),void 0===this.dimensionLinesChangeSupport&&(this.dimensionLinesChangeSupport=null),void 0===this.labels&&(this.labels=null),void 0===this.labelsChangeSupport&&(this.labelsChangeSupport=null),void 0===this.camera&&(this.camera=null),void 0===this.name&&(this.name=null),void 0===this.wallHeight&&(this.wallHeight=0),void 0===this.modified&&(this.modified=!1),void 0===this.recovered&&(this.recovered=!1),void 0===this.repaired&&(this.repaired=!1),void 0===this.backgroundImage&&(this.backgroundImage=null),void 0===this.observerCamera&&(this.observerCamera=null),void 0===this.topCamera&&(this.topCamera=null),void 0===this.storedCameras&&(this.storedCameras=null),void 0===this.environment&&(this.environment=null),void 0===this.print&&(this.print=null),void 0===this.furnitureSortedPropertyName&&(this.furnitureSortedPropertyName=null),void 0===this.furnitureVisiblePropertyNames&&(this.furnitureVisiblePropertyNames=null),void 0===this.furnitureDescendingSorted&&(this.furnitureDescendingSorted=!1),void 0===this.visualProperties&&(this.visualProperties=null),void 0===this.properties&&(this.properties=null),void 0===this.propertyChangeSupport&&(this.propertyChangeSupport=null),void 0===this.version&&(this.version=0),void 0===this.basePlanLocked&&(this.basePlanLocked=!1),void 0===this.compass&&(this.compass=null),void 0===this.furnitureAdditionalProperties&&(this.furnitureAdditionalProperties=null),void 0===this.skyColor&&(this.skyColor=0),void 0===this.groundColor&&(this.groundColor=0),void 0===this.groundTexture&&(this.groundTexture=null),void 0===this.lightColor&&(this.lightColor=0),void 0===this.wallsAlpha&&(this.wallsAlpha=0),void 0===this.furnitureSortedProperty&&(this.furnitureSortedProperty=null),void 0===this.furnitureVisibleProperties&&(this.furnitureVisibleProperties=null),void 0===this.furnitureWithDoorsAndWindows&&(this.furnitureWithDoorsAndWindows=null),void 0===this.furnitureWithGroups&&(this.furnitureWithGroups=null),this.furniture=t.slice(0),this.walls=[],this.wallHeight=i,this.furnitureVisibleProperties=["NAME","WIDTH","DEPTH","HEIGHT","VISIBLE"].slice(0),this.furnitureVisiblePropertyNames=[];for(var r=0;r<this.furnitureVisibleProperties.length;r++){var l=this.furnitureVisibleProperties[r];this.furnitureVisiblePropertyNames.push(l)}this.init(!0),this.addModelListeners()}}return e.LEVEL_ELEVATION_COMPARATOR_$LI$=function(){return null==e.LEVEL_ELEVATION_COMPARATOR&&(e.LEVEL_ELEVATION_COMPARATOR=function(e,t){var i=e.getElevation()-t.getElevation();return 0!==i?i:e.getElevationIndex()-t.getElevationIndex()}),e.LEVEL_ELEVATION_COMPARATOR},e.prototype.moveVisualProperty=function(e){var t,i,n=this;if(this.visualProperties.hasOwnProperty(e)){var o=void 0===(t=this.visualProperties)[i=e]?null:t[i];this.properties[e]=null!=o?String(o).toString():null,function(t){var i=n.visualProperties[e];delete n.visualProperties[e]}(this.visualProperties)}},e.prototype.init=function(t){this.selectedItems=[],e.initListenersSupport(this),null==this.furnitureVisibleProperties&&(this.furnitureVisibleProperties=["NAME","WIDTH","DEPTH","HEIGHT","COLOR","MOVABLE","DOOR_OR_WINDOW","VISIBLE"].slice(0)),this.topCamera=new Camera(e.HOME_TOP_CAMERA_ID,50,1050,1010,Math.PI,Math.PI/4,63*Math.PI/180),this.observerCamera=new ObserverCamera(e.HOME_OBSERVER_CAMERA_ID,50,50,170,7*Math.PI/4,Math.PI/16,63*Math.PI/180),this.storedCameras=[],this.environment=new HomeEnvironment(e.HOME_ENVIRONMENT_ID),this.rooms=[],this.polylines=[],this.dimensionLines=[],this.labels=[],this.compass=new Compass(e.HOME_COMPASS_ID,-100,50,100),this.levels=[],this.compass.setVisible(t),this.visualProperties={},this.properties={},this.furnitureAdditionalProperties=[],this.version=e.CURRENT_VERSION},e.initListenersSupport=function(e){e.furnitureChangeSupport=new CollectionChangeSupport(e),e.selectionListeners=[],e.levelsChangeSupport=new CollectionChangeSupport(e),e.wallsChangeSupport=new CollectionChangeSupport(e),e.roomsChangeSupport=new CollectionChangeSupport(e),e.polylinesChangeSupport=new CollectionChangeSupport(e),e.dimensionLinesChangeSupport=new CollectionChangeSupport(e),e.labelsChangeSupport=new CollectionChangeSupport(e),e.propertyChangeSupport=new PropertyChangeSupport(e)},e.prototype.addModelListeners=function(){for(var t=new e.Home$0(this),i=0;i<this.levels.length;i++){this.levels[i].addPropertyChangeListener(t)}this.addLevelsListener((function(e){switch(e.getType()){case CollectionEvent.Type.ADD:e.getItem().addPropertyChangeListener(t);break;case CollectionEvent.Type.DELETE:e.getItem().removePropertyChangeListener(t)}}))},e.prototype.isFurnitureSortedPropertyBackwardCompatible=function(e){if(null==e)return!1;switch(e){case"NAME":case"WIDTH":case"DEPTH":case"HEIGHT":case"MOVABLE":case"DOOR_OR_WINDOW":case"COLOR":case"VISIBLE":case"X":case"Y":case"ELEVATION":case"ANGLE":return!0;default:return!1}},e.prototype.getGroupFurniture=function(e){for(var t,i,n=[],o=e.getFurniture(),r=0;r<o.length;r++){var l=o[r];null!=l&&l instanceof HomeFurnitureGroup?(t=n,i=this.getGroupFurniture(l),t.push.apply(t,i)):n.push(l)}return n},e.prototype.addLevelsListener=function(e){var t;this.levelsChangeSupport.addCollectionListener(null==(t=e)||"function"==typeof t?t:function(e){return(t.collectionChanged?t.collectionChanged:t).call(t,e)})},e.prototype.removeLevelsListener=function(e){var t;this.levelsChangeSupport.removeCollectionListener(null==(t=e)||"function"==typeof t?t:function(e){return(t.collectionChanged?t.collectionChanged:t).call(t,e)})},e.prototype.getLevels=function(){return this.levels.slice(0)},e.prototype.addLevel=function(t){if(t.getElevationIndex()<0){for(var i=0,n=0;n<this.levels.length;n++){var o=this.levels[n];if(o.getElevation()===t.getElevation())i=o.getElevationIndex()+1;else if(o.getElevation()>t.getElevation())break}t.setElevationIndex(i)}this.levels=this.levels.slice(0);var r,l=function(e,t,i){var n=i;"function"!=typeof i&&(n=function(e,t){return i.compare(e,t)});for(var o=0,r=e.length-1;o<=r;){var l=o+r>>>1,a=n(e[l],t);if(a<0)o=l+1;else{if(!(a>0))return l;r=l-1}}return-(o+1)}(this.levels,t,e.LEVEL_ELEVATION_COMPARATOR_$LI$());r=l>=0?l:-(l+1),this.levels.splice(r,0,t),this.levelsChangeSupport.fireCollectionChanged(t,r,CollectionEvent.Type.ADD)},e.prototype.deleteLevel=function(e){var t,i,n=this.levels.indexOf(e);if(-1!==n){for(var o=0;o<this.furniture.length;o++){var r=this.furniture[o];r.getLevel()===e&&this.deletePieceOfFurniture(r)}for(o=0;o<this.rooms.length;o++){var l=this.rooms[o];l.getLevel()===e&&this.deleteRoom(l)}for(o=0;o<this.walls.length;o++){var a=this.walls[o];a.getLevel()===e&&this.deleteWall(a)}for(o=0;o<this.polylines.length;o++){var s=this.polylines[o];s.getLevel()===e&&this.deletePolyline(s)}for(o=0;o<this.dimensionLines.length;o++){var h=this.dimensionLines[o];h.getLevel()===e&&this.deleteDimensionLine(h)}for(o=0;o<this.labels.length;o++){var u=this.labels[o];u.getLevel()===e&&this.deleteLabel(u)}if(this.selectedLevel===e&&(1===this.levels.length?(this.setSelectedLevel(null),this.setAllLevelsSelection(!1)):this.setSelectedLevel(this.levels[n>=1?n-1:n+1])),null!=this.print&&null!=this.print.getPrintedLevels()){var d=this.print.getPrintedLevels().slice(0);(i=(t=d).indexOf(e))>=0&&(t.splice(i,1),1)&&(this.print=new HomePrint(this.print.getPaperOrientation(),this.print.getPaperWidth(),this.print.getPaperHeight(),this.print.getPaperTopMargin(),this.print.getPaperLeftMargin(),this.print.getPaperBottomMargin(),this.print.getPaperRightMargin(),this.print.isFurniturePrinted(),this.print.isPlanPrinted(),d,this.print.isView3DPrinted(),this.print.getPlanScale(),this.print.getHeaderFormat(),this.print.getFooterFormat()))}this.levels=this.levels.slice(0),this.levels.splice(n,1)[0],this.levelsChangeSupport.fireCollectionChanged(e,n,CollectionEvent.Type.DELETE)}},e.prototype.getSelectedLevel=function(){return this.selectedLevel},e.prototype.setSelectedLevel=function(e){if(e!==this.selectedLevel){var t=this.selectedLevel;this.selectedLevel=e,this.propertyChangeSupport.firePropertyChange("SELECTED_LEVEL",t,e)}},e.prototype.isAllLevelsSelection=function(){return this.allLevelsSelection},e.prototype.setAllLevelsSelection=function(e){e!==this.allLevelsSelection&&(this.allLevelsSelection=e,this.propertyChangeSupport.firePropertyChange("ALL_LEVELS_SELECTION",!e,e))},e.prototype.addFurnitureListener=function(e){var t;this.furnitureChangeSupport.addCollectionListener(null==(t=e)||"function"==typeof t?t:function(e){return(t.collectionChanged?t.collectionChanged:t).call(t,e)})},e.prototype.removeFurnitureListener=function(e){var t;this.furnitureChangeSupport.removeCollectionListener(null==(t=e)||"function"==typeof t?t:function(e){return(t.collectionChanged?t.collectionChanged:t).call(t,e)})},e.prototype.getFurniture=function(){return this.furniture.slice(0)},e.prototype.addPieceOfFurniture$com_eteks_sweethome3d_model_HomePieceOfFurniture=function(e){this.addPieceOfFurniture$com_eteks_sweethome3d_model_HomePieceOfFurniture$int(e,this.furniture.length)},e.prototype.addPieceOfFurniture$com_eteks_sweethome3d_model_HomePieceOfFurniture$int=function(e,t){this.furniture=this.furniture.slice(0),e.setLevel(this.selectedLevel),this.furniture.splice(t,0,e),this.furnitureChangeSupport.fireCollectionChanged(e,t,CollectionEvent.Type.ADD)},e.prototype.addPieceOfFurniture=function(e,t){if(!(null!=e&&e instanceof HomePieceOfFurniture||null===e)||"number"!=typeof t&&null!==t){if((null!=e&&e instanceof HomePieceOfFurniture||null===e)&&void 0===t)return this.addPieceOfFurniture$com_eteks_sweethome3d_model_HomePieceOfFurniture(e);throw new Error("invalid overload")}return this.addPieceOfFurniture$com_eteks_sweethome3d_model_HomePieceOfFurniture$int(e,t)},e.prototype.addPieceOfFurnitureToGroup=function(e,t,i){e.setLevel(this.selectedLevel),t.addPieceOfFurniture(e,i),this.furnitureChangeSupport.fireCollectionChanged(e,CollectionEvent.Type.ADD)},e.prototype.deletePieceOfFurniture=function(e){if(this.deselectItem(e),null!=e&&e instanceof HomeFurnitureGroup)for(var t=e.getAllFurniture(),i=0;i<t.length;i++){var n=t[i];this.deselectItem(n)}var o=this.furniture.indexOf(e),r=-1===o?this.getPieceOfFurnitureGroup(e,null,this.furniture):null;-1===o&&null==r||(e.setLevel(null),this.furniture=this.furniture.slice(0),null!=r?(r.deletePieceOfFurniture(e),this.furnitureChangeSupport.fireCollectionChanged(e,CollectionEvent.Type.DELETE)):(this.furniture.splice(o,1)[0],this.furnitureChangeSupport.fireCollectionChanged(e,o,CollectionEvent.Type.DELETE)))},e.prototype.getPieceOfFurnitureGroup=function(e,t,i){for(var n=0;n<i.length;n++){var o=i[n];if(a=e,(l=o)&&l.equals?l.equals(a):l===a)return t;if(null!=o&&o instanceof HomeFurnitureGroup){var r=this.getPieceOfFurnitureGroup(e,o,o.getFurniture());if(null!=r)return r}}var l,a;return null},e.prototype.addSelectionListener=function(e){this.selectionListeners.push(e)},e.prototype.removeSelectionListener=function(e){var t,i;t=this.selectionListeners,(i=t.indexOf(e))>=0&&t.splice(i,1)},e.prototype.getSelectedItems=function(){return this.selectedItems.slice(0)},e.prototype.isItemSelected=function(e){return this.selectedItems.indexOf(e)>=0},e.prototype.setSelectedItems=function(e){var t=this.selectedItems.slice(0);if(this.selectedItems=e.slice(0),0!=this.selectionListeners.length)for(var i=new SelectionEvent(this,t,this.getSelectedItems()),n=this.selectionListeners.slice(0),o=0;o<n.length;o++){n[o].selectionChanged(i)}},e.prototype.deselectItem=function(e){var t=this.selectedItems.indexOf(e);if(-1!==t){var i=this.getSelectedItems().slice(0);i.splice(t,1)[0],this.setSelectedItems(i)}},e.prototype.addRoomsListener=function(e){var t;this.roomsChangeSupport.addCollectionListener(null==(t=e)||"function"==typeof t?t:function(e){return(t.collectionChanged?t.collectionChanged:t).call(t,e)})},e.prototype.removeRoomsListener=function(e){var t;this.roomsChangeSupport.removeCollectionListener(null==(t=e)||"function"==typeof t?t:function(e){return(t.collectionChanged?t.collectionChanged:t).call(t,e)})},e.prototype.getRooms=function(){return this.rooms.slice(0)},e.prototype.addRoom$com_eteks_sweethome3d_model_Room=function(e){this.addRoom$com_eteks_sweethome3d_model_Room$int(e,this.rooms.length)},e.prototype.addRoom$com_eteks_sweethome3d_model_Room$int=function(e,t){this.rooms=this.rooms.slice(0),this.rooms.splice(t,0,e),e.setLevel(this.selectedLevel),this.roomsChangeSupport.fireCollectionChanged(e,t,CollectionEvent.Type.ADD)},e.prototype.addRoom=function(e,t){if(!(null!=e&&e instanceof Room||null===e)||"number"!=typeof t&&null!==t){if((null!=e&&e instanceof Room||null===e)&&void 0===t)return this.addRoom$com_eteks_sweethome3d_model_Room(e);throw new Error("invalid overload")}return this.addRoom$com_eteks_sweethome3d_model_Room$int(e,t)},e.prototype.deleteRoom=function(e){this.deselectItem(e);var t=this.rooms.indexOf(e);-1!==t&&(e.setLevel(null),this.rooms=this.rooms.slice(0),this.rooms.splice(t,1)[0],this.roomsChangeSupport.fireCollectionChanged(e,t,CollectionEvent.Type.DELETE))},e.prototype.addWallsListener=function(e){var t;this.wallsChangeSupport.addCollectionListener(null==(t=e)||"function"==typeof t?t:function(e){return(t.collectionChanged?t.collectionChanged:t).call(t,e)})},e.prototype.removeWallsListener=function(e){var t;this.wallsChangeSupport.removeCollectionListener(null==(t=e)||"function"==typeof t?t:function(e){return(t.collectionChanged?t.collectionChanged:t).call(t,e)})},e.prototype.getWalls=function(){return this.walls.slice(0)},e.prototype.addWall=function(e){this.walls=this.walls.slice(0),this.walls.push(e),e.setLevel(this.selectedLevel),this.wallsChangeSupport.fireCollectionChanged(e,CollectionEvent.Type.ADD)},e.prototype.deleteWall=function(e){this.deselectItem(e);for(var t,i,n=this.getWalls(),o=0;o<n.length;o++){var r=n[o];t=e,i=r.getWallAtStart(),(t&&t.equals?t.equals(i):t===i)?r.setWallAtStart(null):function(e,t){return e&&e.equals?e.equals(t):e===t}(e,r.getWallAtEnd())&&r.setWallAtEnd(null)}var l=this.walls.indexOf(e);-1!==l&&(e.setLevel(null),this.walls=this.walls.slice(0),this.walls.splice(l,1)[0],this.wallsChangeSupport.fireCollectionChanged(e,CollectionEvent.Type.DELETE))},e.prototype.addPolylinesListener=function(e){var t;this.polylinesChangeSupport.addCollectionListener(null==(t=e)||"function"==typeof t?t:function(e){return(t.collectionChanged?t.collectionChanged:t).call(t,e)})},e.prototype.removePolylinesListener=function(e){var t;this.polylinesChangeSupport.removeCollectionListener(null==(t=e)||"function"==typeof t?t:function(e){return(t.collectionChanged?t.collectionChanged:t).call(t,e)})},e.prototype.getPolylines=function(){return this.polylines.slice(0)},e.prototype.addPolyline$com_eteks_sweethome3d_model_Polyline=function(e){this.addPolyline$com_eteks_sweethome3d_model_Polyline$int(e,this.polylines.length)},e.prototype.addPolyline$com_eteks_sweethome3d_model_Polyline$int=function(e,t){this.polylines=this.polylines.slice(0),this.polylines.splice(t,0,e),e.setLevel(this.selectedLevel),this.polylinesChangeSupport.fireCollectionChanged(e,CollectionEvent.Type.ADD)},e.prototype.addPolyline=function(e,t){if(!(null!=e&&e instanceof Polyline||null===e)||"number"!=typeof t&&null!==t){if((null!=e&&e instanceof Polyline||null===e)&&void 0===t)return this.addPolyline$com_eteks_sweethome3d_model_Polyline(e);throw new Error("invalid overload")}return this.addPolyline$com_eteks_sweethome3d_model_Polyline$int(e,t)},e.prototype.deletePolyline=function(e){this.deselectItem(e);var t=this.polylines.indexOf(e);-1!==t&&(e.setLevel(null),this.polylines=this.polylines.slice(0),this.polylines.splice(t,1)[0],this.polylinesChangeSupport.fireCollectionChanged(e,CollectionEvent.Type.DELETE))},e.prototype.addDimensionLinesListener=function(e){var t;this.dimensionLinesChangeSupport.addCollectionListener(null==(t=e)||"function"==typeof t?t:function(e){return(t.collectionChanged?t.collectionChanged:t).call(t,e)})},e.prototype.removeDimensionLinesListener=function(e){var t;this.dimensionLinesChangeSupport.removeCollectionListener(null==(t=e)||"function"==typeof t?t:function(e){return(t.collectionChanged?t.collectionChanged:t).call(t,e)})},e.prototype.getDimensionLines=function(){return this.dimensionLines.slice(0)},e.prototype.addDimensionLine=function(e){this.dimensionLines=this.dimensionLines.slice(0),this.dimensionLines.push(e),e.setLevel(this.selectedLevel),this.dimensionLinesChangeSupport.fireCollectionChanged(e,CollectionEvent.Type.ADD)},e.prototype.deleteDimensionLine=function(e){this.deselectItem(e);var t=this.dimensionLines.indexOf(e);-1!==t&&(e.setLevel(null),this.dimensionLines=this.dimensionLines.slice(0),this.dimensionLines.splice(t,1)[0],this.dimensionLinesChangeSupport.fireCollectionChanged(e,CollectionEvent.Type.DELETE))},e.prototype.addLabelsListener=function(e){var t;this.labelsChangeSupport.addCollectionListener(null==(t=e)||"function"==typeof t?t:function(e){return(t.collectionChanged?t.collectionChanged:t).call(t,e)})},e.prototype.removeLabelsListener=function(e){var t;this.labelsChangeSupport.removeCollectionListener(null==(t=e)||"function"==typeof t?t:function(e){return(t.collectionChanged?t.collectionChanged:t).call(t,e)})},e.prototype.getLabels=function(){return this.labels.slice(0)},e.prototype.addLabel=function(e){this.labels=this.labels.slice(0),this.labels.push(e),e.setLevel(this.selectedLevel),this.labelsChangeSupport.fireCollectionChanged(e,CollectionEvent.Type.ADD)},e.prototype.deleteLabel=function(e){this.deselectItem(e);var t=this.labels.indexOf(e);-1!==t&&(e.setLevel(null),this.labels=this.labels.slice(0),this.labels.splice(t,1)[0],this.labelsChangeSupport.fireCollectionChanged(e,CollectionEvent.Type.DELETE))},e.prototype.getSelectableViewableItems=function(){var e=[];this.addViewableItems(this.walls,e),this.addViewableItems(this.rooms,e),this.addViewableItems(this.dimensionLines,e),this.addViewableItems(this.polylines,e),this.addViewableItems(this.labels,e);for(var t=this.getFurniture(),i=0;i<t.length;i++){var n=t[i];n.isVisible()&&(null==n.getLevel()||n.getLevel().isViewable())&&e.push(n)}return this.compass.isVisible()&&e.push(this.compass),e},e.prototype.addViewableItems=function(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(null!=n&&null!=n.constructor&&null!=n.constructor.__interfaces&&n.constructor.__interfaces.indexOf("com.eteks.sweethome3d.model.Elevatable")>=0){var o=n;(null==o.getLevel()||o.getLevel().isViewable())&&t.push(n)}}},e.prototype.getHomeObjects=function(){var e,t,i=[];i.push(this.environment),i.push(this.compass),e=i,t=this.levels,e.push.apply(e,t),function(e,t){e.push.apply(e,t)}(i,this.walls),function(e,t){e.push.apply(e,t)}(i,this.rooms),function(e,t){e.push.apply(e,t)}(i,this.dimensionLines),function(e,t){e.push.apply(e,t)}(i,this.polylines),function(e,t){e.push.apply(e,t)}(i,this.labels);for(var n=this.getFurniture(),o=0;o<n.length;o++){var r=n[o];i.push(r),null!=r&&r instanceof HomeFurnitureGroup&&function(e,t){e.push.apply(e,t)}(i,r.getAllFurniture())}return i.push(this.topCamera),i.push(this.observerCamera),function(e,t){e.push.apply(e,t)}(i,this.storedCameras),function(e,t){e.push.apply(e,t)}(i,this.environment.getVideoCameraPath()),i},e.prototype.isEmpty=function(){return 0==this.furniture.length&&0==this.walls.length&&0==this.rooms.length&&0==this.dimensionLines.length&&0==this.polylines.length&&0==this.labels.length},e.prototype.getWallHeight=function(){return this.wallHeight},e.prototype.getName=function(){return this.name},e.prototype.setName=function(e){if(e!==this.name&&(null==e||e!==this.name)){var t=this.name;this.name=e,this.propertyChangeSupport.firePropertyChange("NAME",t,e)}},e.prototype.isModified=function(){return this.modified},e.prototype.setModified=function(e){e!==this.modified&&(this.modified=e,this.propertyChangeSupport.firePropertyChange("MODIFIED",!e,e))},e.prototype.isRecovered=function(){return this.recovered},e.prototype.setRecovered=function(e){e!==this.recovered&&(this.recovered=e,this.propertyChangeSupport.firePropertyChange("RECOVERED",!e,e))},e.prototype.isRepaired=function(){return this.repaired},e.prototype.setRepaired=function(e){e!==this.repaired&&(this.repaired=e,this.propertyChangeSupport.firePropertyChange("REPAIRED",!e,e))},e.prototype.getFurnitureSortedPropertyName=function(){return this.furnitureSortedPropertyName},e.prototype.setFurnitureSortedPropertyName=function(e){if(e!==this.furnitureSortedPropertyName&&(null==e||e!==this.furnitureSortedPropertyName)){var t=this.furnitureSortedPropertyName;this.furnitureSortedPropertyName=e;try{this.furnitureSortedProperty=null!=e?e:null}catch(e){this.furnitureSortedProperty=null}this.propertyChangeSupport.firePropertyChange("FURNITURE_SORTED_PROPERTY",t,e)}},e.prototype.getFurnitureSortedProperty=function(){return this.furnitureSortedProperty},e.prototype.setFurnitureSortedProperty=function(e){if(e!==this.furnitureSortedProperty&&(null==e||e!=this.furnitureSortedProperty)){var t=this.furnitureSortedProperty;this.furnitureSortedProperty=e,this.furnitureSortedPropertyName=null!=e?e:null,this.propertyChangeSupport.firePropertyChange("FURNITURE_SORTED_PROPERTY",t,e)}},e.prototype.isFurnitureDescendingSorted=function(){return this.furnitureDescendingSorted},e.prototype.setFurnitureDescendingSorted=function(e){e!==this.furnitureDescendingSorted&&(this.furnitureDescendingSorted=e,this.propertyChangeSupport.firePropertyChange("FURNITURE_DESCENDING_SORTED",!e,e))},e.prototype.getFurnitureVisiblePropertyNames=function(){return null==this.furnitureVisiblePropertyNames?[]:this.furnitureVisiblePropertyNames.slice(0)},e.prototype.setFurnitureVisiblePropertyNames=function(e){if(e!==this.furnitureVisiblePropertyNames&&(null==e||!function(e,t){if(null==e&&null==t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!=t[i])return!1;return!0}(e,this.furnitureVisiblePropertyNames))){var t=this.furnitureVisiblePropertyNames;this.furnitureVisiblePropertyNames=e.slice(0),this.furnitureVisibleProperties=[];for(var i=0;i<e.length;i++){var n=e[i];try{this.furnitureVisibleProperties.push(n)}catch(e){}}this.propertyChangeSupport.firePropertyChange("FURNITURE_VISIBLE_PROPERTIES",t.slice(0),e.slice(0))}},e.prototype.getFurnitureVisibleProperties=function(){return null==this.furnitureVisibleProperties?[]:this.furnitureVisibleProperties.slice(0)},e.prototype.setFurnitureVisibleProperties=function(e){if(e!==this.furnitureVisibleProperties&&(null==e||!function(e,t){if(null==e&&null==t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!=t[i])return!1;return!0}(e,this.furnitureVisibleProperties))){var t=this.furnitureVisibleProperties;this.furnitureVisibleProperties=e.slice(0),this.furnitureVisiblePropertyNames=[];for(var i=0;i<e.length;i++){var n=e[i];this.furnitureVisiblePropertyNames.push(n)}this.propertyChangeSupport.firePropertyChange("FURNITURE_VISIBLE_PROPERTIES",t.slice(0),e.slice(0))}},e.prototype.getFurnitureAdditionalProperties=function(){return this.furnitureAdditionalProperties.slice(0)},e.prototype.setFurnitureAdditionalProperties=function(e){if(e!==this.furnitureAdditionalProperties&&(null==e||!function(e,t){if(null==e&&null==t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!=t[i])return!1;return!0}(e,this.furnitureAdditionalProperties))){var t=this.furnitureAdditionalProperties;this.furnitureAdditionalProperties=e.slice(0);for(var i=this.getFurnitureVisiblePropertyNames().slice(0),n=i.length-1;n>=0;n--)try{i[n]}catch(t){e.indexOf(new ObjectProperty(i[n]))>=0||i.splice(n,1)[0]}this.setFurnitureVisiblePropertyNames(i),null==this.getFurnitureSortedPropertyName()||e.indexOf(new ObjectProperty(this.getFurnitureSortedPropertyName()))>=0||this.setFurnitureSortedPropertyName(null),this.propertyChangeSupport.firePropertyChange("FURNITURE_ADDITIONAL_PROPERTIES",t.slice(0),e.slice(0))}},e.prototype.getBackgroundImage=function(){return this.backgroundImage},e.prototype.setBackgroundImage=function(e){if(e!==this.backgroundImage){var t=this.backgroundImage;this.backgroundImage=e,this.propertyChangeSupport.firePropertyChange("BACKGROUND_IMAGE",t,e)}},e.prototype.getTopCamera=function(){return this.topCamera},e.prototype.getObserverCamera=function(){return this.observerCamera},e.prototype.setCamera=function(e){if(e!==this.camera){var t=this.camera;this.camera=e,this.propertyChangeSupport.firePropertyChange("CAMERA",t,e)}},e.prototype.getCamera=function(){return null==this.camera&&(this.camera=this.getTopCamera()),this.camera},e.prototype.setStoredCameras=function(e){if(!function(e,t){if(null==e&&null==t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!=t[i])return!1;return!0}(this.storedCameras,e)){var t=this.storedCameras;this.storedCameras=null==e?[]:e.slice(0),this.propertyChangeSupport.firePropertyChange("STORED_CAMERAS",t.slice(0),e.slice(0))}},e.prototype.getStoredCameras=function(){return this.storedCameras.slice(0)},e.prototype.getEnvironment=function(){return this.environment},e.prototype.getCompass=function(){return this.compass},e.prototype.getPrint=function(){return this.print},e.prototype.setPrint=function(e){if(e!==this.print){var t=this.print;this.print=e,this.propertyChangeSupport.firePropertyChange("PRINT",t,e)}this.print=e},e.prototype.getVisualProperty=function(e){return void 0===(t=this.visualProperties)[i=e]?null:t[i];var t,i},e.prototype.setVisualProperty=function(e,t){this.visualProperties[e]=t},e.prototype.getProperty=function(e){return void 0===(t=this.properties)[i=e]?null:t[i];var t,i},e.prototype.getNumericProperty=function(e){var t,i,n=void 0===(t=this.properties)[i=e]?null:t[i];if(null!=n)try{return new Number(n).valueOf()}catch(e){try{return new Number(n).valueOf()}catch(e){}}return null},e.prototype.setProperty=function(e,t){var i,n,o=this,r=void 0===(i=this.properties)[n=e]?null:i[n];null==t?null!=r&&(!function(t){var i=o.properties[e];delete o.properties[e]}(this.properties),this.propertyChangeSupport.firePropertyChange(e,r,null)):(this.properties[e]=t,this.propertyChangeSupport.firePropertyChange(e,r,t))},e.prototype.getPropertyNames=function(){return Object.keys(this.properties)},e.prototype.addPropertyChangeListener=function(e,t){this.propertyChangeSupport.addPropertyChangeListener(e,t)},e.prototype.removePropertyChangeListener=function(e,t){this.propertyChangeSupport.removePropertyChangeListener(e,t)},e.prototype.isBasePlanLocked=function(){return this.basePlanLocked},e.prototype.setBasePlanLocked=function(e){e!==this.basePlanLocked&&(this.basePlanLocked=e,this.propertyChangeSupport.firePropertyChange("BASE_PLAN_LOCKED",!e,e))},e.prototype.getVersion=function(){return this.version},e.prototype.setVersion=function(e){this.version=e},e.prototype.clone=function(){try{var t=function(e){var t=Object.create(e);for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}(this);return e.copyHomeData(this,t),e.initListenersSupport(t),t.addModelListeners(),t}catch(e){throw new IllegalStateException("Super class isn't cloneable")}},e.copyHomeData=function(t,i){i.allLevelsSelection=t.allLevelsSelection,i.name=t.name,i.modified=t.modified,i.recovered=t.recovered,i.repaired=t.repaired,i.backgroundImage=t.backgroundImage,i.furnitureDescendingSorted=t.furnitureDescendingSorted,i.version=t.version,i.basePlanLocked=t.basePlanLocked,i.skyColor=t.skyColor,i.groundColor=t.groundColor,i.lightColor=t.lightColor,i.wallsAlpha=t.wallsAlpha,i.furnitureSortedProperty=t.furnitureSortedProperty,i.selectedItems=[],i.furniture=e.cloneSelectableItems(t.furniture,t.selectedItems,i.selectedItems),i.rooms=e.cloneSelectableItems(t.rooms,t.selectedItems,i.selectedItems),i.dimensionLines=e.cloneSelectableItems(t.dimensionLines,t.selectedItems,i.selectedItems),i.polylines=e.cloneSelectableItems(t.polylines,t.selectedItems,i.selectedItems),i.labels=e.cloneSelectableItems(t.labels,t.selectedItems,i.selectedItems),i.walls=Wall.clone(t.walls);for(var n=0;n<t.walls.length;n++){var o=t.walls[n];t.selectedItems.indexOf(o)>=0&&i.selectedItems.push(i.walls[n])}if(i.levels=[],t.levels.length>0){for(var r=0;r<t.levels.length;r++){var l=t.levels[r];i.levels.push(function(e){if(null!=e.clone)return e.clone();var t=Object.create(e);for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}(l))}for(n=0;n<t.furniture.length;n++){var a=t.furniture[n].getLevel();null!=a&&i.furniture[n].setLevel(i.levels[t.levels.indexOf(a)])}for(n=0;n<t.rooms.length;n++){var s=t.rooms[n].getLevel();null!=s&&i.rooms[n].setLevel(i.levels[t.levels.indexOf(s)])}for(n=0;n<t.dimensionLines.length;n++){var h=t.dimensionLines[n].getLevel();null!=h&&i.dimensionLines[n].setLevel(i.levels[t.levels.indexOf(h)])}for(n=0;n<t.polylines.length;n++){var u=t.polylines[n].getLevel();null!=u&&i.polylines[n].setLevel(i.levels[t.levels.indexOf(u)])}for(n=0;n<t.labels.length;n++){var d=t.labels[n].getLevel();null!=d&&i.labels[n].setLevel(i.levels[t.levels.indexOf(d)])}for(n=0;n<t.walls.length;n++){var c=t.walls[n].getLevel();null!=c&&i.walls[n].setLevel(i.levels[t.levels.indexOf(c)])}null!=t.selectedLevel&&(i.selectedLevel=i.levels[t.levels.indexOf(t.selectedLevel)])}if(null!=t.print&&null!=t.print.getPrintedLevels()){var p=t.print.getPrintedLevels().slice(0);for(n=0;n<p.length;n++)p[n]=i.levels[t.levels.indexOf(p[n])];i.print=new HomePrint(t.print.getPaperOrientation(),t.print.getPaperWidth(),t.print.getPaperHeight(),t.print.getPaperTopMargin(),t.print.getPaperLeftMargin(),t.print.getPaperBottomMargin(),t.print.getPaperRightMargin(),t.print.isFurniturePrinted(),t.print.isPlanPrinted(),p,t.print.isView3DPrinted(),t.print.getPlanScale(),t.print.getHeaderFormat(),t.print.getFooterFormat())}else i.print=t.print;i.observerCamera=function(e){if(null!=e.clone)return e.clone();var t=Object.create(e);for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}(t.observerCamera),i.topCamera=function(e){if(null!=e.clone)return e.clone();var t=Object.create(e);for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}(t.topCamera),t.camera===t.observerCamera?(i.camera=i.observerCamera,t.selectedItems.indexOf(t.observerCamera)>=0&&i.selectedItems.push(i.observerCamera)):i.camera=i.topCamera,i.storedCameras=[];for(r=0;r<t.storedCameras.length;r++){var g=t.storedCameras[r];i.storedCameras.push(function(e){if(null!=e.clone)return e.clone();var t=Object.create(e);for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}(g))}i.environment=function(e){if(null!=e.clone)return e.clone();var t=Object.create(e);for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}(t.environment),i.compass=function(e){if(null!=e.clone)return e.clone();var t=Object.create(e);for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}(t.compass),i.furnitureVisibleProperties=t.furnitureVisibleProperties.slice(0),i.furnitureVisiblePropertyNames=t.furnitureVisiblePropertyNames.slice(0),i.visualProperties=function(e){var t={};for(var i in e)t[i]=e[i];return t}(t.visualProperties),i.properties=function(e){var t={};for(var i in e)t[i]=e[i];return t}(t.properties)},e.cloneSelectableItems=function(e,t,i){for(var n=[],o=0;o<e.length;o++){var r=e[o],l=function(e){if(null!=e.clone)return e.clone();var t=Object.create(e);for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}(r);if(n.push(l),t.indexOf(r)>=0)i.push(l);else if(null!=r&&r instanceof HomeFurnitureGroup)for(var a=r.getAllFurniture(),s=null,h=0,u=a.length;h<u;h++){var d=a[h];t.indexOf(d)>=0&&(null==s&&(s=l.getAllFurniture()),i.push(s[h]))}}return n},e.duplicate=function(t){for(var i=[],n=Wall.duplicate(e.getWallsSubList(t)),o=0,r=0;r<t.length;r++){var l=t[r];null!=l&&l instanceof Wall?i.push(n[o++]):null!=l&&l instanceof HomeObject?i.push(l.duplicate()):i.push(function(e){if(null!=e.clone)return e.clone();var t=Object.create(e);for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}(l))}return i},e.getFurnitureSubList=function(t){return e.getSubList(t,HomePieceOfFurniture)},e.getWallsSubList=function(t){return e.getSubList(t,Wall)},e.getRoomsSubList=function(t){return e.getSubList(t,Room)},e.getPolylinesSubList=function(t){return e.getSubList(t,Polyline)},e.getDimensionLinesSubList=function(t){return e.getSubList(t,DimensionLine)},e.getLabelsSubList=function(t){return e.getSubList(t,Label)},e.getSubList=function(e,t){for(var i,n,o=[],r=0;r<e.length;r++){var l=e[r];n=l,("string"==typeof(i=t)?n.constructor&&n.constructor.__interfaces&&n.constructor.__interfaces.indexOf(i)>=0||n.__interfaces&&n.__interfaces.indexOf(i)>=0:"function"==typeof i?n instanceof i||n.constructor&&n.constructor===i:void 0)&&o.push(l)}return o},e.CURRENT_VERSION=7200,e.HOME_TOP_CAMERA_ID="camera-homeTopCamera",e.HOME_OBSERVER_CAMERA_ID="observerCamera-homeObserverCamera",e.HOME_ENVIRONMENT_ID="environment-homeEnvironment",e.HOME_COMPASS_ID="compass-homeCompass",e.KEEP_BACKWARD_COMPATIBLITY=!0,e}();function DAELoader(){ModelLoader.call(this,"dae")}function DAEHandler(e,t){DefaultHandler.call(this),this.sceneRoot=e,this.daeEntryName=t,this.parentGroups=[],this.parentElements=[],this.buffer="",this.postProcessingBinders=[],this.textures={},this.effectAppearances={},this.materialEffects={},this.materialNames={},this.surface2DIds={},this.sampler2DIds={},this.geometries={},this.sources={},this.positions={},this.normals={},this.textureCoordinates={},this.floatArrays={},this.sourceAccessorStrides=[],this.appearanceGeometries={},this.facesAndLinesPrimitives=[],this.polygonsPrimitives=[],this.polygonsHoles=[],this.nodes={},this.controllersSkinMeshes={},this.instantiatedNodes={},this.visualScenes={},this.visualScene=null,this.floats=null,this.geometryVertices=[],this.geometryNormals=[],this.geometryTextureCoordinates=[],this.vcount=[],this.transparentColor=[],this.transparency=null,this.inRootAsset=!1,this.reverseTransparency=!1,this.imageId=null,this.materialId=null,this.effectId=null,this.newParamSid=null,this.inSurface2D=!1,this.inPhongBlinnOrLambert=!1,this.techniqueProfile=null,this.inConstant=!1,this.geometryId=null,this.meshSourceId=null,this.verticesId=null,this.floatArrayId=null,this.controllerId=null,this.geometryAppearance=null,this.geometryVertexOffset=0,this.geometryNormalOffset=0,this.geometryTextureCoordinatesOffset=0,this.axis=null,this.meterScale=1,this.floatValue=0,this.opaque=null,this.inputCount=0}function Max3DSLoader(){ModelLoader.call(this,"3ds"),null===Max3DSLoader.DEFAULT_APPEARANCE&&(Max3DSLoader.DEFAULT_APPEARANCE=new Appearance3D("Default"),Max3DSLoader.DEFAULT_APPEARANCE.setAmbientColor(vec3.fromValues(.4,.4,.4)),Max3DSLoader.DEFAULT_APPEARANCE.setDiffuseColor(vec3.fromValues(.7102,.702,.6531)),Max3DSLoader.DEFAULT_APPEARANCE.setSpecularColor(vec3.fromValues(.3,.3,.3)),Max3DSLoader.DEFAULT_APPEARANCE.setShininess(128))}Home.__class="com.eteks.sweethome3d.model.Home",function(e){var t=function(){function t(e){this.__parent=e}return t.prototype.propertyChange=function(t){var i,n;"ELEVATION"!==t.getPropertyName()&&"ELEVATION_INDEX"!==t.getPropertyName()||(this.__parent.levels=this.__parent.levels.slice(0),i=this.__parent.levels,(n=e.LEVEL_ELEVATION_COMPARATOR_$LI$()).compare?i.sort((function(e,t){return n.compare(e,t)})):i.sort(n))},t}();e.Home$0=t}(Home||(Home={})),Home.__transients=["furnitureChangeSupport","selectedItems","selectionListeners","allLevelsSelection","levelsChangeSupport","wallsChangeSupport","roomsChangeSupport","polylinesChangeSupport","dimensionLinesChangeSupport","labelsChangeSupport","modified","recovered","repaired","propertyChangeSupport","furnitureAdditionalProperties"],Home.LEVEL_ELEVATION_COMPARATOR_$LI$(),CatalogLight.EMPTY_LIGHT_SOURCE_MATERIAL_NAMES_$LI$(),CatalogLight.EMPTY_LIGHT_SOURCES_$LI$(),CatalogShelfUnit.EMPTY_SHELF_BOXES_$LI$(),CatalogShelfUnit.EMPTY_SHELF_ELEVATIONS_$LI$(),HomePieceOfFurniture.SORTABLE_PROPERTY_COMPARATORS_$LI$(),HomePieceOfFurniture.EMPTY_PROPERTY_ARRAY_$LI$(),HomePieceOfFurniture.ROUND_WALL_ANGLE_MARGIN_$LI$(),HomePieceOfFurniture.STRAIGHT_WALL_ANGLE_MARGIN_$LI$(),HomePieceOfFurniture.TWICE_PI_$LI$(),HomePieceOfFurniture.__static_initialize(),Label.TWICE_PI_$LI$(),Room.TWICE_PI_$LI$(),FurnitureCategory.COMPARATOR_$LI$(),CatalogPieceOfFurniture.recentFilters_$LI$(),CatalogPieceOfFurniture.COMPARATOR_$LI$(),CatalogPieceOfFurniture.EMPTY_CRITERIA_$LI$(),CatalogPieceOfFurniture.__static_initialize(),Baseboard.baseboardsCache_$LI$(),TextStyle.textStylesCache_$LI$(),CatalogTexture.recentFilters_$LI$(),CatalogTexture.COMPARATOR_$LI$(),CatalogTexture.EMPTY_CRITERIA_$LI$(),CatalogTexture.__static_initialize(),TexturesCategory.COMPARATOR_$LI$(),DAELoader.prototype=Object.create(ModelLoader.prototype),DAELoader.prototype.constructor=DAELoader,DAELoader.prototype.parseEntryScene=function(e,t,i,n,o,r){var l=new Group3D,a=new DAEHandler(l,t),s=new SAXParser(a,a,a,a,a);r(ModelLoader.PARSING_MODEL,t,0);try{s.parseString(e)}catch(e){l.removeAllChildren()}if(null===o)return r(ModelLoader.PARSING_MODEL,t,1),l;setTimeout((function(){r(ModelLoader.PARSING_MODEL,t,1),o(l)}),0)},DAEHandler.prototype=Object.create(DefaultHandler.prototype),DAEHandler.prototype.constructor=DAEHandler,DAEHandler.prototype.startElement=function(e,t,i,n){this.buffer="";var o=0===this.parentElements.length?null:this.parentElements[this.parentElements.length-1];if(null===o&&"COLLADA"!=i)throw new SAXException("Expected COLLADA element");if("COLLADA"==i){var r=n.getValue("version");if(0!==r.indexOf("1.4"))throw new SAXException("Version "+r+" not supported")}else if("COLLADA"==o&&"asset"==i)this.inRootAsset=!0;else if("asset"==o&&"unit"==i){var l=n.getValue("meter");null!==l&&(this.meterScale=parseFloat(l))}else if("image"==i)this.imageId=n.getValue("id");else if("material"==i)this.materialId=n.getValue("id"),this.materialNames[this.materialId]=n.getValue("name");else if("material"==o&&"instance_effect"==i){var a=n.getValue("url");if(0===a.indexOf("#")){var s=a.substring(1);this.materialEffects[this.materialId]=s}}else if("effect"==i)this.effectId=n.getValue("id"),this.effectAppearances[this.effectId]=new Appearance3D;else if(null!==this.effectId){if("profile_COMMON"==o&&"newparam"==i)this.newParamSid=n.getValue("sid");else if("newparam"==o&&"surface"==i&&"2D"==n.getValue("type"))this.inSurface2D=!0;else if("extra"==o&&"technique"==i)this.techniqueProfile=n.getValue("profile");else if("phong"==i||"blinn"==i)this.inPhongBlinnOrLambert=!0;else if("lambert"==i)this.inPhongBlinnOrLambert=!0,this.effectAppearances[this.effectId].setSpecularColor(vec3.fromValues(0,0,0)),this.effectAppearances[this.effectId].setShininess(1);else if("constant"==i)this.inConstant=!0;else if(this.inConstant||this.inPhongBlinnOrLambert&&"transparent"==i)this.opaque=n.getValue("opaque"),null===this.opaque&&(this.opaque="A_ONE");else if("texture"==i&&"diffuse"==o){var h=this.surface2DIds[this.sampler2DIds[n.getValue("texture")]],u=this.effectAppearances[this.effectId],d=this;this.postProcessingBinders.push((function(){u.imageEntryName=d.textures[h]}))}}else if("geometry"==i)this.geometryId=n.getValue("id"),this.geometries[this.geometryId]=[];else if(null!==this.geometryId)if("mesh"==o&&"source"==i)this.meshSourceId=n.getValue("id");else if("mesh"==o&&"vertices"==i)this.verticesId=n.getValue("id");else if(null!==this.meshSourceId){if("float_array"==i)this.floatArrayId=n.getValue("id");else if("technique_common"==o&&"accessor"==i){var c=n.getValue("source").substring(1),p=n.getValue("stride");p=null!==p?parseInt(p):1,this.sourceAccessorStrides.push({floatArray:this.floatArrays[c],stride:p})}}else if(null!==this.verticesId&&"input"==i){var g=n.getValue("source").substring(1);if(void 0!==(m=this.sources[g]))if("POSITION"==n.getValue("semantic")){this.positions[this.verticesId]=new Array(m.length/3);for(var v=0,f=0;f<m.length;v++,f+=3)this.positions[this.verticesId][v]=vec3.fromValues(m[f],m[f+1],m[f+2])}else if("NORMAL"==n.getValue("semantic")){this.normals[this.verticesId]=new Array(m.length/3);for(v=0,f=0;f<m.length;v++,f+=3)this.normals[this.verticesId][v]=vec3.fromValues(m[f],m[f+1],m[f+2])}else if("TEXCOORD"==n.getValue("semantic")){this.textureCoordinates[this.verticesId]=new Array(m.length/2);for(v=0,f=0;f<m.length;v++,f+=2)this.textureCoordinates[this.verticesId][v]=vec2.fromValues(m[f],m[f+1])}}else if(null===this.verticesId&&"input"==i){g=n.getValue("source").substring(1);var m,y=parseInt(n.getValue("offset"));if(this.inputCount<y+1&&(this.inputCount=y+1),"VERTEX"==n.getValue("semantic"))this.geometryVertices=this.positions[g],void 0===this.geometryVertices&&(this.geometryVertices=null),this.geometryVertexOffset=y,null===this.geometryNormals&&(this.geometryNormals=this.normals[g],this.geometryNormalOffset=y),null===this.geometryTextureCoordinates&&(this.geometryTextureCoordinates=this.textureCoordinates[g],this.geometryTextureCoordinatesOffset=y);else if("NORMAL"==n.getValue("semantic")){if(void 0!==(m=this.sources[g])){this.geometryNormals=new Array(m.length/3);for(v=0,f=0;f<m.length;v++,f+=3)this.geometryNormals[v]=vec3.fromValues(m[f],m[f+1],m[f+2]);this.geometryNormalOffset=y}}else if("TEXCOORD"==n.getValue("semantic"))if(void 0!==(m=this.sources[g])){this.geometryTextureCoordinates=new Array(m.length/2);for(v=0,f=0;f<m.length;v++,f+=2)this.geometryTextureCoordinates[v]=vec2.fromValues(m[f],m[f+1]);this.geometryTextureCoordinatesOffset=y}}else"triangles"!=i&&"trifans"!=i&&"tristrips"!=i&&"polylist"!=i&&"polygons"!=i&&"lines"!=i&&"linestrips"!=i||(this.geometryAppearance=n.getValue("material"),this.inputCount=0,this.facesAndLinesPrimitives=[],this.polygonsPrimitives=[],this.polygonsHoles=[],this.vcount=null);else if("controller"==i)this.controllerId=n.getValue("id");else if("skin"==i){var C=n.getValue("source");if(0===C.indexOf("#")){var S=C.substring(1);this.controllersSkinMeshes[this.controllerId]=S}}else if("visual_scene"==i){var E=new TransformGroup3D;this.parentGroups.push(E),this.visualScenes[n.getValue("id")]=E}else if("node"==i){var A=new TransformGroup3D;this.parentGroups.length>0&&this.parentGroups[this.parentGroups.length-1].addChild(A),this.parentGroups.push(A),this.nodes[n.getValue("id")]=A,null!==(F=n.getValue("name"))&&A.setName(F)}else if("node"!=o||"instance_geometry"!=i&&"instance_controller"!=i){if("instance_node"==i){var _=n.getValue("url");if(0===_.indexOf("#")){var P=_.substring(1),w=this.parentGroups[this.parentGroups.length-1];d=this;this.postProcessingBinders.push((function(){var e=d.instantiatedNodes[P];void 0===e&&((e=new SharedGroup3D).addChild(d.nodes[P]),d.instantiatedNodes[P]=e),w.addChild(new Link3D(e))}))}}else if("instance_material"==i&&this.parentGroups.length>0){var L=n.getValue("target");if(0==L.indexOf("#")){var T=L.substring(1),b=n.getValue("symbol"),O=this.parentGroups[this.parentGroups.length-1];d=this;this.postProcessingBinders.push((function(){var e=d.effectAppearances[d.materialEffects[T]],t=function(e,i,n){if(e instanceof Group3D){for(var o=!1,r=e.getChildren(),l=0;l<r.length;l++)o|=t(r[l],i,n);return o}if(e instanceof Link3D)return t(e.getSharedGroup(),i,n);if(e instanceof Shape3D){var a=n?e.getGeometries():d.appearanceGeometries[b];if(void 0!==a)for(l=0;l<a.length;l++)if(a[l]===e.getGeometries()[0])return e.setAppearance(i),!0}return!1};t(O,e,!1)||t(O,e,!0),e.setName(d.materialNames[T])}))}}else if("instance_visual_scene"==i){var I=n.getValue("url");if(0===I.indexOf("#")){var D=I.substring(1);d=this;this.postProcessingBinders.push((function(){d.visualScene=d.visualScenes[D]}))}}}else{var R=n.getValue("url");if(0===R.indexOf("#")){var x="instance_controller"==i,M=R.substring(1),F=n.getValue("name"),N=new Group3D;this.parentGroups[this.parentGroups.length-1].addChild(N),this.parentGroups.push(N);var d=this;this.postProcessingBinders.push((function(){for(var e=0,t=x?d.geometries[d.controllersSkinMeshes[M]]:d.geometries[M],i=0;i<t.length;i++){var n=new Shape3D(t[i]);N.addChild(n),null!==F&&(0===e?n.setName(F):n.setName(F+"_"+e),e++)}}))}}this.parentElements.push(i)},DAEHandler.prototype.characters=function(e,t,i){this.buffer+=e.substring(t,t+i)},DAEHandler.prototype.endElement=function(e,t,i){this.parentElements.pop();var n=0===this.parentElements.length?null:this.parentElements[this.parentElements.length-1];if("color"==i||"float_array"==i||"matrix"==i||"rotate"==i||"scale"==i||"translate"==i){var o=this.getCharacters().split(/\s/);this.floats=new Array(o.length);for(var r=0,l=0;l<o.length;l++)if(o[l].length>0){var a=parseFloat(o[l]);isNaN(a)&&(a=0),this.floats[r++]=a}r!==o.length&&this.floats.splice(r,this.floats.length-r),null!==this.floatArrayId&&(this.floatArrays[this.floatArrayId]=this.floats,this.floatArrayId=null)}else"float"==i&&(this.floatValue=parseFloat(this.getCharacters()));if(this.inRootAsset)this.handleRootAssetElementsEnd(i);else if("image"==i)this.imageId=null;else if(null!==this.imageId)this.handleImageElementsEnd(i);else if("material"==i)this.materialId=null;else if("effect"==i)this.effectId=null;else if(null!==this.effectId)this.handleEffectElementsEnd(i,n);else if("geometry"==i)this.geometryId=null;else if(null!==this.geometryId)this.handleGeometryElementsEnd(i,n);else if("controller"==i)this.controllerId=null;else if("visual_scene"==i||"node"==i||"node"==n&&"instance_geometry"==i)this.parentGroups.pop();else if("matrix"==i){var s=mat4.fromValues(this.floats[0],this.floats[4],this.floats[8],this.floats[12],this.floats[1],this.floats[5],this.floats[9],this.floats[13],this.floats[2],this.floats[6],this.floats[10],this.floats[14],this.floats[3],this.floats[7],this.floats[11],this.floats[15]);this.mulTransformGroup(s)}else if("node"==n&&"rotate"==i){var h=mat4.create();mat4.fromRotation(h,this.floats[3]*Math.PI/180,vec3.fromValues(this.floats[0],this.floats[1],this.floats[2])),this.mulTransformGroup(h)}else if("scale"==i){var u=mat4.create();mat4.scale(u,u,vec3.fromValues(this.floats[0],this.floats[1],this.floats[2])),this.mulTransformGroup(u)}else if("node"==n&&"translate"==i){var d=mat4.create();mat4.translate(d,d,vec3.fromValues(this.floats[0],this.floats[1],this.floats[2])),this.mulTransformGroup(d)}},DAEHandler.prototype.getCharacters=function(){return this.buffer.trim()},DAEHandler.prototype.handleRootAssetElementsEnd=function(e){if("asset"==e)this.inRootAsset=!1;else if("up_axis"==e)this.axis=this.getCharacters();else if("subject"==e)this.scene.setName(this.getCharacters());else if("authoring_tool"==e){var t=this.getCharacters();if(0===t.indexOf("Google SketchUp")){var i=t.substring(15).trim();if(i.length>0){var n=i.indexOf("."),o=-1===n?i:i.substring(0,n),r=parseInt(o);(r<7||7==r&&(n>=i.length-1||i[n+1]<"1"))&&(this.reverseTransparency=!0)}}}},DAEHandler.prototype.handleImageElementsEnd=function(e){if("init_from"==e){var t=this.getCharacters();if(0===t.indexOf("./")&&(t=t.substring(2)),this.daeEntryName.lastIndexOf("/")>=0){var i=this.daeEntryName.split("/"),n=t.split("/");for(i.splice(i.length-1,1);".."==n[0]||"."==n[0];)".."==n[0]&&i.splice(i.length-1,1),n.splice(0,1);t="";for(var o=0;o<i.length;o++)t+=i[o]+"/";for(o=0;o<n.length;o++)t+=n[o]+"/";t=t.substring(0,t.length-1)}this.textures[this.imageId]=t}else if("data"==e)throw new SAXException("<data> not supported")},DAEHandler.prototype.handleEffectElementsEnd=function(e,t){if("profile_COMMON"==t&&"newparam"==e)this.newParamSid=null;else if("newparam"==t&&"surface"==e)this.inSurface2D=!1;else if(null!==this.newParamSid)this.inSurface2D&&"init_from"==e?this.surface2DIds[this.newParamSid]=this.getCharacters():"sampler2D"==t&&"source"==e&&(this.sampler2DIds[this.newParamSid]=this.getCharacters());else if("extra"==t&&"technique"==e)this.techniqueProfile=null;else if("phong"==e||"blinn"==e||"lambert"==e||"constant"==e){var i;null!==this.transparentColor?"RGB_ZERO"==this.opaque?(i=.212671*this.transparentColor[0]+.71516*this.transparentColor[1]+.072169*this.transparentColor[2],null!==this.transparency&&(i*=this.transparency)):(i=null!==this.transparency?1-this.transparentColor[3]*this.transparency:1-this.transparentColor[3],this.reverseTransparency&&(i=1-i)):i=0;var n=this.effectAppearances[this.effectId];i>0&&n.setTransparency(i);var o=null!=this.transparentColor?vec3.fromValues(this.transparentColor[0],this.transparentColor[1],this.transparentColor[2]):vec3.fromValues(0,0,0);n.getAmbientColor()||n.getDiffuseColor()||n.getSpecularColor()||(n.getAmbientColor()||n.setAmbientColor(o),n.getDiffuseColor()||n.setDiffuseColor(o),n.getSpecularColor()||n.setSpecularColor(o),n.getShininess()||n.setShininess(1),"constant"==e&&this.effectAppearances[this.effectId].setIllumination(0)),this.transparentColor=null,this.transparency=null,this.inPhongBlinnOrLambert=!1,this.inConstant=!1}else this.inConstant||this.inPhongBlinnOrLambert?"color"==e?"emission"==t?this.inPhongBlinnOrLambert?this.effectAppearances[this.effectId].setEmissiveColor(vec3.fromValues(this.floats[0],this.floats[1],this.floats[2])):(this.effectAppearances[this.effectId].setDiffuseColor(vec3.fromValues(this.floats[0],this.floats[1],this.floats[2])),this.effectAppearances[this.effectId].setIllumination(0)):"ambient"==t?this.effectAppearances[this.effectId].setAmbientColor(vec3.fromValues(this.floats[0],this.floats[1],this.floats[2])):"diffuse"==t?this.effectAppearances[this.effectId].setDiffuseColor(vec3.fromValues(this.floats[0],this.floats[1],this.floats[2])):"specular"==t?this.effectAppearances[this.effectId].setSpecularColor(vec3.fromValues(this.floats[0],this.floats[1],this.floats[2])):"transparent"==t&&(this.transparentColor=this.floats):"float"==e&&("shininess"==t?this.effectAppearances[this.effectId].setShininess(this.floatValue):"transparency"==t&&(this.transparency=this.floatValue)):"double_sided"!=e||"1"!=this.getCharacters()||"GOOGLEEARTH"!=this.techniqueProfile&&"MAX3D"!=this.techniqueProfile&&"MAYA"!=this.techniqueProfile||this.effectAppearances[this.effectId].setCullFace(Appearance3D.CULL_NONE)},DAEHandler.prototype.handleGeometryElementsEnd=function(e,t){if("mesh"==t&&"source"==e)null!==this.floats&&(this.sources[this.meshSourceId]=this.floats,this.floats=null),this.meshSourceId=null;else if("mesh"==t&&"vertices"==e)this.verticesId=null;else if("p"==e||"h"==e||"vcount"==e){for(var i=this.getCharacters().split(/\s/),n=new Array(i.length),o=0,r=0;r<i.length;r++)i[r].length>0&&(n[o++]=parseInt(i[r]));o!==i.length&&n.splice(o,n.length-o),"ph"!=t&&"p"==e?this.facesAndLinesPrimitives.push(n):"vcount"==e?this.vcount=n:"ph"==t&&("p"==e?this.polygonsPrimitives.push(n):"h"==e&&(this.polygonsPrimitives.length>this.polygonsHoles.length&&this.polygonsHoles.push([]),this.polygonsHoles[this.polygonsPrimitives.length-1].push(n)))}else if(("triangles"==e||"trifans"==e||"tristrips"==e||"polylist"==e||"polygons"==e||"lines"==e||"linestrips"==e)&&null!==this.geometryVertices){var l;if(null!==(l="lines"==e||"linestrips"==e?this.getLinesGeometry(e):this.getFacesGeometry(e))&&(this.geometries[this.geometryId].push(l),null!==this.geometryAppearance)){var a=this.appearanceGeometries[this.geometryAppearance];void 0===a&&(a=[],this.appearanceGeometries[this.geometryAppearance]=a),a.push(l)}this.geometryAppearance=null,this.geometryVertices=null,this.geometryNormals=null,this.geometryTextureCoordinates=null,this.facesAndLinesPrimitives=[],this.polygonsPrimitives=[],this.polygonsHoles=[],this.vcount=null}},DAEHandler.prototype.getFacesGeometry=function(e){var t;t="triangles"==e?GeometryInfo3D.TRIANGLE_ARRAY:"trifans"==e?GeometryInfo3D.TRIANGLE_FAN_ARRAY:"tristrips"==e?GeometryInfo3D.TRIANGLE_STRIP_ARRAY:GeometryInfo3D.POLYGON_ARRAY;var i=new GeometryInfo3D(t);if(i.setCoordinates(this.geometryVertices),i.setCoordinateIndices(this.getIndices(this.geometryVertexOffset)),this.geometryNormals&&(i.setNormals(this.geometryNormals),i.setNormalIndices(this.getIndices(this.geometryNormalOffset))),this.geometryTextureCoordinates){for(var n,o,r=0;r<this.sourceAccessorStrides.length;r++){var l=this.sourceAccessorStrides[r];if(l.floatArray===this.geometryTextureCoordinates){n=l.stride;break}}if(n>2){o=new Array(this.geometryTextureCoordinates.length/n*2);r=0;for(var a=0;a<this.geometryTextureCoordinates.length;a+=n)o[r++]=this.geometryTextureCoordinates[a],o[r++]=this.geometryTextureCoordinates[a+1]}else o=this.geometryTextureCoordinates;i.setTextureCoordinates(o),i.setTextureCoordinateIndices(this.getIndices(this.geometryTextureCoordinatesOffset))}if("tristrips"==e||"trifans"==e){var s=new Array(this.facesAndLinesPrimitives.length);for(r=0;r<s.length;r++)s[r]=this.facesAndLinesPrimitives[r].length/this.inputCount;i.setStripCounts(s)}else if("polylist"==e)i.setStripCounts(this.vcount);else if("polygons"==e){var h=0;for(r=0;r<this.polygonsHoles.length;r++)h+=this.polygonsHoles[r].length;s=new Array(this.facesAndLinesPrimitives.length+this.polygonsPrimitives.length+h);var u=new Array(this.facesAndLinesPrimitives.length+this.polygonsPrimitives.length),d=0,c=0;for(r=0;r<this.facesAndLinesPrimitives.length;r++)s[d++]=this.facesAndLinesPrimitives[r].length/this.inputCount,u[c++]=1;for(r=0;r<this.polygonsPrimitives.length;r++){s[d++]=this.polygonsPrimitives[r].length/this.inputCount;var p=this.polygonsHoles[r];for(a=0;a<p.length;a++)s[d++]=p[a].length/this.inputCount;u[c++]=1+p.length}i.setStripCounts(s),i.setContourCounts(u)}return this.geometryNormals||(i.setCreaseAngle(Math.PI/2),i.setGeneratedNormals(!0)),i.getIndexedGeometryArray()},DAEHandler.prototype.getLinesGeometry=function(e){var t=this.getIndices(this.geometryVertexOffset);if(0!==t.length){var i=this.geometryTextureCoordinates?this.getIndices(this.geometryTextureCoordinatesOffset):[];if("linestrips"==e){for(var n=[],o=[],r=0,l=0;r<this.facesAndLinesPrimitives.length;r++){for(var a=this.facesAndLinesPrimitives[r].length/this.inputCount,s=0;s<a-1;s++)n.push(t[l+s]),n.push(t[l+s+1]),textureCoordinateIndices.length>0&&(o.push(textureCoordinateIndices[l+s]),o.push(textureCoordinateIndices[l+s+1]));l+=a}t=n,i=o}return new IndexedLineArray3D(this.geometryVertices,t,this.geometryTextureCoordinates,i)}return null},DAEHandler.prototype.getIndices=function(e){if(1===this.facesAndLinesPrimitives.length&&1===this.polygonsPrimitives.length&&1===this.inputCount)return facesAndLinesPrimitives[0];var t=this.getIndexCount(this.facesAndLinesPrimitives);t+=this.getIndexCount(this.polygonsPrimitives);for(var i=0;i<this.polygonsHoles.length;i++)t+=this.getIndexCount(this.polygonsHoles[i]);for(var n=new Array(t/this.inputCount),o=(i=0,0);o<this.facesAndLinesPrimitives.length;o++)for(var r=this.facesAndLinesPrimitives[o],l=e;l<r.length;l+=this.inputCount)n[i++]=r[l];for(o=0;o<this.polygonsPrimitives.length;o++){var a=this.polygonsPrimitives[o];for(l=e;l<a.length;l+=this.inputCount)n[i++]=a[l];var s=this.polygonsHoles[o];for(l=0;l<s.length;l++)for(var h=s[l],u=e;u<h.length;u+=this.inputCount)n[i++]=h[u]}return n},DAEHandler.prototype.getIndexCount=function(e){for(var t=0,i=0;i<e.length;i++)t+=e[i].length;return t},DAEHandler.prototype.mulTransformGroup=function(e){var t=this.parentGroups[this.parentGroups.length-1],i=mat4.create();t.getTransform(i),mat4.mul(i,i,e),t.setTransform(i)},DAEHandler.prototype.endDocument=function(){for(var e=0;e<this.postProcessingBinders.length;e++)this.postProcessingBinders[e]();if(null!==this.visualScene){var t=mat4.create();this.visualScene.getTransform(t);var i=new BoundingBox3D(vec3.fromValues(1/0,1/0,1/0),vec3.fromValues(-1/0,-1/0,-1/0));this.computeBounds(this.visualScene,i,mat4.create());var n=vec3.create();if(i.getLower(n),n[0]!==1/0){var o=vec3.create();i.getUpper(o);var r=mat4.create();mat4.translate(r,r,vec3.fromValues(-n[0]-(o[0]-n[0])/2,-n[1]-(o[1]-n[1])/2,-n[2]-(o[2]-n[2])/2)),mat4.mul(r,r,t),t=r}var l=mat4.create();mat4.scale(l,l,vec3.fromValues(100*this.meterScale,100*this.meterScale,100*this.meterScale)),mat4.mul(l,l,t);var a=mat4.create();"Z_UP"==this.axis?mat4.fromXRotation(a,-Math.PI/2):"X_UP"==this.axis&&mat4.fromZRotation(a,Math.PI/2),mat4.mul(a,a,l),this.visualScene.setTransform(a),this.sceneRoot.addChild(this.visualScene)}},DAEHandler.prototype.computeBounds=function(e,t,i){if(e instanceof Group3D){if(e instanceof TransformGroup3D){i=mat4.clone(i);var n=mat4.create();e.getTransform(n),mat4.mul(i,i,n)}for(var o=e.getChildren(),r=0;r<o.length;r++)this.computeBounds(o[r],t,i)}else if(e instanceof Link3D)this.computeBounds(e.getSharedGroup(),t,i);else if(e instanceof Shape3D){var l=e.getBounds();l.transform(i),t.combine(l)}},Max3DSLoader.prototype=Object.create(ModelLoader.prototype),Max3DSLoader.prototype.constructor=Max3DSLoader,Max3DSLoader.NULL_CHUNK=0,Max3DSLoader.M3DMAGIC=19789,Max3DSLoader.MLIBMAGIC=15786,Max3DSLoader.CMAGIC=49725,Max3DSLoader.M3D_VERSION=2,Max3DSLoader.COLOR_FLOAT=16,Max3DSLoader.COLOR_24=17,Max3DSLoader.LINEAR_COLOR_24=18,Max3DSLoader.LINEAR_COLOR_FLOAT=19,Max3DSLoader.PERCENTAGE_INT=48,Max3DSLoader.PERCENTAGE_FLOAT=49,Max3DSLoader.EDITOR_DATA=15677,Max3DSLoader.MESH_VERSION=15678,Max3DSLoader.MASTER_SCALE=256,Max3DSLoader.MATERIAL_ENTRY=45055,Max3DSLoader.MATERIAL_NAME=40960,Max3DSLoader.MATERIAL_AMBIENT=40976,Max3DSLoader.MATERIAL_DIFFUSE=40992,Max3DSLoader.MATERIAL_SPECULAR=41008,Max3DSLoader.MATERIAL_SHININESS=41024,Max3DSLoader.MATERIAL_TRANSPARENCY=41040,Max3DSLoader.MATERIAL_TWO_SIDED=41089,Max3DSLoader.MATERIAL_TEXMAP=41472,Max3DSLoader.MATERIAL_MAPNAME=41728,Max3DSLoader.NAMED_OBJECT=16384,Max3DSLoader.TRIANGLE_MESH_OBJECT=16640,Max3DSLoader.POINT_ARRAY=16656,Max3DSLoader.FACE_ARRAY=16672,Max3DSLoader.MESH_MATERIAL_GROUP=16688,Max3DSLoader.SMOOTHING_GROUP=16720,Max3DSLoader.MESH_BOXMAP=16784,Max3DSLoader.TEXTURE_COORDINATES=16704,Max3DSLoader.MESH_MATRIX=16736,Max3DSLoader.MESH_COLOR=16741,Max3DSLoader.KEY_FRAMER_DATA=45056,Max3DSLoader.OBJECT_NODE_TAG=45058,Max3DSLoader.NODE_ID=45104,Max3DSLoader.NODE_HIERARCHY=45072,Max3DSLoader.PIVOT=45075,Max3DSLoader.POSITION_TRACK_TAG=45088,Max3DSLoader.ROTATION_TRACK_TAG=45089,Max3DSLoader.SCALE_TRACK_TAG=45090,Max3DSLoader.TRACK_KEY_USE_TENS=1,Max3DSLoader.TRACK_KEY_USE_CONT=2,Max3DSLoader.TRACK_KEY_USE_BIAS=4,Max3DSLoader.TRACK_KEY_USE_EASE_TO=8,Max3DSLoader.TRACK_KEY_USE_EASE_FROM=16,Max3DSLoader.DEFAULT_APPEARANCE=null,Max3DSLoader.prototype.createScene=function(e,t,i,n,o,r,l){var a=new Group3D,s=mat4.create();mat4.fromXRotation(s,-Math.PI/2),mat4.scale(s,s,vec3.fromValues(o,o,o));var h=new TransformGroup3D(s);a.addChild(h),n.getChildren().length>0&&(h.addChild(n),h=n);var u={};for(var d in i){var c=i[d],p=new Appearance3D(d);if(null!==c.ambientColor&&p.setAmbientColor(c.ambientColor),null!==c.diffuseColor&&p.setDiffuseColor(c.diffuseColor),null!==c.shininess&&p.setShininess(128*c.shininess*.6),null!==c.specularColor)if(null!==c.shininess){var g=vec3.clone(c.specularColor);vec3.scale(g,g,c.shininess),p.setSpecularColor(g)}else p.setSpecularColor(c.specularColor);null!==c.transparency&&c.transparency>0&&p.setTransparency(Math.min(1,c.transparency)),c.texture&&(p.imageEntryName=c.texture),u[d]=p}if(null===r){l(ModelLoader.BUILDING_MODEL,"",0);for(var v=0;v<e.length;v++)this.createShapes(e[v],t,u,a,h);return l(ModelLoader.BUILDING_MODEL,"",1),a}var f=e.length,m=0,y=this,C=function(){l(ModelLoader.BUILDING_MODEL,"",0!==f?m/f:0);for(var i=Date.now();e.length>0;)if(y.createShapes(e[0],t,u,a,h),m++,e.splice(0,1),m<f&&Date.now()-i>10)return void setTimeout(C,0);setTimeout((function(){l(ModelLoader.BUILDING_MODEL,"",1),r(a)}),0)};C()},Max3DSLoader.prototype.createShapes=function(e,t,i,n,o){var r=mat4.create(),l=e.faces;if(null!==l&&l.length>0){for(var a=e.vertices,s=new Array(a.length),h=0;h<s.length;h++)s[h]=null;for(var u=new Array(3*l.length),d=vec3.create(),c=vec3.create(),p=(h=0,0);h<l.length;h++)for(var g=(U=l[h]).vertexIndices,v=0;v<3;v++,p++){var f=g[v];vec3.subtract(d,a[g[v<2?v+1:0]],a[f]),vec3.subtract(c,a[g[v>0?v-1:2]],a[f]);var m=vec3.create();vec3.cross(m,d,c);var y=vec3.length(m);if(y>0){var C=Math.atan2(y,vec3.dot(d,c));vec3.scale(m,m,C/y)}(_=new Max3DSLoader.Mesh3DSSharedVertex(h,m)).nextVertex=s[f],s[f]=_,u[p]=m}var S,E=new Array(3*l.length);for(h=0,p=0;h<l.length;h++){g=(U=l[h]).vertexIndices;var A=new Array(3);for(v=0;v<3;v++,p++){f=g[v],m=vec3.create();if(null===U.smoothingGroup)for(var _=s[f];null!==_;_=_.nextVertex)null===l[_.faceIndex].smoothingGroup&&(_.normal===u[p]||vec3.dot(_.normal,u[p])>0)&&vec3.add(m,m,_.normal);else{var P=U.smoothingGroup;for(_=s[f];null!==_;_=_.nextVertex){null!==(w=l[_.faceIndex]).smoothingGroup&&0!=(U.smoothingGroup&w.smoothingGroup)&&(P|=w.smoothingGroup)}for(_=s[f];null!==_;_=_.nextVertex){var w;null!==(w=l[_.faceIndex]).smoothingGroup&&0!=(P&w.smoothingGroup)&&vec3.add(m,m,_.normal)}}0!==vec3.squaredLength(m)?vec3.normalize(m,m):(vec3.copy(m,u[p]),0!==vec3.squaredLength(m)&&vec3.normalize(m,m)),E[p]=m,A[v]=p}U.normalIndices=A}l.sort((function(e,t){var i=e.material,n=t.material;return null===i?null===n?e.index-t.index:-1:null===n?1:0}));var L=t[e.name];if(void 0===L)S=o;else if(1===L.length)S=L[0];else{var T=new SharedGroup3D;for(h=0;h<L.length;h++)L[h].addChild(new Link3D(T));S=T}var b=e.transform;if(null!==b&&!mat4.exactEquals(b,r)){var O=new TransformGroup3D(b);S.addChild(O),S=O}for(var I=e.textureCoordinates,D=(h=0,null),R=null;h<l.length;){for(var x=l[h].material,M=h;++M<l.length&&x===l[M].material;);var F=M-h,N=new Array(3*F);for(A=new Array(3*F),v=0,p=0;v<F;v++){g=(U=l[h+v]).vertexIndices;for(var U,H=U.normalIndices,G=0;G<3;G++,p++)N[p]=g[G],A[p]=H[G]}var k=new GeometryInfo3D(GeometryInfo3D.TRIANGLE_ARRAY);if(k.setCoordinates(a),k.setCoordinateIndices(N),k.setNormals(E),k.setNormalIndices(A),null!==I&&(k.setTextureCoordinates(I),k.setTextureCoordinateIndices(N)),geometryArray=k.getIndexedGeometryArray(),null===D||R!==x){R=x;var V=Max3DSLoader.DEFAULT_APPEARANCE;null!==x&&void 0!==i[x.name]&&(V=i[x.name]),V=V.clone(),null!==x&&x.twoSided&&V.setCullFace(Appearance3D.CULL_NONE),D=new Shape3D(geometryArray,V),S.addChild(D),D.setName(e.name+(0===h?"":"_"+h))}else D.addGeometry(geometryArray);h=M}}},Max3DSLoader.prototype.getModelContent=function(e){return e.asUint8Array()},Max3DSLoader.prototype.parseEntryScene=function(e,t,i,n,o,r){var l,a=[],s={},h={},u=new TransformGroup3D;if(null===o)return r(ModelLoader.PARSING_MODEL,t,0),l=this.parse3DSStream(new Max3DSLoader.ChunksInputStream(e),t,i,a,s,h,u),r(ModelLoader.PARSING_MODEL,t,1),this.createScene(a,s,h,u,l,null,r);var d=this;l=this.parse3DSStream(new Max3DSLoader.ChunksInputStream(e),t,i,a,s,h,u);setTimeout((function(){r(ModelLoader.PARSING_MODEL,t,1),d.createScene(a,s,h,u,l,(function(e){o(e)}),r)}),0)},Max3DSLoader.prototype.parse3DSStream=function(e,t,i,n,o,r,l){var a=1;try{var s=!1;switch(e.readChunkHeader().id){case Max3DSLoader.M3DMAGIC:case Max3DSLoader.MLIBMAGIC:case Max3DSLoader.CMAGIC:for(s=!0;!e.isChunckEndReached();){switch(e.readChunkHeader().id){case Max3DSLoader.M3D_VERSION:e.readLittleEndianUnsignedInt();break;case Max3DSLoader.EDITOR_DATA:this.parseEditorData(e,t,i,n,r);break;case Max3DSLoader.KEY_FRAMER_DATA:this.parseKeyFramerData(e,o,l);break;default:e.readUntilChunkEnd()}e.releaseChunk()}break;case Max3DSLoader.EDITOR_DATA:a=this.parseEditorData(e,t,i,n,r);break;default:if(!s)throw new IncorrectFormat3DException("Bad magic number");e.readUntilChunkEnd()}e.releaseChunk()}catch(e){n.length=0}return a},Max3DSLoader.prototype.parseEditorData=function(e,t,i,n,o){for(var r=1;!e.isChunckEndReached();){switch(e.readChunkHeader().id){case Max3DSLoader.MESH_VERSION:e.readLittleEndianInt();break;case Max3DSLoader.MASTER_SCALE:r=e.readLittleEndianFloat();break;case Max3DSLoader.NAMED_OBJECT:this.parseNamedObject(e,n,o);break;case Max3DSLoader.MATERIAL_ENTRY:var l=this.parseMaterial(e,t,i);o[l.name]=l;break;default:e.readUntilChunkEnd()}e.releaseChunk()}return r},Max3DSLoader.prototype.parseNamedObject=function(e,t,i){for(var n=e.readString();!e.isChunckEndReached();){if(e.readChunkHeader().id===Max3DSLoader.TRIANGLE_MESH_OBJECT)t.push(this.parseMeshData(e,n,i));else e.readUntilChunkEnd();e.releaseChunk()}},Max3DSLoader.prototype.parseMeshData=function(e,t,i){for(var n=null,o=null,r=null,l=null,a=null;!e.isChunckEndReached();){switch(e.readChunkHeader().id){case Max3DSLoader.MESH_MATRIX:r=this.parseMatrix(e),r=mat4.invert(r,r);break;case Max3DSLoader.MESH_COLOR:l=e.readUnsignedByte();break;case Max3DSLoader.POINT_ARRAY:n=new Array(e.readLittleEndianUnsignedShort());for(var s=0;s<n.length;s++)n[s]=vec3.fromValues(e.readLittleEndianFloat(),e.readLittleEndianFloat(),e.readLittleEndianFloat());break;case Max3DSLoader.FACE_ARRAY:for(a=this.parseFacesData(e);!e.isChunckEndReached();){switch(e.readChunkHeader().id){case Max3DSLoader.MESH_MATERIAL_GROUP:var h=e.readString(),u=null;null!==i&&(u=i[h]);s=0;for(var d=e.readLittleEndianUnsignedShort();s<d;s++){var c=e.readLittleEndianUnsignedShort();c<a.length&&(a[c].material=u)}break;case Max3DSLoader.SMOOTHING_GROUP:for(s=0;s<a.length;s++)a[s].smoothingGroup=e.readLittleEndianUnsignedInt();break;case Max3DSLoader.MESH_BOXMAP:default:e.readUntilChunkEnd()}e.releaseChunk()}break;case Max3DSLoader.TEXTURE_COORDINATES:o=new Array(e.readLittleEndianUnsignedShort());for(s=0;s<o.length;s++)o[s]=vec2.fromValues(e.readLittleEndianFloat(),e.readLittleEndianFloat());break;default:e.readUntilChunkEnd()}e.releaseChunk()}return new Max3DSLoader.Mesh3DS(t,n,o,a,l,r)},Max3DSLoader.prototype.parseKeyFramerData=function(e,t,i){for(var n=[],o=[],r=null;!e.isChunckEndReached();){if(e.readChunkHeader().id===Max3DSLoader.OBJECT_NODE_TAG){for(var l=!0,a=null,s=null,h=0,u=null,d=null,c=-1;!e.isChunckEndReached();){switch(e.readChunkHeader().id){case Max3DSLoader.NODE_ID:c=e.readLittleEndianShort();break;case Max3DSLoader.NODE_HIERARCHY:var p=e.readString();l="$$$DUMMY"!=p,e.readLittleEndianUnsignedShort(),e.readLittleEndianUnsignedShort();var g=e.readLittleEndianShort(),v=new TransformGroup3D;if(-1===g)i.addChild(v);else{for(var f=!1,m=0;m<o.length;m++)if(g===o[m]){n[m].addChild(v),f=!0;break}if(!f)throw new IncorrectFormat3DException("Inconsistent nodes hierarchy")}if(o.push(c),n.push(v),l){var y=t[p];void 0===y&&(y=[],t[p]=y),y.push(v)}r=v;break;case Max3DSLoader.PIVOT:a=this.parseVector(e);break;case Max3DSLoader.POSITION_TRACK_TAG:this.parseKeyFramerTrackStart(e),s=this.parseVector(e),e.readUntilChunkEnd();break;case Max3DSLoader.ROTATION_TRACK_TAG:this.parseKeyFramerTrackStart(e),h=e.readLittleEndianFloat(),u=this.parseVector(e),e.readUntilChunkEnd();break;case Max3DSLoader.SCALE_TRACK_TAG:this.parseKeyFramerTrackStart(e),d=this.parseVector(e),e.readUntilChunkEnd();break;default:e.readUntilChunkEnd()}e.releaseChunk()}var C=mat4.create();if(null!==s&&mat4.translate(C,C,s),null!==u&&0!==h){var S=vec3.length(u);if(S>0){var E=-h/2,A=Math.sin(E)/S,_=Math.cos(E),P=mat4.create();mat4.fromQuat(P,quat.fromValues(u[0]*A,u[1]*A,u[2]*A,_)),mat4.mul(C,C,P)}}null!==d&&mat4.scale(C,C,d),null!==a&&l&&(vec3.negate(a,a),mat4.translate(C,C,a)),r.setTransform(C)}else e.readUntilChunkEnd();e.releaseChunk()}},Max3DSLoader.prototype.parseKeyFramerTrackStart=function(e){e.readLittleEndianUnsignedShort(),e.readLittleEndianUnsignedInt(),e.readLittleEndianUnsignedInt(),e.readLittleEndianInt(),e.readLittleEndianInt();var t=e.readLittleEndianUnsignedShort();0!=(t&Max3DSLoader.TRACK_KEY_USE_TENS)&&e.readLittleEndianFloat(),0!=(t&Max3DSLoader.TRACK_KEY_USE_CONT)&&e.readLittleEndianFloat(),0!=(t&Max3DSLoader.TRACK_KEY_USE_BIAS)&&e.readLittleEndianFloat(),0!=(t&Max3DSLoader.TRACK_KEY_USE_EASE_TO)&&e.readLittleEndianFloat(),0!=(t&Max3DSLoader.TRACK_KEY_USE_EASE_FROM)&&e.readLittleEndianFloat()},Max3DSLoader.prototype.parseFacesData=function(e){for(var t=new Array(e.readLittleEndianUnsignedShort()),i=0;i<t.length;i++)t[i]=new Max3DSLoader.Face3DS(i,e.readLittleEndianUnsignedShort(),e.readLittleEndianUnsignedShort(),e.readLittleEndianUnsignedShort(),e.readLittleEndianUnsignedShort());return t},Max3DSLoader.prototype.parseMaterial=function(e,t,i){for(var n=null,o=null,r=null,l=null,a=null,s=null,h=!1,u=null;!e.isChunckEndReached();){switch(e.readChunkHeader().id){case Max3DSLoader.MATERIAL_NAME:n=e.readString();break;case Max3DSLoader.MATERIAL_AMBIENT:o=this.parseColor(e);break;case Max3DSLoader.MATERIAL_DIFFUSE:r=this.parseColor(e);break;case Max3DSLoader.MATERIAL_SPECULAR:l=this.parseColor(e);break;case Max3DSLoader.MATERIAL_SHININESS:a=this.parsePercentage(e);break;case Max3DSLoader.MATERIAL_TRANSPARENCY:s=this.parsePercentage(e);break;case Max3DSLoader.MATERIAL_TWO_SIDED:h=!0;break;case Max3DSLoader.MATERIAL_TEXMAP:u=this.parseTextureMap(e,t,i);break;default:e.readUntilChunkEnd()}e.releaseChunk()}return new Max3DSLoader.Material3DS(n,o,r,l,a,s,u,h)},Max3DSLoader.prototype.parseColor=function(e){for(var t,i=!1,n=null;!e.isChunckEndReached();){switch(e.readChunkHeader().id){case Max3DSLoader.LINEAR_COLOR_24:i=!0,n=vec3.fromValues(e.readUnsignedByte()/255,e.readUnsignedByte()/255,e.readUnsignedByte()/255);break;case Max3DSLoader.COLOR_24:t=vec3.fromValues(e.readUnsignedByte()/255,e.readUnsignedByte()/255,e.readUnsignedByte()/255),i||(n=t);break;case Max3DSLoader.LINEAR_COLOR_FLOAT:i=!0,n=vec3.fromValues(e.readLittleEndianFloat(),e.readLittleEndianFloat(),e.readLittleEndianFloat());break;case Max3DSLoader.COLOR_FLOAT:t=vec3.fromValues(e.readLittleEndianFloat(),e.readLittleEndianFloat(),e.readLittleEndianFloat()),i||(n=t);break;default:e.readUntilChunkEnd()}e.releaseChunk()}if(null!==n)return n;throw new IncorrectFormat3DException("Expected color value")},Max3DSLoader.prototype.parsePercentage=function(e){for(var t=null;!e.isChunckEndReached();){switch(e.readChunkHeader().id){case Max3DSLoader.PERCENTAGE_INT:t=e.readLittleEndianShort()/100;break;case Max3DSLoader.PERCENTAGE_FLOAT:t=e.readLittleEndianFloat();break;default:e.readUntilChunkEnd()}e.releaseChunk()}if(null!==t)return t;throw new IncorrectFormat3DException("Expected percentage value")},Max3DSLoader.prototype.parseTextureMap=function(e,t,i){for(var n=null;!e.isChunckEndReached();){switch(e.readChunkHeader().id){case Max3DSLoader.MATERIAL_MAPNAME:n=e.readString();break;case Max3DSLoader.PERCENTAGE_INT:default:e.readUntilChunkEnd()}e.releaseChunk()}if(null!==n){var o=t.lastIndexOf("/");return o>=0&&(n=t.substring(0,o+1)+n),null!==i.file(n)?n:this.getEntryNameIgnoreCase(i,n)}return null},Max3DSLoader.prototype.getEntryNameIgnoreCase=function(e,t){t=t.toUpperCase();for(var i=e.file(/.*/),n=0;n<i.length;n++)if(i[n].name.toUpperCase()==t)return i[n].name;return null},Max3DSLoader.prototype.parseMatrix=function(e){return mat4.fromValues(e.readLittleEndianFloat(),e.readLittleEndianFloat(),e.readLittleEndianFloat(),0,e.readLittleEndianFloat(),e.readLittleEndianFloat(),e.readLittleEndianFloat(),0,e.readLittleEndianFloat(),e.readLittleEndianFloat(),e.readLittleEndianFloat(),0,e.readLittleEndianFloat(),e.readLittleEndianFloat(),e.readLittleEndianFloat(),1)},Max3DSLoader.prototype.parseVector=function(e){return vec3.fromValues(e.readLittleEndianFloat(),e.readLittleEndianFloat(),e.readLittleEndianFloat())},Max3DSLoader.Chunk3DS=function(e,t){if(t<6)throw new IncorrectFormat3DException("Invalid chunk "+e+" length "+t);this.id=e,this.length=t,this.readLength=6},Max3DSLoader.Chunk3DS.prototype.incrementReadLength=function(e){this.readLength+=e},Max3DSLoader.Chunk3DS.prototype.toString=function(){return this.id+" "+this.length},Max3DSLoader.ChunksInputStream=function(e){this.input=e,this.index=0,this.stack=[]},Max3DSLoader.ChunksInputStream.prototype.read=function(){return this.index>=this.input.length?-1:this.input[this.index++]},Max3DSLoader.ChunksInputStream.prototype.readChunkHeader=function(){var e=this.readLittleEndianUnsignedShort(!1),t=new Max3DSLoader.Chunk3DS(e,this.readLittleEndianUnsignedInt(!1));return this.stack.push(t),t},Max3DSLoader.ChunksInputStream.prototype.releaseChunk=function(){var e=this.stack.pop();if(e.length!==e.readLength)throw new IncorrectFormat3DException("Chunk "+e.id+" invalid length. Expected to read "+e.length+" bytes, but actually read "+e.readLength+" bytes");0!==this.stack.length&&this.stack[this.stack.length-1].incrementReadLength(e.length)},Max3DSLoader.ChunksInputStream.prototype.isChunckEndReached=function(){var e=this.stack[this.stack.length-1];return e.length===e.readLength},Max3DSLoader.ChunksInputStream.prototype.readUntilChunkEnd=function(){for(var e=this.stack[this.stack.length-1],t=e.length-e.readLength,i=t;i>0;i--)if(this.read()<0)throw new IncorrectFormat3DException("Chunk "+e.id+" too short");e.incrementReadLength(t)},Max3DSLoader.ChunksInputStream.prototype.readUnsignedByte=function(){var e=this.read();if(-1===e)throw new IncorrectFormat3DException("Unexpected EOF");return this.stack[this.stack.length-1].incrementReadLength(1),e},Max3DSLoader.ChunksInputStream.prototype.readLittleEndianUnsignedShort=function(e){void 0===e&&(e=!0);var t=this.read();if(-1===t)throw new IncorrectFormat3DException("Unexpected EOF");var i=this.read();if(-1===i)throw new IncorrectFormat3DException("Can't read short");return e&&this.stack[this.stack.length-1].incrementReadLength(2),i<<8|t},Max3DSLoader.ChunksInputStream.prototype.readLittleEndianShort=function(e){var t=this.readLittleEndianUnsignedShort(e);return 32768&t&&(t|=-32768),t},Max3DSLoader.ChunksInputStream.converter=new Int8Array(4),Max3DSLoader.ChunksInputStream.int32Converter=new Int32Array(Max3DSLoader.ChunksInputStream.converter.buffer,0,1),Max3DSLoader.ChunksInputStream.float32Converter=new Float32Array(Max3DSLoader.ChunksInputStream.converter.buffer,0,1),Max3DSLoader.ChunksInputStream.prototype.readLittleEndianFloat=function(){return Max3DSLoader.ChunksInputStream.int32Converter[0]=this.readLittleEndianUnsignedInt(!0),Max3DSLoader.ChunksInputStream.float32Converter[0]},Max3DSLoader.ChunksInputStream.prototype.readLittleEndianUnsignedInt=function(e){void 0===e&&(e=!0);var t=this.read();if(-1===t)throw new IncorrectFormat3DException("Unexpected EOF");var i=this.read(),n=this.read(),o=this.read();if(-1===i||-1===n||-1===o)throw new IncorrectFormat3DException("Can't read int");return e&&this.stack[this.stack.length-1].incrementReadLength(4),o<<24|n<<16|i<<8|t},Max3DSLoader.ChunksInputStream.prototype.readLittleEndianInt=function(e){var t=this.readLittleEndianUnsignedInt(e);return 2147483648&t&&(t|=-2147483648),t},Max3DSLoader.ChunksInputStream.prototype.readString=function(){for(var e,t="";-1!==(e=this.read())&&0!==e;)t+=String.fromCharCode(e);if(-1===e)throw new IncorrectFormat3DException("Unexpected end of file");return this.stack[this.stack.length-1].incrementReadLength(t.length+1),t},Max3DSLoader.Mesh3DS=function(e,t,i,n,o,r){this.name=e,this.vertices=t,this.textureCoordinates=i,this.faces=n,this.color=o,this.transform=r},Max3DSLoader.Face3DS=function(e,t,i,n,o){this.index=e,this.vertexIndices=[t,i,n],this.normalIndices=null,this.material=null,this.smoothingGroup=null},Max3DSLoader.Material3DS=function(e,t,i,n,o,r,l,a){this.name=e,this.ambientColor=t,this.diffuseColor=i,this.specularColor=n,this.shininess=o,this.transparency=r,this.texture=l,this.twoSided=a},Max3DSLoader.Mesh3DSSharedVertex=function(e,t){this.faceIndex=e,this.normal=t,this.nextVertex=null};var ShapeTools={parsedShapes:{}};function HomeRecorder(e){this.configuration=void 0!==e?e:{}}function HomeComponent3D(e,t,i,n,o){this.home=t,this.preferences=i,this.object3dFactory=null!==n?n:new Object3DBranchFactory(i),this.homeObjects=[],this.homeObjects3D=[],this.sceneLights=[],this.camera=null,this.windowResizeListener=null,this.preferencesChangeListener=null,this.cameraChangeListener=null,this.homeCameraListener=null,this.groundChangeListener=null,this.backgroundChangeListener=null,this.lightColorListener=null,this.elevationChangeListener=null,this.wallsAlphaListener=null,this.selectionListener=null,this.levelListener=null,this.levelChangeListener=null,this.wallListener=null,this.wallChangeListener=null,this.furnitureListener=null,this.furnitureChangeListener=null,this.roomListener=null,this.roomChangeListener=null,this.polylineChangeListener=null,this.polylineListener=null,this.dimensionLineChangeListener=null,this.dimensionLineListener=null,this.labelChangeListener=null,this.labelListener=null,this.approximateHomeBoundsCache=null,this.homeHeightCache=null,this.createComponent3D(e,i,o)}function Object3DBranchFactory(e){void 0!==e&&(this.preferences=e)}function Object3DBranch(e,t,i){BranchGroup3D.call(this),void 0!==e&&(this.setUserData(e),this.home=t,this.userPreferences=i)}function HomePieceOfFurniture3D(e,t,i,n){void 0===n&&(n=i,i=null),Object3DBranch.call(this,e,t,i),this.createPieceOfFurnitureNode(e,n)}function Wall3D(e,t,i,n){void 0===n&&(n=i,i=null),Object3DBranch.call(this,e,t,i);for(var o=0;o<8;o++){var r=new Group3D;r.addChild(this.createWallPartShape()),this.addChild(r)}var l=new Shape3D;l.setAppearance(this.getSelectionAppearance()),l.setCapability(Shape3D.ALLOW_GEOMETRY_WRITE),l.setPickable(!1),this.addChild(l),this.updateWallGeometry(n),this.updateWallAppearance(n)}function Room3D(e,t,i,n,o){void 0===o&&(waitModelAndTextureLoadingEnd=n,n=i,i=null),Object3DBranch.call(this,e,t,i),void 0===n&&(n=!1,o=!1),this.addChild(this.createRoomPartShape()),this.addChild(this.createRoomPartShape());var r=new Shape3D;r.setAppearance(this.getSelectionAppearance()),r.setCapability(Shape3D.ALLOW_GEOMETRY_WRITE),r.setPickable(!1),this.addChild(r),this.updateRoomGeometry(),this.updateRoomAppearance(o),n&&this.removeChild(Room3D.CEILING_PART)}function Ground3D(e,t,i,n,o,r){Object3DBranch.call(this),this.setUserData(e),this.originX=t,this.originY=i,this.width=n,this.depth=o;var l=new Appearance3D,a=new Shape3D;a.setCapability(Shape3D.ALLOW_GEOMETRY_WRITE),a.setAppearance(l),this.addChild(a);var s=new Appearance3D;this.updateAppearanceMaterial(s,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_COLOR,0),s.setCullFace(Appearance3D.CULL_NONE);var h=new TransformGroup3D;h.setCapability(TransformGroup3D.ALLOW_TRANSFORM_WRITE);var u=new Shape3D(new IndexedTriangleArray3D([vec3.fromValues(-.5,0,-.5),vec3.fromValues(-.5,0,.5),vec3.fromValues(.5,0,.5),vec3.fromValues(.5,0,-.5)],[0,1,2,0,2,3],[vec2.fromValues(0,0),vec2.fromValues(1,0),vec2.fromValues(1,1),vec2.fromValues(0,1)],[3,0,1,3,1,2],[vec3.fromValues(0,1,0)],[0,0,0,0,0,0]),s);h.addChild(u),this.addChild(h),this.update(r)}function Polyline3D(e,t,i,n){void 0===n&&(n=i,i=null),Object3DBranch.call(this,e,t,i),null===Polyline3D.ARROW&&(Polyline3D.ARROW=new java.awt.geom.GeneralPath,Polyline3D.ARROW.moveTo(-5,-2),Polyline3D.ARROW.lineTo(0,0),Polyline3D.ARROW.lineTo(-5,2)),this.setCapability(Group3D.ALLOW_CHILDREN_EXTEND),this.update()}function DimensionLine3D(e,t,i,n){Object3DBranch.call(this,e,t,i),this.dimensionLineRotations=null,this.cameraChangeListener=null,this.homeCameraListener=null,this.dimensionLinesListener=null,this.setCapability(Group3D.ALLOW_CHILDREN_EXTEND),this.update()}function Label3D(e,t,i,n){void 0===n&&(n=i,i=null),Object3DBranch.call(this,e,t,i),this.setCapability(Group3D.ALLOW_CHILDREN_EXTEND),this.update()}function TextureManager(){this.loadedTextureImages={},this.loadingTextureObservers={}}ShapeTools.getStroke=function(e,t,i,n,o){var r,l;switch(t){case Polyline.CapStyle.ROUND:r=java.awt.BasicStroke.CAP_ROUND;break;case Polyline.CapStyle.SQUARE:r=java.awt.BasicStroke.CAP_SQUARE;break;default:r=java.awt.BasicStroke.CAP_BUTT}switch(i){case Polyline.JoinStyle.ROUND:case Polyline.JoinStyle.CURVED:l=java.awt.BasicStroke.JOIN_ROUND;break;case Polyline.JoinStyle.BEVEL:l=java.awt.BasicStroke.JOIN_BEVEL;break;default:l=java.awt.BasicStroke.JOIN_MITER}var a=0;if(null!=n)if(Array.isArray(n)){n=n.slice(0);for(var s=0;s<n.length;s++)n[s]*=e,a+=n[s];a*=o}else n=void 0,a=void 0;return new java.awt.BasicStroke(e,r,l,10,n,a)},ShapeTools.getPolylineShape=function(e,t,i){if(t){for(var n=new java.awt.geom.GeneralPath,o=0,r=i?e.length:e.length-1;o<r;o++){var l=new java.awt.geom.CubicCurve2D.Float,a=e[0===o?e.length-1:o-1],s=e[o],h=e[o===e.length-1?0:o+1],u=[h[0]-a[0],h[1]-a[1]],d=e[(o+2)%e.length],c=[s[0]-d[0],s[1]-d[1]];l.setCurve(s[0],s[1],s[0]+(0!==o||i?u[0]/3.625:0),s[1]+(0!==o||i?u[1]/3.625:0),h[0]+(o!==e.length-2||i?c[0]/3.625:0),h[1]+(o!==e.length-2||i?c[1]/3.625:0),h[0],h[1]),n.append(l,!0)}return n}return ShapeTools.getShape(e,i,null)},ShapeTools.getShape=function(e,t,i){if(e instanceof Array){var n=new java.awt.geom.GeneralPath;n.moveTo(Math.fround(e[0][0]),Math.fround(e[0][1]));for(var o=1;o<e.length;o++)n.lineTo(Math.fround(e[o][0]),Math.fround(e[o][1]));return t&&n.closePath(),null!=i&&n.transform(i),n}var r=e,l=ShapeTools.parsedShapes[r];if(!l){l=new java.awt.geom.Rectangle2D.Float(0,0,1,1);try{var a=new org.apache.batik.parser.AWTPathProducer,s=new org.apache.batik.parser.PathParser;s.setPathHandler(a),s.parse(r),l=a.getShape()}catch(e){}ShapeTools.parsedShapes[r]=l}return l},HomeRecorder.READING_HOME="Reading home",HomeRecorder.PARSING_HOME="Parsing home",HomeRecorder.prototype.readHome=function(e,t){void 0!==t.progression&&t.progression(HomeRecorder.READING_HOME,e,0);var i="Home.xml";if(0===e.indexOf("jar:")){var n=e.indexOf("!/");i=e.substring(n+2),e=e.substring(4,n)}var o=this;ZIPTools.getZIP(e,{zipReady:function(n){try{var r=n.file(i);if(null!==r){var l={homeLoaded:function(i){o.replaceHomeContents(i,e,t)},homeError:function(e){void 0!==t.homeError&&t.homeError(e)},progression:function(e,i,n){void 0!==t.progression&&t.progression(n)}};o.parseHomeXMLEntry(r,n,e,"undefined"==typeof ContentDigestManager?t:l)}else this.zipError(new Error("No "+i+" entry in "+e))}catch(e){this.zipError(e)}},zipError:function(e){void 0!==t.homeError&&t.homeError(e)},progression:function(i,n,o){void 0!==t.progression&&t.progression(HomeRecorder.READING_HOME,e,o)}})},HomeRecorder.prototype.parseHomeXMLEntry=function(e,t,i,n){var o=e.asText();void 0!==n.progression&&(n.progression(HomeRecorder.READING_HOME,e.name,1),n.progression(HomeRecorder.PARSING_HOME,e.name,0));var r=this.getHomeXMLHandler();r.homeUrl=i;var l=new SAXParser(r,r,r,r,r);try{o=o.replace(/\'/g,'"'),l.parseString(o),n.homeLoaded(r.getHome())}catch(e){void 0!==n.homeError&&n.homeError(e)}void 0!==n.progression&&n.progression(HomeRecorder.PARSING_HOME,e.name,1)},HomeRecorder.prototype.getHomeXMLHandler=function(){return new HomeXMLHandler},HomeRecorder.cacheResourcesStoredInContentDigestManager=!1,HomeRecorder.prototype.replaceHomeContents=function(e,t,i){if(!HomeRecorder.cacheResourcesStoredInContentDigestManager&&this.configuration.listCacheResourcesURL&&this.configuration.readCacheResourceURL){var n=this,o=ContentDigestManager.getInstance(),r=this.configuration.listCacheResourcesURL;if(0===r.indexOf(LocalStorageURLContent.LOCAL_STORAGE_PREFIX)){for(var l=r.substring(r.indexOf(LocalStorageURLContent.LOCAL_STORAGE_PREFIX)+LocalStorageURLContent.LOCAL_STORAGE_PREFIX.length),a=new RegExp(l.indexOf("?")>0?l.substring(0,l.indexOf("?")):l),s=Object.getOwnPropertyNames(localStorage),h=[],u=0;u<s.length;u++){s[u].match(a)&&h.push(s[u])}if(h.length>0)for(u=h.length-1;u>=0;u--){for(var d=localStorage.getItem(h[u]),c=d.substring(5,d.indexOf(";")),p=atob(d.substring(d.indexOf(",")+1)),g=new Array(p.length),v=0;v<g.length;v++)g[v]=p.charCodeAt(v);var f=new Uint8Array(g),m=new BlobURLContent(new Blob([f],{type:c}));o.getContentDigest(m,{key:h[u],blobContentUrl:m,digestReady:function(r,l){URL.revokeObjectURL(this.blobContentUrl);var s=this.key.match(a),u=URLContent.fromURL(CoreTools.format(n.configuration.readCacheResourceURL.replace(/(%[^s])/g,"%$1"),encodeURIComponent(s.length>1?s[1]:s[0])));o.setContentDigest(u,l),h.splice(h.lastIndexOf(this.key),1),0===h.length&&n.replaceOrExtractHomeContents(e,t,i)},digestError:function(e,t){URL.revokeObjectURL(this.blobContentUrl),console.warn("Can't retrieve cache content digest: "+t)}})}else n.replaceOrExtractHomeContents(e,t,i)}else{if(0!==r.indexOf(IndexedDBURLContent.INDEXED_DB_PREFIX)){S=new XMLHttpRequest;var y=-1!=r.indexOf("?")?"&":"?";if(S.open("GET",r+y+"requestId="+UUID.randomUUID(),!0),S.addEventListener("load",(function(l){if(S.readyState===XMLHttpRequest.DONE&&200===S.status)for(var a=JSON.parse(S.responseText),s=0;s<a.length;s++){var h=a[s].name,u=URLContent.fromURL(CoreTools.format(n.configuration.readCacheResourceURL.replace(/(%[^s])/g,"%$1"),encodeURIComponent(h)));o.setContentDigest(u,a[s].digest)}else void 0!==i.homeError&&console.warn("Error while requesting "+r);n.replaceOrExtractHomeContents(e,t,i)})),void 0!==i.homeError){var C=function(o){console.warn("Error while requesting "+r),n.replaceOrExtractHomeContents(e,t,i)};S.addEventListener("error",C),S.addEventListener("timeout",C)}return S.send(),S}var S,E=r.indexOf(IndexedDBURLContent.INDEXED_DB_PREFIX)+IndexedDBURLContent.INDEXED_DB_PREFIX.length,A=r.indexOf("/",E),_=r.indexOf("?",A+1),P=r.indexOf("=",_+1),w=r.indexOf("&",P+1),L=r.substring(E,A),T=r.substring(A+1,_),b=r.substring(_+1,P),O=(a=new RegExp(r.substring(P+1,w>0?w:r.length)),function(e){var t=e.target.result;t.objectStoreNames.contains(T)||t.createObjectStore(T,{keyPath:b})}),I=function(o){console.warn("Can't connect to database "+L),n.replaceOrExtractHomeContents(e,t,i)},D=function(r){var l=r.target.result;try{if(l.objectStoreNames.contains(T)){var s,h=l.transaction(T,"readonly");(s=h.objectStore(T).openCursor()).addEventListener("success",(function(r){var l=r.target.result;if(null!=l){var s=l.primaryKey.match(a);if(s){var h=s.length>1?s[1]:s[0],u=URLContent.fromURL(CoreTools.format(n.configuration.readCacheResourceURL.replace(/(%[^s])/g,"%$1"),encodeURIComponent(h)));o.setContentDigest(u,l.value.digest)}l.continue()}else n.replaceOrExtractHomeContents(e,t,i)})),s.addEventListener("error",(function(o){console.warn("Can't query in "+T),n.replaceOrExtractHomeContents(e,t,i)})),h.addEventListener("complete",(function(e){l.close()}))}else{l.close();var u=indexedDB.open(L,l.version+1);u.addEventListener("upgradeneeded",O),u.addEventListener("error",I),u.addEventListener("success",D)}}catch(o){console.warn("Issue in "+T+": "+o.message),n.replaceOrExtractHomeContents(e,t,i)}};null!=indexedDB?((S=indexedDB.open(L)).addEventListener("upgradeneeded",O),S.addEventListener("error",I),S.addEventListener("success",D)):void 0!==i.homeError&&(console.warn("indexedDB unavailable"),n.replaceOrExtractHomeContents(e,t,i))}HomeRecorder.cacheResourcesStoredInContentDigestManager=!0}else this.replaceOrExtractHomeContents(e,t,i)},HomeRecorder.prototype.replaceOrExtractHomeContents=function(e,t,i){var n=[];if(this.searchContents(e,[],n,(function(e){return e instanceof HomeURLContent})),n.length>0)for(var o=this,r=n.slice(0).reverse(),l=ContentDigestManager.getInstance(),a=r.length-1;a>=0;a--)l.getContentDigest(r[a],{homeContent:r[a],digestReady:function(a,s){if(r.splice(r.lastIndexOf(a),1),0===r.length){var h=[];o.searchContents(e,[],h,(function(e){return e instanceof HomeURLContent&&null!=l.getPermanentContentDigest(e)}),(function(e){var t=l.getPermanentContentDigest(e);return t.getURL().indexOf(".extract",t.getURL().length-8)>0?URLContent.fromURL("jar:"+t.getURL()+"!/data"):e.isJAREntry()&&e.getJAREntryName().indexOf("/")>0&&!t.isJAREntry()?URLContent.fromURL("jar:"+t.getURL()+"!/"+e.getJAREntryName().substring(e.getJAREntryName().indexOf("/")+1)):t}));var u=n.length-h.length;if(u>0&&o.configuration.readCacheResourceURL&&o.configuration.writeCacheResourceURL)for(var d=o.configuration.writeCacheResourceURL.indexOf(LocalStorageURLContent.LOCAL_STORAGE_PREFIX)<0&&o.configuration.writeCacheResourceURL.indexOf(IndexedDBURLContent.INDEXED_DB_PREFIX)<0?5:0,c=function(){0==--u&&(ZIPTools.disposeZIP(t),o.searchContents(e,[],h,(function(e){return e instanceof HomeURLContent}),(function(e){var t=g[e.getURL()];return void 0!==t?t:e})),i.homeLoaded(e))},p=function(e,t,i,n){var r=UUID.randomUUID();null!=n&&(r+=n),l.getContentDigest(e,{digestReady:function(n,a){new BlobURLContent(t).writeBlob(o.configuration.writeCacheResourceURL,[r,a],{blobSaved:function(t,n){var r=CoreTools.format(o.configuration.readCacheResourceURL.replace(/(%[^s])/g,"%$1"),encodeURIComponent(n));null!=i&&(r="jar:"+r+"!/"+i);var s=URLContent.fromURL(r);g[e.getURL()]=s,l.setContentDigest(s,a),c()},blobError:function(e,t){console.warn("Can't saved all home extracted data: "+t),c()}})}})},g={},v=0;v<n.length;v++){var f=n[v];if(h.indexOf(f)<0){var m=f.getJAREntryName(),y=m.indexOf("/");if(y>0){var C=new JSZip;o.writeHomeZipEntries(C,"",f,{blobContentEntryName:m.substring(y+1),contentSaved:function(e){p(e,o.generateZip(C,d,"blob"),this.blobContentEntryName)},contentError:function(e,t){console.warn("Can't extract all home data: "+t),c()}})}else f.getStreamURL({homeContent:f,urlReady:function(e){if(0===e.indexOf("jar:")){var t=e.indexOf("!/"),i=decodeURIComponent(e.substring(t+2)),n=e.substring(4,t);ZIPTools.getZIP(n,!1,{homeContent:this.homeContent,zipReady:function(e){try{var t=e.file(i).asUint8Array();if(ZIPTools.isPNGImage(t)||ZIPTools.isGIFImage(t)||ZIPTools.isJPEGImage(t)||ZIPTools.isBMPImage(t))p(this.homeContent,new Blob([t]));else{var n=new JSZip;o.writeZipEntry(n,"data",this.homeContent,{contentSaved:function(e){p(e,o.generateZip(n,d,"blob"),"data",".extract")},contentError:function(e,t){console.warn("Can't extract all home data: "+t),c()}})}}catch(e){this.zipError(e)}},zipError:function(e){console.warn("Can't extract all home data: "+e),c()}})}},urlError:function(e,t){console.warn("Can't extract all home data: "+t),c()}})}}else ZIPTools.disposeZIP(t),i.homeLoaded(e)}},digestError:function(t,n){console.warn("Can't retrieve home content digest: "+n),r.splice(r.lastIndexOf(this.homeContent),1),0===r.length&&i.homeLoaded(e)}});else i.homeLoaded(e)},HomeRecorder.prototype.writeHome=function(e,t,i){var n=void 0===this.configuration.includeAllContent||this.configuration.includeAllContent,o=void 0!==this.configuration.writeDataType?this.configuration.writeDataType:"blob",r=[];this.searchContents(e,[],r);var l=!1,a=null;if(r.length>0)for(var s=this,h=r.slice(0),u=[],d={},c=0,p=ContentDigestManager.getInstance(),g=h.length-1;g>=0;g--){var v=h[g];v instanceof LocalURLContent||v.isJAREntry()&&URLContent.fromURL(v.getJAREntryURL())instanceof LocalURLContent||v instanceof HomeURLContent||v instanceof SimpleURLContent||n?p.getContentDigest(v,{digestReady:function(n,g){var v=!1;if(void 0!==g)for(var f=0;f<u.length;f++){var m=u[f];if(n.getURL()!==m.getURL()&&p.equals(n,m)){d[n.getURL()]=d[m.getURL()],r.splice(r.indexOf(n),1),v=!0;break}}if(!v){var y="";if(n.isJAREntry()){var C=n.getJAREntryName();if(n instanceof HomeURLContent){var S=C.indexOf("/");S>0&&(y=C.substring(S))}else n instanceof SimpleURLContent||(y="/"+C)}var E=c+++y;d[n.getURL()]=E,u.push(n)}h.splice(h.lastIndexOf(n),1),0!==h.length||l||(a=s.writeHomeToZip(e,t,r,d,o,i))},digestError:function(e,t){void 0!==i.homeError&&i.homeError(e,t)}}):(r.splice(g,1),h.splice(h.lastIndexOf(v),1),0!==h.length||l||(a=s.writeHomeToZip(e,t,r,d,o,i)))}else a=this.writeHomeToZip(e,t,r,{},o,i);return{abort:function(){l=!0,null!=a&&a.abort()}}},HomeRecorder.prototype.writeHomeToZip=function(e,t,i,n,o,r){var l=e.clone();l.setName(t);var a=new StringWriter,s=this.getHomeXMLExporter();s.setSavedContentNames(n),s.writeElement(new XMLWriter(a),l);var h=a.toString();if((!OperatingSystem.isInternetExplorer()||0==i.length)&&this.configuration.writeHomeWithWorker){if(null==this.writeHomeWorker){var u=new Blob(["importScripts('"+ZIPTools.getScriptFolder()+"jszip.min.js');importScripts('"+(null!=document.getElementById("recorder-worker")?document.getElementById("recorder-worker").src:ZIPTools.getScriptFolder("URLContent.js")+"URLContent.js', '"+ZIPTools.getScriptFolder("HomeRecorder.js")+"HomeRecorder.js")+"');onmessage = function(ev) {  new HomeRecorder(ev.data.recorderConfiguration).generateHomeZip(      ev.data.homeXmlEntry, ev.data.homeContents, ev.data.homeContentTypes, ev.data.savedContentNames, ev.data.dataType, {         homeSaved: function(homeXmlEntry, data) {            postMessage(data);         },         homeError: function(status, error) {            postMessage({status: status, error: error});         }    });}"],{type:"text/plain"});this.writeHomeWorker=new Worker(URL.createObjectURL(u))}var d=this,c=function(t){d.writeHomeWorker.removeEventListener("message",c),t.data.error?"indexedDB unavailable"===t.data.error?(console.warn("Can't use worker to save home"),d.writeHomeToZipWithoutWorker(e,h,i,n,o,r)):void 0!==r.homeError&&r.homeError(t.data.status,t.data.error):r.homeSaved(e,t.data)};this.writeHomeWorker.addEventListener("message",c);for(var p=new Array(i.length),g=0;g<i.length;g++){var v=Object.getPrototypeOf(i[g]).constructor;void 0!==v&&void 0!==v.name?p[g]=v.name:p[g]=i[g].constructor.toString().match(/function (\w*)/)[1]}return this.writeHomeWorker.postMessage({recorderConfiguration:this.configuration,homeXmlEntry:h,homeContents:i,homeContentTypes:p,savedContentNames:n,dataType:o}),{abort:function(){null!=d.writeHomeWorker&&d.writeHomeWorker.terminate(),d.writeHomeWorker=null}}}this.writeHomeToZipWithoutWorker(e,h,i,n,o,r)},HomeRecorder.prototype.writeHomeToZipWithoutWorker=function(e,t,i,n,o,r){return this.generateHomeZip(t,i,null,n,o,{homeSaved:function(t,i){r.homeSaved(e,i)},homeError:function(e,t){void 0!==r.homeError&&r.homeError(e,t)}}),{abort:function(){}}},HomeRecorder.prototype.generateHomeZip=function(e,t,i,n,o,r){var l=new JSZip;if(l.file("Home.xml",e),t.length>0){if(null!==i)for(var a=0;a<t.length;a++){var s=n[t[a].url];switch(i[a]){case"SimpleURLContent":t[a]=new SimpleURLContent(t[a].url);break;case"HomeURLContent":t[a]=new HomeURLContent(t[a].url);break;case"BlobURLContent":t[a]=new BlobURLContent(t[a].blob);break;default:if(t[a]=URLContent.fromURL(t[a].url),t[a]instanceof LocalStorageURLContent)return void r.homeError(0,"Data from localstorage not supported in workers")}n[t[a].getURL()]=s}var h=this,u=t.slice(0).reverse(),d={contentSaved:function(t){u.splice(u.lastIndexOf(t),1),0===u.length&&r.homeSaved(e,h.generateZip(l,h.configuration.compressionLevel,o))},contentError:function(e,t){r.homeError(e,t)}};for(a=u.length-1;a>=0;a--){var c=u[a],p=n[c.getURL()];if(void 0!==p){var g=p.indexOf("/");g>0&&(p=p.substring(0,g)),c instanceof SimpleURLContent||!c.isJAREntry()?this.writeZipEntry(l,p,c,d):c instanceof HomeURLContent?this.writeHomeZipEntries(l,p,c,d):this.writeZipEntries(l,p,c,d)}else d.contentSaved(c)}}else r.homeSaved(e,this.generateZip(l,this.configuration.compressionLevel,o))},HomeRecorder.prototype.generateZip=function(e,t,i){var n=void 0!==t&&0===t?"STORE":"DEFLATE",o=void 0!==t?t:1;return e.generate({type:i,compression:n,compressionOptions:{level:o}})},HomeRecorder.prototype.writeHomeZipEntries=function(e,t,i,n){var o=i.getJAREntryName(),r=o.indexOf("/");if(r>0){var l=i.getJAREntryURL(),a=o.substring(0,r+1),s=this;URLContent.fromURL(i.getJAREntryURL()).getStreamURL({urlReady:function(o){ZIPTools.getZIP(o,!1,{zipReady:function(o){try{for(var h=o.file(new RegExp("^"+a+".*")).reverse(),u=h.length-1;u>=0;u--){var d=h[u],c=new URLContent("jar:"+l+"!/"+encodeURIComponent(d.name).replace("+","%20"));s.writeZipEntry(e,t.length>0?t+d.name.substring(r):d.name.substring(r+1),c,{zipEntry:d,contentSaved:function(e){h.splice(h.lastIndexOf(this.zipEntry),1),0===h.length&&n.contentSaved(i)},contentError:function(e,t){n.contentError(e,t)}})}}catch(e){this.zipError(e)}},zipError:function(e){n.contentError(e,e.message)}})},urlError:function(e,t){n.contentError(e,t)}})}else this.writeZipEntry(e,t,i,n)},HomeRecorder.prototype.writeZipEntries=function(e,t,i,n){var o=this;URLContent.fromURL(i.getJAREntryURL()).getStreamURL({urlReady:function(r){ZIPTools.getZIP(r,!1,{zipReady:function(r){try{for(var l=r.file(/.*/).reverse(),a=l.length-1;a>=0;a--){var s=l[a],h=new URLContent("jar:"+i.getJAREntryURL()+"!/"+encodeURIComponent(s.name).replace("+","%20"));o.writeZipEntry(e,t+"/"+s.name,h,{zipEntry:s,contentSaved:function(e){l.splice(l.lastIndexOf(this.zipEntry),1),0===l.length&&n.contentSaved(i)},contentError:function(e,t){n.contentError(e,t)}})}}catch(e){this.zipError(e)}},zipError:function(e){n.contentError(e,e.message)}})},urlError:function(e,t){n.contentError(e,t)}})},HomeRecorder.prototype.writeZipEntry=function(e,t,i,n){i.getStreamURL({urlReady:function(o){if(0===o.indexOf("jar:")){var r=o.indexOf("!/"),l=decodeURIComponent(o.substring(r+2)),a=o.substring(4,r);ZIPTools.getZIP(a,!1,{zipReady:function(o){try{var r=o.file(l);e.file(t,r.asUint8Array(),{binary:!0}),n.contentSaved(i)}catch(e){this.zipError(e)}},zipError:function(e){n.contentError(e,e.message)}})}else{var s=new XMLHttpRequest;s.open("GET",o,!0),s.responseType="arraybuffer",s.addEventListener("load",(function(){e.file(t,s.response),n.contentSaved(i)})),s.send()}},urlError:function(e,t){n.contentError(e,t)}})},HomeRecorder.prototype.getHomeXMLExporter=function(){return new HomeXMLExporter},HomeRecorder.prototype.searchContents=function(e,t,i,n,o){if(Array.isArray(e))for(var r=0;r<e.length;r++){null!==(h=this.searchContents(e[r],t,i,n,o))&&(e[r]=h)}else{if(e instanceof URLContent&&(void 0===n||n(e))){for(r=0;r<i.length&&i[r].getURL()!=e.getURL();r++);return r===i.length&&i.push(e),void 0!==o?o(e):null}if(null!=e&&"number"!=typeof e&&"string"!=typeof e&&"boolean"!=typeof e&&"function"!=typeof e&&!(e instanceof URLContent)&&t.indexOf(e)<0){t.push(e);for(var l=Object.getOwnPropertyNames(e),a=0;a<l.length;a++){var s=l[a];if(!("object3D"==s||e.constructor&&e.constructor.__transients&&-1!=e.constructor.__transients.indexOf(s))){var h,u=e[s];null!==(h=this.searchContents(u,t,i,n,o))&&(e[s]=h)}}}}return null},HomeComponent3D.__interfaces=["com.eteks.sweethome3d.viewcontroller.View3D","com.eteks.sweethome3d.viewcontroller.View"],HomeComponent3D.LONG_TOUCH_DELAY=200,HomeComponent3D.LONG_TOUCH_DELAY_WHEN_DRAGGING=400,HomeComponent3D.LONG_TOUCH_DURATION_AFTER_DELAY=800,HomeComponent3D.DOUBLE_TOUCH_DELAY=500,HomeComponent3D.prototype.createComponent3D=function(e,t,i){this.canvas3D=new HTMLCanvas3D(e);var n=this;i&&(this.addMouseListeners(i,t,this.canvas3D),null!==t&&(this.navigationPanelId=this.createNavigationPanel(this.home,t,i),this.setNavigationPanelVisible(t.isNavigationPanelVisible()),this.preferencesChangeListener=function(e){n.setNavigationPanelVisible(e.getNewValue())},t.addPropertyChangeListener("NAVIGATION_PANEL_VISIBLE",this.preferencesChangeListener),this.editingIn3DViewChangeListener=function(e){n.updateObjectsAndFurnitureGroups(n.home.getSelectedItems())},t.addPropertyChangeListener("EDITING_IN_3D_VIEW_ENABLED",this.editingIn3DViewChangeListener)),this.createActions(i),this.installKeyboardActions()),this.updateView(this.home.getCamera()),this.updateViewPlatformTransform(this.home.getCamera(),!1),this.addCameraListeners(),this.canvas3D.setScene(this.createSceneTree(!0,!1)),this.unitChangeListener=function(e){n.updateObjects(n.home.getDimensionLines())},t.addPropertyChangeListener("UNIT",this.unitChangeListener)},HomeComponent3D.prototype.getHTMLElement=function(){return this.canvas3D.getHTMLElement()},HomeComponent3D.prototype.disposeGeometries=function(){this.home.structure&&ModelManager.getInstance().unloadModel(this.home.structure,!0),ModelManager.getInstance().disposeGeometries(this.canvas3D.getScene())},HomeComponent3D.prototype.revalidate=function(){var e=this.canvas3D.getHTMLElement().getBoundingClientRect();null!=this.navigationPanelId&&(navigationPanelDiv=document.getElementById(this.navigationPanelId),void 0!==navigationPanelDiv&&void 0!==navigationPanelDiv.style&&(navigationPanelDiv.style.left=e.left+window.pageXOffset+"px",navigationPanelDiv.style.top=e.top+window.pageYOffset+"px")),this.canvas3D.updateViewportSize()},HomeComponent3D.prototype.createNavigationPanel=function(e,t,i){var n,o=this.getSimulatedKeyElements(document.getElementsByTagName("body")[0]),r=null;try{n=t.getLocalizedString("HomeComponent3D","navigationPanel.innerHTML")}catch(e){n='<img src="'+ZIPTools.getScriptFolder("gl-matrix-min.js")+'navigationPanel.png"     style="width: 56px; height:59px; margin:5px; user-drag: none; user-select: none; -moz-user-select: none; -webkit-user-drag: none; -webkit-user-select: none; -ms-user-select: none;"     usemap="#navigationPanelMap"/><map name="navigationPanelMap" id="navigationPanelMap">  <area shape="poly" coords="28,4,33,8,33,19,22,19,22,8,29,4" data-simulated-key="UP" />  <area shape="poly" coords="4,28,8,23,19,23,19,34,8,34,4,29" data-simulated-key="LEFT" />  <area shape="poly" coords="28,54,33,50,33,39,22,39,22,50,29,54" data-simulated-key="DOWN" />  <area shape="poly" coords="51,28,47,23,36,23,36,34,47,34,51,29" data-simulated-key="RIGHT" />  <area shape="poly" coords="28,22,33,26,33,28,22,28,22,26,29,22" data-simulated-key="PAGE_UP" />  <area shape="poly" coords="28,36,33,32,33,30,22,30,22,32,29,36" data-simulated-key="PAGE_DOWN" /></map>'}var l=this;if(null!==n){(r=document.createElement("div")).setAttribute("id","div"+Math.floor(1e10*Math.random())),r.style.position="absolute",this.windowResizeListener=function(e){l.revalidate()},window.addEventListener("resize",this.windowResizeListener);for(var a=0,s=this.canvas3D.getHTMLElement();s&&s.style&&isNaN(a=parseInt(s.style.zIndex));s=s.parentElement);r.style.zIndex=isNaN(a)?"1":(a+1).toString(),r.style.visibility="hidden",r.innerHTML=n,o.push.apply(o,this.getSimulatedKeyElements(r));var h=document.getElementsByTagName("body")[0];h.insertBefore(r,h.firstChild),r.addEventListener("mousedown",(function(e){l.mouseListener.mousePressed(e)}))}this.simulatedEventListener={mousePressed:function(e){var t=e.target,i=function(){var i=t.getAttribute("data-simulated-key"),n=i.substring(i.indexOf(":")+1),o="";(e.ctrlKey||-1!=n.indexOf("control "))&&(o+="control "),(e.altKey||-1!=n.indexOf("alt "))&&(o+="alt "),(e.metaKey||-1!=n.indexOf("meta "))&&(o+="meta "),(e.shiftKey||-1!=n.indexOf("shift "))&&(o+="shift "),o+="pressed "+n,l.callAction(e,o)},n=function(e){window.clearInterval(o),OperatingSystem.isInternetExplorerOrLegacyEdge()&&window.PointerEvent?(t.removeEventListener("pointerup",n),t.removeEventListener("pointerleave",n)):(t.removeEventListener("touchend",n),t.removeEventListener("mouseup",n),t.removeEventListener("mouseleave",n)),l.mouseListener.windowMouseReleased(e),e.stopPropagation()};OperatingSystem.isInternetExplorerOrLegacyEdge()&&window.PointerEvent?(t.addEventListener("pointerup",n),t.addEventListener("pointerleave",n)):(t.addEventListener("touchend",n),t.addEventListener("mouseup",n),t.addEventListener("mouseleave",n)),i();var o=window.setInterval(i,80)},pointerMousePressed:function(e){e.stopPropagation()},touchStarted:function(e){e.preventDefault(),l.simulatedEventListener.mousePressed(e)}};for(var u=0;u<o.length;u++)OperatingSystem.isInternetExplorerOrLegacyEdge()&&window.PointerEvent?(o[u].addEventListener("pointerdown",this.simulatedEventListener.mousePressed),o[u].addEventListener("mousedown",this.simulatedEventListener.pointerMousePressed)):(o[u].addEventListener("touchstart",this.simulatedEventListener.touchStarted),o[u].addEventListener("mousedown",this.simulatedEventListener.mousePressed));return null!==r?r.getAttribute("id"):null},HomeComponent3D.prototype.getSimulatedKeyElements=function(e){var t=[];if(e.hasChildNodes())for(var i=0;i<e.childNodes.length;i++){var n=e.childNodes[i];if(n.hasAttribute&&n.hasAttribute("data-simulated-key")){var o=n.getAttribute("data-simulated-key");-1!==o.indexOf(":")&&0!==o.indexOf(this.canvas3D.getHTMLElement().getAttribute("id")+":")||t.push(n)}t.push.apply(t,this.getSimulatedKeyElements(n))}return t},HomeComponent3D.prototype.setNavigationPanelVisible=function(e){null!=this.navigationPanelId&&(document.getElementById(this.navigationPanelId).style.visibility=e?"visible":"hidden",e&&this.revalidate())},HomeComponent3D.prototype.removeHomeListeners=function(){this.home.removePropertyChangeListener("CAMERA",this.homeCameraListener);var e=this.home.getEnvironment();e.removePropertyChangeListener("SKY_COLOR",this.backgroundChangeListener),e.removePropertyChangeListener("SKY_TEXTURE",this.backgroundChangeListener),e.removePropertyChangeListener("GROUND_COLOR",this.backgroundChangeListener),e.removePropertyChangeListener("GROUND_TEXTURE",this.backgroundChangeListener),e.removePropertyChangeListener("GROUND_COLOR",this.groundChangeListener),e.removePropertyChangeListener("GROUND_TEXTURE",this.groundChangeListener),e.removePropertyChangeListener("BACKGROUND_IMAGE_VISIBLE_ON_GROUND_3D",this.groundChangeListener),this.home.removePropertyChangeListener("BACKGROUND_IMAGE",this.groundChangeListener),e.removePropertyChangeListener("LIGHT_COLOR",this.lightColorListener),e.removePropertyChangeListener("WALLS_ALPHA",this.wallsAlphaListener),this.home.getCamera().removePropertyChangeListener(this.cameraChangeListener),this.home.removePropertyChangeListener("CAMERA",this.elevationChangeListener),this.home.getCamera().removePropertyChangeListener(this.elevationChangeListener),this.home.removeSelectionListener(this.selectionListener),this.home.removeLevelsListener(this.levelListener);for(var t=this.home.getLevels(),i=0;i<t.length;i++)t[i].removePropertyChangeListener(this.levelChangeListener);this.home.removeWallsListener(this.wallListener);var n=this.home.getWalls();for(i=0;i<n.length;i++)n[i].removePropertyChangeListener(this.wallChangeListener);this.home.removeFurnitureListener(this.furnitureListener);var o=this.home.getFurniture();for(i=0;i<o.length;i++)this.removePropertyChangeListener(o[i],this.furnitureChangeListener);this.home.removeRoomsListener(this.roomListener);var r=this.home.getRooms();for(i=0;i<r.length;i++)r[i].removePropertyChangeListener(this.roomChangeListener);this.home.removePolylinesListener(this.polylineListener);var l=this.home.getPolylines();for(i=0;i<l.length;i++)l[i].removePropertyChangeListener(this.polylineChangeListener);this.home.removeDimensionLinesListener(this.dimensionLineListener);var a=this.home.getDimensionLines();for(i=0;i<a.length;i++)a[i].removePropertyChangeListener(this.dimensionLineChangeListener);this.home.removeLabelsListener(this.labelListener);var s=this.home.getLabels();for(i=0;i<s.length;i++)s[i].removePropertyChangeListener(this.labelChangeListener)},HomeComponent3D.prototype.removeMouseListeners=function(e){this.mouseListener&&(OperatingSystem.isInternetExplorerOrLegacyEdge()&&window.PointerEvent?(e.getHTMLElement().removeEventListener("pointerdown",this.mouseListener.pointerPressed),e.getHTMLElement().removeEventListener("mousedown",this.mouseListener.pointerMousePressed),e.getHTMLElement().removeEventListener("dblclick",this.mouseListener.mouseDoubleClicked),window.removeEventListener("pointermove",this.mouseListener.windowPointerMoved),window.removeEventListener("pointerup",this.mouseListener.windowPointerReleased)):(e.getHTMLElement().removeEventListener("touchstart",this.mouseListener.touchStarted),e.getHTMLElement().removeEventListener("touchmove",this.mouseListener.touchMoved),e.getHTMLElement().removeEventListener("touchend",this.mouseListener.touchEnded),e.getHTMLElement().removeEventListener("mousedown",this.mouseListener.mousePressed),e.getHTMLElement().removeEventListener("dblclick",this.mouseListener.mouseDoubleClicked),window.removeEventListener("mousemove",this.mouseListener.windowMouseMoved),window.removeEventListener("mouseup",this.mouseListener.windowMouseReleased)),e.getHTMLElement().removeEventListener("contextmenu",this.mouseListener.contextMenuDisplayed),e.getHTMLElement().removeEventListener("DOMMouseScroll",this.mouseListener.mouseScrolled),e.getHTMLElement().removeEventListener("mousewheel",this.mouseListener.mouseWheelMoved))},HomeComponent3D.prototype.dispose=function(){if(this.removeHomeListeners(),this.removeMouseListeners(this.canvas3D),null!=this.navigationPanelId){this.preferences.removePropertyChangeListener("NAVIGATION_PANEL_VISIBLE",this.preferencesChangeListener),window.removeEventListener("resize",this.windowResizeListener);for(var e=this.getSimulatedKeyElements(document.getElementsByTagName("body")[0]),t=0;t<e.length;t++)OperatingSystem.isInternetExplorerOrLegacyEdge()&&window.PointerEvent?(e[t].removeEventListener("pointerdown",this.simulatedEventListener.mousePressed),e[t].removeEventListener("mousedown",this.simulatedEventListener.pointerMousePressed)):(e[t].removeEventListener("touchstart",this.simulatedEventListener.touchStarted),e[t].removeEventListener("mousedown",this.simulatedEventListener.mousePressed));var i=document.getElementById(this.navigationPanelId);i.parentElement.removeChild(i),this.navigationPanelId=null}this.preferences.removePropertyChangeListener("EDITING_IN_3D_VIEW_ENABLED",this.editingIn3DViewChangeListener),this.preferences.removePropertyChangeListener("UNIT",this.unitChangeListener),this.canvas3D.clear()},HomeComponent3D.prototype.addCameraListeners=function(){var e=this,t=this.home;this.cameraChangeListener=function(i){e.cameraChangeListener.updater||(e.cameraChangeListener.updater=function(){e.canvas3D&&(e.updateView(t.getCamera()),e.updateViewPlatformTransform(t.getCamera(),!0)),delete e.cameraChangeListener.updater},setTimeout(e.cameraChangeListener.updater,0))},t.getCamera().addPropertyChangeListener(this.cameraChangeListener),this.homeCameraListener=function(i){e.updateView(t.getCamera()),e.updateViewPlatformTransform(t.getCamera(),!1),i.getOldValue().removePropertyChangeListener(e.cameraChangeListener),t.getCamera().addPropertyChangeListener(e.cameraChangeListener)},this.home.addPropertyChangeListener("CAMERA",this.homeCameraListener)},HomeComponent3D.prototype.updateView=function(e){var t=e.getFieldOfView();0===t&&(t=63*Math.PI/180),this.canvas3D.setFieldOfView(t);var i=2.5,n=5e5;if(this.canvas3D.getDepthBits()<=16){n=3e3;var o=this.getApproximateHomeBounds();if(null!=o&&!o.intersect(vec3.fromValues(e.getX(),e.getY(),e.getZ()))){var r=this.getDistanceToBox(e.getX(),e.getY(),e.getZ(),o);isNaN(r)||(i=Math.max(i,.1*r))}}else{var l=this.getHomeHeight();e.getZ()>l&&(i=Math.max(i,(e.getZ()-l)/10))}var a=this.canvas3D.getHTMLElement().getBoundingClientRect();if(e.getZ()>0&&0!==a.width&&0!==a.height){var s=Math.atan(Math.tan(t/2)*a.height/a.width),h=e.getPitch()+s;if(h>0){var u=e.getZ()/Math.sin(h);(i=Math.min(i,.35*u))*n<u&&(i=u/n)}}this.canvas3D.setFrontClipDistance(i),this.canvas3D.setBackClipDistance(i*n)},HomeComponent3D.prototype.getApproximateHomeBounds=function(){if(null===this.approximateHomeBoundsCache){for(var e=null,t=this.home.getFurniture(),i=0;i<t.length;i++){var n=t[i];if(n.isVisible()&&(null===n.getLevel()||n.getLevel().isViewable())){var o=Math.max(n.getWidthInPlan(),n.getDepthInPlan())/2,r=n.getGroundElevation(),l=vec3.fromValues(n.getX()-o,n.getY()-o,r);null===e?e=new BoundingBox3D(l,l):e.combine(l),e.combine(vec3.fromValues(n.getX()+o,n.getY()+o,r+n.getHeightInPlan()))}}var a=this.home.getWalls();for(i=0;i<a.length;i++){var s=a[i];if(null===s.getLevel()||s.getLevel().isViewable()){var h=vec3.fromValues(s.getXStart(),s.getYStart(),null!==s.getLevel()?s.getLevel().getElevation():0);null===e?e=new BoundingBox3D(h,h):e.combine(h),e.combine(vec3.fromValues(s.getXEnd(),s.getYEnd(),h.z+(null!==s.getHeight()?s.getHeight():this.home.getWallHeight())))}}var u=this.home.getRooms();for(i=0;i<u.length;i++){var d=u[i];if(null===d.getLevel()||d.getLevel().isViewable()){var c=vec3.fromValues(d.getXCenter(),d.getYCenter(),null!==d.getLevel()?d.getLevel().getElevation():0);null===e?e=new BoundingBox3D(c,c):e.combine(c)}}var p=this.home.getDimensionLines();for(i=0;i<p.length;i++){var g=p[i];if((null==g.getLevel()||g.getLevel().isViewable())&&g.isVisibleIn3D()){var v=null!=g.getLevel()?g.getLevel().getElevation():0;h=vec3.fromValues(g.getXStart(),g.getYStart(),v+g.getElevationStart());null==e?e=new BoundingBox3D(h,h):e.combine(h),e.combine(vec3.fromValues(g.getXEnd(),g.getYEnd(),v+g.getElevationEnd()))}}var f=this.home.getLabels();for(i=0;i<f.length;i++){var m=f[i];if((null===m.getLevel()||m.getLevel().isViewable())&&null!==m.getPitch()){c=vec3.fromValues(m.getX(),m.getY(),m.getGroundElevation());null==e?e=new BoundingBox3D(c,c):e.combine(c)}}var y=this.home.getPolylines();for(i=0;i<y.length;i++){var C=y[i];if((null==C.getLevel()||C.getLevel().isViewable())&&C.isVisibleIn3D())for(var S=C.getPoints(),E=0;E<S.length;E++){var A=vec3.fromValues(S[E][0],S[E][1],C.getGroundElevation());null==e?e=new BoundingBox3D(A,A):e.combine(A)}}this.approximateHomeBoundsCache=e}return this.approximateHomeBoundsCache},HomeComponent3D.prototype.getDistanceToBox=function(e,t,i,n){var o=vec3.fromValues(e,t,i),r=vec3.create();n.getLower(r);var l=vec3.create();n.getUpper(l);for(var a=[vec3.fromValues(r[0],r[1],r[2]),vec3.fromValues(l[0],r[1],r[2]),vec3.fromValues(r[0],l[1],r[2]),vec3.fromValues(l[0],l[1],r[2]),vec3.fromValues(r[0],r[1],l[2]),vec3.fromValues(l[0],r[1],l[2]),vec3.fromValues(r[0],l[1],l[2]),vec3.fromValues(l[0],l[1],l[2])],s=new Array(a.length),h=0;h<s.length;h++)s[h]=vec3.squaredDistance(o,a[h]);var u=[this.getDistanceToSide(o,a,s,0,1,3,2,2),this.getDistanceToSide(o,a,s,0,1,5,4,1),this.getDistanceToSide(o,a,s,0,2,6,4,0),this.getDistanceToSide(o,a,s,4,5,7,6,2),this.getDistanceToSide(o,a,s,2,3,7,6,1),this.getDistanceToSide(o,a,s,1,3,7,5,0)],d=u[0];for(h=1;h<u.length;h++)d=Math.min(d,u[h]);return d},HomeComponent3D.prototype.getDistanceToSide=function(e,t,i,n,o,r,l,a){switch(a){case 0:if(e[1]<=t[n][1])return e[2]<=t[n][2]?Math.sqrt(i[n]):e[2]>=t[l][2]?Math.sqrt(i[l]):this.getDistanceToLine(e,t[n],t[l]);if(e[1]>=t[o][1])return e[2]<=t[o][2]?Math.sqrt(i[o]):e[2]>=t[r][2]?Math.sqrt(i[r]):this.getDistanceToLine(e,t[o],t[r]);if(e[2]<=t[n][2])return this.getDistanceToLine(e,t[n],t[o]);if(e[2]>=t[l][2])return this.getDistanceToLine(e,t[r],t[l]);break;case 1:if(e[0]<=t[n][0])return e[2]<=t[n][2]?Math.sqrt(i[n]):e[2]>=t[l][2]?Math.sqrt(i[l]):this.getDistanceToLine(e,t[n],t[l]);if(e[0]>=t[o][0])return e[2]<=t[o][2]?Math.sqrt(i[o]):e[2]>=t[r][2]?Math.sqrt(i[r]):this.getDistanceToLine(e,t[o],t[r]);if(e[2]<=t[n][2])return this.getDistanceToLine(e,t[n],t[o]);if(e[2]>=t[l][2])return this.getDistanceToLine(e,t[r],t[l]);break;case 2:if(e[0]<=t[n][0])return e[1]<=t[n][1]?Math.sqrt(i[n]):e[1]>=t[l][1]?Math.sqrt(i[l]):this.getDistanceToLine(e,t[n],t[l]);if(e[0]>=t[o][0])return e[1]<=t[o][1]?Math.sqrt(i[o]):e[1]>=t[r][1]?Math.sqrt(i[r]):this.getDistanceToLine(e,t[o],t[r]);if(e[1]<=t[n][1])return this.getDistanceToLine(e,t[n],t[o]);if(e[1]>=t[l][1])return this.getDistanceToLine(e,t[r],t[l])}var s=vec3.fromValues(t[o][0]-t[n][0],t[o][1]-t[n][1],t[o][2]-t[n][2]),h=vec3.fromValues(t[r][0]-t[n][0],t[r][1]-t[n][1],t[r][2]-t[n][2]),u=vec3.create();return vec3.cross(u,s,h),Math.abs(vec3.dot(u,vec3.fromValues(t[n][0]-e[0],t[n][1]-e[1],t[n][2]-e[2])))/vec3.length(u)},HomeComponent3D.prototype.getDistanceToLine=function(e,t,i){var n=vec3.fromValues(i[0]-t[0],i[1]-t[1],i[2]-t[2]),o=vec3.fromValues(e[0]-t[0],e[1]-t[1],e[2]-t[2]),r=vec3.create();return vec3.cross(r,n,o),vec3.length(r)/vec3.length(n)},HomeComponent3D.prototype.getHomeHeight=function(){if(null===this.homeHeightCache){for(var e=0,t=this.home.getFurniture(),i=0;i<t.length;i++){var n=t[i];n.isVisible()&&(null==n.getLevel()||n.getLevel().isViewable())&&(e=Math.max(e,n.getGroundElevation()+n.getHeight()))}var o=this.home.getWalls();for(i=0;i<o.length;i++){var r=o[i];if(null==r.getLevel()||r.getLevel().isViewable()){var l=null!=r.getLevel()?r.getLevel().getElevation():0;null!=r.getHeight()?(e=Math.max(e,l+r.getHeight()),null!=r.getHeightAtEnd()&&(e=Math.max(e,l+r.getHeightAtEnd()))):e=Math.max(e,l+this.home.getWallHeight())}}var a=this.home.getRooms();for(i=0;i<a.length;i++){var s=a[i];null!=s.getLevel()&&s.getLevel().isViewable()&&(e=Math.max(e,s.getLevel().getElevation()))}var h=this.home.getPolylines();for(i=0;i<h.length;i++){var u=h[i];u.isVisibleIn3D()&&(null==u.getLevel()||u.getLevel().isViewable())&&(e=Math.max(e,u.getGroundElevation()))}var d=this.home.getDimensionLines();for(i=0;i<d.length;i++){var c=d[i];if(c.isVisibleIn3D()&&(null==c.getLevel()||c.getLevel().isViewable())){var p=null!=c.getLevel()?c.getLevel().getElevation():0;e=Math.max(e,p+Math.max(c.getElevationStart(),c.getElevationEnd()))}}var g=this.home.getLabels();for(i=0;i<g.length;i++){var v=g[i];null==v.getPitch()||null!=v.getLevel()&&!v.getLevel().isViewable()||(e=Math.max(e,v.getGroundElevation()))}this.homeHeightCache=e}return this.homeHeightCache},HomeComponent3D.prototype.updateViewPlatformTransform=function(e,t){if(t)this.moveCameraWithAnimation(e);else{delete this.cameraInterpolator;var i=mat4.create();this.computeViewPlatformTransform(i,e.getX(),e.getY(),e.getZ(),e.getYaw(),e.getPitch()),this.canvas3D.setViewPlatformTransform(i)}},HomeComponent3D.prototype.moveCameraWithAnimation=function(e){if(void 0===this.cameraInterpolator&&(this.cameraInterpolator={initialCamera:null,finalCamera:null,alpha:null}),null===this.cameraInterpolator.finalCamera||this.cameraInterpolator.finalCamera.getX()!==e.getX()||this.cameraInterpolator.finalCamera.getY()!==e.getY()||this.cameraInterpolator.finalCamera.getZ()!==e.getZ()||this.cameraInterpolator.finalCamera.getYaw()!==e.getYaw()||this.cameraInterpolator.finalCamera.getPitch()!==e.getPitch()){if(null===this.cameraInterpolator.alpha||1===this.cameraInterpolator.alpha)this.cameraInterpolator.initialCamera=new Camera(this.camera.getX(),this.camera.getY(),this.camera.getZ(),this.camera.getYaw(),this.camera.getPitch(),this.camera.getFieldOfView());else if(this.cameraInterpolator.alpha<.3){var t=mat4.create();this.computeViewPlatformTransform(t,this.cameraInterpolator.finalCamera.getX(),this.cameraInterpolator.finalCamera.getY(),this.cameraInterpolator.finalCamera.getZ(),this.cameraInterpolator.finalCamera.getYaw(),this.cameraInterpolator.finalCamera.getPitch()),this.canvas3D.setViewPlatformTransform(t),this.cameraInterpolator.initialCamera=this.cameraInterpolator.finalCamera}else this.cameraInterpolator.initialCamera=new Camera(this.cameraInterpolator.initialCamera.getX()+(this.cameraInterpolator.finalCamera.getX()-this.cameraInterpolator.initialCamera.getX())*this.cameraInterpolator.alpha,this.cameraInterpolator.initialCamera.getY()+(this.cameraInterpolator.finalCamera.getY()-this.cameraInterpolator.initialCamera.getY())*this.cameraInterpolator.alpha,this.cameraInterpolator.initialCamera.getZ()+(this.cameraInterpolator.finalCamera.getZ()-this.cameraInterpolator.initialCamera.getZ())*this.cameraInterpolator.alpha,this.cameraInterpolator.initialCamera.getYaw()+(this.cameraInterpolator.finalCamera.getYaw()-this.cameraInterpolator.initialCamera.getYaw())*this.cameraInterpolator.alpha,this.cameraInterpolator.initialCamera.getPitch()+(this.cameraInterpolator.finalCamera.getPitch()-this.cameraInterpolator.initialCamera.getPitch())*this.cameraInterpolator.alpha,e.getFieldOfView());this.cameraInterpolator.finalCamera=new Camera(e.getX(),e.getY(),e.getZ(),e.getYaw(),e.getPitch(),e.getFieldOfView()),null===this.cameraInterpolator.alpha&&(this.cameraInterpolator.animationDuration=75),this.cameraInterpolator.startTime=Date.now(),this.cameraInterpolator.alpha=0;var i=this;requestAnimationFrame((function(){i.interpolateUntilAlphaEquals1()}))}},HomeComponent3D.prototype.interpolateUntilAlphaEquals1=function(){if(this.cameraInterpolator){var e=Date.now(),t=Math.min(1,(e-this.cameraInterpolator.startTime)/this.cameraInterpolator.animationDuration);if(this.cameraInterpolator.alpha!==t){var i=mat4.create();this.computeTransform(t,i),this.canvas3D.setViewPlatformTransform(i),this.cameraInterpolator.alpha=t}if(this.cameraInterpolator.alpha<1){var n=this;requestAnimationFrame((function(){n.interpolateUntilAlphaEquals1()}))}}},HomeComponent3D.prototype.computeTransform=function(e,t){this.computeViewPlatformTransform(t,this.cameraInterpolator.initialCamera.getX()+(this.cameraInterpolator.finalCamera.getX()-this.cameraInterpolator.initialCamera.getX())*e,this.cameraInterpolator.initialCamera.getY()+(this.cameraInterpolator.finalCamera.getY()-this.cameraInterpolator.initialCamera.getY())*e,this.cameraInterpolator.initialCamera.getZ()+(this.cameraInterpolator.finalCamera.getZ()-this.cameraInterpolator.initialCamera.getZ())*e,this.cameraInterpolator.initialCamera.getYaw()+(this.cameraInterpolator.finalCamera.getYaw()-this.cameraInterpolator.initialCamera.getYaw())*e,this.cameraInterpolator.initialCamera.getPitch()+(this.cameraInterpolator.finalCamera.getPitch()-this.cameraInterpolator.initialCamera.getPitch())*e)},HomeComponent3D.prototype.computeViewPlatformTransform=function(e,t,i,n,o,r){var l=mat4.create();mat4.fromYRotation(l,-o+Math.PI);var a=mat4.create();mat4.fromXRotation(a,-r),mat4.mul(l,l,a),mat4.identity(e),mat4.translate(e,e,vec3.fromValues(t,n,i)),mat4.mul(e,e,l),this.camera=new Camera(t,i,n,o,r,0)},HomeComponent3D.prototype.addMouseListeners=function(e,t,i){var n=this,o={initialPointerLocation:null,lastPointerLocation:null,touchEventType:!1,buttonPressed:-1,pointerTouches:{},lastEventType:null,lastTargetTouches:[],distanceLastPinch:-1,firstTouchStartedTimeStamp:0,longTouchActivated:!1,doubleLongTouchActivated:!1,longTouchStartTime:0,actionStartedInComponent3D:!1,contextMenuEventType:!1,mousePressed:function(t){o.touchEventType||o.contextMenuEventType||0!==t.button||(o.updateCoordinates(t,"mousePressed"),o.initialPointerLocation=[t.canvasX,t.canvasY],o.lastPointerLocation=[t.canvasX,t.canvasY],o.actionStartedInComponent3D=!0,e.pressMouse(t.canvasX,t.canvasY,t.clickCount,o.isShiftDown(t),o.isAlignmentActivated(t),o.isDuplicationActivated(t),o.isMagnetismToggled(t),View.PointerType.MOUSE)),t.stopPropagation()},isShiftDown:function(e){return e.shiftKey&&!e.altKey&&!e.ctrlKey&&!e.metaKey},isAlignmentActivated:function(e){return OperatingSystem.isWindows()||OperatingSystem.isMacOSX()?e.shiftKey:e.shiftKey&&!e.altKey},isDuplicationActivated:function(e){return OperatingSystem.isMacOSX()?e.altKey:e.ctrlKey},isMagnetismToggled:function(e){return OperatingSystem.isWindows()?e.altKey:OperatingSystem.isMacOSX()?e.metaKey:e.shiftKey&&e.altKey},mouseDoubleClicked:function(e){o.updateCoordinates(e,"mouseDoubleClicked"),o.mousePressed(e),actionStartedInComponent3D=!1},windowMouseMoved:function(t){o.touchEventType||o.contextMenuEventType||(o.updateCoordinates(t,"mouseMoved"),null==o.initialPointerLocation||o.initialPointerLocation[0]===t.canvasX&&o.initialPointerLocation[1]===t.canvasY||(o.initialPointerLocation=null),null==o.initialPointerLocation&&(0===t.buttons&&o.isInCanvas(t)||o.actionStartedInComponent3D)&&(e.isEditingState()?e.moveMouse(t.canvasX,t.canvasY):o.actionStartedInComponent3D&&document.activeElement===n.canvas3D.getHTMLElement()&&o.moveCamera(t.canvasX,t.canvasY,o.lastPointerLocation[0],o.lastPointerLocation[1],t.button,t.altKey,t.shiftKey)),o.lastPointerLocation=[t.canvasX,t.canvasY])},windowMouseReleased:function(t){o.touchEventType||null!=o.lastPointerLocation&&(o.actionStartedInComponent3D&&document.activeElement===n.canvas3D.getHTMLElement()&&0===t.button&&(o.contextMenuEventType?e.releaseMouse(o.initialPointerLocation[0],o.initialPointerLocation[1]):(o.updateCoordinates(t,"mouseReleased"),e.releaseMouse(t.canvasX,t.canvasY))),o.initialPointerLocation=null,o.lastPointerLocation=null,o.actionStartedInComponent3D=!1),o.contextMenuEventType=!1},pointerPressed:function(e){"mouse"==e.pointerType?o.mousePressed(e):(o.copyPointerToTargetTouches(e,!1),o.touchStarted(e))},pointerMousePressed:function(e){e.stopPropagation()},windowPointerMoved:function(e){"mouse"==e.pointerType?o.windowMouseMoved(e):(o.copyPointerToTargetTouches(e,!1),o.touchMoved(e))},windowPointerReleased:function(e){"mouse"==e.pointerType?o.windowMouseReleased(e):(e.preventDefault(),o.copyPointerToTargetTouches(e,!0),o.touchEnded(e))},contextMenuDisplayed:function(e){o.contextMenuEventType=!0},touchStarted:function(i){if(o.touchEventType=void 0===i.pointerType,i.preventDefault(),document.activeElement!==n.canvas3D.getHTMLElement()&&n.canvas3D.getHTMLElement().focus(),o.updateCoordinates(i,"touchStarted"),null!=o.longTouch&&(clearTimeout(o.longTouch),o.longTouch=null,n.stopLongTouchAnimation()),1===i.targetTouches.length){var r=1;null!=o.initialPointerLocation&&o.distance(i.canvasX,i.canvasY,o.initialPointerLocation[0],o.initialPointerLocation[1])<5&&i.timeStamp-o.firstTouchStartedTimeStamp<=HomeComponent3D.DOUBLE_TOUCH_DELAY?(r=2,o.firstTouchStartedTimeStamp=0,o.initialPointerLocation=null):(o.firstTouchStartedTimeStamp=i.timeStamp,o.initialPointerLocation=[i.canvasX,i.canvasY]),o.longTouchActivated=!1,o.doubleLongTouchActivated=!1,o.distanceLastPinch=null,o.lastPointerLocation=[i.canvasX,i.canvasY],o.actionStartedInComponent3D=!0,o.longTouchWhenDragged=!1,t.isEditingIn3DViewEnabled()&&1==r&&null!==n.getClosestSelectableItemAt(i.canvasX,i.canvasY)&&(o.longTouch=setTimeout((function(){n.startLongTouchAnimation(i.canvasX,i.canvasY,(function(){o.longTouchActivated=!0,e.setAlignmentActivated(!0)}))}),HomeComponent3D.LONG_TOUCH_DELAY),o.longTouchStartTime=Date.now()),e.pressMouse(i.canvasX,i.canvasY,r,o.isShiftDown(i),o.isAlignmentActivated(i),o.isDuplicationActivated(i),o.isMagnetismToggled(i),View.PointerType.TOUCH)}else o.longTouchActivated&&2===i.targetTouches.length?(o.doubleLongTouchActivated=!0,e.setDuplicationActivated(!0)):e.escape(),2===i.targetTouches.length&&(o.actionStartedInComponent3D=!0,o.initialPointerLocation=null,o.distanceLastPinch=o.distance(i.targetTouches[0].clientX,i.targetTouches[0].clientY,i.targetTouches[1].clientX,i.targetTouches[1].clientY))},touchMoved:function(t){if(o.actionStartedInComponent3D&&(t.preventDefault(),t.stopPropagation(),o.updateCoordinates(t,"touchMoved")))if(o.initialPointerLocation=null,1==t.targetTouches.length)null!=o.longTouch&&(clearTimeout(o.longTouch),o.longTouch=null,n.stopLongTouchAnimation()),e.isEditingState()?o.doubleLongTouchActivated||e.moveMouse(t.canvasX,t.canvasY):n.home.getCamera()===n.home.getObserverCamera()?o.moveCamera(-t.canvasX,-t.canvasY,-o.lastPointerLocation[0],-o.lastPointerLocation[1],t.button,!1,!1):o.moveCamera(t.canvasX,t.canvasY,o.lastPointerLocation[0],o.lastPointerLocation[1],t.button,!1,!1),o.lastPointerLocation=[t.canvasX,t.canvasY];else if(2==t.targetTouches.length&&null!=o.distanceLastPinch)if(e.isEditingState())e.moveMouse(t.targetTouches[1].clientX,t.targetTouches[1].clientY);else{var i=o.distance(t.targetTouches[0].clientX,t.targetTouches[0].clientY,t.targetTouches[1].clientX,t.targetTouches[1].clientY),r=i/o.distanceLastPinch;o.zoomCamera(50*(1-r),!1),o.distanceLastPinch=i}},touchEnded:function(t){o.actionStartedInComponent3D&&(o.updateCoordinates(t,"touchEnded"),0==t.targetTouches.length?(null!=o.longTouch&&(clearTimeout(o.longTouch),o.longTouch=null,n.stopLongTouchAnimation()),e.releaseMouse(o.lastPointerLocation[0],o.lastPointerLocation[1]),o.isLongTouch()&&t.preventDefault(),o.actionStartedInComponent3D=!1):1==t.targetTouches.length?o.lastPointerLocation=[t.canvasX,t.canvasY]:2==t.targetTouches.length&&null!=o.distanceLastPinch&&(o.distanceLastPinch=o.distance(t.targetTouches[0].clientX,t.targetTouches[0].clientY,t.targetTouches[1].clientX,t.targetTouches[1].clientY)))},copyPointerToTargetTouches:function(e,t){for(var i in t?(e.changedTouches=[o.pointerTouches[e.pointerId]],delete o.pointerTouches[e.pointerId]):o.pointerTouches[e.pointerId]={clientX:e.clientX,clientY:e.clientY},e.targetTouches=[],o.pointerTouches)o.pointerTouches.hasOwnProperty(i)&&e.targetTouches.push(o.pointerTouches[i])},updateCoordinates:function(e,t){var i=n.canvas3D.getHTMLElement().getBoundingClientRect(),r=!0;if(0===t.indexOf("touch")){var l,a="touchStarted"==o.lastEventType?5:1.5;if(1===e.targetTouches.length&&"touchMoved"==t&&o.distance(o.lastTargetTouches[0].clientX,o.lastTargetTouches[0].clientY,e.targetTouches[0].clientX,e.targetTouches[0].clientY)<a||0===e.targetTouches.length&&"touchEnded"==t&&o.distance(o.lastTargetTouches[0].clientX,o.lastTargetTouches[0].clientY,e.changedTouches[0].clientX,e.changedTouches[0].clientY)<a?(l=o.lastTargetTouches,r=!1):(l=0==e.targetTouches.length?e.changedTouches:e.targetTouches,o.lastEventType=t),1==l.length){e.canvasX=l[0].clientX-i.left,e.canvasY=l[0].clientY-i.top;i=n.canvas3D.getHTMLElement().getBoundingClientRect();e.clientX=l[0].clientX,e.clientY=l[0].clientY,e.button=0}if(e.clickCount=1,r){o.lastTargetTouches=[];for(var s=0;void 0!==l[s];s++)o.lastTargetTouches.push({clientX:l[s].clientX,clientY:l[s].clientY})}}else e.canvasX=e.clientX-i.left,e.canvasY=e.clientY-i.top;return void 0===e.clickCount&&(e.clickCount="mouseDoubleClicked"==t?2:"mousePressed"==t||"mouseReleased"==t?1:0),"mouseWheelMoved"==t&&(e.wheelRotation=(void 0!==e.deltaY?e.deltaX+e.deltaY:-e.wheelDelta)/4),r},isLongTouch:function(e){return Date.now()-o.longTouchStartTime>(e?HomeComponent3D.LONG_TOUCH_DELAY_WHEN_DRAGGING:HomeComponent3D.LONG_TOUCH_DELAY)+HomeComponent3D.LONG_TOUCH_DURATION_AFTER_DELAY},distance:function(e,t,i,n){return Math.sqrt(Math.pow(i-e,2)+Math.pow(n-t,2))},isInCanvas:function(e){return e.canvasX>=0&&e.canvasX<n.canvas3D.getHTMLElement().clientWidth&&e.canvasY>=0&&e.canvasY<n.canvas3D.getHTMLElement().clientHeight},mouseScrolled:function(e){o.zoomCamera(e.detail,e.shiftKey)},mouseWheelMoved:function(t){t.preventDefault(),e.isEditingState()||o.zoomCamera((void 0!==t.deltaY?t.deltaY:-t.wheelDelta)/4,t.shiftKey)},zoomCamera:function(t,i){t*=-2.5;i&&(t*=5),e.moveCamera(t)},moveCamera:function(t,i,n,r,l,a,s){if((o.lastPointerLocation[0]!==t||o.lastPointerLocation[1]!==i)&&0===l)if(a){var h=1.25*(r-i);s&&(h*=5),e.moveCamera(h)}else{var u=.005*(t-n);s&&(u*=5),e.rotateCameraYaw(u);var d=.005*(i-r);e.rotateCameraPitch(d)}}};OperatingSystem.isInternetExplorerOrLegacyEdge()&&window.PointerEvent?(i.getHTMLElement().addEventListener("pointerdown",o.pointerPressed),i.getHTMLElement().addEventListener("mousedown",o.pointerMousePressed),i.getHTMLElement().addEventListener("dblclick",o.mouseDoubleClicked),window.addEventListener("pointermove",o.windowPointerMoved),window.addEventListener("pointerup",o.windowPointerReleased)):(i.getHTMLElement().addEventListener("touchstart",o.touchStarted),i.getHTMLElement().addEventListener("touchmove",o.touchMoved),i.getHTMLElement().addEventListener("touchend",o.touchEnded),i.getHTMLElement().addEventListener("mousedown",o.mousePressed),i.getHTMLElement().addEventListener("dblclick",o.mouseDoubleClicked),window.addEventListener("mousemove",o.windowMouseMoved),window.addEventListener("mouseup",o.windowMouseReleased)),i.getHTMLElement().addEventListener("contextmenu",o.contextMenuDisplayed),i.getHTMLElement().addEventListener("DOMMouseScroll",o.mouseScrolled),i.getHTMLElement().addEventListener("mousewheel",o.mouseWheelMoved),this.mouseListener=o},HomeComponent3D.prototype.startLongTouchAnimation=function(e,t,i){if(void 0===this.touchOverlay){this.touchOverlay=document.createElement("div"),this.touchOverlay.id="touch-overlay-timer",this.touchOverlay.classList.add("touch-overlay-timer"),this.touchOverlay.style.position="absolute",this.touchOverlay.style.top="0px",this.touchOverlay.style.left="0px",this.touchOverlay.innerHTML='<div class="touch-overlay-timer-content"></div><div class="touch-overlay-timer-bg"></div><div class="touch-overlay-timer-hidder"></div><div class="touch-overlay-timer-loader1"></div><div class="touch-overlay-timer-loader2"></div>',document.body.appendChild(this.touchOverlay);for(var n=0;n<this.touchOverlay.children.length;n++){var o=this.touchOverlay.children.item(n);(o.classList.contains("overlay-timer-loader1")||o.classList.contains("overlay-timer-loader2"))&&(o.style.borderTopColor="#0000B5",o.style.borderRightColor="#0000B5"),o.classList.contains("touch-overlay-timer-content")&&(o.style.color="#000000",o.innerHTML="<span style='font-weight: bold; font-family: sans-serif; font-size: 140%; line-height: 90%'>&#x21EA;</span>"),o.style.animationDuration=PlanComponent.LONG_TOUCH_DURATION_AFTER_DELAY+"ms"}}this.touchOverlay.style.visibility="visible",this.touchOverlay.style.left=this.getHTMLElement().getBoundingClientRect().left+e-this.touchOverlay.clientWidth/2+"px",this.touchOverlay.style.top=this.getHTMLElement().getBoundingClientRect().top+t-this.touchOverlay.clientHeight-40+"px";for(n=0;n<this.touchOverlay.children.length;n++)this.touchOverlay.children.item(n).classList.add("animated");void 0!==i&&(this.longTouchAnimationPostTask=setTimeout(i,HomeComponent3D.LONG_TOUCH_DURATION_AFTER_DELAY))},HomeComponent3D.prototype.stopLongTouchAnimation=function(e,t){if(void 0!==this.touchOverlay){this.touchOverlay.style.visibility="hidden";for(var i=0;i<this.touchOverlay.children.length;i++)this.touchOverlay.children.item(i).classList.remove("animated");void 0!==this.longTouchAnimationPostTask&&(clearTimeout(this.longTouchAnimationPostTask),delete this.longTouchAnimationPostTask)}},HomeComponent3D.prototype.installKeyboardActions=function(){this.inputMap={"shift pressed UP":"MOVE_CAMERA_FAST_FORWARD","alt shift pressed UP":"MOVE_CAMERA_FAST_FORWARD","shift pressed W":"MOVE_CAMERA_FAST_FORWARD","pressed UP":"MOVE_CAMERA_FORWARD","alt pressed UP":"MOVE_CAMERA_FORWARD","pressed W":"MOVE_CAMERA_FORWARD","shift pressed DOWN":"MOVE_CAMERA_FAST_BACKWARD","alt shift pressed DOWN":"MOVE_CAMERA_FAST_BACKWARD","shift pressed S":"MOVE_CAMERA_FAST_BACKWARD","pressed DOWN":"MOVE_CAMERA_BACKWARD","alt pressed DOWN":"MOVE_CAMERA_BACKWARD","pressed S":"MOVE_CAMERA_BACKWARD","alt shift pressed LEFT":"MOVE_CAMERA_FAST_LEFT","alt pressed LEFT":"MOVE_CAMERA_LEFT","alt shift pressed RIGHT":"MOVE_CAMERA_FAST_RIGHT","alt pressed RIGHT":"MOVE_CAMERA_RIGHT","shift pressed LEFT":"ROTATE_CAMERA_YAW_FAST_LEFT","shift pressed A":"ROTATE_CAMERA_YAW_FAST_LEFT","pressed LEFT":"ROTATE_CAMERA_YAW_LEFT","pressed A":"ROTATE_CAMERA_YAW_LEFT","shift pressed RIGHT":"ROTATE_CAMERA_YAW_FAST_RIGHT","shift pressed D":"ROTATE_CAMERA_YAW_FAST_RIGHT","pressed RIGHT":"ROTATE_CAMERA_YAW_RIGHT","pressed D":"ROTATE_CAMERA_YAW_RIGHT","shift pressed PAGE_UP":"ROTATE_CAMERA_PITCH_FAST_UP","pressed PAGE_UP":"ROTATE_CAMERA_PITCH_UP","shift pressed PAGE_DOWN":"ROTATE_CAMERA_PITCH_FAST_DOWN","pressed PAGE_DOWN":"ROTATE_CAMERA_PITCH_DOWN","shift pressed HOME":"ELEVATE_CAMERA_FAST_UP","pressed HOME":"ELEVATE_CAMERA_UP","shift pressed END":"ELEVATE_CAMERA_FAST_DOWN","pressed END":"ELEVATE_CAMERA_DOWN","pressed ESCAPE":"ESCAPE","shift pressed ESCAPE":"ESCAPE"},OperatingSystem.isMacOSX()?(this.inputMap["alt pressed ALT"]="ACTIVATE_DUPLICATION",this.inputMap["released ALT"]="DEACTIVATE_DUPLICATION",this.inputMap["shift alt pressed ALT"]="ACTIVATE_DUPLICATION",this.inputMap["shift released ALT"]="DEACTIVATE_DUPLICATION",this.inputMap["meta alt pressed ALT"]="ACTIVATE_DUPLICATION",this.inputMap["meta released ALT"]="DEACTIVATE_DUPLICATION",this.inputMap["shift meta alt pressed ALT"]="ACTIVATE_DUPLICATION",this.inputMap["shift meta released ALT"]="DEACTIVATE_DUPLICATION",this.inputMap["alt pressed ESCAPE"]="ESCAPE"):(this.inputMap["control pressed CONTROL"]="ACTIVATE_DUPLICATION",this.inputMap["released CONTROL"]="DEACTIVATE_DUPLICATION",this.inputMap["shift control pressed CONTROL"]="ACTIVATE_DUPLICATION",this.inputMap["shift released CONTROL"]="DEACTIVATE_DUPLICATION",this.inputMap["meta control pressed CONTROL"]="ACTIVATE_DUPLICATION",this.inputMap["meta released CONTROL"]="DEACTIVATE_DUPLICATION",this.inputMap["shift meta control pressed CONTROL"]="ACTIVATE_DUPLICATION",this.inputMap["shift meta released CONTROL"]="DEACTIVATE_DUPLICATION",this.inputMap["control pressed ESCAPE"]="ESCAPE"),OperatingSystem.isWindows()?(this.inputMap["alt pressed ALT"]="TOGGLE_MAGNETISM_ON",this.inputMap["released ALT"]="TOGGLE_MAGNETISM_OFF",this.inputMap["shift alt pressed ALT"]="TOGGLE_MAGNETISM_ON",this.inputMap["shift released ALT"]="TOGGLE_MAGNETISM_OFF",this.inputMap["control alt pressed ALT"]="TOGGLE_MAGNETISM_ON",this.inputMap["control released ALT"]="TOGGLE_MAGNETISM_OFF",this.inputMap["shift control alt pressed ALT"]="TOGGLE_MAGNETISM_ON",this.inputMap["shift control released ALT"]="TOGGLE_MAGNETISM_OFF",this.inputMap["alt pressed ESCAPE"]="ESCAPE"):OperatingSystem.isMacOSX()?(this.inputMap["meta pressed META"]="TOGGLE_MAGNETISM_ON",this.inputMap["released META"]="TOGGLE_MAGNETISM_OFF",this.inputMap["shift meta pressed META"]="TOGGLE_MAGNETISM_ON",this.inputMap["shift released META"]="TOGGLE_MAGNETISM_OFF",this.inputMap["alt meta pressed META"]="TOGGLE_MAGNETISM_ON",this.inputMap["alt released META"]="TOGGLE_MAGNETISM_OFF",this.inputMap["shift alt meta pressed META"]="TOGGLE_MAGNETISM_ON",this.inputMap["shift alt released META"]="TOGGLE_MAGNETISM_OFF",this.inputMap["meta pressed ESCAPE"]="ESCAPE"):(this.inputMap["shift alt pressed ALT"]="TOGGLE_MAGNETISM_ON",this.inputMap["alt shift pressed SHIFT"]="TOGGLE_MAGNETISM_ON",this.inputMap["alt released SHIFT"]="TOGGLE_MAGNETISM_OFF",this.inputMap["shift released ALT"]="TOGGLE_MAGNETISM_OFF",this.inputMap["control shift alt pressed ALT"]="TOGGLE_MAGNETISM_ON",this.inputMap["control alt shift pressed SHIFT"]="TOGGLE_MAGNETISM_ON",this.inputMap["control alt released SHIFT"]="TOGGLE_MAGNETISM_OFF",this.inputMap["control shift released ALT"]="TOGGLE_MAGNETISM_OFF",this.inputMap["alt shift ESCAPE"]="ESCAPE",this.inputMap["control alt shift pressed ESCAPE"]="ESCAPE"),this.inputMap["shift pressed SHIFT"]="ACTIVATE_ALIGNMENT",this.inputMap["released SHIFT"]="DEACTIVATE_ALIGNMENT",OperatingSystem.isWindows()?(this.inputMap["control shift pressed SHIFT"]="ACTIVATE_ALIGNMENT",this.inputMap["control released SHIFT"]="DEACTIVATE_ALIGNMENT",this.inputMap["alt shift pressed SHIFT"]="ACTIVATE_ALIGNMENT",this.inputMap["alt released SHIFT"]="DEACTIVATE_ALIGNMENT"):OperatingSystem.isMacOSX()?(this.inputMap["alt shift pressed SHIFT"]="ACTIVATE_ALIGNMENT",this.inputMap["alt released SHIFT"]="DEACTIVATE_ALIGNMENT",this.inputMap["meta shift pressed SHIFT"]="ACTIVATE_ALIGNMENT",this.inputMap["meta released SHIFT"]="DEACTIVATE_ALIGNMENT"):(this.inputMap["control shift pressed SHIFT"]="ACTIVATE_ALIGNMENT",this.inputMap["control released SHIFT"]="DEACTIVATE_ALIGNMENT",this.inputMap["shift released ALT"]="ACTIVATE_ALIGNMENT",this.inputMap["control shift released ALT"]="ACTIVATE_ALIGNMENT");var e=this;this.canvas3D.getHTMLElement().addEventListener("keydown",(function(t){e.callAction(t,KeyStroke.getKeyStrokeForEvent(t,"keydown"))}),!1),this.canvas3D.getHTMLElement().addEventListener("keyup",(function(t){e.callAction(t,KeyStroke.getKeyStrokeForEvent(t,"keyup"))}),!1)},HomeComponent3D.prototype.callAction=function(e,t){if(void 0!==t){var i=this.inputMap[t];if(void 0!==i){var n=this.actionMap[i];void 0!==n&&n.actionPerformed(e),e.stopPropagation()}}},HomeComponent3D.prototype.createActions=function(e){function t(e){this.delta=e}function i(e){this.delta=e}function n(e){this.delta=e}function o(e){this.delta=e}function r(e){this.delta=e}t.prototype.actionPerformed=function(t){e.moveCamera(this.delta)},i.prototype.actionPerformed=function(t){e.moveCameraSideways(this.delta)},n.prototype.actionPerformed=function(t){e.elevateCamera(this.delta)},o.prototype.actionPerformed=function(t){e.rotateCameraYaw(this.delta)},r.prototype.actionPerformed=function(t){e.rotateCameraPitch(this.delta)},this.actionMap={MOVE_CAMERA_FORWARD:new t(6.5),MOVE_CAMERA_FAST_FORWARD:new t(32.5),MOVE_CAMERA_BACKWARD:new t(-6.5),MOVE_CAMERA_FAST_BACKWARD:new t(-32.5),MOVE_CAMERA_LEFT:new i(-2.5),MOVE_CAMERA_FAST_LEFT:new i(-10),MOVE_CAMERA_RIGHT:new i(2.5),MOVE_CAMERA_FAST_RIGHT:new i(10),ELEVATE_CAMERA_DOWN:new n(-2.5),ELEVATE_CAMERA_FAST_DOWN:new n(-10),ELEVATE_CAMERA_UP:new n(2.5),ELEVATE_CAMERA_FAST_UP:new n(10),ROTATE_CAMERA_YAW_LEFT:new o(-Math.PI/60),ROTATE_CAMERA_YAW_FAST_LEFT:new o(-Math.PI/12),ROTATE_CAMERA_YAW_RIGHT:new o(Math.PI/60),ROTATE_CAMERA_YAW_FAST_RIGHT:new o(Math.PI/12),ROTATE_CAMERA_PITCH_UP:new r(-Math.PI/120),ROTATE_CAMERA_PITCH_FAST_UP:new r(-Math.PI/24),ROTATE_CAMERA_PITCH_DOWN:new r(Math.PI/120),ROTATE_CAMERA_PITCH_FAST_DOWN:new r(Math.PI/24),ESCAPE:{actionPerformed:function(t){e.escape()}},ACTIVATE_ALIGNMENT:{actionPerformed:function(t){e.setAlignmentActivated(!0)}},DEACTIVATE_ALIGNMENT:{actionPerformed:function(t){e.setAlignmentActivated(!1)}},TOGGLE_MAGNETISM_ON:{actionPerformed:function(t){e.toggleMagnetism(!0)}},TOGGLE_MAGNETISM_OFF:{actionPerformed:function(t){e.toggleMagnetism(!1)}},ACTIVATE_DUPLICATION:{actionPerformed:function(t){e.setDuplicationActivated(!0)}},DEACTIVATE_DUPLICATION:{actionPerformed:function(t){e.setDuplicationActivated(!1)}}}},HomeComponent3D.prototype.getActionMap=function(){return this.actionMap},HomeComponent3D.prototype.getInputMap=function(){return this.inputMap},HomeComponent3D.prototype.getClosestItemAt=function(e,t){for(var i=this.canvas3D.getClosestShapeAt(e,t),n=-1;null!==i&&(n=this.homeObjects3D.indexOf(i))<0;)i=i.getParent();return null!=i?this.homeObjects[n]:null},HomeComponent3D.prototype.getClosestSelectableItemAt=function(e,t){var i=component3D.canvas3D.getHTMLElement().getBoundingClientRect();return this.getClosestItemAt(e+i.left,t+i.top)},HomeComponent3D.prototype.convertPixelLocationToVirtualWorldPoint=function(e,t){var i=this.canvas3D.getVirtualWorldToImageTransform(mat4.create());mat4.invert(i,i),mat4.mul(i,this.canvas3D.getViewPlatformTransform(mat4.create()),i);var n=this.getHTMLElement().getBoundingClientRect(),o=vec3.fromValues(2*(e/n.width-.5),2*(.5-t/n.height),0);return vec3.transformMat4(o,o,i),o},HomeComponent3D.prototype.convertPixelLocationToVirtualWorld=function(e,t){var i=this.convertPixelLocationToVirtualWorldPoint(e,t);return[i[0],i[2],i[1]]},HomeComponent3D.prototype.getVirtualWorldPointAt=function(e,t,i){var n=this.convertPixelLocationToVirtualWorldPoint(e,t),o=this.home.getCamera(),r=vec3.fromValues(o.getX(),o.getZ(),o.getY()),l=vec3.sub(vec3.fromValues(0,0,0),n,r);l[1]>0&&(l[1]=-l[1]);var a=(i-n[1])/l[1];return[n[0]+a*l[0],n[2]+a*l[2],i]},HomeComponent3D.prototype.createSceneTree=function(e,t){var i=new Group3D;i.addChild(this.createBackgroundNode(e,t));var n=this.createGroundNode(-5e4,-5e4,1e5,1e5,e,t);i.addChild(n),i.addChild(this.createHomeTree(e,t)),this.sceneLights=this.createLights(e);for(var o=0;o<this.sceneLights.length;o++)i.addChild(this.sceneLights[o]);return i},HomeComponent3D.prototype.createBackgroundNode=function(e,t){var i=new Appearance3D,n=this.createHalfSphereGeometry(!0),o=new Shape3D(n,i),r=new BranchGroup3D;r.addChild(o),r.addChild(new Shape3D(this.createHalfSphereGeometry(!1)));var l=new Appearance3D,a=new Shape3D(new IndexedTriangleArray3D([vec3.fromValues(-1,-.01,-1),vec3.fromValues(-1,-.01,1),vec3.fromValues(1,-.01,1),vec3.fromValues(1,-.01,-1)],[0,1,2,0,2,3],[],[],[vec3.fromValues(0,1,0)],[0,0,0,0,0,0]),l);r.addChild(a);var s=new Background3D(r);if(this.updateBackgroundColorAndTexture(i,l,this.home,t),l.setVisible(this.home.getCamera().getZ()>=0),e){var h=this;this.backgroundChangeListener=function(e){h.updateBackgroundColorAndTexture(i,l,h.home,t)},h.home.getEnvironment().addPropertyChangeListener("SKY_COLOR",this.backgroundChangeListener),h.home.getEnvironment().addPropertyChangeListener("SKY_TEXTURE",this.backgroundChangeListener),h.home.getEnvironment().addPropertyChangeListener("GROUND_COLOR",this.backgroundChangeListener),h.home.getEnvironment().addPropertyChangeListener("GROUND_TEXTURE",this.backgroundChangeListener),this.elevationChangeListener=function(e){e.getSource()===h.home&&(e.getOldValue().removePropertyChangeListener(h.elevationChangeListener),h.home.getCamera().addPropertyChangeListener(h.elevationChangeListener)),e.getSource()!==h.home&&"Z"!==e.getPropertyName()||l.setVisible(h.home.getCamera().getZ()>=0)},this.home.getCamera().addPropertyChangeListener(this.elevationChangeListener),this.home.addPropertyChangeListener("CAMERA",this.elevationChangeListener)}return s},HomeComponent3D.prototype.createHalfSphereGeometry=function(e){for(var t=48,i=[],n=[],o=[],r=0,l=0;r<t;r++)for(var a=2*r*Math.PI/t,s=Math.cos(a),h=Math.sin(a),u=2*(r+1)*Math.PI/t,d=Math.cos(u),c=Math.sin(u),p=0;p<12;p++,l+=4){var g=2*p*Math.PI/t,v=Math.cos(g),f=Math.sin(g),m=0!==p?e?f:-f:-.01,y=2*(p+1)*Math.PI/t;e||(y=-y);var C=Math.cos(y),S=Math.sin(y);i.push(vec3.fromValues(s*v,m,h*v)),i.push(vec3.fromValues(d*v,m,c*v)),i.push(vec3.fromValues(d*C,S,c*C)),i.push(vec3.fromValues(s*C,S,h*C)),e?(n.push(l),n.push(l+1),n.push(l+2),n.push(l),n.push(l+2),n.push(l+3),o.push(vec2.fromValues(r/t,p/12)),o.push(vec2.fromValues((r+1)/t,p/12)),o.push(vec2.fromValues((r+1)/t,(p+1)/12)),o.push(vec2.fromValues(r/t,(p+1)/12))):(n.push(l),n.push(l+2),n.push(l+1),n.push(l),n.push(l+3),n.push(l+2))}return new IndexedTriangleArray3D(i,n,o,n,[],[])},HomeComponent3D.prototype.updateBackgroundColorAndTexture=function(e,t,i,n){var o=i.getEnvironment().getSkyColor();e.setDiffuseColor(vec3.fromValues((o>>>16&255)/255,(o>>>8&255)/255,(255&o)/255));var r=i.getEnvironment().getSkyTexture();if(null!==r){var l=mat3.create();mat3.fromTranslation(l,vec2.fromValues(-r.getXOffset(),0)),TextureManager.getInstance().loadTexture(r.getImage(),0,n,{textureUpdated:function(t){e.setTextureImage(t),e.setTextureTransform(l)},textureError:function(e){return this.textureUpdated(TextureManager.getInstance().getErrorImage())}})}else e.setTextureImage(null);var a=i.getEnvironment().getGroundColor(),s=vec3.fromValues((a>>>16&255)/255,(a>>>8&255)/255,(255&a)/255);t.setDiffuseColor(s),t.setAmbientColor(s);var h=i.getEnvironment().getGroundTexture();null!==h?TextureManager.getInstance().loadTexture(h.getImage(),0,n,{textureUpdated:function(e){t.setTextureImage(e),t.setTextureCoordinatesGeneration({planeS:vec4.fromValues(1e5,0,0,0),planeT:vec4.fromValues(0,0,1e5,0)})},textureError:function(e){return this.textureUpdated(TextureManager.getInstance().getErrorImage())}}):t.setTextureImage(null)},HomeComponent3D.prototype.createGroundNode=function(e,t,i,n,o,r){if(this.home.structure){var l=new BranchGroup3D;return l.setCapability(Group3D.ALLOW_CHILDREN_EXTEND),ModelManager.getInstance().loadModel(this.home.structure,r,{modelUpdated:function(e){l.addChild(e)},modelError:function(e){var t=new Appearance3D;t.setDiffuseColor(vec3.fromValues(1,0,0)),l.addChild(new Box3D(1e7,0,1e7,t))}}),this.groundChangeListener=function(e){},l}var a=void 0!==Ground3D?new Ground3D(this.home,e,t,i,n,r):new Box3D(1e7,0,1e7,new Appearance3D),s=mat4.create();mat4.translate(s,s,vec3.fromValues(0,-.2,0));var h=new TransformGroup3D(s);if(h.addChild(a),o){var u=this;this.groundChangeListener=function(e){u.groundChangeListener.updater||(u.groundChangeListener.updater=function(){a.update(),delete u.groundChangeListener.updater},setTimeout(u.groundChangeListener.updater,0))};var d=this.home.getEnvironment();d.addPropertyChangeListener("GROUND_COLOR",this.groundChangeListener),d.addPropertyChangeListener("BACKGROUND_IMAGE_VISIBLE_ON_GROUND_3D",this.groundChangeListener),d.addPropertyChangeListener("GROUND_TEXTURE",this.groundChangeListener),this.home.addPropertyChangeListener("BACKGROUND_IMAGE",this.groundChangeListener)}return h},HomeComponent3D.prototype.createLights=function(e){for(var t=[new DirectionalLight3D(vec3.fromValues(.9,.9,.9),vec3.fromValues(1.5,-.8,-1)),new DirectionalLight3D(vec3.fromValues(.9,.9,.9),vec3.fromValues(-1.5,-.8,-1)),new DirectionalLight3D(vec3.fromValues(.9,.9,.9),vec3.fromValues(0,-.8,1)),new DirectionalLight3D(vec3.fromValues(.7,.7,.7),vec3.fromValues(0,1,0)),new AmbientLight3D(vec3.fromValues(.2,.2,.2))],i=0;i<t.length-1;i++)t[i].defaultColor=t[i].getColor(),this.updateLightColor(t[i]);if(e){var n=this;this.lightColorListener=function(e){for(var i=0;i<t.length-1;i++)n.updateLightColor(t[i])},this.home.getEnvironment().addPropertyChangeListener("LIGHT_COLOR",this.lightColorListener)}return t},HomeComponent3D.prototype.updateLightColor=function(e){var t=e.defaultColor,i=this.home.getEnvironment().getLightColor();e.setColor(vec3.fromValues((i>>>16&255)/255*t[0],(i>>>8&255)/255*t[1],(255&i)/255*t[2]))},HomeComponent3D.prototype.createHomeTree=function(e,t){var i=new BranchGroup3D;i.setCapability(Group3D.ALLOW_CHILDREN_EXTEND);for(var n=this.home.getLabels(),o=0;o<n.length;o++)this.addObject(i,n[o],e,t);var r=this.home.getDimensionLines();for(o=0;o<r.length;o++)this.addObject(i,r[o],e,t);var l=this.home.getPolylines();for(o=0;o<l.length;o++)this.addObject(i,l[o],e,t);var a=this.home.getRooms();for(o=0;o<a.length;o++)this.addObject(i,a[o],e,t);var s=this.home.getWalls();for(o=0;o<s.length;o++)this.addObject(i,s[o],e,t);var h=this.home.getFurniture();for(o=0;o<h.length;o++){var u=h[o];if(u instanceof HomeFurnitureGroup)for(var d=u.getAllFurniture(),c=0;c<d.length;c++){var p=d[c];p instanceof HomeFurnitureGroup||this.addObject(i,p,e,t)}else this.addObject(i,u,e,t)}return e&&(this.addLevelListener(i),this.addWallListener(i),this.addFurnitureListener(i),this.addRoomListener(i),this.addPolylineListener(i),this.addDimensionLineListener(i),this.addLabelListener(i),this.addEnvironmentListeners(),component3D=this,this.selectionListener={selectionChanged:function(e){component3D.updateObjectsAndFurnitureGroups(e.getOldSelectedItems()),component3D.updateObjectsAndFurnitureGroups(e.getSelectedItems())}},this.home.addSelectionListener(this.selectionListener)),i},HomeComponent3D.prototype.addLevelListener=function(e){var t=this;this.levelChangeListener=function(e){var i=e.getPropertyName();if("VISIBLE"==i||"VIEWABLE"==i){for(var n=t.homeObjects,o=[],r=0;r<n.length;r++){var l=n[r];(l instanceof Room||void 0!==l.isAtLevel||l.isAtLevel(e.getSource()))&&o.push(l)}t.updateObjects(o),t.groundChangeListener(null)}else"ELEVATION"==i?(t.updateObjects(t.homeObjects.slice(0)),t.groundChangeListener(null)):"BACKGROUND_IMAGE"==i?t.groundChangeListener(null):"FLOOR_THICKNESS"==i?(t.updateObjects(t.home.getWalls()),t.updateObjects(t.home.getRooms())):"HEIGHT"==i&&t.updateObjects(t.home.getRooms())};for(var i=this.home.getLevels(),n=0;n<i.length;n++)i[n].addPropertyChangeListener(this.levelChangeListener);this.levelListener=function(e){var i=e.getItem();switch(e.getType()){case CollectionEvent.Type.ADD:i.addPropertyChangeListener(t.levelChangeListener);break;case CollectionEvent.Type.DELETE:i.removePropertyChangeListener(t.levelChangeListener)}t.updateObjects(t.home.getRooms())},this.home.addLevelsListener(this.levelListener)},HomeComponent3D.prototype.addWallListener=function(e){var t=this;this.wallChangeListener=function(e){if("PATTERN"!=e.getPropertyName()){var i=e.getSource();t.updateWall(i);var n=t.home.getLevels();(null===i.getLevel()||i.isAtLevel(n[n.length-1]))&&t.updateObjects(t.home.getRooms()),null!=i.getLevel()&&i.getLevel().getElevation()<0&&t.groundChangeListener(null)}};for(var i=this.home.getWalls(),n=0;n<i.length;n++)i[n].addPropertyChangeListener(this.wallChangeListener);this.wallListener=function(i){var n=i.getItem();switch(i.getType()){case CollectionEvent.Type.ADD:t.addObject(e,n,!0,!1),n.addPropertyChangeListener(t.wallChangeListener);break;case CollectionEvent.Type.DELETE:t.deleteObject(n),n.removePropertyChangeListener(t.wallChangeListener)}t.updateObjects(t.home.getRooms()),t.groundChangeListener(null)},this.home.addWallsListener(this.wallListener)},HomeComponent3D.prototype.addFurnitureListener=function(e){var t=this,i=function(e,i,n){if(t.updateObjects([e]),t.containsDoorsAndWindows(e)){if(null!==n){var o=e.clone();"X"==i?o.setX(n):"Y"==i?o.setY(n):"ANGLE"==i?o.setAngle(n):"WIDTH"==i?o.setWidth(n):"DEPTH"==i&&o.setDepth(n),t.updateIntersectingWalls([o,e])}else t.updateIntersectingWalls([e]);t.updateObjects(t.home.getWalls())}else t.containsStaircases(e)&&t.updateObjects(t.home.getRooms());null!==e.getLevel()&&e.getLevel().getElevation()<0&&t.groundChangeListener(null)};this.furnitureChangeListener=function(e){var n=e.getSource(),o=e.getPropertyName();"X"==o||"Y"==o||"ANGLE"==o||"ROLL"==o||"PITCH"==o||"WIDTH"==o||"DEPTH"==o?i(n,o,e.getOldValue()):"HEIGHT"==o||"ELEVATION"==o||"MODEL"==o||"MODEL_ROTATION"==o||"MODEL_MIRRORED"==o||"MODEL_FLAGS"==o||"MODEL_TRANSFORMATIONS"==o||"STAIRCASE_CUT_OUT_SHAPE"==o||"VISIBLE"==o||"LEVEL"==o?i(n,null,null):"CUT_OUT_SHAPE"==o||"WALL_CUT_OUT_ON_BOTH_SIDES"==o||"WALL_WIDTH"==o||"WALL_LEFT"==o||"WALL_HEIGHT"==o||"WALL_TOP"==o?t.containsDoorsAndWindows(n)&&t.updateIntersectingWalls([n]):("COLOR"==o||"TEXTURE"==o||"MODEL_MATERIALS"==o||"SHININESS"==o||"POWER"==o&&t.home.getEnvironment().getSubpartSizeUnderLight()>0)&&t.updateObjects([n])};for(var n=this.home.getFurniture(),o=0;o<n.length;o++)this.addPropertyChangeListener(n[o],this.furnitureChangeListener);this.furnitureListener=function(i){var n=i.getItem();switch(i.getType()){case CollectionEvent.Type.ADD:t.addPieceOfFurniture(e,n,!0,!1),t.addPropertyChangeListener(n,t.furnitureChangeListener);break;case CollectionEvent.Type.DELETE:t.deletePieceOfFurniture(n),t.removePropertyChangeListener(n,t.furnitureChangeListener)}t.containsDoorsAndWindows(n)?t.updateIntersectingWalls([n]):t.containsStaircases(n)?t.updateObjects(t.home.getRooms()):(t.approximateHomeBoundsCache=null,t.homeHeightCache=null),t.groundChangeListener(null)},this.home.addFurnitureListener(this.furnitureListener)},HomeComponent3D.prototype.addPropertyChangeListener=function(e,t){if(e instanceof HomeFurnitureGroup)for(var i=e.getFurniture(),n=0;n<i.length;n++)this.addPropertyChangeListener(i[n],t);else e.addPropertyChangeListener(t)},HomeComponent3D.prototype.removePropertyChangeListener=function(e,t){if(e instanceof HomeFurnitureGroup)for(var i=e.getFurniture(),n=0;n<i.length;n++)this.removePropertyChangeListener(i[n],t);else e.removePropertyChangeListener(t)},HomeComponent3D.prototype.containsDoorsAndWindows=function(e){if(e instanceof HomeFurnitureGroup){for(var t=e.getFurniture(),i=0;i<t.length;i++)if(this.containsDoorsAndWindows(t[i]))return!0;return!1}return e.isDoorOrWindow()},HomeComponent3D.prototype.containsStaircases=function(e){if(e instanceof HomeFurnitureGroup){for(var t=e.getFurniture(),i=0;i<t.length;i++)if(this.containsStaircases(t[i]))return!0;return!1}return null!==e.getStaircaseCutOutShape()},HomeComponent3D.prototype.addRoomListener=function(e){var t=this;this.roomChangeListener=function(e){var i=e.getSource(),n=e.getPropertyName();if("FLOOR_COLOR"==n||"FLOOR_TEXTURE"==n||"FLOOR_SHININESS"==n||"CEILING_COLOR"==n||"CEILING_TEXTURE"==n||"CEILING_SHININESS"==n||"CEILING_FLAT"==n)t.updateObjects([i]);else if("FLOOR_VISIBLE"==n||"CEILING_VISIBLE"==n||"LEVEL"==n)t.updateObjects(t.home.getRooms()),t.groundChangeListener(null);else if("POINTS"==n){if(t.homeObjectsToUpdate)t.updateObjects(t.home.getRooms());else{t.updateObjects([i]);for(var o=new java.awt.geom.Area(t.getShape(e.getOldValue())),r=new java.awt.geom.Area(t.getShape(e.getNewValue())),l=i.getLevel(),a=t.home.getRooms(),s=0;s<a.length;s++){var h=a[s],u=h.getLevel();if(h!=i&&(null==u||Math.abs(l.getElevation()+l.getHeight()-(u.getElevation()+u.getHeight()))<1e-5||Math.abs(l.getElevation()+l.getHeight()-(u.getElevation()-u.getFloorThickness()))<1e-5)){var d=new java.awt.geom.Area(t.getShape(h.getPoints())),c=new java.awt.geom.Area(d);c.intersect(r),c.isEmpty()?(d.intersect(o),d.isEmpty()||t.updateObjects([h])):t.updateObjects([h])}}}t.groundChangeListener(null)}};for(var i=this.home.getRooms(),n=0;n<i.length;n++)i[n].addPropertyChangeListener(this.roomChangeListener);this.roomListener=function(i){var n=i.getItem();switch(i.getType()){case CollectionEvent.Type.ADD:t.addObject(e,n,i.getIndex(),!0,!1),n.addPropertyChangeListener(t.roomChangeListener);break;case CollectionEvent.Type.DELETE:t.deleteObject(n),n.removePropertyChangeListener(t.roomChangeListener)}t.updateObjects(t.home.getRooms()),t.groundChangeListener(null)},this.home.addRoomsListener(this.roomListener)},HomeComponent3D.prototype.getShape=function(e){var t=new java.awt.geom.GeneralPath;t.moveTo(e[0][0],e[0][1]);for(var i=1;i<e.length;i++)t.lineTo(e[i][0],e[i][1]);return t.closePath(),t},HomeComponent3D.prototype.addPolylineListener=function(e){var t=this;this.polylineChangeListener=function(e){var i=e.getSource();t.updateObjects([i])};for(var i=this.home.getPolylines(),n=0;n<i.length;n++)i[n].addPropertyChangeListener(this.polylineChangeListener);this.polylineListener=function(i){var n=i.getItem();switch(i.getType()){case CollectionEvent.Type.ADD:t.addObject(e,n,!0,!1),n.addPropertyChangeListener(t.polylineChangeListener);break;case CollectionEvent.Type.DELETE:t.deleteObject(n),n.removePropertyChangeListener(t.polylineChangeListener)}},this.home.addPolylinesListener(this.polylineListener)},HomeComponent3D.prototype.addDimensionLineListener=function(e){var t=this;this.dimensionLineChangeListener=function(e){var i=e.getSource();t.updateObjects([i])};for(var i=this.home.getDimensionLines(),n=0;n<i.length;n++)i[n].addPropertyChangeListener(this.dimensionLineChangeListener);this.dimensionLineListener=function(i){var n=i.getItem();switch(i.getType()){case CollectionEvent.Type.ADD:t.addObject(e,n,!0,!1),n.addPropertyChangeListener(t.dimensionLineChangeListener);break;case CollectionEvent.Type.DELETE:t.deleteObject(n),n.removePropertyChangeListener(t.dimensionLineChangeListener)}},this.home.addDimensionLinesListener(this.dimensionLineListener)},HomeComponent3D.prototype.addLabelListener=function(e){var t=this;this.labelChangeListener=function(e){var i=e.getSource();t.updateObjects([i])};for(var i=this.home.getLabels(),n=0;n<i.length;n++)i[n].addPropertyChangeListener(this.labelChangeListener);this.labelListener=function(i){var n=i.getItem();switch(i.getType()){case CollectionEvent.Type.ADD:t.addObject(e,n,!0,!1),n.addPropertyChangeListener(t.labelChangeListener);break;case CollectionEvent.Type.DELETE:t.deleteObject(n),n.removePropertyChangeListener(t.labelChangeListener)}},this.home.addLabelsListener(this.labelListener)},HomeComponent3D.prototype.addEnvironmentListeners=function(){var e=this;this.wallsAlphaListener=function(t){e.updateObjects(e.home.getWalls()),e.updateObjects(e.home.getRooms())},this.home.getEnvironment().addPropertyChangeListener("WALLS_ALPHA",this.wallsAlphaListener)},HomeComponent3D.prototype.addObject=function(e,t,i,n,o){void 0===o&&(o=n,n=i,i=-1);var r=this.object3dFactory.createObject3D(this.home,t,o);return n&&(t.object3D=r,this.homeObjects.push(t),this.homeObjects3D.push(r)),-1===i?e.addChild(r):e.insertChild(r,i),r},HomeComponent3D.prototype.addPieceOfFurniture=function(e,t,i,n){if(t instanceof HomeFurnitureGroup)for(var o=t.getFurniture(),r=0;r<o.length;r++)this.addPieceOfFurniture(e,o[r],i,n);else this.addObject(e,t,i,n)},HomeComponent3D.prototype.deleteObject=function(e){if(e.object3D){e.object3D.detach(),delete e.object3D;var t=this.homeObjects.indexOf(e);if(this.homeObjects.splice(t,1),this.homeObjects3D.splice(t,1),this.homeObjectsToUpdate){var i=this.homeObjectsToUpdate.indexOf(e);i>=0&&this.homeObjectsToUpdate.splice(i,1)}}},HomeComponent3D.prototype.deletePieceOfFurniture=function(e){if(e instanceof HomeFurnitureGroup)for(var t=e.getFurniture(),i=0;i<t.length;i++)this.deletePieceOfFurniture(t[i]);else this.deleteObject(e)},HomeComponent3D.prototype.updateObjects=function(e){if(this.homeObjectsToUpdate)for(var t=0;t<e.length;t++){var i=e[t];this.homeObjectsToUpdate.indexOf(i)<=-1&&this.homeObjectsToUpdate.push(i)}else this.homeObjectsToUpdate=e.slice(0),setTimeout((function(e){for(var t=0;t<e.homeObjectsToUpdate.length;t++){var i=e.homeObjectsToUpdate[t];i.object3D&&i.object3D.update()}delete e.homeObjectsToUpdate}),0,this);this.approximateHomeBoundsCache=null,this.homeHeightCache=null},HomeComponent3D.prototype.updateObjectsAndFurnitureGroups=function(e){this.updateObjects(e);for(var t=0;t<e.length;t++){var i=e[t];i instanceof HomeFurnitureGroup&&this.updateObjects(i.getAllFurniture())}},HomeComponent3D.prototype.updateIntersectingWalls=function(e){var t=this.home.getWalls(),i=0;if(this.homeObjectsToUpdate)for(var n=0;n<this.homeObjectsToUpdate.length;n++)this.homeObjectsToUpdate[n]instanceof Wall&&i++;if(i!==t.length){var o=[],r=null;for(n=0;n<e.length;n++){var l=e[n].getPoints();null===r?r=new java.awt.geom.Rectangle2D.Float(l[0][0],l[0][1],0,0):r.add(l[0][0],l[0][1]);for(var a=1;a<l.length;a++)r.add(l[a][0],l[a][1])}for(n=0;n<t.length;n++){var s=t[n];s.intersectsRectangle(r.getX(),r.getY(),r.getX()+r.getWidth(),r.getY()+r.getHeight())&&o.push(s)}this.updateObjects(o)}},HomeComponent3D.prototype.updateWall=function(e){var t=[];t.push(e),null!=e.getWallAtStart()&&t.push(e.getWallAtStart()),null!=e.getWallAtEnd()&&t.push(e.getWallAtEnd()),this.updateObjects(t)},Object3DBranchFactory.prototype.createObject3D=function(e,t,i){return t instanceof HomePieceOfFurniture?new HomePieceOfFurniture3D(t,e,this.preferences,i):t instanceof Wall?new Wall3D(t,e,this.preferences,i):t instanceof Room?new Room3D(t,e,this.preferences,!1,i):t instanceof Polyline?new Polyline3D(t,e,this.preferences,i):t instanceof DimensionLine?new DimensionLine3D(t,e,this.preferences,i):t instanceof Label?new Label3D(t,e,this.preferences,i):new Group3D},Object3DBranch.prototype=Object.create(BranchGroup3D.prototype),Object3DBranch.prototype.constructor=Object3DBranch,Object3DBranch.DEFAULT_COLOR=16777215,Object3DBranch.DEFAULT_AMBIENT_COLOR=3355443,Object3DBranch.prototype.getHome=function(){return void 0!==this.home?this.home:null},Object3DBranch.prototype.getUserPreferences=function(){return void 0!==this.userPreferences?this.userPreferences:null},Object3DBranch.prototype.getShape=function(e){return ShapeTools.getShape(e,!0,null)},Object3DBranch.prototype.updateAppearanceMaterial=function(e,t,i,n){null!==t?(e.setAmbientColor(vec3.fromValues((i>>>16&255)/255,(i>>>8&255)/255,(255&i)/255)),e.setDiffuseColor(vec3.fromValues((t>>>16&255)/255,(t>>>8&255)/255,(255&t)/255)),e.setSpecularColor(vec3.fromValues(n,n,n)),e.setShininess(Math.max(1,128*n))):(e.setAmbientColor(vec3.fromValues(.2,.2,.2)),e.setDiffuseColor(vec3.fromValues(1,1,1)),e.setSpecularColor(vec3.fromValues(n,n,n)),e.setShininess(Math.max(1,128*n)))},Object3DBranch.prototype.updateTextureTransform=function(e,t,i){var n=t.getWidth(),o=t.getHeight();-1!==n&&-1!==o||(n=100,o=100);var r=t.getXOffset(),l=t.getYOffset(),a=1/t.getScale(),s=mat3.create();mat3.rotate(s,s,t.getAngle());var h=mat3.create(),u=mat3.create();i?(mat3.fromTranslation(h,vec2.fromValues(-r/a*n,-l/a*o)),mat3.scale(u,u,vec2.fromValues(a/n,a/o))):(mat3.fromTranslation(h,vec2.fromValues(-r/a,-l/a)),mat3.multiplyScalar(u,u,a)),mat3.mul(s,s,h),mat3.mul(u,u,s),e.setTextureTransform(u)},Object3DBranch.prototype.updateTextureTransformFittingArea=function(e,t,i,n){for(var o=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,s=0;s<i.length;s++)o=Math.min(o,i[s][0]),r=Math.min(r,i[s][1]),l=Math.max(l,i[s][0]),a=Math.max(a,i[s][1]);(l-o<=0||a-r<=0)&&this.updateTextureTransform(e,t,!0);var h=mat3.create();mat3.fromTranslation(h,vec2.fromValues(-o,n?r:-r));var u=mat3.create();mat3.scale(u,u,vec2.fromValues(1/(l-o),1/(a-r))),mat3.mul(u,u,h),e.setTextureTransform(u)},Object3DBranch.prototype.getSelectionAppearance=function(){var e=new Appearance3D;return e.setCullFace(Appearance3D.CULL_NONE),e.setIllumination(0),e.setDiffuseColor(vec3.fromValues(0,0,.7102)),e},Object3DBranch.prototype.getAreaPoints=function(e,t,i,n,o){void 0===n&&void 0===o&&(n=t,o=i,t=null,i=null);for(var r=[],l=[],a=null,s=null,h=e.getPathIterator(null,n);!h.isDone();h.next()){var u=[0,0];switch(h.currentSegment(u)){case java.awt.geom.PathIterator.SEG_MOVETO:(a=[]).push(u),s=u;break;case java.awt.geom.PathIterator.SEG_LINETO:u[0]===s[0]&&u[1]===s[1]||a.push(u),s=u;break;case java.awt.geom.PathIterator.SEG_CLOSE:var d=a[0];if(d[0]===s[0]&&d[1]===s[1]&&a.splice(a.length-1,1),a.length>2){var c=a,p=new Room(c);if(p.getArea()>0){var g=p.isClockwise();g?l.push(a):r.push(a),null===t&&null===i||(g!==o&&(c=a.slice(0)).reverse(),g?null!=i&&i.push(c):null!=t&&t.push(c))}}}}var v=[];if(0===l.length&&null!==t)v.push.apply(v,t);else if(0===r.length&&0!==l.length)null!==i&&(i.length=0);else{var f,m=[];if(r.length>1){f=[];for(var y=0;0!==r.length;){for(var C=r[y],S=0;S<r.length;S++)if(y!==S){for(var E=r[S],A=null,_=0;_<m.length;_++)if(m[_].key===E){A=m[_].value;break}if(null==A&&(A=new java.awt.geom.Area(this.getShape(E.slice(0))),m.push({key:E,value:A})),A.contains(C[0][0],C[0][1]))break}S===r.length?(r.splice(y,1),f.push(C),y=0):y<r.length?y++:y=0}}else f=r;for(y=f.length-1;y>=0;y--){var P=f[y];for(A=null,_=0;_<m.length;_++)if(m[_].key===P){A=m[_].value;break}null===A&&(A=new java.awt.geom.Area(this.getShape(P.slice(0))));var w=[];for(_=0;_<l.length;_++){var L=l[_];A.contains(L[0][0],L[0][1])&&w.push(L)}for(var T=null;0!==w.length;){var b=Number.MAX_VALUE,O=0,I=0,D=0;for(S=0;S<w.length&&b>0;S++)for(L=w[S],_=0;_<L.length&&b>0;_++)for(var R=0;R<P.length&&b>0;R++){var x=P[R],M=java.awt.geom.Point2D.distanceSq(L[_][0],L[_][1],x[0],x[1]);M<b&&T!==x&&(b=M,O=S,I=_,D=R)}var F=w[O];0!==b&&(T=P[D],P.splice(D,0,T),P.splice(++D,0,F[I]));var N=F.slice(I,F.length);for(_=0;_<N.length;_++,D++)P.splice(D,0,N[_]);var U=F.slice(0,I);for(_=0;_<U.length;_++,D++)P.splice(D,0,U[_]);w.splice(O,1),l.splice(F,1)}}for(_=0;_<f.length;_++){var H=f[_];o&&H.reverse(),v.push(H.slice(0))}}return v},Object3DBranch.areModelRotationsEqual=function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;for(var i=0;i<e.length;i++)for(var n=0;n<t.length;n++)if(e[i][n]!==t[i][n])return!1;return!0},HomePieceOfFurniture3D.prototype=Object.create(Object3DBranch.prototype),HomePieceOfFurniture3D.prototype.constructor=HomePieceOfFurniture3D,HomePieceOfFurniture3D.DEFAULT_BOX=new Object,HomePieceOfFurniture3D.SELECTION_BOX_GEOMETRY=new IndexedLineArray3D([vec3.fromValues(-.5,-.5,-.5),vec3.fromValues(.5,-.5,-.5),vec3.fromValues(.5,.5,-.5),vec3.fromValues(-.5,.5,-.5),vec3.fromValues(-.5,-.5,.5),vec3.fromValues(.5,-.5,.5),vec3.fromValues(.5,.5,.5),vec3.fromValues(-.5,.5,.5)],[0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7,4,6,5,7]),HomePieceOfFurniture3D.prototype.createPieceOfFurnitureNode=function(e,t){var i=new TransformGroup3D;i.setCapability(Group3D.ALLOW_CHILDREN_EXTEND),i.setCapability(TransformGroup3D.ALLOW_TRANSFORM_WRITE),this.addChild(i),this.loadPieceOfFurnitureModel(t)},HomePieceOfFurniture3D.prototype.loadPieceOfFurnitureModel=function(e){var t=new BranchGroup3D,i=new TransformGroup3D;i.addChild(this.getModelBox(vec3.fromValues(1,1,1))),i.setUserData(PieceOfFurniture.IDENTITY_ROTATION),t.addChild(i);var n=this.getChild(0);n.removeAllChildren(),n.addChild(t),this.updatePieceOfFurnitureTransform();var o=this.getUserData(),r=o.getModel();n.setUserData(r);var l=this;ModelManager.getInstance().loadModel(r,"function"!=typeof e&&e,{modelUpdated:function(t){l.updateModelTransformations(t);var i=o.getModelRotation(),n=ModelManager.getInstance().getNormalizedTransformGroup(t,i,1,o.isModelCenteredAtOrigin());n.setUserData(i),l.updatePieceOfFurnitureModelNode(t,n,e)},modelError:function(t){l.updatePieceOfFurnitureModelNode(l.getModelBox(vec3.fromValues(1,0,0)),new TransformGroup3D,e)}})},HomePieceOfFurniture3D.prototype.update=function(){if(this.isVisible()){var e=this.getUserData(),t=this.getChild(0),i=t.getChild(0).getChild(0);e.getModel().equals(t.getUserData())&&Object3DBranch.areModelRotationsEqual(e.getModelRotation(),i.getUserData())?(this.updatePieceOfFurnitureModelTransformations(),this.updatePieceOfFurnitureTransform(),this.updatePieceOfFurnitureColorAndTexture(!1)):this.loadPieceOfFurnitureModel(!1)}this.updatePieceOfFurnitureVisibility()},HomePieceOfFurniture3D.prototype.updatePieceOfFurnitureTransform=function(){var e=this.getChild(0),t=ModelManager.getInstance().getPieceOfFurnitureNormalizedModelTransformation(this.getUserData(),e.getChild(0));e.setTransform(t)},HomePieceOfFurniture3D.prototype.updatePieceOfFurnitureColorAndTexture=function(e){var t=this.getUserData(),i=this.getModelNode(),n=i.getChild(0);n.getUserData()!==HomePieceOfFurniture3D.DEFAULT_BOX&&(null!==t.getColor()?this.setColorAndTexture(i,t.getColor(),null,t.getShininess(),null,t.isModelMirrored(),t.getModelFlags(),!1,null,null,[]):null!==t.getTexture()?this.setColorAndTexture(i,null,t.getTexture(),t.getShininess(),null,t.isModelMirrored(),t.getModelFlags(),e,vec3.fromValues(t.getWidth(),t.getHeight(),t.getDepth()),ModelManager.getInstance().getBounds(n),[]):null!==t.getModelMaterials()?this.setColorAndTexture(i,null,null,null,t.getModelMaterials(),t.isModelMirrored(),t.getModelFlags(),e,vec3.fromValues(t.getWidth(),t.getHeight(),t.getDepth()),ModelManager.getInstance().getBounds(n),[]):this.setColorAndTexture(i,null,null,t.getShininess(),null,t.isModelMirrored(),t.getModelFlags(),!1,null,null,[]))},HomePieceOfFurniture3D.prototype.getModelNode=function(){return this.getChild(0).getChild(0).getChild(0)},HomePieceOfFurniture3D.prototype.getSelectionNode=function(){var e=this.getChild(0).getChild(0);return e.getChildren().length>1&&e.getChild(1)instanceof Shape3D?e.getChild(1):null},HomePieceOfFurniture3D.prototype.updatePieceOfFurnitureVisibility=function(){var e=this.getUserData(),t=this.isVisible(),i=null===e.getColor()&&null===e.getTexture()?e.getModelMaterials():null;this.setVisible(this.getModelNode(),t,e.getModelFlags(),i);var n=this.getSelectionNode();null!=n&&this.setVisible(n,null!=this.getUserPreferences()&&this.getUserPreferences().isEditingIn3DViewEnabled()&&t&&null!=this.getHome()&&this.isSelected(this.getHome().getSelectedItems()),0,null)},HomePieceOfFurniture3D.prototype.updatePieceOfFurnitureModelTransformations=function(){var e=this.getUserData(),t=this.getModelNode();if(t.getChild(0).getUserData()!==HomePieceOfFurniture3D.DEFAULT_BOX&&this.updateModelTransformations(this)){var i=ModelManager.getInstance().getNormalizedTransform(t.getChild(0),e.getModelRotation(),1,e.isModelCenteredAtOrigin());t.setTransform(i)}},HomePieceOfFurniture3D.prototype.updateModelTransformations=function(e){var t=!1,i=this.getUserData().getModelTransformations(),n=null;if(null!==i)for(var o=0;o<i.length;o++){var r=i[o],l=r.getName()+ModelManager.DEFORMABLE_TRANSFORM_GROUP_SUFFIX;null===n&&(n=[]),n.push(l),t|=this.updateTransformation(e,l,r.getMatrix())}return t|=this.setNotUpdatedTranformationsToIdentity(e,n)},HomePieceOfFurniture3D.prototype.updateTransformation=function(e,t,i){var n=!1;if(e instanceof Group3D)if(e instanceof TransformGroup3D&&t==e.getName()){var o=mat4.create();e.getTransform(o),i[0][0]===o[0]&&i[0][1]===o[4]&&i[0][2]===o[8]&&i[0][3]===o[12]&&i[1][0]===o[1]&&i[1][1]===o[5]&&i[1][2]===o[9]&&i[1][3]===o[13]&&i[2][0]===o[2]&&i[2][1]===o[6]&&i[2][2]===o[10]&&i[2][3]===o[14]||(mat4.set(o,i[0][0],i[1][0],i[2][0],0,i[0][1],i[1][1],i[2][1],0,i[0][2],i[1][2],i[2][2],0,i[0][3],i[1][3],i[2][3],1),e.setTransform(o),n=!0)}else for(var r=e.getChildren(),l=0;l<r.length;l++)n|=this.updateTransformation(r[l],t,i);return n},HomePieceOfFurniture3D.prototype.setNotUpdatedTranformationsToIdentity=function(e,t){var i=!1;if(e instanceof Group3D){if(e instanceof TransformGroup3D&&null!==e.getName()&&e.getName().indexOf(ModelManager.DEFORMABLE_TRANSFORM_GROUP_SUFFIX)>=0&&e.getName().indexOf(ModelManager.DEFORMABLE_TRANSFORM_GROUP_SUFFIX)===e.getName().length-ModelManager.DEFORMABLE_TRANSFORM_GROUP_SUFFIX.length&&(null===t||t.indexOf(e.getName())<0)){var n=e,o=mat4.create();n.getTransform(o),TransformGroup3D.isIdentity(o)||(mat4.identity(o),n.setTransform(o),i=!0)}for(var r=e.getChildren(),l=0;l<r.length;l++)i|=this.setNotUpdatedTranformationsToIdentity(r[l],t)}return i},HomePieceOfFurniture3D.prototype.updatePieceOfFurnitureModelNode=function(e,t,i){t.setCapability(TransformGroup3D.ALLOW_TRANSFORM_WRITE),t.addChild(e);var n=new BranchGroup3D;if(n.addChild(t),null!=this.getHome()){var o=new Shape3D(HomePieceOfFurniture3D.SELECTION_BOX_GEOMETRY,this.getSelectionAppearance());o.setPickable(!1),n.addChild(o)}var r=this.getUserData();r.isDoorOrWindow()&&this.setTransparentShapeNotPickable(e);var l=this.getChild(0);l.removeAllChildren(),l.addChild(n),r.isHorizontallyRotated()&&this.updatePieceOfFurnitureTransform(),r.isBackFaceShown()&&this.setBackFaceNormalFlip(this.getModelNode(),!0),this.modifiedTexturesCount=0,this.updatePieceOfFurnitureColorAndTexture(i),this.updatePieceOfFurnitureVisibility(),0===this.modifiedTexturesCount&&"function"==typeof i&&i(this)},HomePieceOfFurniture3D.prototype.getModelBox=function(e){var t=new Appearance3D;t.setDiffuseColor(e),t.setAmbientColor(vec3.scale(vec3.create(),e,.7));var i=new Box3D(.5,.5,.5,t);return i.setUserData(HomePieceOfFurniture3D.DEFAULT_BOX),i},HomePieceOfFurniture3D.prototype.setColorAndTexture=function(e,t,i,n,o,r,l,a,s,h,u){if(e instanceof Group3D)for(var d=e.getChildren(),c=0;c<d.length;c++)this.setColorAndTexture(d[c],t,i,n,o,r,l,a,s,h,u);else if(e instanceof Link3D)this.setColorAndTexture(e.getSharedGroup(),t,i,n,o,r,l,a,s,h,u);else if(e instanceof Shape3D){var p=e,g=p.getName(),v=p.getAppearance();if(null===v&&(v=new Appearance3D,e.setAppearance(v)),-1===u.indexOf(v)){var f=null,m=null!==t,y=!m&&null!==i,C=!m&&!y&&null!==o&&o.length>0,S=m||y||C||null!==n||r||0!=l,E=null!==g&&0===g.indexOf(ModelManager.WINDOW_PANE_SHAPE_PREFIX);(!E&&S||E&&C)&&(void 0===v.defaultAppearance&&(v.defaultAppearance=v.clone()),f=v.defaultAppearance);var A=0;if(S&&(A=null!==n?n:void 0!==v.getSpecularColor()&&void 0!==v.getShininess()?v.getShininess()/128:0),m)E?this.restoreDefaultAppearance(v,null):(this.updateAppearanceMaterial(v,t,t,A),void 0!==f.getTransparency()&&v.setTransparency(f.getTransparency()),void 0!==f.getCullFace()&&v.setCullFace(f.getCullFace()),v.setTextureCoordinatesGeneration(f.getTextureCoordinatesGeneration()),v.setTextureImage(null));else if(y)E?this.restoreDefaultAppearance(v,null):(v.setTextureCoordinatesGeneration(this.getTextureCoordinates(v,i,s,h)),this.updateTextureTransform(v,i,!0),this.updateAppearanceMaterial(v,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,A),TextureManager.getInstance().loadTexture(i.getImage(),0,"function"!=typeof a&&a,this.getTextureObserver(v,r,l,a)));else if(C){var _=!1;for(c=0;c<o.length;c++){var P=o[c];if(null!==P&&(null!=P.getKey()&&P.getKey()==v.getName()||null==P.getKey()&&P.getName()==v.getName())){if(null!==P.getShininess()&&(A=P.getShininess()),null!==(t=P.getColor())&&0!=(4278190080&t))this.updateAppearanceMaterial(v,t,t,A),void 0!==f.getTransparency()&&v.setTransparency(f.getTransparency()),void 0!==f.getCullFace()&&v.setCullFace(f.getCullFace()),v.setTextureImage(null);else if(null===t&&null!==P.getTexture()){var w=P.getTexture();this.isTexturesCoordinatesDefined(p)?(this.restoreDefaultTextureCoordinatesGeneration(v),this.updateTextureTransform(v,w)):(v.setTextureCoordinatesGeneration(this.getTextureCoordinates(v,P.getTexture(),s,h)),this.updateTextureTransform(v,w,!0)),this.updateAppearanceMaterial(v,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,A);w=P.getTexture();TextureManager.getInstance().loadTexture(w.getImage(),0,"function"!=typeof a&&a,this.getTextureObserver(v,r,l,a))}else this.restoreDefaultAppearance(v,P.getShininess());_=!0;break}}_||this.restoreDefaultAppearance(v,null)}else this.restoreDefaultAppearance(v,n);this.setCullFace(v,r,0!=(l&PieceOfFurniture.SHOW_BACK_FACE)),u.push(v)}}},HomePieceOfFurniture3D.prototype.getTextureObserver=function(e,t,i,n){var o=this;return this.modifiedTexturesCount++,{textureUpdated:function(r){if(TextureManager.getInstance().isTextureTransparent(r))e.setCullFace(Appearance3D.CULL_NONE);else{var l=e.defaultAppearance;null!==l&&null!==l.getCullFace()&&e.setCullFace(l.getCullFace())}e.getTextureImage()!==r&&e.setTextureImage(r),o.setCullFace(e,t,0!=(i&PieceOfFurniture.SHOW_BACK_FACE)),0==--o.modifiedTexturesCount&&"function"==typeof n&&n(o)},textureError:function(e){return this.textureUpdated(TextureManager.getInstance().getErrorImage())}}},HomePieceOfFurniture3D.prototype.getTextureCoordinates=function(e,t,i,n){var o=vec3.create();n.getLower(o);var r=vec3.create();n.getUpper(r);var l=ModelManager.getInstance().getMinimumSize(),a=i[0]/Math.max(r[0]-o[0],l),s=-o[0]*a,h=i[1]/Math.max(r[1]-o[1],l),u=i[2]/Math.max(r[2]-o[2],l),d=-o[1]*h+r[2]*u;return{planeS:vec4.fromValues(a,0,0,s),planeT:vec4.fromValues(0,h,-u,d)}},HomePieceOfFurniture3D.prototype.isTexturesCoordinatesDefined=function(e){for(var t=e.getGeometries(),i=0,n=t.length;i<n;i++)if(!t[i].hasTextureCoordinates())return!1;return!0},HomePieceOfFurniture3D.prototype.setCullFace=function(e,t,i){if(e.getCullFace()!==Appearance3D.CULL_NONE){var n=void 0!==e.getCullFace()?e.getCullFace():Appearance3D.CULL_BACK,o=e.defaultCullFace;void 0===o&&(e.defaultCullFace=o=n),e.setCullFace(t^i^o===Appearance3D.CULL_FRONT?Appearance3D.CULL_FRONT:Appearance3D.CULL_BACK)}},HomePieceOfFurniture3D.prototype.restoreDefaultAppearance=function(e,t){if(void 0!==e.defaultAppearance){var i=e.defaultAppearance;void 0!==i.getAmbientColor()&&e.setAmbientColor(i.getAmbientColor()),void 0!==i.getDiffuseColor()&&(e.setDiffuseColor(i.getDiffuseColor()),null!==t?(e.setSpecularColor(vec3.fromValues(t,t,t)),e.setShininess(128*t)):(e.setSpecularColor(i.getSpecularColor()),e.setShininess(i.getShininess()))),void 0!==i.getTransparency()&&e.setTransparency(i.getTransparency()),void 0!==e.getCullFace()&&e.setCullFace(i.getCullFace()),void 0!==i.getTextureCoordinatesGeneration()&&e.setTextureCoordinatesGeneration(i.getTextureCoordinatesGeneration()),void 0!==e.getTextureImage()&&e.setTextureImage(i.getTextureImage())}},HomePieceOfFurniture3D.prototype.restoreDefaultTextureCoordinatesGeneration=function(e){if(void 0!==e.defaultAppearance){var t=e.defaultAppearance;void 0!==t.getTextureCoordinatesGeneration()&&e.setTextureCoordinatesGeneration(t.getTextureCoordinatesGeneration())}},HomePieceOfFurniture3D.prototype.setVisible=function(e,t,i,n){if(e instanceof Group3D)for(var o=e.getChildren(),r=0;r<o.length;r++)this.setVisible(o[r],t,i,n);else if(e instanceof Link3D)this.setVisible(e.getSharedGroup(),t,i,n);else if(e instanceof Shape3D){var l=e,a=l.getAppearance();null===a&&(a=new Appearance3D,e.setAppearance(a));var s=l.getName();if(t&&null!==s&&0===s.indexOf(ModelManager.LIGHT_SHAPE_PREFIX)&&null!==this.getHome()&&!this.isSelected(this.getHome().getSelectedItems())&&(void 0===HomeLight||this.getUserData()instanceof HomeLight)&&(t=!1),t){var h=a.getName();if(null!=h)if(0!=(i&PieceOfFurniture.HIDE_EDGE_COLOR_MATERIAL)&&0===h.indexOf(ModelManager.EDGE_COLOR_MATERIAL_PREFIX))t=!1;else if(null!=n)for(r=0;r<n.length;r++){var u=n[r];if(null!==u&&u.getName()==h){var d=u.getColor();t=null===d||0!=(4278190080&d);break}}}a.setVisible(t)}},HomePieceOfFurniture3D.prototype.isVisible=function(){var e=this.getUserData();return e.isVisible()&&(null===e.getLevel()||e.getLevel().isViewableAndVisible())},HomePieceOfFurniture3D.prototype.isSelected=function(e){for(var t=0;t<e.length;t++){var i=e[t];if(i===this.getUserData()||i instanceof HomeFurnitureGroup&&this.isSelected(i.getFurniture()))return!0}return!1},HomePieceOfFurniture3D.prototype.setBackFaceNormalFlip=function(e,t){if(e instanceof Group3D)for(var i=e.getChildren(),n=0;n<i.length;n++)this.setBackFaceNormalFlip(i[n],t);else if(e instanceof Link3D)this.setBackFaceNormalFlip(e.getSharedGroup(),t);else if(e instanceof Shape3D){var o=e.getAppearance();null===o&&(o=new Appearance3D,e.setAppearance(o)),o.setBackFaceNormalFlip(t^o.getCullFace()===Appearance3D.CULL_FRONT)}},HomePieceOfFurniture3D.prototype.setTransparentShapeNotPickable=function(e){if(e instanceof Group3D)for(var t=e.getChildren(),i=0;i<t.length;i++)this.setTransparentShapeNotPickable(t[i]);else if(e instanceof Link3D)this.setTransparentShapeNotPickable(e.getSharedGroup());else if(e instanceof Shape3D){var n=e.getAppearance();null!==n&&n.getTransparency()>0&&e.setPickable(!1)}},Wall3D.prototype=Object.create(Object3DBranch.prototype),Wall3D.prototype.constructor=Wall3D,Wall3D.LEVEL_ELEVATION_SHIFT=.1,Wall3D.FULL_FACE_CUT_OUT_AREA=new java.awt.geom.Area(new java.awt.geom.Rectangle2D.Float(-.5,.5,1,1)),Wall3D.WALL_LEFT_SIDE=0,Wall3D.WALL_RIGHT_SIDE=1,Wall3D.rotatedModelsFrontAreas=[],Wall3D.prototype.createWallPartShape=function(){var e=new Shape3D;e.setCapability(Shape3D.ALLOW_GEOMETRY_WRITE);var t=new Appearance3D;return e.setAppearance(t),this.updateAppearanceMaterial(t,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,0),e},Wall3D.prototype.update=function(){this.updateWallGeometry(!1),this.updateWallAppearance(!1)},Wall3D.prototype.updateWallGeometry=function(e){this.updateWallSideGeometry(Wall3D.WALL_LEFT_SIDE,e),this.updateWallSideGeometry(Wall3D.WALL_RIGHT_SIDE,e),this.setPickable(0==this.getHome().getEnvironment().getWallsAlpha());var t=this.getChild(8);t.addGeometry(this.createWallSelectionGeometry()),t.getGeometries().length>1&&t.removeGeometry(0)},Wall3D.prototype.updateWallSideGeometry=function(e,t){var i,n,o=this.getUserData();e===Wall3D.WALL_LEFT_SIDE?(i=o.getLeftSideTexture(),n=o.getLeftSideBaseboard()):(i=o.getRightSideTexture(),n=o.getRightSideBaseboard());for(var r=[this.getChild(e),this.getChild(e+2),this.getChild(e+4),this.getChild(e+6)],l=new Array(r.length),a=new Array(r.length),s=0;s<r.length;s++)l[s]=r[s].getChild(0),a[s]=l[s].getGeometries().length;if(null==o.getLevel()||o.getLevel().isViewableAndVisible()){var h=[[],[],[],[]];if(this.createWallGeometries(h[0],h[2],h[3],e,null,i,t),null!=n){var u=n.getTexture();null===u&&null===n.getColor()&&(u=i),this.createWallGeometries(h[1],h[1],h[1],e,n,u,t)}for(s=0;s<r.length;s++)for(var d=0;d<h[s].length;d++){var c=h[s][d];null!==c&&l[s].addGeometry(c)}}for(s=0;s<r.length;s++)for(d=a[s]-1;d>=0;d--)l[s].removeGeometry(d)},Wall3D.prototype.createWallGeometries=function(e,t,i,n,o,r,l){var a,s,h=this.getUserData(),u=this.getShape(h.getPoints()),d=this.getWallSidePoints(n),c=this.getShape(d),p=null==o?d:this.getWallBaseboardPoints(n),g=this.getShape(p),v=new java.awt.geom.Area(g),f=n===Wall3D.WALL_LEFT_SIDE?p[0].slice(0):p[p.length-1].slice(0),m=this.getWallElevation(null!==o);null===o?(a=this.getWallTopElevationAtStart(),s=this.getWallTopElevationAtEnd()):a=s=this.getBaseboardTopElevation(o);var y,C,S=Math.max(a,s),E=Math.atan2(h.getYEnd()-h.getYStart(),h.getXEnd()-h.getXStart()),A=Math.cos(E),_=Math.sin(E),P=A*h.getXStart()+_*h.getYStart(),w=A*h.getXEnd()+_*h.getYEnd(),L=h.getArcExtent(),T=null!==L&&0!==L;a===s?(y=0,C=a):C=a-(y=(s-a)/(w-P))*P;for(var b=[],O=[],I=this.getVisibleDoorsAndWindows(this.getHome().getFurniture()),D=0;D<I.length;D++){var R=(ce=I[D]).getGroundElevation();if(R+ce.getHeight()>m&&R<S){var x=new java.awt.geom.Area(this.getShape(ce.getPoints())),M=new java.awt.geom.Area(u);if(M.intersect(x),!M.isEmpty()){var F=null;ce.isParallelToWall(h)&&(null!==o&&(F=ce.clone()).setDepthInPlan(F.getDepth()+2*o.getThickness()),void 0!==HomeDoorOrWindow&&ce instanceof HomeDoorOrWindow&&ce.isWallCutOutOnBothSides()&&(null===F&&(F=ce.clone()),F.setDepthInPlan(F.getDepth()+4*h.getThickness()))),null!==F?(x=new java.awt.geom.Area(this.getShape(F.getPoints())),(M=new java.awt.geom.Area(g)).intersect(x)):(M=new java.awt.geom.Area(c)).intersect(x),M.isEmpty()||h.isTrapezoidal()&&!(R<this.getMaxElevationAtWallIntersection(M,A,_,y,C))||(b.push(new Wall3D.DoorOrWindowArea(M,[ce])),O.push(ce),v.subtract(x))}}}if(b.length>1)for(var N=0;N<b.length;N++){var U=b[N],H=[],G=0;for(D=0;D<b.length;D++){var k=b[D];if(U.getArea().isEmpty())break;if(G>N){var V=new java.awt.geom.Area(k.getArea());if(V.intersect(U.getArea()),!V.isEmpty())k.getArea().subtract(V),U.getArea().subtract(V),(K=U.getDoorsOrWindows().slice(0)).push.apply(K,k.getDoorsOrWindows()),H.push(new Wall3D.DoorOrWindowArea(V,K))}G++}b.push.apply(b,H)}for(var W=[],B=null,j=v.getPathIterator(null);!j.isDone();j.next()){var Y=[0,0];if(j.currentSegment(Y)===java.awt.geom.PathIterator.SEG_CLOSE){if(W.length>2&&(W[0][0]===W[W.length-1][0]&&W[0][1]===W[W.length-1][1]&&W.splice(W.length-1,1),W.length>2)){var z=W.slice(0);t.push(this.createVerticalPartGeometry(h,z,m,A,_,y,C,o,r,f,n)),e.push(this.createHorizontalPartGeometry(z,m,!0,T)),i.push(this.createTopPartGeometry(z,A,_,y,C,T))}W.length=0,B=null}else null!==B&&Y[0]===B[0]&&Y[1]===B[1]||(W.push(Y),B=Y)}var $=h.getLevel();B=null;for(var X=0;X<b.length;X++){if(!(U=b[X]).getArea().isEmpty())for(j=U.getArea().getPathIterator(null);!j.isDone();j.next()){Y=[0,0];if(j.currentSegment(Y)===java.awt.geom.PathIterator.SEG_CLOSE){if(W[0][0]===W[W.length-1][0]&&W[0][1]===W[W.length-1][1]&&W.splice(W.length-1,1),W.length>2){var K;z=W.slice(0);(K=U.getDoorsOrWindows()).length>1&&K.sort((function(e,t){var i=e.getGroundElevation(),n=t.getGroundElevation();return i<n?-1:i>n?1:0}));var q=K[0],Z=q.getGroundElevation();Z>m&&(null!=$&&$.getElevation()!==m&&q.getElevation()<Wall3D.LEVEL_ELEVATION_SHIFT&&(Z-=Wall3D.LEVEL_ELEVATION_SHIFT),t.push(this.createVerticalPartGeometry(h,z,m,A,_,0,Z,o,r,f,n)),e.push(this.createHorizontalPartGeometry(z,m,!0,T)),t.push(this.createHorizontalPartGeometry(z,Z,!1,T)));for(D=0;D<K.length-1;){for(var Q=K[D],J=Q.getGroundElevation(),ee=K[++D],te=ee.getGroundElevation();J+Q.getHeight()>=te+ee.getHeight()&&++D<K.length;)ee=K[D];D<K.length&&J+Q.getHeight()<te&&(t.push(this.createVerticalPartGeometry(h,z,J+Q.getHeight(),A,_,0,te,o,r,f,n)),t.push(this.createHorizontalPartGeometry(z,J+Q.getHeight(),!0,T)),t.push(this.createHorizontalPartGeometry(z,te,!1,T)))}var ie=K[K.length-1],ne=ie.getGroundElevation();for(D=K.length-2;D>=0;D--){var oe=K[D];oe.getGroundElevation()+oe.getHeight()>ne+ie.getHeight()&&(ie=oe)}var re=ne+ie.getHeight(),le=!0;for(D=0;D<z.length;D++){var ae=A*z[D][0]+_*z[D][1],se=y*ae+C;if(re>se){if(0===y||T){le=!1;break}var he=(re-se)/y;z[D][0]+=he*A,z[D][1]+=he*_}}le&&(t.push(this.createVerticalPartGeometry(h,z,re,A,_,y,C,o,r,f,n)),t.push(this.createHorizontalPartGeometry(z,re,!0,T)),i.push(this.createTopPartGeometry(z,A,_,y,C,T)))}W.length=0,B=null}else null!=B&&Y[0]===B[0]&&Y[1]===B[1]||(W.push(Y),B=Y)}}if(!T&&O.length>0){var ue=Math.PI/720,de=[];for(D=0;D<O.length;D++){var ce=O[D];if(void 0!==HomeDoorOrWindow&&ce instanceof HomeDoorOrWindow&&(PieceOfFurniture.DEFAULT_CUT_OUT_SHAPE!=ce.getCutOutShape()||1!==ce.getWallWidth()||0!==ce.getWallLeft()||1!==ce.getWallHeight()||0!==ce.getWallTop())){var pe=Math.abs(E-ce.getAngle())%(2*Math.PI);if(pe<ue||pe>2*Math.PI-ue||Math.abs(pe-Math.PI)<ue){var ge=Math.abs(pe-Math.PI)<ue?1:-1,ve=Wall3D.getRotatedModelFrontArea(ce);null===ve||0!==de.length&&l?de.push(ce):this.createGeometriesSurroundingDoorOrWindow(ce,ve,ge,h,t,i,p,m,A,_,y,C,r,f,n)}}}if(de.length>0){var fe=ModelManager.getInstance();de=de.slice(0);var me=this;for(D=0;D<de.length;D++){var ye={doorOrWindow:de[D],modelUpdated:function(e){var o;if(null===Wall3D.getRotatedModelFrontArea(this.doorOrWindow)){var a=new TransformGroup3D(fe.getRotationTransformation(this.doorOrWindow.getModelRotation()));a.addChild(e),o=fe.getFrontArea(this.doorOrWindow.getCutOutShape(),a),Wall3D.rotatedModelsFrontAreas.push({model:this.doorOrWindow.getModel(),modelRotation:this.doorOrWindow.getModelRotation(),cutOutShape:this.doorOrWindow.getCutOutShape(),frontArea:o})}var s=Math.abs(E-this.doorOrWindow.getAngle())%(2*Math.PI),u=Math.abs(s-Math.PI)<ue?1:-1;l?me.createGeometriesSurroundingDoorOrWindow(this.doorOrWindow,o,u,h,t,i,p,m,A,_,y,C,r,f,n):(de.splice(de.indexOf(this.doorOrWindow),1),0===de.length&&null==this.baseboard&&setTimeout((function(){me.updateWallSideGeometry(n,l)}),0))},modelError:function(e){null===Wall3D.getRotatedModelFrontArea(this.doorOrWindow)&&Wall3D.rotatedModelsFrontAreas.push({model:this.doorOrWindow.getModel(),modelRotation:this.doorOrWindow.getModelRotation(),cutOutShape:this.doorOrWindow.getCutOutShape(),frontArea:Wall3D.FULL_FACE_CUT_OUT_AREA}),l||de.splice(de.indexOf(this.doorOrWindow),1)}};fe.loadModel(de[D].getModel(),l,ye)}}}},Wall3D.getRotatedModelFrontArea=function(e){for(var t=0;t<Wall3D.rotatedModelsFrontAreas.length;t++)if(Wall3D.rotatedModelsFrontAreas[t].model.equals(e.getModel())&&Object3DBranch.areModelRotationsEqual(Wall3D.rotatedModelsFrontAreas[t].modelRotation,e.getModelRotation())&&Wall3D.rotatedModelsFrontAreas[t].cutOutShape==e.getCutOutShape())return Wall3D.rotatedModelsFrontAreas[t].frontArea;return null},Wall3D.prototype.getVisibleDoorsAndWindows=function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];n.isVisible()&&(null==n.getLevel()||n.getLevel().isViewableAndVisible())&&(n instanceof HomeFurnitureGroup?t.push.apply(t,this.getVisibleDoorsAndWindows(n.getFurniture())):n.isDoorOrWindow()&&t.push(n))}return t},Wall3D.prototype.getWallSidePoints=function(e){var t=this.getUserData().getPoints();if(e===Wall3D.WALL_LEFT_SIDE)for(var i=t.length/2|0;i<t.length;i++)t[i][0]=(t[i][0]+t[t.length-i-1][0])/2,t[i][1]=(t[i][1]+t[t.length-i-1][1])/2;else{i=0;for(var n=t.length/2|0;i<n;i++)t[i][0]=(t[i][0]+t[t.length-i-1][0])/2,t[i][1]=(t[i][1]+t[t.length-i-1][1])/2}return t},Wall3D.prototype.getWallBaseboardPoints=function(e){var t=this.getUserData(),i=t.getPoints$boolean(!0),n=t.getPoints();if(e===Wall3D.WALL_LEFT_SIDE)for(var o=Math.floor(i.length/2);o<i.length;o++)i[o]=n[n.length-o-1];else{o=0;for(var r=Math.floor(n.length/2);o<r;o++)i[o]=n[n.length-o-1]}return i},Wall3D.prototype.createVerticalPartGeometry=function(e,t,i,n,o,r,l,a,s,h,u){var d=this.getHome().getEnvironment().getSubpartSizeUnderLight(),c=e.getArcExtent();if((null===c||0===c)&&d>0){var p=[];p.push(t[0]);for(var g=1;g<t.length;g++){for(var v=java.awt.geom.Point2D.distance(t[g-1][0],t[g-1][1],t[g][0],t[g][1])-d/2,f=Math.atan2(t[g][1]-t[g-1][1],t[g][0]-t[g-1][0]),m=Math.cos(f),y=Math.sin(f),C=0;C<v;C+=d)p.push([t[g-1][0]+C*m,t[g-1][1]+C*y]);p.push(t[g])}t=p.slice(0)}var S=new Array(t.length),E=new Array(t.length),A=new Array(t.length),_=e.getXStart(),P=e.getYStart(),w=e.getXEnd(),L=e.getYEnd(),T=null,b=0,O=0;null!==c&&0!==c&&(T=[e.getXArcCircleCenter(),e.getYArcCircleCenter()],b=java.awt.geom.Point2D.distance(T[0],T[1],_,P),O=Math.fround(Math.atan2(h[1]-T[1],h[0]-T[0])));for(g=0;g<t.length;g++){S[g]=vec3.fromValues(t[g][0],i,t[g][1]);var I=this.getWallPointElevation(t[g][0],t[g][1],n,o,r,l);E[g]=vec3.fromValues(t[g][0],I,t[g][1])}var D=new Array(t.length);for(g=0;g<t.length;g++)null===T?D[g]=java.awt.geom.Line2D.ptLineDistSq(_,P,w,L,S[g][0],S[g][2]):(D[g]=b-java.awt.geom.Point2D.distance(T[0],T[1],S[g][0],S[g][2]),D[g]*=D[g]);var R=t.length,x=new Array(t.length);if(null===a){for(g=0;g<t.length-1;g++)x[g]=D[g]>.001||D[g+1]>.001,x[g]||R--;if(x[x.length-1]=D[0]>.001||D[t.length-1]>.001,x[x.length-1]||R--,0===R)return null}else for(g=0;g<x.length;g++)x[g]=!0;for(var M=[],F=0;F<t.length;F++)if(x[F]){var N=i,U=S[F],H=S[X=(F+1)%t.length];if(d>0)for(var G=Math.min(E[F][1],E[X][1])-d/2;N<G;N+=d)M.push(U),M.push(H),U=vec3.fromValues(S[F][0],N,S[F][2]),H=vec3.fromValues(S[X][0],N,S[X][2]),M.push(H),M.push(U);M.push(U),M.push(H),M.push(E[X]),M.push(E[F])}var k=new GeometryInfo3D(GeometryInfo3D.QUAD_ARRAY);if(k.setCoordinates(M.slice(0)),null!==s){var V;null!==a?(V=e.getThickness()/2+a.getThickness(),V*=V):V=e.getThickness()*e.getThickness()/4;var W=new Array(M.length),B=vec2.fromValues(0,i),j=0,Y=null===T?e.getThickness()/1e4:V/4;for(F=0;F<t.length;F++)if(x[F]){var z,$,X=(F+1)%t.length;if(Math.abs(D[F]-V)<Y&&Math.abs(D[X]-V)<Y){var K,q;if(null===T)K=java.awt.geom.Point2D.distance(h[0],h[1],t[F][0],t[F][1]),q=java.awt.geom.Point2D.distance(h[0],h[1],t[X][0],t[X][1]);else{if(void 0===A[F]){var Z=Math.fround(Math.atan2(t[F][1]-T[1],t[F][0]-T[0]));Z=this.adjustAngleOnReferencePointAngle(Z,O,c),A[F]=(Z-O)*b}if(void 0===A[X]){Z=Math.fround(Math.atan2(t[X][1]-T[1],t[X][0]-T[0]));Z=this.adjustAngleOnReferencePointAngle(Z,O,c),A[X]=(Z-O)*b}K=A[F],q=A[X]}u===Wall3D.WALL_LEFT_SIDE&&s.isLeftToRightOriented()&&(K=-K,q=-q),z=vec2.fromValues(K,i),$=vec2.fromValues(q,i)}else{z=B;var Q=java.awt.geom.Point2D.distance(t[F][0],t[F][1],t[X][0],t[X][1]);$=vec2.fromValues(Q,i)}if(d>0)for(N=i,G=Math.min(E[F][1],E[X][1])-d/2;N<G;N+=d)W[j++]=z,W[j++]=$,z=vec2.fromValues(z[0],N),$=vec2.fromValues($[0],N),W[j++]=$,W[j++]=z;W[j++]=z,W[j++]=$,W[j++]=vec2.fromValues($[0],E[X][1]),W[j++]=vec2.fromValues(z[0],E[F][1])}k.setTextureCoordinates(W)}return null===T&&k.setCreaseAngle(0),k.setGeneratedNormals(!0),k.getIndexedGeometryArray()},Wall3D.prototype.getMaxElevationAtWallIntersection=function(e,t,i,n,o){for(var r=-1/0,l=e.getPathIterator(null);!l.isDone();l.next()){var a=[0,0];l.currentSegment(a)!==java.awt.geom.PathIterator.SEG_CLOSE&&(r=Math.max(r,this.getWallPointElevation(a[0],a[1],t,i,n,o)))}return r},Wall3D.prototype.getWallPointElevation=function(e,t,i,n,o,r){return o*(i*e+n*t)+r},Wall3D.prototype.adjustAngleOnReferencePointAngle=function(e,t,i){return i>0?(t>0&&(e<0||e<t)||t<0&&e<t)&&(e+=2*Math.PI):(t<0&&(e>0||t<e)||t>0&&t<e)&&(e-=2*Math.PI),e},Wall3D.prototype.createHorizontalPartGeometry=function(e,t,i,n){for(var o=new Array(e.length),r=0;r<e.length;r++)o[r]=vec3.fromValues(e[r][0],t,e[r][1]);var l=new GeometryInfo3D(GeometryInfo3D.POLYGON_ARRAY);return l.setCoordinates(i?o.reverse():o),l.setStripCounts([o.length]),n&&l.setCreaseAngle(0),l.setGeneratedNormals(!0),l.getIndexedGeometryArray()},Wall3D.prototype.createTopPartGeometry=function(e,t,i,n,o,r){for(var l=new Array(e.length),a=0;a<e.length;a++){var s=n*(t*e[a][0]+i*e[a][1])+o;l[a]=vec3.fromValues(e[a][0],s,e[a][1])}var h=new GeometryInfo3D(GeometryInfo3D.POLYGON_ARRAY);return h.setCoordinates(l),h.setStripCounts([l.length]),r&&h.setCreaseAngle(0),h.setGeneratedNormals(!0),h.getIndexedGeometryArray()},Wall3D.prototype.createGeometriesSurroundingDoorOrWindow=function(e,t,i,n,o,r,l,a,s,h,u,d,c,p,g){null!==e.getModelTransformations()&&((t=new java.awt.geom.Area(t)).transform(java.awt.geom.AffineTransform.getTranslateInstance(.5,.5)),t.transform(java.awt.geom.AffineTransform.getScaleInstance(e.getWidth()*e.getWallWidth(),e.getHeight()*e.getWallHeight())),t.transform(java.awt.geom.AffineTransform.getTranslateInstance(e.getWallLeft()*e.getWidth(),(1-e.getWallHeight()-e.getWallTop())*e.getHeight())),t.transform(java.awt.geom.AffineTransform.getScaleInstance(1/e.getWidth(),1/e.getHeight())),t.transform(java.awt.geom.AffineTransform.getTranslateInstance(-.5,-.5)));var v=new java.awt.geom.Area(Wall3D.FULL_FACE_CUT_OUT_AREA);if(v.subtract(t),!v.isEmpty()){var f=e.getDepth(),m=e.getX()-i*f/2*Math.sin(e.getAngle()),y=e.getY()+i*f/2*Math.cos(e.getAngle()),C=g===Wall3D.WALL_LEFT_SIDE?l[0]:l[l.length-1],S=g===Wall3D.WALL_LEFT_SIDE?l[(l.length/2|0)-1]:l[l.length/2|0],E=java.awt.geom.Line2D.ptLineDist(C[0],C[1],S[0],S[1],m,y),A=i*(.5-java.awt.geom.Line2D.relativeCCW(C[0],C[1],S[0],S[1],m,y)*E/f),_=ModelManager.getInstance().getPieceOfFurnitureNormalizedModelTransformation(e,null),P=mat4.create();mat4.fromTranslation(P,vec3.fromValues(0,0,A)),mat4.mul(_,_,P);var w=mat4.create();mat4.invert(w,_);var L=new java.awt.geom.GeneralPath,T=vec3.fromValues(C[0],a,C[1]);vec3.transformMat4(T,T,w),L.moveTo(T[0],T[1]),T=vec3.fromValues(S[0],a,S[1]),vec3.transformMat4(T,T,w),L.lineTo(T[0],T[1]);var b=vec3.fromValues(S[0],this.getWallPointElevation(S[0],S[1],s,h,u,d),S[1]);vec3.transformMat4(b,b,w),L.lineTo(b[0],b[1]);var O=vec3.fromValues(C[0],this.getWallPointElevation(C[0],C[1],s,h,u,d),C[1]);vec3.transformMat4(O,O,w),L.lineTo(O[0],O[1]),L.closePath();var I=new java.awt.geom.GeneralPath;I.moveTo(-.5,-.5),I.lineTo(-.5,.5),I.lineTo(.5,.5),I.lineTo(.5,-.5),I.closePath();var D=new java.awt.geom.Area(I);D.intersect(new java.awt.geom.Area(L)),D.subtract(t);var R=.5/Math.max(e.getWidth(),e.getHeight());if(!D.isEmpty()){var x=i>0!=(g===Wall3D.WALL_RIGHT_SIDE)!==e.isModelMirrored(),M=this.getAreaPoints(D,R,x);if(0!==M.length){for(var F=new Array(M.length),N=0,U=0;U<M.length;U++){var H=M[U];F[U]=H.length+1,N+=F[U]}var G=n.getThickness()/2,k=G*h,V=-G*s;g===Wall3D.WALL_LEFT_SIDE&&(k*=-1,V*=-1);var W,B,j=new Array(N),Y=[],z=[];null!=c?(W=new Array(j.length),B=[]):(W=null,B=null);U=0;for(var $=0;$<M.length;$++){H=M[$];var X=vec3.fromValues(H[0][0],H[0][1],0);vec3.transformMat4(X,X,_);var K=null;if(null!=c){var q=java.awt.geom.Point2D.distance(p[0],p[1],X[0],X[2]);g===Wall3D.WALL_LEFT_SIDE&&c.isLeftToRightOriented()&&(q=-q),K=vec2.fromValues(q,X[1])}for(var Z=java.awt.geom.Line2D.ptLineDistSq(b[0],b[1],O[0],O[1],H[0][0],H[0][1]),Q=0;Q<H.length;Q++,U++){j[U]=X,null!=c&&(W[U]=K);var J,ee=Q<H.length-1?Q+1:0,te=java.awt.geom.Line2D.ptLineDistSq(b[0],b[1],O[0],O[1],H[ee][0],H[ee][1]);J=Z<1e-10&&te<1e-10?z:Y;var ie=vec3.fromValues(H[ee][0],H[ee][1],0);vec3.transformMat4(ie,ie,_),J.push(X),J.push(vec3.fromValues(X[0]+k,X[1],X[2]+V)),J.push(vec3.fromValues(ie[0]+k,ie[1],ie[2]+V)),J.push(ie);var ne=null;if(null!=c){q=java.awt.geom.Point2D.distance(p[0],p[1],ie[0],ie[2]);g===Wall3D.WALL_LEFT_SIDE&&c.isLeftToRightOriented()&&(q=-q),ne=vec2.fromValues(q,ie[1]),J===Y&&(B.push(K),B.push(K),B.push(ne),B.push(ne))}Z=te,X=ie,K=ne}j[U]=X,null!=c&&(W[U]=K),U++}var oe=new GeometryInfo3D(GeometryInfo3D.POLYGON_ARRAY);oe.setStripCounts(F),oe.setCoordinates(j),null!==c&&oe.setTextureCoordinates(W),oe.setGeneratedNormals(!0),o.push(oe.getIndexedGeometryArray()),Y.length>0&&((oe=new GeometryInfo3D(GeometryInfo3D.QUAD_ARRAY)).setCoordinates(Y.slice(0)),null!==c&&oe.setTextureCoordinates(B.slice(0)),oe.setCreaseAngle(Math.PI/2),oe.setGeneratedNormals(!0),o.push(oe.getIndexedGeometryArray())),z.length>0&&((oe=new GeometryInfo3D(GeometryInfo3D.QUAD_ARRAY)).setCoordinates(z.slice(0)),oe.setGeneratedNormals(!0),r.push(oe.getIndexedGeometryArray()))}}}},Wall3D.prototype.getWallElevation=function(e){var t=this.getUserData().getLevel();if(null===t)return 0;if(e)return t.getElevation();var i=this.getFloorThicknessBottomWall();return i>0&&(i-=Wall3D.LEVEL_ELEVATION_SHIFT),t.getElevation()-i},Wall3D.prototype.getFloorThicknessBottomWall=function(){var e=this.getUserData().getLevel();if(null==e)return 0;var t=this.getHome().getLevels();return 0!==t.length&&t[0].getElevation()===e.getElevation()?0:e.getFloorThickness()},Wall3D.prototype.getWallTopElevationAtStart=function(){var e=this.getUserData().getHeight();return(null!==e?e+this.getWallElevation(!1)+this.getFloorThicknessBottomWall():this.getHome().getWallHeight()+this.getWallElevation(!1)+this.getFloorThicknessBottomWall())+this.getTopElevationShift()},Wall3D.prototype.getTopElevationShift=function(){var e=this.getUserData().getLevel();if(null!==e){var t=this.getHome().getLevels();if(t[t.length-1]!==e)return Wall3D.LEVEL_ELEVATION_SHIFT}return 0},Wall3D.prototype.getWallTopElevationAtEnd=function(){var e=this.getUserData();return e.isTrapezoidal()?e.getHeightAtEnd()+this.getWallElevation(!1)+this.getFloorThicknessBottomWall()+this.getTopElevationShift():this.getWallTopElevationAtStart()},Wall3D.prototype.getBaseboardTopElevation=function(e){return e.getHeight()+this.getWallElevation(!0)},Wall3D.prototype.createWallSelectionGeometry=function(){for(var e=this.getUserData(),t=this.getWallElevation(!0),i=e.getLeftSideBaseboard(),n=e.getRightSideBaseboard(),o=e.getPoints(),r=e.getPoints(!0),l=new Array(2*o.length+(null!=i?4:0)+(null!=n?4:0)),a=new Array(4*o.length+(null!=i?12:4)+(null!=n?12:4)),s=0,h=0,u=0;u<o.length;u++,s++)l[s]=vec3.fromValues(r[u][0],t,r[u][1]),a[h++]=s,u>0&&(a[h++]=s);a[h++]=0;var d,c,p=this.getWallTopElevationAtStart(),g=this.getWallTopElevationAtEnd(),v=Math.atan2(e.getYEnd()-e.getYStart(),e.getXEnd()-e.getXStart()),f=Math.cos(v),m=Math.sin(v),y=f*e.getXStart()+m*e.getYStart(),C=f*e.getXEnd()+m*e.getYEnd();p==g?(d=0,c=p):c=p-(d=(g-p)/(C-y))*y;for(u=0;u<o.length;u++,s++){var S=d*(f*o[u][0]+m*o[u][1])+c;l[s]=vec3.fromValues(o[u][0],S,o[u][1]),a[h++]=s,u>0&&(a[h++]=s)}if(a[h++]=o.length,a[h++]=0,null!=i){var E=this.getBaseboardTopElevation(i);l[s]=vec3.fromValues(r[0][0],Math.min(E,p),r[0][1]),a[h++]=s,a[h++]=s++,l[s]=vec3.fromValues(o[0][0],Math.min(E,p),o[0][1]),a[h++]=s,a[h++]=s++}if(a[h++]=o.length,a[h++]=o.length/2-1,null!=i){E=this.getBaseboardTopElevation(i);l[s]=vec3.fromValues(r[o.length/2-1][0],Math.min(E,g),r[o.length/2-1][1]),a[h++]=s,a[h++]=s++,l[s]=vec3.fromValues(o[o.length/2-1][0],Math.min(E,g),o[o.length/2-1][1]),a[h++]=s,a[h++]=s++}if(a[h++]=o.length+o.length/2-1,a[h++]=o.length-1,null!=n){var A=this.getBaseboardTopElevation(n);l[s]=vec3.fromValues(r[o.length-1][0],Math.min(A,p),r[o.length-1][1]),a[h++]=s,a[h++]=s++,l[s]=vec3.fromValues(o[o.length-1][0],Math.min(A,p),o[o.length-1][1]),a[h++]=s,a[h++]=s++}if(a[h++]=2*o.length-1,a[h++]=o.length/2,null!=n){A=this.getBaseboardTopElevation(n);l[s]=vec3.fromValues(r[o.length/2][0],Math.min(A,g),r[o.length/2][1]),a[h++]=s,a[h++]=s++,l[s]=vec3.fromValues(o[o.length/2][0],Math.min(A,g),o[o.length/2][1]),a[h++]=s,a[h++]=s++}return a[h++]=o.length+o.length/2,new IndexedLineArray3D(l,a)},Wall3D.prototype.updateWallAppearance=function(e){for(var t=this.getUserData(),i=t.getTopColor(),n=[this.getChild(0),this.getChild(2),this.getChild(4),this.getChild(6)],o=[this.getChild(1),this.getChild(3),this.getChild(5),this.getChild(7)],r=0;r<n.length;r++)if(1===r){var l=t.getLeftSideBaseboard();if(null!=l){var a=l.getTexture();null===(h=l.getColor())&&null===a&&(a=t.getLeftSideTexture(),h=t.getLeftSideColor()),this.updateFilledWallSideAppearance(n[r].getChild(0).getAppearance(),a,e,h,t.getLeftSideShininess())}var s=t.getRightSideBaseboard();if(null!=s){var h;a=s.getTexture();null==(h=s.getColor())&&null==a&&(a=t.getRightSideTexture(),h=t.getRightSideColor()),this.updateFilledWallSideAppearance(o[r].getChild(0).getAppearance(),a,e,h,t.getRightSideShininess())}}else 3!==r||null==i?(this.updateFilledWallSideAppearance(n[r].getChild(0).getAppearance(),t.getLeftSideTexture(),e,t.getLeftSideColor(),t.getLeftSideShininess()),this.updateFilledWallSideAppearance(o[r].getChild(0).getAppearance(),t.getRightSideTexture(),e,t.getRightSideColor(),t.getRightSideShininess())):(this.updateFilledWallSideAppearance(n[r].getChild(0).getAppearance(),null,e,i,0),this.updateFilledWallSideAppearance(o[r].getChild(0).getAppearance(),null,e,i,0));this.getChild(8).getAppearance().setVisible(null!=this.getUserPreferences()&&this.getUserPreferences().isEditingIn3DViewEnabled()&&this.getHome().isItemSelected(t))},Wall3D.prototype.updateFilledWallSideAppearance=function(e,t,i,n,o){null==t?(this.updateAppearanceMaterial(e,n,n,o),e.setTextureImage(null)):(this.updateAppearanceMaterial(e,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,o),this.updateTextureTransform(e,t,!0),TextureManager.getInstance().loadTexture(t.getImage(),i,{textureUpdated:function(t){e.setTextureImage(t)},textureError:function(e){return this.textureUpdated(TextureManager.getInstance().getErrorImage())}}));var r=this.getHome().getEnvironment().getWallsAlpha();e.setTransparency(r)},Wall3D.DoorOrWindowArea=function(e,t){this.area=e,this.doorsOrWindows=t},Wall3D.DoorOrWindowArea.prototype.getArea=function(){return this.area},Wall3D.DoorOrWindowArea.prototype.getDoorsOrWindows=function(){return this.doorsOrWindows},Room3D.prototype=Object.create(Object3DBranch.prototype),Room3D.prototype.constructor=Room3D,Room3D.FLOOR_PART=0,Room3D.CEILING_PART=1,Room3D.prototype.createRoomPartShape=function(){var e=new Shape3D;e.setCapability(Shape3D.ALLOW_GEOMETRY_WRITE);var t=new Appearance3D;return e.setAppearance(t),this.updateAppearanceMaterial(t,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,0),e},Room3D.prototype.update=function(){this.updateRoomGeometry(),this.updateRoomAppearance(!1)},Room3D.prototype.updateRoomGeometry=function(){this.updateRoomPartGeometry(Room3D.FLOOR_PART,this.getUserData().getFloorTexture()),this.updateRoomPartGeometry(Room3D.CEILING_PART,this.getUserData().getCeilingTexture());var e=this.getUserData();this.setPickable(0==this.getHome().getEnvironment().getWallsAlpha()||null==e.getLevel()||e.getLevel().getElevation()<=0)},Room3D.prototype.updateRoomPartGeometry=function(e,t){var i=this.getChild(e),n=i.getGeometries().length,o=this.getUserData();if(null==o.getLevel()||o.getLevel().isViewableAndVisible())for(var r=this.createRoomGeometries(e,t),l=0;l<r.length;l++)i.addGeometry(r[l]);for(l=n-1;l>=0;l--)i.removeGeometry(l);var a=this.getChild(2);a.addGeometry(this.createRoomSelectionGeometry()),a.getGeometries().length>1&&a.removeGeometry(0)},Room3D.prototype.createRoomGeometries=function(e,t){var i=this.getUserData(),n=i.getPoints();if((e===Room3D.FLOOR_PART&&i.isFloorVisible()||e===Room3D.CEILING_PART&&i.isCeilingVisible())&&n.length>2){var o,r,l,a=i.getLevel(),s=this.getHome().getLevels(),h=this.isLastLevel(a,s);null!=a?o=(r=a.getElevation())-a.getFloorThickness():(r=0,o=0),l=0===s.length?0:s[0].getElevation();for(var u,d=e===Room3D.FLOOR_PART&&null!==a&&r!==l,c=[],p=[],g=this.getHome().getRooms(),v=0;v<g.length;v++){var f=g[v],m=f.getLevel();(null===m||m.isViewableAndVisible())&&(i===f||a===m&&(e===Room3D.FLOOR_PART&&f.isFloorVisible()||e===Room3D.CEILING_PART&&f.isCeilingVisible())||null!=a&&null!=m&&(e===Room3D.FLOOR_PART&&f.isFloorVisible()&&Math.abs(r-m.getElevation())<1e-4||e===Room3D.CEILING_PART&&f.isCeilingVisible()&&!h&&!this.isLastLevel(m,s)&&Math.abs(r+a.getHeight()-(m.getElevation()+m.getHeight()))<1e-4)?c.push(f):d&&null!=m&&f.isCeilingVisible()&&!this.isLastLevel(m,s)&&Math.abs(o-(m.getElevation()+m.getHeight()))<1e-4&&p.push(f))}null!=a&&c.sort((function(e,t){var i=e.getLevel().getElevation()-t.getLevel().getElevation();return 0!==i?i:e.getLevel().getElevationIndex()-t.getLevel().getElevationIndex()})),u=null===a||e===Room3D.CEILING_PART&&h?[]:this.getVisibleStaircases(this.getHome().getFurniture(),e,a,a.getElevation()===l);var y,C,S,E,A=!0;if(e===Room3D.CEILING_PART&&(null===a||h)){var _=this.getRoomHeightAt(n[0][0],n[0][1]);for(v=1;v<n.length&&A;v++)A=this.getRoomHeightAt(n[v][0],n[v][1])===_}if(!i.isSingular()||A&&(c[c.length-1]!==i||u.length>0)){if(E=new java.awt.geom.Area(this.getShape(n)),c.indexOf(i)>=0)for(v=c.length-1;v>0&&c[v]!==i;v--){var P=c[v];E.subtract(new java.awt.geom.Area(this.getShape(P.getPoints())))}this.removeStaircasesFromArea(u,E),y=[],C=[],S=this.getAreaPoints(E,y,C,1,e===Room3D.CEILING_PART)}else{var w=i.isClockwise();(w&&e===Room3D.FLOOR_PART||!w&&e===Room3D.CEILING_PART)&&(n=this.getReversedArray(n)),S=y=[n],C=[],E=null}var L=[],T=this.getHome().getEnvironment().getSubpartSizeUnderLight();if(0!==S.length){var b=[],O=!0;for(v=0;v<S.length;v++){for(var I=S[v],D=new Array(I.length),R=0;R<I.length;R++)D[R]=e===Room3D.FLOOR_PART?r:this.getRoomHeightAt(I[R][0],I[R][1]),O&&R>0&&(O=D[R]===D[R-1]);b.push(D)}if(O&&T>0)for(R=0;R<S.length;R++){I=S[R];var x=Number.MAX_VALUE,M=Number.MIN_VALUE,F=Number.MAX_VALUE,N=Number.MIN_VALUE;for(v=0;v<I.length;v++){var U=I[v];x=Math.min(x,U[0]),M=Math.max(M,U[0]),F=Math.min(F,U[1]),N=Math.max(N,U[1])}for(var H=new java.awt.geom.Area(this.getShape(I)),G=x;G<M;G+=T)for(var k=F;k<N;k+=T){var V=new java.awt.geom.Area(new java.awt.geom.Rectangle2D.Float(G,k,T,T));if(V.intersect(H),!V.isEmpty())0!=(z=this.getAreaPoints(V,1,e===Room3D.CEILING_PART)).length&&L.push(this.computeRoomPartGeometry(z,null,a,b[v][0],o,e===Room3D.FLOOR_PART,!1,t))}}else L.push(this.computeRoomPartGeometry(S,b,a,r,o,e===Room3D.FLOOR_PART,!1,t));null!=a&&e===Room3D.FLOOR_PART&&a.getElevation()!==l&&L.push(this.computeRoomBorderGeometry(y,C,a,r,t))}if(d){var W;if(null!=E||p.length>0){var B=null!=E?E:new java.awt.geom.Area(this.getShape(n));for(v=0;v<p.length;v++){P=p[v];B.subtract(new java.awt.geom.Area(this.getShape(P.getPoints())))}W=this.getAreaPoints(B,1,!0)}else W=[this.getReversedArray(n)];if(0!==W.length)if(T>0)for(v=0;v<W.length;v++){var j=W[v];for(x=Number.MAX_VALUE,M=Number.MIN_VALUE,F=Number.MAX_VALUE,N=Number.MIN_VALUE,R=0;R<j.length;R++){U=j[R];x=Math.min(x,U[0]),M=Math.max(M,U[0]),F=Math.min(F,U[1]),N=Math.max(N,U[1])}var Y=new java.awt.geom.Area(this.getShape(j));for(G=x;G<M;G+=T)for(k=F;k<N;k+=T){var z,$=new java.awt.geom.Area(new java.awt.geom.Rectangle2D.Float(G,k,T,T));if($.intersect(Y),!$.isEmpty())0!==(z=this.getAreaPoints($,1,!0)).length&&L.push(this.computeRoomPartGeometry(z,null,a,r,o,!0,!0,t))}}else L.push(this.computeRoomPartGeometry(W,null,a,r,o,!0,!0,t))}return L.slice(0)}return[]},Room3D.prototype.computeRoomPartGeometry=function(e,t,i,n,o,r,l,a){for(var s=new Array(e.length),h=0,u=0;u<e.length;u++){var d=e[u];s[u]=d.length,h+=s[u]}for(var c=new Array(h),p=(u=0,0);p<e.length;p++){d=e[p];for(var g=null!=t?t[p]:null,v=0;v<d.length;v++){var f=l?o:null!=g?g[v]:n;c[u++]=vec3.fromValues(d[v][0],f,d[v][1])}}var m=new GeometryInfo3D(GeometryInfo3D.POLYGON_ARRAY);if(m.setCoordinates(c),m.setStripCounts(s),null!=a){var y=new Array(h);u=0;for(p=0;p<e.length;p++)for(d=e[p],v=0;v<d.length;v++)y[u++]=vec2.fromValues(d[v][0],r?-d[v][1]:d[v][1]);m.setTextureCoordinates(y)}return m.setGeneratedNormals(!0),m.getIndexedGeometryArray()},Room3D.prototype.computeRoomBorderGeometry=function(e,t,i,n,o){for(var r=0,l=0;l<e.length;l++)r+=e[l].length;for(l=0;l<t.length;l++)r+=t[l].length;r*=4;l=0;for(var a=new Array(r),s=n-i.getFloorThickness(),h=0;h<e.length;h++)for(var u=e[h],d=0;d<u.length;d++){a[l++]=vec3.fromValues(u[d][0],n,u[d][1]),a[l++]=vec3.fromValues(u[d][0],s,u[d][1]);var c=d<u.length-1?d+1:0;a[l++]=vec3.fromValues(u[c][0],s,u[c][1]),a[l++]=vec3.fromValues(u[c][0],n,u[c][1])}for(h=0;h<t.length;h++){var p=t[h];for(d=0;d<p.length;d++){a[l++]=vec3.fromValues(p[d][0],n,p[d][1]);c=d<p.length-1?d+1:0;a[l++]=vec3.fromValues(p[c][0],n,p[c][1]),a[l++]=vec3.fromValues(p[c][0],s,p[c][1]),a[l++]=vec3.fromValues(p[d][0],s,p[d][1])}}var g=new GeometryInfo3D(GeometryInfo3D.QUAD_ARRAY);if(g.setCoordinates(a),null!=o){var v=new Array(r);if(l=0,o.isFittingArea()){for(h=0;h<e.length;h++)for(u=e[h],d=0;d<u.length;d++){v[l++]=v[l++]=vec2.fromValues(u[d][0],-u[d][1]);c=d<u.length-1?d+1:0;v[l++]=v[l++]=vec2.fromValues(u[c][0],-u[c][1])}for(h=0;h<t.length;h++)for(p=t[h],d=0;d<p.length;d++){v[l]=vec2.fromValues(p[d][0],-p[d][1]);c=d<p.length-1?d+1:0;v[l+1]=vec2.fromValues(p[c][0],-p[c][1]),v[l+2]=v[l+1],v[l+3]=v[l],l+=4}}else{for(h=0;h<e.length;h++)for(u=e[h],d=0;d<u.length;d++){v[l++]=vec2.fromValues(0,i.getFloorThickness()),v[l++]=vec2.fromValues(0,0);c=d<u.length-1?d+1:0;var f=java.awt.geom.Point2D.distance(u[d][0],u[d][1],u[c][0],u[c][1]);v[l++]=vec2.fromValues(f,0),v[l++]=vec2.fromValues(f,i.getFloorThickness())}for(h=0;h<t.length;h++)for(p=t[h],d=0;d<p.length;d++){v[l++]=vec2.fromValues(0,0);c=d<p.length-1?d+1:0,f=java.awt.geom.Point2D.distance(p[d][0],p[d][1],p[c][0],p[c][1]);v[l++]=vec2.fromValues(f,0),v[l++]=vec2.fromValues(f,i.getFloorThickness()),v[l++]=vec2.fromValues(0,i.getFloorThickness())}}g.setTextureCoordinates(v)}return g.setCreaseAngle(Math.PI/8),g.setGeneratedNormals(!0),g.getIndexedGeometryArray()},Room3D.prototype.removeStaircasesFromArea=function(e,t){for(var i=ModelManager.getInstance(),n=0;n<e.length;n++){var o=e[n];t.subtract(i.getAreaOnFloor(o))}},Room3D.prototype.getVisibleStaircases=function(e,t,i,n){for(var o=[],r=0;r<e.length;r++){var l=e[r];l.isVisible()&&(null===l.getLevel()||l.getLevel().isViewableAndVisible())&&(l instanceof HomeFurnitureGroup?o.push.apply(o,this.getVisibleStaircases(l.getFurniture(),t,i,n)):null!=l.getStaircaseCutOutShape()&&"false"!=l.getStaircaseCutOutShape().toLowerCase()&&(t===Room3D.FLOOR_PART&&l.getGroundElevation()<i.getElevation()&&l.getGroundElevation()+l.getHeight()>=i.getElevation()-(n?0:i.getFloorThickness())||t===Room3D.CEILING_PART&&l.getGroundElevation()<i.getElevation()+i.getHeight()&&l.getGroundElevation()+l.getHeight()>=i.getElevation()+i.getHeight())&&o.push(l))}return o},Room3D.prototype.getReversedArray=function(e){return(e=e.slice(0)).reverse()},Room3D.prototype.getRoomHeightAt=function(e,t){var i=1/0,n=this.getUserData(),o=this.getHome(),r=n.getLevel(),l=(null!==r?r.getElevation():0)+(null==r?o.getWallHeight():r.getHeight()),a=o.getLevels();if(null==r||this.isLastLevel(r,a)){var s=o.getWalls();if(n.isCeilingFlat())for(var h=!1,u=0;u<s.length;u++){if((null===(f=s[u]).getLevel()||f.getLevel().isViewable())&&f.isAtLevel(r)){if(null!==f.getHeight()){var d=f.getHeight();null!==f.getLevel()&&(d+=f.getLevel().getElevation()),h?l=Math.max(l,d):(l=d,h=!0)}if(null!==f.getHeightAtEnd()){var c=f.getHeightAtEnd();null!==f.getLevel()&&(c+=f.getLevel().getElevation()),h?l=Math.max(l,c):(l=c,h=!0)}}}else{var p=null,g=null,v=-1;for(u=0;u<s.length;u++){var f;if((null===(f=s[u]).getLevel()||f.getLevel().isViewable())&&f.isAtLevel(r))for(var m=f.getPoints(),y=0;y<m.length;y++){var C=java.awt.geom.Point2D.distanceSq(m[y][0],m[y][1],e,t);C<i&&(p=f,g=m,v=y,i=C)}}if(null!=p){l=null==p.getLevel()?0:p.getLevel().getElevation();var S=p.getHeight();if(0===v||v===g.length-1)l+=null!=S?S:o.getWallHeight();else if(p.isTrapezoidal()){var E=p.getArcExtent();if(null==E||0===E||v===Math.floor(g.length/2)||v===Math.floor(g.length/2)-1)l+=p.getHeightAtEnd();else{var A=p.getXArcCircleCenter(),_=p.getYArcCircleCenter(),P=g[v][0],w=g[v][1],L=java.awt.geom.Point2D.distance(A,_,P,w),T=p.getXStart(),b=p.getYStart(),O=(P-A)*(T-A)+(w-_)*(b-_);O/=L*java.awt.geom.Point2D.distance(A,_,T,b);var I=Math.acos(O)*(E>0?1:E<0?-1:0);l+=S+(p.getHeightAtEnd()-S)*I/E}}else l+=null!=S?S:o.getWallHeight()}}}return l},Room3D.prototype.isLastLevel=function(e,t){return t.indexOf(e)===t.length-1},Room3D.prototype.createRoomSelectionGeometry=function(){var e,t,i,n=this.getUserData(),o=n.getLevel(),r=this.getHome().getLevels();null!=o?e=(t=o.getElevation())-o.getFloorThickness():(t=0,e=0),i=0==r.length?0:r[0].getElevation();var l=n.isFloorVisible(),a=l&&null!=o&&t!=i,s=n.getPoints(),h=n.isCeilingVisible();l||h||(l=!0);var u=new Array(s.length*((l?a?2:1:0)+(h?1:0))),d=new Array((l?a?6*s.length:2*s.length:0)+(h?2*s.length:0)),c=0,p=0;if(l){for(var g=0;g<s.length;g++,c++)u[c]=vec3.fromValues(s[g][0],t,s[g][1]),d[p++]=c,g>0&&(d[p++]=c);if(d[p++]=0,a){for(g=0;g<s.length;g++,c++)u[c]=vec3.fromValues(s[g][0],e,s[g][1]),d[p++]=c,g>0&&(d[p++]=c);d[p++]=s.length;for(g=0;g<s.length;g++)d[p++]=g,d[p++]=g+s.length}}if(h){for(g=0;g<s.length;g++,c++)u[c]=vec3.fromValues(s[g][0],this.getRoomHeightAt(s[g][0],s[g][1]),s[g][1]),d[p++]=c,g>0&&(d[p++]=c);d[p++]=u.length-s.length}return new IndexedLineArray3D(u,d)},Room3D.prototype.updateRoomAppearance=function(e){var t=this.getUserData(),i=null==t.getLevel()||t.getLevel().getElevation()<=0;this.updateRoomPartAppearance(this.getChild(Room3D.FLOOR_PART).getAppearance(),t.getFloorTexture(),e,t.getFloorColor(),t.getFloorShininess(),t.isFloorVisible(),i,!0);var n=this.getChildren().length;if(n>2){var o=null==t.getLevel();this.updateRoomPartAppearance(this.getChild(Room3D.CEILING_PART).getAppearance(),t.getCeilingTexture(),e,t.getCeilingColor(),t.getCeilingShininess(),t.isCeilingVisible(),o,!1)}this.getChild(n>2?2:1).getAppearance().setVisible(null!=this.getUserPreferences()&&this.getUserPreferences().isEditingIn3DViewEnabled()&&this.getHome().isItemSelected(t))},Room3D.prototype.updateRoomPartAppearance=function(e,t,i,n,o,r,l,a){if(null==t)this.updateAppearanceMaterial(e,n,n,o),e.setTextureImage(null);else{this.updateAppearanceMaterial(e,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,o);var s=this.getUserData();t.isFittingArea()?this.updateTextureTransformFittingArea(e,t,s.getPoints(),a):this.updateTextureTransform(e,t,!0),TextureManager.getInstance().loadTexture(t.getImage(),i,{textureUpdated:function(t){e.setTextureImage(t)},textureError:function(e){return this.textureUpdated(TextureManager.getInstance().getErrorImage())}})}var h=this.getHome().getEnvironment().getWallsAlpha();l||0===h?e.setTransparency(0):e.setTransparency(h),e.setVisible(r)},Ground3D.prototype=Object.create(Object3DBranch.prototype),Ground3D.prototype.constructor=Ground3D,Ground3D.prototype.update=function(e){void 0===e&&(e=!1);var t=this.getUserData(),i=this.getChild(1),n=i.getChild(0).getAppearance(),o=null;if(t.getEnvironment().isBackgroundImageVisibleOnGround3D()){var r=t.getLevels();if(r.length>0)for(var l=r.length-1;l>=0;l--){var a=r[l];if(0==a.getElevation()&&a.isViewableAndVisible()&&null!==a.getBackgroundImage()&&a.getBackgroundImage().isVisible()){o=a.getBackgroundImage();break}}else null!==t.getBackgroundImage()&&t.getBackgroundImage().isVisible()&&(o=t.getBackgroundImage())}if(null!==o){var s=this;TextureManager.getInstance().loadTexture(o.getImage(),e,{textureUpdated:function(t){var r=o.getScale(),l=r*t.width,a=r*t.height,h=mat4.create();mat4.scale(h,h,vec3.fromValues(l,1,a));var u=mat4.create();mat4.fromTranslation(u,vec3.fromValues(l/2-o.getXOrigin(),0,a/2-o.getYOrigin())),mat4.mul(h,u,h),n.setTextureImage(t),i.setTransform(h),s.updateGround(e,new java.awt.geom.Rectangle2D.Float(-o.getXOrigin(),-o.getYOrigin(),l,a))},textureError:function(e){return this.textureUpdated(TextureManager.getInstance().getErrorImage())},progression:function(e,t,i){}}),n.setVisible(!0)}else n.setVisible(!1),this.updateGround(e,null)},Ground3D.prototype.updateGround=function(e,t){var i=this.getUserData(),n=this.getChild(0),o=n.getGeometries().length,r=n.getAppearance(),l=i.getEnvironment().getGroundTexture();if(null===l){var a=i.getEnvironment().getGroundColor();this.updateAppearanceMaterial(r,a,a,0),r.setTextureImage(null)}else this.updateAppearanceMaterial(r,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_COLOR,0),this.updateTextureTransform(r,l,!0),TextureManager.getInstance().loadTexture(l.getImage(),e,{textureUpdated:function(e){r.setTextureImage(e)},textureError:function(e){return this.textureUpdated(TextureManager.getInstance().getErrorImage())}});var s=new java.awt.geom.Area;null!==t&&s.add(new java.awt.geom.Area(t));for(var h=[],u=i.getRooms(),d=0;d<u.length;d++){var c=u[d],p=c.getLevel();if((null===p||p.isViewable())&&c.isFloorVisible()){var g=c.getPoints();if(g.length>2){var v=new java.awt.geom.Area(this.getShape(g)),f=null!==p&&p.getElevation()<0?this.getUndergroundAreas(h,p):null;(null===p||p.getElevation()<=0&&p.isViewableAndVisible())&&(s.add(v),null!==f&&f.roomArea.add(v)),null!==f&&f.undergroundArea.add(v)}}}this.updateUndergroundAreasDugByFurniture(h,i.getFurniture());var m=i.getWalls();for(d=0;d<m.length;d++){var y=m[d],C=y.getLevel();if(null!==C&&C.isViewable()&&C.getElevation()<0)(f=this.getUndergroundAreas(h,C)).wallArea.add(new java.awt.geom.Area(this.getShape(y.getPoints())))}var S=h;for(d=0;d<S.length;d++){f=S[d];for(var E=this.getPoints(f.wallArea),A=0;A<E.length;A++){var _=E[A];new Room(_).isClockwise()||f.undergroundArea.add(new java.awt.geom.Area(this.getShape(_)))}}S.sort((function(e,t){return-(e.level.getElevation()-t.level.getElevation())}));for(d=0;d<S.length;d++){var P=(f=S[d]).level,w=f.undergroundArea,L=w.clone();f.undergroundSideArea.add(w.clone());for(A=0;A<S.length;A++){var T=S[A];if(T.level.getElevation()<P.getElevation()){E=this.getPoints(T.undergroundArea);for(var b=0;b<E.length;b++){_=E[b];if(!new Room(_).isClockwise()){var O=new java.awt.geom.Area(this.getShape(_));w.subtract(O),f.undergroundSideArea.add(O)}}}}for(E=this.getPoints(w),A=0;A<E.length;A++){_=E[A];if(new Room(_).isClockwise()){var I=new java.awt.geom.Area(this.getShape(_));I.exclusiveOr(L),I.subtract(L),f.upperLevelArea.add(I)}else s.add(new java.awt.geom.Area(this.getShape(_)))}}for(d=0;d<S.length;d++){null!==(v=(f=S[d]).roomArea)&&f.undergroundArea.subtract(v)}var D=new java.awt.geom.Area(this.getShape([[this.originX,this.originY],[this.originX,this.originY+this.depth],[this.originX+this.width,this.originY+this.depth],[this.originX+this.width,this.originY]])),R=s.getBounds2D();if(!D.getBounds2D().equals(R)){var x=D;s.isEmpty()?(R=new java.awt.geom.Rectangle2D.Float(Math.max(-5e3,this.originX),Math.max(-5e3,this.originY),0,0)).add(Math.min(5e3,this.originX+this.width),Math.min(5e3,this.originY+this.depth)):(R.add(Math.max(R.getMinX()-5e3,this.originX),Math.max(R.getMinY()-5e3,this.originY)),R.add(Math.min(R.getMaxX()+5e3,this.originX+this.width),Math.min(R.getMaxY()+5e3,this.originY+this.depth))),D=new java.awt.geom.Area(R),x.subtract(D),this.addAreaGeometry(n,l,x,0)}D.subtract(s),S.splice(0,0,new Ground3D.LevelAreas(new Level("Ground",0,0,0),D));var M=0;for(d=0;d<S.length;d++){var F=(f=S[d]).level.getElevation();if(this.addAreaGeometry(n,l,f.undergroundArea,F),M-F>0){for(E=this.getPoints(f.undergroundSideArea),A=0;A<E.length;A++){_=E[A];this.addAreaSidesGeometry(n,l,_,F,M-F)}this.addAreaGeometry(n,l,f.upperLevelArea,M)}M=F}for(d=o-1;d>=0;d--)n.removeGeometry(d)},Ground3D.prototype.getPoints=function(e){for(var t=[],i=[],n=null,o=e.getPathIterator(null,1);!o.isDone();o.next()){var r=[0,0];o.currentSegment(r)===java.awt.geom.PathIterator.SEG_CLOSE?(i[0][0]===n[0]&&i[0][1]===n[1]&&i.splice(i.length-1,1),i.length>2&&t.push(i.slice(0)),i.length=0,n=null):(null!==n&&r[0]===n[0]&&r[1]===n[1]||i.push(r),n=r)}return t},Ground3D.prototype.getUndergroundAreas=function(e,t){for(var i=null,n=0;n<e.length;n++)if(e[n].level===t){i=e[n];break}return null===i&&e.push(i=new Ground3D.LevelAreas(t)),i},Ground3D.prototype.updateUndergroundAreasDugByFurniture=function(e,t){for(var i=0;i<t.length;i++){var n=t[i],o=n.getLevel();if(n.getGroundElevation()<0&&n.isVisible()&&null!==o&&o.isViewable()&&o.getElevation()<0)if(n instanceof HomeFurnitureGroup)this.updateUndergroundAreasDugByFurniture(e,n.getFurniture());else{var r=this.getUndergroundAreas(e,o);null===n.getStaircaseCutOutShape()?r.undergroundArea.add(new java.awt.geom.Area(this.getShape(n.getPoints()))):r.undergroundArea.add(ModelManager.getInstance().getAreaOnFloor(n))}}},Ground3D.prototype.addAreaGeometry=function(e,t,i,n){var o=this.getAreaPoints(i,1,!1);if(0!==o.length){for(var r=0,l=new Array(o.length),a=0;a<l.length;a++)l[a]=o[a].length,r+=l[a];for(var s=new Array(r),h=null!==t?new Array(r):null,u=0,d=0;d<o.length;d++){var c=o[d];for(a=0;a<c.length;a++,u++){var p=c[a];s[u]=vec3.fromValues(p[0],n,p[1]),null!==t&&(h[u]=vec2.fromValues(p[0]-this.originX,this.originY-p[1]))}}var g=new GeometryInfo3D(GeometryInfo3D.POLYGON_ARRAY);g.setCoordinates(s),null!==t&&g.setTextureCoordinates(h),g.setStripCounts(l),g.setCreaseAngle(0),g.setGeneratedNormals(!0),e.addGeometry(g.getIndexedGeometryArray())}},Ground3D.prototype.addAreaSidesGeometry=function(e,t,i,n,o){for(var r=new Array(4*i.length),l=null!==t?new Array(r.length):null,a=0,s=0;a<i.length;a++){var h=i[a],u=i[a<i.length-1?a+1:0];if(r[s++]=vec3.fromValues(h[0],n,h[1]),r[s++]=vec3.fromValues(h[0],n+o,h[1]),r[s++]=vec3.fromValues(u[0],n+o,u[1]),r[s++]=vec3.fromValues(u[0],n,u[1]),null!==t){var d=java.awt.geom.Point2D.distance(h[0],h[1],u[0],u[1]);l[s-4]=vec2.fromValues(h[0],n),l[s-3]=vec2.fromValues(h[0],n+o),l[s-2]=vec2.fromValues(h[0]-d,n+o),l[s-1]=vec2.fromValues(h[0]-d,n)}}var c=new GeometryInfo3D(GeometryInfo3D.QUAD_ARRAY);c.setCoordinates(r),null!==t&&c.setTextureCoordinates(l),c.setCreaseAngle(0),c.setGeneratedNormals(!0),e.addGeometry(c.getIndexedGeometryArray())},Ground3D.LevelAreas=function(e,t){void 0===t&&(t=new java.awt.geom.Area),this.level=e,this.undergroundArea=t,this.roomArea=new java.awt.geom.Area,this.wallArea=new java.awt.geom.Area,this.undergroundSideArea=new java.awt.geom.Area,this.upperLevelArea=new java.awt.geom.Area},Polyline3D.prototype=Object.create(Object3DBranch.prototype),Polyline3D.prototype.constructor=Polyline3D,Polyline3D.ARROW=null,Polyline3D.prototype.update=function(){var e=this.getUserData();if(e.isVisibleIn3D()&&(null==e.getLevel()||e.getLevel().isViewableAndVisible())){for(var t=ShapeTools.getStroke(e.getThickness(),e.getCapStyle(),e.getJoinStyle(),e.getDashStyle()!==Polyline.DashStyle.SOLID?e.getDashPattern():null,e.getDashOffset()),i=ShapeTools.getPolylineShape(e.getPoints(),e.getJoinStyle()===Polyline.JoinStyle.CURVED,e.isClosedPath()),n=null,o=null,r=null,l=null,a=i.getPathIterator(null,.5);!a.isDone();a.next()){var s=[0,0];a.currentSegment(s)!==java.awt.geom.PathIterator.SEG_CLOSE&&(null===n?n=s:null===o&&(o=s),r=l,l=s)}for(var h=Math.atan2(n[1]-o[1],n[0]-o[0]),u=Math.atan2(l[1]-r[1],l[0]-r[0]),d=e.getCapStyle()!==Polyline.CapStyle.BUTT?e.getThickness()/2:0,c=[this.getArrowShape(n,h,e.getStartArrowStyle(),e.getThickness(),d),this.getArrowShape(l,u,e.getEndArrowStyle(),e.getThickness(),d),t.createStrokedShape(i)],p=new java.awt.geom.Area,g=0;g<c.length;g++){null!=(N=c[g])&&p.add(new java.awt.geom.Area(N))}var v=this.getAreaPoints(p,.5,!1),f=0;for(g=0;g<v.length;g++)f+=v[g].length;for(var m=new Array(f),y=new Array(v.length),C=new Array(2*f),S=(g=0,0),E=0;g<v.length;g++){for(var A=v[g],_=S,P=0;P<A.length;P++){var w=A[P];C[E++]=S,P>0&&(C[E++]=S),m[S++]=vec3.fromValues(w[0],0,w[1])}C[E++]=_,y[g]=A.length}var L=new GeometryInfo3D(GeometryInfo3D.POLYGON_ARRAY);L.setCoordinates(m);var T=new Array(m.length),b=vec3.fromValues(0,1,0);for(g=0;g<m.length;g++)T[g]=b;L.setNormals(T),L.setStripCounts(y);var O,I=L.getIndexedGeometryArray(),D=new IndexedLineArray3D(m,C);if(0===this.getChildren().length){var R=new BranchGroup3D;(O=new TransformGroup3D).setCapability(TransformGroup3D.ALLOW_TRANSFORM_WRITE),R.addChild(O);var x=new Appearance3D;this.updateAppearanceMaterial(x,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,0),x.setCullFace(Appearance3D.CULL_NONE),(N=new Shape3D(I,x)).setCapability(Shape3D.ALLOW_GEOMETRY_WRITE),O.addChild(N),this.addChild(R);var M=this.getSelectionAppearance(),F=new Shape3D(D,M);F.setCapability(Shape3D.ALLOW_GEOMETRY_WRITE),F.setPickable(!1),O.addChild(F)}else{var N;(N=(O=this.getChild(0).getChild(0)).getChild(0)).setGeometry(I,0),(F=O.getChild(1)).setGeometry(D,0),M=F.getAppearance()}var U=mat4.create();mat4.fromTranslation(U,vec3.fromValues(0,e.getGroundElevation()+(e.getElevation()<.05?.05:0),0)),O.setTransform(U),this.updateAppearanceMaterial(O.getChild(0).getAppearance(),e.getColor(),e.getColor(),0),M.setVisible(null!=this.getUserPreferences()&&this.getUserPreferences().isEditingIn3DViewEnabled()&&this.getHome().isItemSelected(e))}else this.removeAllChildren()},Polyline3D.prototype.getArrowShape=function(e,t,i,n,o){if(null!=i&&i!==Polyline.ArrowStyle.NONE){var r=java.awt.geom.AffineTransform.getTranslateInstance(e[0],e[1]);r.rotate(t),r.translate(o,0);var l=2*Math.pow(n,.66);r.scale(l,l);var a=new java.awt.geom.GeneralPath;switch(i){case Polyline.ArrowStyle.DISC:a.append(new java.awt.geom.Ellipse2D.Float(-3.5,-2,4,4),!1);break;case Polyline.ArrowStyle.OPEN:var s=new java.awt.BasicStroke(n/l/.9,java.awt.BasicStroke.CAP_BUTT,java.awt.BasicStroke.JOIN_MITER);a.append(s.createStrokedShape(Polyline3D.ARROW).getPathIterator(java.awt.geom.AffineTransform.getScaleInstance(.9,.9),0),!1);break;case Polyline.ArrowStyle.DELTA:var h=new java.awt.geom.GeneralPath(Polyline3D.ARROW);h.closePath(),a.append(h.getPathIterator(java.awt.geom.AffineTransform.getTranslateInstance(1.65,0),0),!1);break;default:return null}return a.createTransformedShape(r)}return null},DimensionLine3D.prototype=Object.create(Object3DBranch.prototype),DimensionLine3D.prototype.constructor=DimensionLine3D,DimensionLine3D.prototype.update=function(){var e=this.getUserData();if(e.isVisibleIn3D()&&(null==e.getLevel()||e.getLevel().isViewableAndVisible())){var t=e.getLength(),i=this.getUserPreferences().getLengthUnit().getFormat().format(t),n=e.getLengthStyle();null==n&&(n=this.getUserPreferences().getDefaultTextStyle(DimensionLine));var o=n.getFontName();null===o&&(o="sans-serif");var r=n.getFontSize();-1===["Times","Serif","Helvetica"].indexOf(o)&&(r*=1.18);var l,a,s,h,u=.23*r,d=r-u,c=e.getOffset(),p=c<=0?-u-1:d+1;if(0===this.getChildren().length){var g=new BranchGroup3D;(l=new TransformGroup3D).setCapability(TransformGroup3D.ALLOW_TRANSFORM_WRITE),labelTransformGroup=new TransformGroup3D,labelTransformGroup.setCapability(TransformGroup3D.ALLOW_TRANSFORM_WRITE),l.addChild(labelTransformGroup),(m=new Label(i,0,p)).setColor(e.getColor()),m.setStyle(n),m.setPitch(0);var v=new Label3D(m,null,!1);labelTransformGroup.addChild(v);var f=new Shape3D;(a=new Appearance3D).setIllumination(0),f.setAppearance(a),f.setCapability(Shape3D.ALLOW_GEOMETRY_WRITE),l.addChild(f),s=new Shape3D,h=this.getSelectionAppearance(),s.setAppearance(this.getSelectionAppearance()),s.setCapability(Shape3D.ALLOW_GEOMETRY_WRITE),s.setPickable(!1),l.addChild(s),g.addChild(l),this.addChild(g)}else{var m;(m=(v=(l=this.getChild(0).getChild(0)).getChild(0).getChild(0)).getUserData()).setText(i),m.setY(p),m.setColor(e.getColor()),m.setStyle(n),v.update(),a=(f=l.getChild(1)).getAppearance(),h=(s=l.getChild(2)).getAppearance()}var y=e.getElevationStart(),C=mat4.create();mat4.fromTranslation(C,vec3.fromValues(e.getXStart(),null!=e.getLevel()?e.getLevel().getElevation()+y:y,e.getYStart())),null==this.dimensionLineRotations&&(this.dimensionLineRotations=mat4.create());var S=Math.atan2(e.getElevationEnd()-y,e.getXEnd()-e.getXStart());mat4.fromZRotation(this.dimensionLineRotations,S);var E=mat4.create(),A=Math.atan2(e.getYStart()-e.getYEnd(),e.getXEnd()-e.getXStart());mat4.fromYRotation(E,A),mat4.mul(this.dimensionLineRotations,this.dimensionLineRotations,E),E=mat4.create(),mat4.fromXRotation(E,-e.getPitch()),mat4.mul(this.dimensionLineRotations,this.dimensionLineRotations,E),mat4.mul(C,C,this.dimensionLineRotations);var _=mat4.create();mat4.fromTranslation(_,vec3.fromValues(0,0,c)),mat4.mul(C,C,_),l.setTransform(C);var P=e.getEndMarkSize()/2,w=new Array(14);w[0]=vec3.fromValues(0,0,0),w[1]=vec3.fromValues(t,0,0),w[2]=vec3.fromValues(-P,0,P),w[3]=vec3.fromValues(P,0,-P),w[4]=vec3.fromValues(0,0,P),w[5]=vec3.fromValues(0,0,-P),w[6]=vec3.fromValues(t-P,0,P),w[7]=vec3.fromValues(t+P,0,-P),w[8]=vec3.fromValues(t,0,P),w[9]=vec3.fromValues(t,0,-P),w[10]=vec3.fromValues(0,0,-c),w[11]=vec3.fromValues(0,0,-P),w[12]=vec3.fromValues(t,0,-c),w[13]=vec3.fromValues(t,0,-P);var L=new IndexedLineArray3D(w,[0,1,2,3,4,5,6,7,8,9,10,11,12,13]);f.setGeometry(L,0),s.setGeometry(L,0),this.updateAppearanceMaterial(a,null!=e.getColor()?e.getColor():0,0,0);var T=this.getHome(),b=null!=this.getUserPreferences()&&this.getUserPreferences().isEditingIn3DViewEnabled()&&T.isItemSelected(e);h.setVisible(b),a.setVisible(!b),this.updateLengthLabelDirection(T.getCamera());var O=this;null==this.cameraChangeListener&&(this.cameraChangeListener=function(e){var t=O.getUserData();if(O.getChildren().length>0&&t.isVisibleIn3D()&&(null==t.getLevel()||t.getLevel().isViewableAndVisible())){var i=e.getPropertyName();"X"!=i&&"Y"!=i&&"Z"!=i||O.updateLengthLabelDirection(e.getSource())}},this.homeCameraListener=function(e){e.getOldValue().removePropertyChangeListener(O.cameraChangeListener),e.getNewValue().addPropertyChangeListener(O.cameraChangeListener),O.updateLengthLabelDirection(T.getCamera())},this.dimensionLinesListener=function(t){t.getType()===CollectionEvent.Type.DELETE&&t.getItem()===e&&(T.getCamera().removePropertyChangeListener(O.cameraChangeListener),T.removePropertyChangeListener("CAMERA",O.homeCameraListener),T.removeDimensionLinesListener(O.dimensionLinesListener))},T.getCamera().addPropertyChangeListener(this.cameraChangeListener),T.addPropertyChangeListener("CAMERA",this.homeCameraListener),T.addDimensionLinesListener(this.dimensionLinesListener))}else this.removeAllChildren(),this.dimensionLineRotations=null,null!=this.cameraChangeListener&&(this.getHome().getCamera().removePropertyChangeListener(this.cameraChangeListener),this.getHome().removePropertyChangeListener("CAMERA",this.homeCameraListener),this.getHome().removeDimensionLinesListener(this.dimensionLinesListener),this.cameraChangeListener=null,this.homeCameraListener=null,this.dimensionLinesListener=null)},DimensionLine3D.prototype.updateLengthLabelDirection=function(e){var t=this.getUserData(),i=vec3.fromValues(0,1,0);vec3.transformMat4(i,i,this.dimensionLineRotations);var n=vec3.fromValues((t.getXEnd()+t.getXStart())/2-e.getX(),(t.getElevationEnd()+t.getElevationStart())/2-e.getZ(),(t.getYEnd()+t.getYStart())/2-e.getY()),o=this.getChild(0).getChild(0).getChild(0),r=mat4.create();mat4.fromTranslation(r,vec3.fromValues(t.getLength()/2,0,0));var l=mat4.create();mat4.fromZRotation(l,vec3.dot(i,n)>0?Math.PI:0),mat4.mul(r,r,l),o.setTransform(r)},Label3D.prototype=Object.create(Object3DBranch.prototype),Label3D.prototype.constructor=Label3D,Label3D.dummyContext=document.createElement("canvas").getContext("2d"),Label3D.prototype.update=function(){var e=this.getUserData(),t=e.getPitch(),i=e.getStyle();if(null==t||null==i||null!=e.getLevel()&&!e.getLevel().isViewableAndVisible())this.clear();else{var n=e.getText(),o=e.getColor(),r=e.getOutlineColor();if(n!=this.text||null==i&&null!=this.style||null!=i&&!i.equals(this.style)||null==o&&null!=this.color||null!=o&&o!==this.color){var l="";i.isBold()&&(l="bold "),i.isItalic()&&(l+="italic ");var a=i.getFontName();null===a&&(a="sans-serif");var s=50;-1===["Times","Serif","Helvetica"].indexOf(a)&&(s*=1.18);var h=50/i.getFontSize(),u=.23*s,d=l+" 50px "+a;Label3D.dummyContext.font=d;for(var c=n.replace(/\n*$/,"").split("\n"),p=new Array(c.length),g=-1/0,v=-u+s*c.length,f=0;f<c.length;f++)p[f]=Label3D.dummyContext.measureText(c[f]).width,i.isItalic()&&(p[f]+=.154*s),g=Math.max(p[f],g);var m,y,C,S=s*c.length,E=Math.sqrt(g/S);if((E=Math.sqrt(g/S))>1?(C=(m=Math.ceil(Math.max(255*E,Math.min(g,511*E))))/g,y=Math.ceil(C*S)):(C=(y=Math.ceil(Math.max(255*E,Math.min(S,511/E))))/S,m=Math.ceil(C*g)),m>0&&y>0){var A=document.createElement("canvas");A.width=Appearance3D.getNextHighestPowerOfTwo(m)/2,A.height=Appearance3D.getNextHighestPowerOfTwo(y)/2,A.transparent=!0;var _=A.getContext("2d");_.scale(C/m*A.width,C/y*A.height),_.translate(0,v),_.font=d,null!==o&&(_.fillStyle="rgb("+(o>>>16&255)+","+(o>>>8&255)+","+(255&o)+")"),null!==r&&(_.strokeStyle="rgb("+(r>>>16&255)+","+(r>>>8&255)+","+(255&r)+")");for(f=c.length-1;f>=0;f--){var P=c[f];w=i.getAlignment()===TextStyle.Alignment.LEFT?0:i.getAlignment()===TextStyle.Alignment.RIGHT?g-p[f]:(g-p[f])/2,_.translate(w,0),_.fillText(P,0,0),null!==r&&_.strokeText(P,0,0),_.translate(-w,-s)}var w,L=mat4.create();mat4.scale(L,L,vec3.fromValues(g/h,1,S/h)),this.baseLineTransform=mat4.create(),w=i.getAlignment()==TextStyle.Alignment.LEFT?g/2:i.getAlignment()==TextStyle.Alignment.RIGHT?-g/2:0,mat4.fromTranslation(this.baseLineTransform,vec3.fromValues(w/h,0,(S/2-v)/h)),mat4.mul(this.baseLineTransform,this.baseLineTransform,L),this.texture=A,this.text=n,this.style=i,this.color=o}else this.clear()}if(null!==this.texture){var T;if(0===this.getChildren().length){var b=new BranchGroup3D;(M=new TransformGroup3D).setCapability(TransformGroup3D.ALLOW_TRANSFORM_WRITE),b.addChild(M);var O=new Appearance3D;this.updateAppearanceMaterial(O,Object3DBranch.DEFAULT_COLOR,Object3DBranch.DEFAULT_AMBIENT_COLOR,0),O.setCullFace(Appearance3D.CULL_NONE);var I=new Shape3D(new IndexedTriangleArray3D([vec3.fromValues(-.5,0,-.5),vec3.fromValues(-.5,0,.5),vec3.fromValues(.5,0,.5),vec3.fromValues(.5,0,-.5)],[0,1,2,0,2,3],[vec2.fromValues(0,0),vec2.fromValues(1,0),vec2.fromValues(1,1),vec2.fromValues(0,1)],[3,0,1,3,1,2],[vec3.fromValues(0,1,0)],[0,0,0,0,0,0]),O);M.addChild(I);var D=[vec3.fromValues(-.5,0,-.5),vec3.fromValues(.5,0,-.5),vec3.fromValues(.5,0,.5),vec3.fromValues(-.5,0,.5)],R=new IndexedLineArray3D(D,[0,1,1,2,2,3,3,0]);T=this.getSelectionAppearance(),(x=new Shape3D(R,T)).setPickable(!1),M.addChild(x),this.addChild(b)}else{var x;T=(x=(M=this.getChild(0).getChild(0)).getChild(1)).getAppearance()}var M=this.getChild(0).getChild(0),F=mat4.create();mat4.fromXRotation(F,t),mat4.mul(F,F,this.baseLineTransform);var N=mat4.create();mat4.fromYRotation(N,-e.getAngle()),mat4.mul(N,N,F);var U=mat4.create();mat4.fromTranslation(U,vec3.fromValues(e.getX(),e.getGroundElevation()+(0==t&&e.getElevation()<.1?.1:0),e.getY())),mat4.mul(U,U,N),M.setTransform(U),M.getChild(0).getAppearance().setTextureImage(this.texture),T.setVisible(null!=this.getUserPreferences()&&this.getUserPreferences().isEditingIn3DViewEnabled()&&this.getHome().isItemSelected(e))}}},Label3D.prototype.clear=function(){this.removeAllChildren(),this.text=null,this.style=null,this.color=null,this.texture=null,this.baseLineTransform=null},TextureManager.READING_TEXTURE="Reading texture",TextureManager.instance=null,TextureManager.getInstance=function(){return null==TextureManager.instance&&(TextureManager.instance=new TextureManager),TextureManager.instance},TextureManager.prototype.clear=function(){this.loadedTextureImages={},this.loadingTextureObservers={}},TextureManager.prototype.loadTexture=function(e,t,i,n){if(void 0===i?(n=t,t=0,i=!1):void 0===n&&(n=i,i=!1),i&&!e.isStreamURLReady())throw new IllegalStateException("Can't run synchronously with unavailable URL");var o=this,r=e.getURL();e.getStreamURL({urlReady:function(e){if(r in o.loadedTextureImages)void 0!==n.textureUpdated&&n.textureUpdated(o.loadedTextureImages[r]);else if(i)o.load(e,i,{textureLoaded:function(e){o.loadedTextureImages[r]=e,void 0!==n.textureUpdated&&n.textureUpdated(e)},textureError:function(e){void 0!==n.textureError&&n.textureError(e)},progression:function(e,t,i){void 0!==n.progression&&n.progression(e,t,i)}});else if(r in o.loadingTextureObservers)o.loadingTextureObservers[r].push(n);else{var t=[];t.push(n),o.loadingTextureObservers[r]=t,o.load(e,i,{textureLoaded:function(e){var t=o.loadingTextureObservers[r];if(t){delete o.loadingTextureObservers[r],o.loadedTextureImages[r]=e;for(var i=0;i<t.length;i++)void 0!==t[i].textureUpdated&&t[i].textureUpdated(e)}},textureError:function(e){var t=o.loadingTextureObservers[r];if(t){delete o.loadingTextureObservers[r];for(var i=0;i<t.length;i++)void 0!==t[i].textureError&&t[i].textureError(e)}},progression:function(e,t,i){var n=o.loadingTextureObservers[r];if(n)for(var l=0;l<n.length;l++)void 0!==n[l].progression&&n[l].progression(e,t,i)}})}},urlError:function(e,t){n.textureError(e)}})},TextureManager.prototype.load=function(e,t,i){i.progression(TextureManager.READING_TEXTURE,e,0);var n=new Image;n.crossOrigin="anonymous",n.url=e;var o=function(t){n.removeEventListener("load",r),n.removeEventListener("error",o),i.textureError("Can't load "+e)},r=function(){n.removeEventListener("load",r),n.removeEventListener("error",o),i.progression(TextureManager.READING_TEXTURE,e,1),i.textureLoaded(n)};if(0===e.indexOf("jar:")){var l=e.indexOf("!/"),a=decodeURIComponent(e.substring(l+2)),s=e.substring(4,l);ZIPTools.getZIP(s,t,{zipReady:function(e){try{n.addEventListener("load",r),n.addEventListener("error",o);var i=e.file(a).asBinary(),l=btoa(i);n.transparent=ZIPTools.isTransparentImage(i),n.src="data:image;base64,"+l,(0!==n.width||t)&&r()}catch(e){this.zipError(e)}},zipError:function(e){i.textureError("Can't load "+s)},progression:function(e,t,n){i.progression(e,t,n)}})}else n.addEventListener("load",r),n.addEventListener("error",o),n.src=e,0!==n.width&&(n.removeEventListener("load",r),n.removeEventListener("error",o),i.progression(TextureManager.READING_TEXTURE,e,1),i.textureLoaded(n))},TextureManager.prototype.isTextureTransparent=function(e){return!0===e.transparent},TextureManager.prototype.getRotatedTextureWidth=function(e){var t=e.getAngle();return 0!==t?Math.round(Math.abs(e.getWidth()*Math.cos(t))+Math.abs(e.getHeight()*Math.sin(t))):e.getWidth()},TextureManager.prototype.getRotatedTextureHeight=function(e){var t=e.getAngle();return 0!==t?Math.round(Math.abs(e.getWidth()*Math.sin(t))+Math.abs(e.getHeight()*Math.cos(t))):e.getHeight()},TextureManager.prototype.getErrorImage=function(){return void 0===TextureManager.errorImage&&(TextureManager.errorImage=this.getColoredImage("#FF0000")),TextureManager.errorImage},TextureManager.prototype.getWaitImage=function(){return void 0===TextureManager.waitImage&&(TextureManager.waitImage=this.getColoredImage("#FFFFFF")),TextureManager.waitImage},TextureManager.prototype.getColoredImage=function(e){var t=document.createElement("canvas");t.width=2,t.height=2;var i=t.getContext("2d");i.fillStyle=e,i.fillRect(0,0,2,2);var n=t.toDataURL(),o=new Image;return o.url=n,o.src=n,o};var LengthUnit={};function MeterFamilyFormat(e,t,i){DecimalFormat.call(this,e),this.setGroupingUsed(!0),this.unitMultiplier=t,this.unit=i}function SquareMeterAreaFormatWithUnit(e){DecimalFormat.call(this,"0.##"),this.setGroupingUsed(!0),this.squareMeterUnit=e}function InchFractionFormat(e,t){DecimalFormat.call(this,"0.###"),this.setGroupingUsed(!0),this.footInch=e,this.footInchSeparator=t}function SquareFootAreaFormatWithUnit(e,t){DecimalFormat.call(this,e),this.setGroupingUsed(!0),this.unit=t}function InchDecimalsFormat(e,t){DecimalFormat.call(this,e),this.setGroupingUsed(!0),this.unit=t}function FootDecimalsFormat(e,t){DecimalFormat.call(this,e),this.setGroupingUsed(!0),this.unit=t}function UserPreferences(){this.propertyChangeSupport=new PropertyChangeSupport(this),this.initSupportedLanguages(UserPreferences.DEFAULT_SUPPORTED_LANGUAGES),this.resourceBundles=[],this.furnitureCatalogResourceBundles=[],this.texturesCatalogResourceBundles=[],this.furnitureCatalog=null,this.texturesCatalog=null,this.patternsCatalog=null,this.currency=null,this.valueAddedTaxEnabled=!1,this.defaultValueAddedTaxPercentage=null,this.unit=null,this.furnitureCatalogViewedInTree=!1,this.navigationPanelVisible=!0,this.editingIn3DViewEnabled=!1,this.aerialViewCenteredOnSelectionEnabled=!1,this.observerCameraSelectedAtChange=!0,this.magnetismEnabled=!0,this.rulersVisible=!0,this.gridVisible=!0,this.defaultFontName=null,this.furnitureViewedFromTop=!0,this.furnitureModelIconSize=128,this.roomFloorColoredOrTextured=!0,this.wallPattern=null,this.newWallPattern=null,this.newWallThickness=7.5,this.newWallHeight=250,this.newWallBaseboardThickness=1,this.newWallBaseboardHeight=7,this.newRoomFloorColor=null,this.newFloorThickness=12,this.autoSaveDelayForRecovery=0,this.recentHomes=[],this.autoCompletionStrings={},this.recentColors=[],this.recentTextures=[],this.homeExamples=[],this.ignoredActionTips={}}function DefaultUserPreferences(e,t,i,n){var o,r;UserPreferences.call(this),void 0!==e&&"boolean"==typeof e?(o=e,r=t,this.furnitureCatalogUrls=void 0,this.furnitureResourcesUrlBase=void 0,this.texturesCatalogUrls=void 0,this.texturesResourcesUrlBase=void 0):(o=!0,r=Locale.getDefault(),this.furnitureCatalogUrls=e,this.furnitureResourcesUrlBase=t,this.texturesCatalogUrls=i,this.texturesResourcesUrlBase=n);var l=[];l.push(new DefaultPatternTexture("foreground")),l.push(new DefaultPatternTexture("reversedHatchUp")),l.push(new DefaultPatternTexture("reversedHatchDown")),l.push(new DefaultPatternTexture("reversedCrossHatch")),l.push(new DefaultPatternTexture("background")),l.push(new DefaultPatternTexture("hatchUp")),l.push(new DefaultPatternTexture("hatchDown")),l.push(new DefaultPatternTexture("crossHatch"));var a=new PatternsCatalog(l);this.setPatternsCatalog(a),this.setFurnitureCatalog(o&&"function"==typeof DefaultFurnitureCatalog?Array.isArray(e)?new DefaultFurnitureCatalog(e,t):new DefaultFurnitureCatalog(this):new FurnitureCatalog),this.setTexturesCatalog(o&&"function"==typeof DefaultTexturesCatalog?Array.isArray(i)?new DefaultTexturesCatalog(i,n):new DefaultTexturesCatalog(this):new TexturesCatalog),"en_US"==r?(this.setUnit(LengthUnit.INCH),this.setNewWallThickness(7.62),this.setNewWallHeight(243.84),this.setNewWallBaseboardThickness(.9525),this.setNewWallBaseboardHeight(6.35)):(this.setUnit(LengthUnit.CENTIMETER),this.setNewWallThickness(7.5),this.setNewWallHeight(250),this.setNewWallBaseboardThickness(1),this.setNewWallBaseboardHeight(7)),this.setNewFloorThickness(12),this.setNavigationPanelVisible(!1),this.setWallPattern(a.getPattern("hatchUp")),this.setNewWallPattern(this.getWallPattern()),this.setAerialViewCenteredOnSelectionEnabled(!0),this.setAutoSaveDelayForRecovery(6e4)}function DefaultPatternTexture(e){this.name=e,this.image=new URLContent(ZIPTools.getScriptFolder()+"resources/patterns/"+this.name+".png")}function RecordedUserPreferences(e){var t;UserPreferences.call(this),void 0!==e&&(this.furnitureCatalogUrls=e.furnitureCatalogURLs,this.furnitureResourcesUrlBase=e.furnitureResourcesURLBase,this.texturesCatalogUrls=e.texturesCatalogURLs,this.texturesResourcesUrlBase=e.texturesResourcesURLBase,this.writePreferencesUrl=e.writePreferencesURL,this.readPreferencesUrl=e.readPreferencesURL,this.writeResourceUrl=void 0!==e.writePreferencesResourceURL?e.writePreferencesResourceURL:e.writeResourceURL,this.readResourceUrl=void 0!==e.readPreferencesResourceURL?e.readPreferencesResourceURL:e.readResourceURL,this.writingObserver=e.writingObserver),t=void 0!==e&&void 0!==e.defaultUserLanguage?e.defaultUserLanguage:this.getLanguage(),this.uploadingBlobs={},this.properties={},this.setFurnitureCatalog(new FurnitureCatalog),this.setTexturesCatalog(new TexturesCatalog),this.readPreferencesUrl?(this.updatePreferencesFromProperties(this.properties,t,!1),this.readPreferences(this.properties,t)):(this.updatePreferencesFromProperties(this.properties,t,!0),this.addListeners())}function viewHome(e,t,i,n,o){return new HomePreviewComponent(e,t,i,n,o)}function viewHomeInOverlay(e,t){var i=4/3;t&&t.widthByHeightRatio&&(i=t.widthByHeightRatio),hideHomeOverlay();var n=document.createElement("div");n.setAttribute("id","viewerOverlay"),n.style.position="absolute",n.style.left="0",n.style.top="0",n.style.zIndex="100",n.style.background="rgba(127, 127, 127, .5)";var o=document.getElementsByTagName("body").item(0);o.insertBefore(n,o.firstChild);var r=document.createElement("div"),l='<canvas id="viewerCanvas" class="viewerComponent"  style="background-color: #CCCCCC; border: 1px solid gray; position: absolute; outline: none; touch-action: none" tabIndex="1"></canvas><div id="viewerProgressDiv" style="position:absolute; width: 300px; background-color: rgba(128, 128, 128, 0.7); padding: 20px; border-radius: 25px">  <progress id="viewerProgress"  class="viewerComponent" value="0" max="200" style="width: 300px;"></progress>  <label id="viewerProgressLabel" class="viewerComponent" style="margin-top: 2px; margin-left: 10px; margin-right: 0px; display: block;"></label></div>';t&&(t.aerialViewButtonText&&t.virtualVisitButtonText||t.viewerControlsAdditionalHTML)&&(l+='<div id="viewerControls" style="position: absolute; padding: 10px; padding-top: 5px">',t.aerialViewButtonText&&t.virtualVisitButtonText&&(l+='   <input  id="aerialView" class="viewerComponent" name="cameraType" type="radio" style="visibility: hidden;"/>      <label class="viewerComponent" for="aerialView" style="visibility: hidden;">'+t.aerialViewButtonText+'</label>   <input  id="virtualVisit" class="viewerComponent" name="cameraType" type="radio" style="visibility: hidden;">      <label class="viewerComponent" for="virtualVisit" style="visibility: hidden;">'+t.virtualVisitButtonText+'</label>   <select id="levelsAndCameras" class="viewerComponent" style="visibility: hidden;"></select>'),t.viewerControlsAdditionalHTML&&(l+=t.viewerControlsAdditionalHTML),l+="</div>"),r.innerHTML=l,n.appendChild(r);var a=new Image;a.src=ZIPTools.getScriptFolder()+"close.png",a.style.position="absolute",n.appendChild(a),n.escKeyListener=function(e){27===e.keyCode&&hideHomeOverlay()},document.addEventListener("keydown",n.escKeyListener),a.addEventListener("click",hideHomeOverlay);var s={mousePressed:function(e){s.mousePressedInOverlay=!0},mouseClicked:function(e){s.mousePressedInOverlay&&(delete s.mousePressedInOverlay,hideHomeOverlay())}};n.addEventListener("mousedown",s.mousePressed),n.addEventListener("click",s.mouseClicked),n.addEventListener("touchmove",(function(e){e.preventDefault()}));var h=self.innerWidth,u=self.innerHeight,d=document.documentElement.clientWidth,c=document.documentElement.clientHeight;o&&o.scrollWidth&&(o.scrollWidth>d&&(d=o.scrollWidth),o.scrollHeight>c&&(c=o.scrollHeight));var p=self.pageXOffset?self.pageXOffset:0,g=self.pageYOffset?self.pageYOffset:0;n.style.height=Math.max(c,u)+"px",n.style.width=d<=h?"100%":d+"px",n.style.display="block";var v=document.getElementById("viewerCanvas");h<u*i?(v.width=.9*h,v.height=.9*h/i):(v.height=.9*u,v.width=.9*u*i),v.style.width=v.width+"px",v.style.height=v.height+"px";var f=p+(h-v.width-10)/2;v.style.left=f+"px";var m=g+(u-v.height-10)/2;v.style.top=m+"px",a.style.left=f+v.width-5+"px",a.style.top=m-10+"px";var y=document.getElementById("viewerControls");y&&(y.style.left=f-10+"px",y.style.top=m+v.height+"px",y.addEventListener("mousedown",(function(e){e.stopPropagation()})));var C=document.getElementById("viewerProgressDiv");C.style.left=f+(v.width-300)/2+"px",C.style.top=m+(v.height-50)/2+"px",C.style.visibility="visible";var S=function(e){if(hideHomeOverlay(),"No WebGL"==e){var i="Sorry, your browser doesn't support WebGL.";t.noWebGLSupportError&&(i=t.noWebGLSupportError),alert(i)}else if("string"==typeof e&&0==e.indexOf("No Home.xml entry")){i="Ensure your home file was saved with Sweet Home 3D 5.3 or a newer version.";t.missingHomeXmlEntryError&&(i=t.missingHomeXmlEntryError),alert(i)}else console.log(e.stack),alert("Error: "+(e.message?e.constructor.name+" "+e.message:e))},E=function(e,i,n){var o=document.getElementById("viewerProgress");if(o){var r=null;e===HomeRecorder.READING_HOME?(o.value=100*n,i=i.substring(i.lastIndexOf("/")+1),r=t&&t.readingHomeText?t.readingHomeText:e):e===ModelLoader.READING_MODEL&&(o.value=100+100*n,1===n&&(document.getElementById("viewerProgressDiv").style.visibility="hidden"),r=t&&t.readingModelText?t.readingModelText:e),null!==r&&(document.getElementById("viewerProgressLabel").innerHTML=(n?Math.floor(100*n)+"% ":"")+r+" "+i)}},A=HomePreviewComponent;t?(t.homePreviewComponentContructor&&(A=t.homePreviewComponentContructor),t.aerialViewButtonText&&t.virtualVisitButtonText?v.homePreviewComponent=new A("viewerCanvas",e,S,E,{roundsPerMinute:t.roundsPerMinute,navigationPanel:t.navigationPanel,aerialViewButtonId:"aerialView",virtualVisitButtonId:"virtualVisit",levelsAndCamerasListId:"levelsAndCameras",level:t.level,selectableLevels:t.selectableLevels,camera:t.camera,selectableCameras:t.selectableCameras,activateCameraSwitchKey:t.activateCameraSwitchKey}):v.homePreviewComponent=new A("viewerCanvas",e,S,E,{roundsPerMinute:t.roundsPerMinute,navigationPanel:t.navigationPanel})):v.homePreviewComponent=new A("viewerCanvas",e,S,E)}function hideHomeOverlay(){var e=document.getElementById("viewerOverlay");if(e){var t=document.getElementById("viewerCanvas");t.homePreviewComponent&&t.homePreviewComponent.dispose(),ModelManager.getInstance().clear(),TextureManager.getInstance().clear(),ZIPTools.clear(),window.removeEventListener("keydown",e.escKeyListener),document.getElementsByTagName("body").item(0).removeChild(e)}}function HomePreviewComponent(e,t,i,n,o){let r=e;if("string"==typeof e&&(r=document.getElementById(e)),r){var l=this;this.createHomeRecorder().readHome(t,{homeLoaded:function(t){try{if(r){if(o&&"none"!=o.navigationPanel&&"default"!=o.navigationPanel){function a(e){DefaultUserPreferences.call(this),this.navigationPanel=e}a.prototype=Object.create(DefaultUserPreferences.prototype),a.prototype.constructor=a,a.prototype.getLocalizedString=function(e,t,i){return e===HomeComponent3D&&"navigationPanel.innerHTML"==t?this.navigationPanel:UserPreferences.prototype.getLocalizedString.call(this,e,t,i)},l.preferences=new a(o.navigationPanel)}else l.preferences=new DefaultUserPreferences;l.home=t,l.controller=new HomeController3D(t,l.preferences),l.component3D=l.createComponent3D(e,t,l.preferences,l.controller),l.prepareComponent(e,n,o?{roundsPerMinute:o.roundsPerMinute,navigationPanelVisible:o.navigationPanel&&"none"!=o.navigationPanel,aerialViewButtonId:o.aerialViewButtonId,virtualVisitButtonId:o.virtualVisitButtonId,levelsAndCamerasListId:o.levelsAndCamerasListId,level:o.level,selectableLevels:o.selectableLevels,camera:o.camera,selectableCameras:o.selectableCameras,activateCameraSwitchKey:o.activateCameraSwitchKey}:void 0)}}catch(s){i(s)}},homeError:function(e){i(e)},progression:n})}else i("No canvas with id equal to "+e)}LengthUnit.UNITS_LOCALIZATION={"":{meterUnit:"m",centimeterUnit:"cm",millimeterUnit:"mm",inchUnit:"inch",footUnit:"ft",squareMeterUnit:"m²",squareFootUnit:"sq ft"},ar:{meterUnit:"م",centimeterUnit:"سم",millimeterUnit:"مم",inchUnit:"انش",squareMeterUnit:"متر مربع",squareFootUnit:"قدم مربع"},bg:{inchUnit:"inch"},cs:{inchUnit:"palce",squareFootUnit:"ft²"},de:{inchUnit:"inch",footUnit:"ft",squareFootUnit:"ft²"},el:{inchUnit:"ίντσα",squareMeterUnit:"m²",squareFootUnit:"τετραγωνικό πόδι"},es:{inchUnit:"pulgada",squareFootUnit:"ft²"},eu:{inchUnit:"hazbete",squareFootUnit:"sq ft"},fi:{inchUnit:'"',squareFootUnit:"ft²"},fr:{inchUnit:"pouce",footUnit:"pied",squareFootUnit:"ft²"},hu:{inchUnit:"inch",squareFootUnit:"ft²"},in:{inchUnit:"inci",squareFootUnit:"ft²"},it:{inchUnit:"pollice",squareFootUnit:"ft²"},ja:{inchUnit:"inch",squareFootUnit:"sq ft"},nl:{inchUnit:"inch",squareFootUnit:"vt²"},pl:{inchUnit:"cal",squareFootUnit:"ft²"},pt_BR:{inchUnit:"pol",squareFootUnit:"ft²"},pt:{inchUnit:"pol",squareFootUnit:"pé²"},ru:{meterUnit:"м",centimeterUnit:"см",millimeterUnit:"мм",inchUnit:"дюйм",squareMeterUnit:"м²",squareFootUnit:"ft²"},sl:{inchUnit:"inč",squareFootUnit:"kv čl"},sr:{inchUnit:"inch",squareFootUnit:"sq ft"},sv:{inchUnit:"tum",squareFootUnit:"ft²"},th:{meterUnit:"ม.",centimeterUnit:"ซม.",millimeterUnit:"มม.",inchUnit:"นิ้ว",squareMeterUnit:"ม.²",squareFootUnit:"ตารางฟุต"},tr:{inchUnit:"inç",squareFootUnit:"kare ft "},uk:{meterUnit:"м",centimeterUnit:"см",millimeterUnit:"мм",inchUnit:"дюйм",squareMeterUnit:"м²",squareFootUnit:"кв. фт"},vi:{inchUnit:"inch",squareFootUnit:"sq ft"},zh_CN:{centimeterUnit:"厘米",inchUnit:"英寸",millimeterUnit:"毫米",meterUnit:"米",squareMeterUnit:"m²",squareFootUnit:"平方英尺"},zh_TW:{centimeterUnit:"公分",inchUnit:"英吋",millimeterUnit:"公釐",meterUnit:"公尺",squareMeterUnit:"m²",squareFootUnit:"ft²"}},LengthUnit.getLocalizedUnit=function(e){var t,i,n=Locale.getDefault();if(void 0!==(t=LengthUnit.UNITS_LOCALIZATION[n])&&void 0!==(i=t[e]))return i;if(n.indexOf("_")>0&&(n=n.substring(0,n.indexOf("_")),void 0!==(t=LengthUnit.UNITS_LOCALIZATION[n])&&void 0!==(i=t[e])))return i;return LengthUnit.UNITS_LOCALIZATION[""][e]},LengthUnit.getMagnetizedMeterLength=function(e,t){var i=.1;(t*=2)>100?i=100:t>10?i=10:t>5?i=5:t>1?i=1:t>.5&&(i=.5);var n=Math.round(e/i)*i;return 0===n&&e>0?e:n},LengthUnit.getMagnetizedInchLength=function(e,t){var i=1/8;(t=2*LengthUnit.centimeterToInch(t))>6?i=6:t>3?i=3:t>1?i=1:t>.5?i=.5:t>.25&&(i=.25);var n=LengthUnit.inchToCentimeter(Math.round(LengthUnit.centimeterToInch(e)/i)*i);return 0===n&&e>0?e:n},LengthUnit.skipWhiteSpaces=function(e,t){for(;t.getIndex()<e.length&&/\s/.test(e.charAt(t.getIndex()));)t.setIndex(t.getIndex()+1)},LengthUnit.centimeterToInch=function(e){return e/2.54},LengthUnit.centimeterToFoot=function(e){return e/2.54/12},LengthUnit.inchToCentimeter=function(e){return 2.54*e},LengthUnit.footToCentimeter=function(e){return 2.54*e*12},LengthUnit.nameOf=function(e){if(null!=e)for(var t=Object.keys(LengthUnit),i=0;i<t.length;i++){var n=t[i];if(LengthUnit[n]==e)return n}return null},LengthUnit.valueOf=function(e){return LengthUnit[e]},LengthUnit.MILLIMETER={formatLocale:null},LengthUnit.MILLIMETER.name=function(){return LengthUnit.nameOf(this)},LengthUnit.MILLIMETER.getFormatWithUnit=function(){return this.checkLocaleChange(),this.lengthFormatWithUnit},LengthUnit.MILLIMETER.getAreaFormatWithUnit=function(){return this.checkLocaleChange(),this.areaFormatWithUnit},LengthUnit.MILLIMETER.getFormat=function(){return this.checkLocaleChange(),this.lengthFormat},LengthUnit.MILLIMETER.getName=function(){return this.checkLocaleChange(),this.unitName},LengthUnit.MILLIMETER.checkLocaleChange=function(){if(Locale.getDefault()!=this.formatLocale){this.formatLocale=Locale.getDefault(),this.unitName=LengthUnit.getLocalizedUnit("millimeterUnit"),this.lengthFormatWithUnit=new MeterFamilyFormat("0",10,this.unitName),this.lengthFormat=new MeterFamilyFormat("0",10);var e=LengthUnit.getLocalizedUnit("squareMeterUnit");this.areaFormatWithUnit=new SquareMeterAreaFormatWithUnit(e)}},LengthUnit.MILLIMETER.getMagnetizedLength=function(e,t){return LengthUnit.getMagnetizedMeterLength(e,t)},LengthUnit.MILLIMETER.getMinimumLength=function(){return.1},LengthUnit.MILLIMETER.getMaximumLength=function(){return 1e5},LengthUnit.MILLIMETER.getMaximumElevation=function(){return this.getMaximumLength()/10},LengthUnit.MILLIMETER.getStepSize=function(){return.5},LengthUnit.MILLIMETER.centimeterToUnit=function(e){return 10*e},LengthUnit.MILLIMETER.unitToCentimeter=function(e){return e/10},LengthUnit.MILLIMETER.isMetric=function(){return!0},LengthUnit.CENTIMETER={formatLocale:null},LengthUnit.CENTIMETER.name=function(){return LengthUnit.nameOf(this)},LengthUnit.CENTIMETER.getFormatWithUnit=function(){return this.checkLocaleChange(),this.lengthFormatWithUnit},LengthUnit.CENTIMETER.getAreaFormatWithUnit=function(){return this.checkLocaleChange(),this.areaFormatWithUnit},LengthUnit.CENTIMETER.getFormat=function(){return this.checkLocaleChange(),this.lengthFormat},LengthUnit.CENTIMETER.getName=function(){return this.checkLocaleChange(),this.unitName},LengthUnit.CENTIMETER.checkLocaleChange=function(){if(Locale.getDefault()!=this.formatLocale){this.formatLocale=Locale.getDefault(),this.unitName=LengthUnit.getLocalizedUnit("centimeterUnit"),this.lengthFormatWithUnit=new MeterFamilyFormat("0.#",1,this.unitName),this.lengthFormat=new MeterFamilyFormat("0.#",1);var e=LengthUnit.getLocalizedUnit("squareMeterUnit");this.areaFormatWithUnit=new SquareMeterAreaFormatWithUnit(e)}},LengthUnit.CENTIMETER.getMagnetizedLength=function(e,t){return LengthUnit.getMagnetizedMeterLength(e,t)},LengthUnit.CENTIMETER.getMinimumLength=function(){return.1},LengthUnit.CENTIMETER.getMaximumLength=function(){return 1e5},LengthUnit.CENTIMETER.getMaximumElevation=function(){return this.getMaximumLength()/10},LengthUnit.CENTIMETER.getStepSize=function(){return.5},LengthUnit.CENTIMETER.centimeterToUnit=function(e){return e},LengthUnit.CENTIMETER.unitToCentimeter=function(e){return e},LengthUnit.CENTIMETER.isMetric=function(){return!0},LengthUnit.METER={formatLocale:null},LengthUnit.METER.name=function(){return LengthUnit.nameOf(this)},LengthUnit.METER.getFormatWithUnit=function(){return this.checkLocaleChange(),this.lengthFormatWithUnit},LengthUnit.METER.getAreaFormatWithUnit=function(){return this.checkLocaleChange(),this.areaFormatWithUnit},LengthUnit.METER.getFormat=function(){return this.checkLocaleChange(),this.lengthFormat},LengthUnit.METER.getName=function(){return this.checkLocaleChange(),this.unitName},LengthUnit.METER.checkLocaleChange=function(){if(Locale.getDefault()!=this.formatLocale){this.formatLocale=Locale.getDefault(),this.unitName=LengthUnit.getLocalizedUnit("meterUnit"),this.lengthFormatWithUnit=new MeterFamilyFormat("0.00#",.01,this.unitName),this.lengthFormat=new MeterFamilyFormat("0.00#",.01);var e=LengthUnit.getLocalizedUnit("squareMeterUnit");this.areaFormatWithUnit=new SquareMeterAreaFormatWithUnit(e)}},LengthUnit.METER.getMagnetizedLength=function(e,t){return LengthUnit.getMagnetizedMeterLength(e,t)},LengthUnit.METER.getMinimumLength=function(){return.1},LengthUnit.METER.getMaximumLength=function(){return 1e5},LengthUnit.METER.getMaximumElevation=function(){return this.getMaximumLength()/10},LengthUnit.METER.getStepSize=function(){return.5},LengthUnit.METER.centimeterToUnit=function(e){return e/100},LengthUnit.METER.unitToCentimeter=function(e){return 100*e},LengthUnit.METER.isMetric=function(){return!0},LengthUnit.INCH={formatLocale:null},LengthUnit.INCH.name=function(){return LengthUnit.nameOf(this)},LengthUnit.INCH.getFormatWithUnit=function(){return this.checkLocaleChange(),this.lengthFormat},LengthUnit.INCH.getFormat=function(){return this.getFormatWithUnit()},LengthUnit.INCH.getAreaFormatWithUnit=function(){return this.checkLocaleChange(),this.areaFormatWithUnit},LengthUnit.INCH.getName=function(){return this.checkLocaleChange(),this.unitName},LengthUnit.INCH.checkLocaleChange=function(){if(Locale.getDefault()!=this.formatLocale){this.formatLocale=Locale.getDefault(),this.unitName=LengthUnit.getLocalizedUnit("inchUnit");this.lengthFormat=new InchFractionFormat(!0,"");var e=LengthUnit.getLocalizedUnit("squareFootUnit");this.areaFormatWithUnit=new SquareFootAreaFormatWithUnit("0",e)}},LengthUnit.INCH.getMagnetizedLength=function(e,t){return LengthUnit.getMagnetizedInchLength(e,t)},LengthUnit.INCH.getMinimumLength=function(){return LengthUnit.inchToCentimeter(.125)},LengthUnit.INCH.getMaximumLength=function(){return LengthUnit.inchToCentimeter(99974.4)},LengthUnit.INCH.getMaximumElevation=function(){return this.getMaximumLength()/10},LengthUnit.INCH.getStepSize=function(){return LengthUnit.inchToCentimeter(.125)},LengthUnit.INCH.centimeterToUnit=function(e){return LengthUnit.centimeterToInch(e)},LengthUnit.INCH.unitToCentimeter=function(e){return LengthUnit.inchToCentimeter(e)},LengthUnit.INCH.isMetric=function(){return!1},LengthUnit.INCH_FRACTION={formatLocale:null},LengthUnit.INCH_FRACTION.name=function(){return LengthUnit.nameOf(this)},LengthUnit.INCH_FRACTION.getFormatWithUnit=function(){return this.checkLocaleChange(),this.lengthFormat},LengthUnit.INCH_FRACTION.getFormat=function(){return this.getFormatWithUnit()},LengthUnit.INCH_FRACTION.getAreaFormatWithUnit=function(){return this.checkLocaleChange(),this.areaFormatWithUnit},LengthUnit.INCH_FRACTION.getName=function(){return this.checkLocaleChange(),this.unitName},LengthUnit.INCH_FRACTION.checkLocaleChange=function(){if(Locale.getDefault()!=this.formatLocale){this.formatLocale=Locale.getDefault(),this.unitName=LengthUnit.getLocalizedUnit("inchUnit");this.lengthFormat=new InchFractionFormat(!1,"");var e=LengthUnit.getLocalizedUnit("squareFootUnit");this.areaFormatWithUnit=new SquareFootAreaFormatWithUnit("0",e)}},LengthUnit.INCH_FRACTION.getMagnetizedLength=function(e,t){return LengthUnit.getMagnetizedInchLength(e,t)},LengthUnit.INCH_FRACTION.getMinimumLength=function(){return LengthUnit.inchToCentimeter(.125)},LengthUnit.INCH_FRACTION.getMaximumLength=function(){return LengthUnit.inchToCentimeter(99974.4)},LengthUnit.INCH_FRACTION.getMaximumElevation=function(){return this.getMaximumLength()/10},LengthUnit.INCH_FRACTION.getStepSize=function(){return LengthUnit.inchToCentimeter(.125)},LengthUnit.INCH_FRACTION.centimeterToUnit=function(e){return LengthUnit.centimeterToInch(e)},LengthUnit.INCH_FRACTION.unitToCentimeter=function(e){return LengthUnit.inchToCentimeter(e)},LengthUnit.INCH_FRACTION.isMetric=function(){return!1},LengthUnit.INCH_DECIMALS={formatLocale:null},LengthUnit.INCH_DECIMALS.name=function(){return LengthUnit.nameOf(this)},LengthUnit.INCH_DECIMALS.getFormatWithUnit=function(){return this.checkLocaleChange(),this.lengthFormatWithUnit},LengthUnit.INCH_DECIMALS.getFormat=function(){return this.checkLocaleChange(),this.lengthFormat},LengthUnit.INCH_DECIMALS.getAreaFormatWithUnit=function(){return this.checkLocaleChange(),this.areaFormatWithUnit},LengthUnit.INCH_DECIMALS.getName=function(){return this.checkLocaleChange(),this.unitName},LengthUnit.INCH_DECIMALS.checkLocaleChange=function(){if(Locale.getDefault()!=this.formatLocale){this.formatLocale=Locale.getDefault(),this.unitName=LengthUnit.getLocalizedUnit("inchUnit"),this.lengthFormat=new InchDecimalsFormat("0.###"),this.lengthFormatWithUnit=new InchDecimalsFormat("0.###",'"');var e=LengthUnit.getLocalizedUnit("squareFootUnit");this.areaFormatWithUnit=new SquareFootAreaFormatWithUnit("0.##",e)}},LengthUnit.INCH_DECIMALS.getMagnetizedLength=function(e,t){return LengthUnit.getMagnetizedInchLength(e,t)},LengthUnit.INCH_DECIMALS.getMinimumLength=function(){return LengthUnit.inchToCentimeter(.125)},LengthUnit.INCH_DECIMALS.getMaximumLength=function(){return LengthUnit.inchToCentimeter(99974.4)},LengthUnit.INCH_DECIMALS.getMaximumElevation=function(){return this.getMaximumLength()/10},LengthUnit.INCH_DECIMALS.getStepSize=function(){return LengthUnit.inchToCentimeter(.125)},LengthUnit.INCH_DECIMALS.centimeterToUnit=function(e){return LengthUnit.centimeterToInch(e)},LengthUnit.INCH_DECIMALS.unitToCentimeter=function(e){return LengthUnit.inchToCentimeter(e)},LengthUnit.INCH_DECIMALS.isMetric=function(){return!1},LengthUnit.FOOT_DECIMALS={formatLocale:null},LengthUnit.FOOT_DECIMALS.name=function(){return LengthUnit.nameOf(this)},LengthUnit.FOOT_DECIMALS.getFormatWithUnit=function(){return this.checkLocaleChange(),this.lengthFormatWithUnit},LengthUnit.FOOT_DECIMALS.getFormat=function(){return this.checkLocaleChange(),this.lengthFormat},LengthUnit.FOOT_DECIMALS.getAreaFormatWithUnit=function(){return this.checkLocaleChange(),this.areaFormatWithUnit},LengthUnit.FOOT_DECIMALS.getName=function(){return this.checkLocaleChange(),this.unitName},LengthUnit.FOOT_DECIMALS.checkLocaleChange=function(){if(Locale.getDefault()!=this.formatLocale){this.formatLocale=Locale.getDefault(),this.unitName=LengthUnit.getLocalizedUnit("footUnit"),this.lengthFormat=new FootDecimalsFormat("0.###"),this.lengthFormatWithUnit=new FootDecimalsFormat("0.###","'");var e=LengthUnit.getLocalizedUnit("squareFootUnit");this.areaFormatWithUnit=new SquareFootAreaFormatWithUnit("0.##",e)}},LengthUnit.FOOT_DECIMALS.getMagnetizedLength=function(e,t){return LengthUnit.getMagnetizedInchLength(e,t)},LengthUnit.FOOT_DECIMALS.getMinimumLength=function(){return LengthUnit.inchToCentimeter(.125)},LengthUnit.FOOT_DECIMALS.getMaximumLength=function(){return LengthUnit.footToCentimeter(3280)},LengthUnit.FOOT_DECIMALS.getMaximumElevation=function(){return this.getMaximumLength()/10},LengthUnit.FOOT_DECIMALS.getStepSize=function(){return LengthUnit.inchToCentimeter(.125)},LengthUnit.FOOT_DECIMALS.centimeterToUnit=function(e){return LengthUnit.centimeterToFoot(e)},LengthUnit.FOOT_DECIMALS.unitToCentimeter=function(e){return LengthUnit.footToCentimeter(e)},LengthUnit.FOOT_DECIMALS.isMetric=function(){return!1},MeterFamilyFormat.prototype=Object.create(DecimalFormat.prototype),MeterFamilyFormat.prototype.constructor=MeterFamilyFormat,MeterFamilyFormat.prototype.format=function(e){return DecimalFormat.prototype.format.call(this,e*this.unitMultiplier)+(this.unit?" "+this.unit:"")},MeterFamilyFormat.prototype.parse=function(e,t){var i=DecimalFormat.prototype.parse.call(this,e,t);return null===i?null:i/this.unitMultiplier},SquareMeterAreaFormatWithUnit.prototype=Object.create(DecimalFormat.prototype),SquareMeterAreaFormatWithUnit.prototype.constructor=SquareMeterAreaFormatWithUnit,SquareMeterAreaFormatWithUnit.prototype.format=function(e){return DecimalFormat.prototype.format.call(this,e/1e4)+(this.squareMeterUnit?" "+this.squareMeterUnit:"")},InchFractionFormat.prototype=Object.create(DecimalFormat.prototype),InchFractionFormat.prototype.constructor=InchFractionFormat,InchFractionFormat.INCH_FRACTION_CHARACTERS=["⅛","¼","⅜","½","⅝","¾","⅞"],InchFractionFormat.INCH_FRACTION_STRINGS=["1/8","1/4","3/8","1/2","5/8","3/4","7/8"],InchFractionFormat.prototype.format=function(e){var t=Math.abs(e),i=Math.floor(LengthUnit.centimeterToFoot(t)),n=LengthUnit.centimeterToInch(t-LengthUnit.footToCentimeter(i));n>=11.9375&&(i++,n-=12);var o=e>=0?"":"-",r=DecimalFormat.prototype.format.call(this,i);if(n>=5e-4){var l=Math.floor(n),a=n-l,s=Math.round(8*a);this.footInch?(o+=r,0===s||8===s?(o+="'",o+=Math.round(8*n)/8):(o+="'",o+=l,o+=InchFractionFormat.INCH_FRACTION_CHARACTERS[s-1])):0===s||8===s?o+=12*i+Math.round(8*n)/8:(o+=12*i+l,o+=InchFractionFormat.INCH_FRACTION_CHARACTERS[s-1]),o+='"'}else this.footInch?(o+=r,o+="'"):(o+=DecimalFormat.prototype.format.call(this,12*i),o+='"');return o},InchFractionFormat.prototype.parse=function(e,t){var i=0,n=new ParsePosition(t.getIndex());LengthUnit.skipWhiteSpaces(e,n);var o=NumberFormat.getIntegerInstance(),r=e.indexOf("'",t.getIndex()),l=n.getIndex()<e.length&&"-"===e.charAt(n.getIndex()),a=!1;if(-1!==r){var s=o.parse(e,n);if(null===s)return t.setErrorIndex(n.getErrorIndex()),null;if(LengthUnit.skipWhiteSpaces(e,n),n.getIndex()===r){if(i=LengthUnit.footToCentimeter(s),a=!0,n=new ParsePosition(r+1),LengthUnit.skipWhiteSpaces(e,n),n.getIndex()<e.length&&this.footInchSeparator.indexOf(e.charAt(n.getIndex()))>=0&&(n.setIndex(n.getIndex()+1),LengthUnit.skipWhiteSpaces(e,n)),n.getIndex()===e.length)return t.setIndex(e.length),i}else{if(this.decimalSeparator===e.charAt(n.getIndex())){var h=new ParsePosition(t.getIndex());if(null!==DecimalFormat.prototype.parse.call(this,e,h)&&h.getIndex()===r)return t.setErrorIndex(n.getErrorIndex()),null}n.setIndex(t.getIndex())}}var u=DecimalFormat.prototype.parse.call(this,e,n);if(null===u)return a?(t.setIndex(n.getIndex()),i):(t.setErrorIndex(n.getErrorIndex()),null);if(l?-1===r?i=LengthUnit.inchToCentimeter(u):i-=LengthUnit.inchToCentimeter(u):i+=LengthUnit.inchToCentimeter(u),LengthUnit.skipWhiteSpaces(e,n),n.getIndex()===e.length)return t.setIndex(e.length),i;if('"'===e.charAt(n.getIndex()))return t.setIndex(n.getIndex()+1),i;for(var d=e.charAt(n.getIndex()),c=e.length-n.getIndex()>=3?e.substring(n.getIndex(),n.getIndex()+3):null,p=0;p<InchFractionFormat.INCH_FRACTION_CHARACTERS.length;p++){if(InchFractionFormat.INCH_FRACTION_CHARACTERS[p]===d||InchFractionFormat.INCH_FRACTION_STRINGS[p]==c)return e.lastIndexOf(this.decimalSeparator,n.getIndex()-1)>r?null:(l?i-=LengthUnit.inchToCentimeter((p+1)/8):i+=LengthUnit.inchToCentimeter((p+1)/8),t.setIndex(n.getIndex()+(InchFractionFormat.INCH_FRACTION_CHARACTERS[p]===d?1:3)),LengthUnit.skipWhiteSpaces(e,t),t.getIndex()<e.length&&'"'===e.charAt(t.getIndex())&&t.setIndex(t.getIndex()+1),i)}return t.setIndex(n.getIndex()),i},SquareFootAreaFormatWithUnit.prototype=Object.create(DecimalFormat.prototype),SquareFootAreaFormatWithUnit.prototype.constructor=SquareFootAreaFormatWithUnit,SquareFootAreaFormatWithUnit.prototype.format=function(e){return DecimalFormat.prototype.format.call(this,e/929.0304)+(this.unit?" "+this.unit:"")},InchDecimalsFormat.prototype=Object.create(DecimalFormat.prototype),InchDecimalsFormat.prototype.constructor=InchDecimalsFormat,InchDecimalsFormat.prototype.format=function(e){return DecimalFormat.prototype.format.call(this,LengthUnit.centimeterToInch(e))+(this.unit?this.unit:"")},InchDecimalsFormat.prototype.parse=function(e,t){var i=new ParsePosition(t.getIndex());LengthUnit.skipWhiteSpaces(e,i);var n=DecimalFormat.prototype.parse.call(this,e,i);if(null===n)return t.setErrorIndex(i.getErrorIndex()),null;var o=LengthUnit.inchToCentimeter(n);return LengthUnit.skipWhiteSpaces(e,i),i.getIndex()<e.length&&'"'===e.charAt(i.getIndex())?t.setIndex(i.getIndex()+1):t.setIndex(i.getIndex()),o},FootDecimalsFormat.prototype=Object.create(DecimalFormat.prototype),FootDecimalsFormat.prototype.constructor=FootDecimalsFormat,FootDecimalsFormat.prototype.format=function(e){return DecimalFormat.prototype.format.call(this,LengthUnit.centimeterToFoot(e))+(this.unit?this.unit:"")},FootDecimalsFormat.prototype.parse=function(e,t){var i=new ParsePosition(t.getIndex());LengthUnit.skipWhiteSpaces(e,i);var n=DecimalFormat.prototype.parse.call(this,e,i);if(null===n)return t.setErrorIndex(i.getErrorIndex()),null;var o=LengthUnit.footToCentimeter(n);return LengthUnit.skipWhiteSpaces(e,i),i.getIndex()<e.length&&"'"===e.charAt(i.getIndex())?t.setIndex(i.getIndex()+1):t.setIndex(i.getIndex()),o},UserPreferences.DEFAULT_SUPPORTED_LANGUAGES=["bg","cs","de","el","en","es","fr","it","ja","hu","nl","pl","pt","pt_BR","ru","sv","vi","zh_CN","zh_TW"],UserPreferences.DEFAULT_TEXT_STYLE=new TextStyle(18),UserPreferences.DEFAULT_ROOM_TEXT_STYLE=new TextStyle(24),UserPreferences.prototype.initSupportedLanguages=function(e){if(this.supportedLanguages=e,!this.language||-1===this.supportedLanguages.indexOf(this.language)){var t=Locale.getDefault();null===t&&(t="en"),this.defaultCountry="";var i=t;t.indexOf("_")>0&&(this.defaultCountry=t.substring(t.indexOf("_")+1,t.length),i=this.language?this.language.substring(0,this.language.indexOf("_")):t.substring(0,t.indexOf("_")));for(var n=0;n<this.supportedLanguages.length;n++){var o=this.supportedLanguages[n];if(""!=this.defaultCountry&&o==i+"_"+this.defaultCountry||""==this.defaultCountry&&o==i){this.language=o;break}void 0===this.language&&0===o.indexOf(i)&&(this.language=o)}void 0===this.language&&(this.language="en"),this.updateDefaultLocale()}},UserPreferences.prototype.updateDefaultLocale=function(){-1!==this.language.indexOf("_")||""==this.defaultCountry?Locale.setDefault(this.language):Locale.setDefault(this.language+"_"+this.defaultCountry)},UserPreferences.prototype.write=function(){},UserPreferences.prototype.addPropertyChangeListener=function(e){this.propertyChangeSupport.addPropertyChangeListener(e)},UserPreferences.prototype.removePropertyChangeListener=function(e){this.propertyChangeSupport.removePropertyChangeListener(e)},UserPreferences.prototype.addPropertyChangeListener=function(e,t){this.propertyChangeSupport.addPropertyChangeListener(e,t)},UserPreferences.prototype.removePropertyChangeListener=function(e,t){this.propertyChangeSupport.removePropertyChangeListener(e,t)},UserPreferences.prototype.getFurnitureCatalog=function(){return this.furnitureCatalog},UserPreferences.prototype.setFurnitureCatalog=function(e){this.furnitureCatalog=e},UserPreferences.prototype.getTexturesCatalog=function(){return this.texturesCatalog},UserPreferences.prototype.setTexturesCatalog=function(e){this.texturesCatalog=e},UserPreferences.prototype.getPatternsCatalog=function(){return this.patternsCatalog},UserPreferences.prototype.setPatternsCatalog=function(e){this.patternsCatalog=e},UserPreferences.prototype.getLengthUnit=function(){return this.unit},UserPreferences.prototype.setUnit=function(e){if(this.unit!==e){var t=this.unit;this.unit=e,this.propertyChangeSupport.firePropertyChange("UNIT",t,e)}},UserPreferences.prototype.getLanguage=function(){return this.language},UserPreferences.prototype.setLanguage=function(e){if(e!=this.language&&this.isLanguageEditable()){var t=this.language;this.language=e,this.updateDefaultLocale(),this.resourceBundles=[],this.furnitureCatalogResourceBundles=[],this.texturesCatalogResourceBundles=[],this.propertyChangeSupport.firePropertyChange("LANGUAGE",t,e)}},UserPreferences.prototype.isLanguageEditable=function(){return!0},UserPreferences.prototype.getDefaultSupportedLanguages=function(){return UserPreferences.DEFAULT_SUPPORTED_LANGUAGES.slice(0)},UserPreferences.prototype.getSupportedLanguages=function(){return this.supportedLanguages.slice(0)},UserPreferences.prototype.setSupportedLanguages=function(e){if(this.supportedLanguages!=e){var t=this.supportedLanguages,i=this.language;this.initSupportedLanguages(e.slice(0)),this.propertyChangeSupport.firePropertyChange("SUPPORTED_LANGUAGES",t,e),i!=this.language&&this.propertyChangeSupport.firePropertyChange("LANGUAGE",i,language)}},UserPreferences.prototype.getLocalizedString=function(e,t,i){if(this.getResourceBundles(e),"DefaultFurnitureCatalog"==e)return CoreTools.getStringFromKey.apply(null,[this.furnitureCatalogResourceBundles,t].concat(Array.prototype.slice.call(arguments,2)));if("DefaultTexturesCatalog"==e)return CoreTools.getStringFromKey.apply(null,[this.texturesCatalogResourceBundles,t].concat(Array.prototype.slice.call(arguments,2)));if(e.__class){var n=e.__class.split(".");e=n[n.length-1]}var o=e+"."+t;return CoreTools.getStringFromKey.apply(null,[this.resourceBundles,o].concat(Array.prototype.slice.call(arguments,2)))},UserPreferences.prototype.getLocalizedStringKeys=function(e){if("DefaultFurnitureCatalog"==resourceClass){for(var t={},i=0;i<resourceBundles.length;i++)null!=resourceBundles[i]&&CoreTools.merge(t,resourceBundles[i]);return Object.getOwnPropertyNames(t)}throw new IllegalArgumentException("unsupported family")},UserPreferences.prototype.getResourceBundles=function(e){return"DefaultFurnitureCatalog"==e?(0==this.furnitureCatalogResourceBundles.length&&(this.furnitureCatalogResourceBundles=CoreTools.loadResourceBundles("resources/DefaultFurnitureCatalog",Locale.getDefault())),this.furnitureCatalogResourceBundles):"DefaultTexturesCatalog"==e?(0==this.texturesCatalogResourceBundles.length&&(this.texturesCatalogResourceBundles=CoreTools.loadResourceBundles("resources/DefaultTexturesCatalog",Locale.getDefault())),this.texturesCatalogResourceBundles):(0==this.resourceBundles.length&&(this.resourceBundles=CoreTools.loadResourceBundles("resources/localization",Locale.getDefault())),this.resourceBundles)},UserPreferences.prototype.getCurrency=function(){return this.currency},UserPreferences.prototype.setCurrency=function(e){if(e!=this.currency){var t=this.currency;this.currency=e,this.propertyChangeSupport.firePropertyChange("CURRENCY",t,e)}},UserPreferences.prototype.isValueAddedTaxEnabled=function(){return this.valueAddedTaxEnabled},UserPreferences.prototype.setValueAddedTaxEnabled=function(e){this.valueAddedTaxEnabled!==e&&(this.valueAddedTaxEnabled=e,this.propertyChangeSupport.firePropertyChange("VALUE_ADDED_TAX_ENABLED",!e,e))},UserPreferences.prototype.getDefaultValueAddedTaxPercentage=function(){return this.defaultValueAddedTaxPercentage},UserPreferences.prototype.setDefaultValueAddedTaxPercentage=function(e){if(e!==this.defaultValueAddedTaxPercentage&&(null==e||null==this.defaultValueAddedTaxPercentage||!e.eq(this.defaultValueAddedTaxPercentage))){var t=this.defaultValueAddedTaxPercentage;this.defaultValueAddedTaxPercentage=e,this.propertyChangeSupport.firePropertyChange("DEFAULT_VALUE_ADDED_TAX_PERCENTAGE",t,e)}},UserPreferences.prototype.isFurnitureCatalogViewedInTree=function(){return this.furnitureCatalogViewedInTree},UserPreferences.prototype.setFurnitureCatalogViewedInTree=function(e){this.furnitureCatalogViewedInTree!==e&&(this.furnitureCatalogViewedInTree=e,this.propertyChangeSupport.firePropertyChange("FURNITURE_CATALOG_VIEWED_IN_TREE",!e,e))},UserPreferences.prototype.isNavigationPanelVisible=function(){return this.navigationPanelVisible},UserPreferences.prototype.setNavigationPanelVisible=function(e){this.navigationPanelVisible!==e&&(this.navigationPanelVisible=e,this.propertyChangeSupport.firePropertyChange("NAVIGATION_PANEL_VISIBLE",!e,e))},UserPreferences.prototype.isEditingIn3DViewEnabled=function(){return this.editingIn3DViewEnabled},UserPreferences.prototype.setEditingIn3DViewEnabled=function(e){e!=this.editingIn3DViewEnabled&&(this.editingIn3DViewEnabled=e,this.propertyChangeSupport.firePropertyChange("EDITING_IN_3D_VIEW_ENABLED",!e,e))},UserPreferences.prototype.isAerialViewCenteredOnSelectionEnabled=function(){return this.aerialViewCenteredOnSelectionEnabled},UserPreferences.prototype.setAerialViewCenteredOnSelectionEnabled=function(e){e!==this.aerialViewCenteredOnSelectionEnabled&&(this.aerialViewCenteredOnSelectionEnabled=e,this.propertyChangeSupport.firePropertyChange("AERIAL_VIEW_CENTERED_ON_SELECTION_ENABLED",!e,e))},UserPreferences.prototype.isObserverCameraSelectedAtChange=function(){return this.observerCameraSelectedAtChange},UserPreferences.prototype.setObserverCameraSelectedAtChange=function(e){e!==this.observerCameraSelectedAtChange&&(this.observerCameraSelectedAtChange=e,this.propertyChangeSupport.firePropertyChange("OBSERVER_CAMERA_SELECTED_AT_CHANGE",!e,e))},UserPreferences.prototype.isMagnetismEnabled=function(){return this.magnetismEnabled},UserPreferences.prototype.setMagnetismEnabled=function(e){this.magnetismEnabled!==e&&(this.magnetismEnabled=e,this.propertyChangeSupport.firePropertyChange("MAGNETISM_ENABLED",!e,e))},UserPreferences.prototype.isRulersVisible=function(){return this.rulersVisible},UserPreferences.prototype.setRulersVisible=function(e){this.rulersVisible!==e&&(this.rulersVisible=e,this.propertyChangeSupport.firePropertyChange("RULERS_VISIBLE",!e,e))},UserPreferences.prototype.isGridVisible=function(){return this.gridVisible},UserPreferences.prototype.setGridVisible=function(e){this.gridVisible!==e&&(this.gridVisible=e,this.propertyChangeSupport.firePropertyChange("GRID_VISIBLE",!e,e))},UserPreferences.prototype.getDefaultFontName=function(){return this.defaultFontName},UserPreferences.prototype.setDefaultFontName=function(e){if(e!=this.defaultFontName){var t=this.defaultFontName;this.defaultFontName=e,this.propertyChangeSupport.firePropertyChange("DEFAULT_FONT_NAME",t,e)}},UserPreferences.prototype.isFurnitureViewedFromTop=function(){return this.furnitureViewedFromTop},UserPreferences.prototype.setFurnitureViewedFromTop=function(e){this.furnitureViewedFromTop!==e&&(this.furnitureViewedFromTop=e,this.propertyChangeSupport.firePropertyChange("FURNITURE_VIEWED_FROM_TOP",!e,e))},UserPreferences.prototype.getFurnitureModelIconSize=function(){return this.furnitureModelIconSize},UserPreferences.prototype.setFurnitureModelIconSize=function(e){if(e!==this.furnitureModelIconSize){var t=this.furnitureModelIconSize;this.furnitureModelIconSize=e,this.propertyChangeSupport.firePropertyChange("FURNITURE_MODEL_ICON_SIZE",t,e)}},UserPreferences.prototype.isRoomFloorColoredOrTextured=function(){return this.roomFloorColoredOrTextured},UserPreferences.prototype.setFloorColoredOrTextured=function(e){this.roomFloorColoredOrTextured!==e&&(this.roomFloorColoredOrTextured=e,this.propertyChangeSupport.firePropertyChange("ROOM_FLOOR_COLORED_OR_TEXTURED",!e,e))},UserPreferences.prototype.getWallPattern=function(){return this.wallPattern},UserPreferences.prototype.setWallPattern=function(e){if(this.wallPattern!==e){var t=this.wallPattern;this.wallPattern=e,this.propertyChangeSupport.firePropertyChange("WALL_PATTERN",t,e)}},UserPreferences.prototype.getNewWallPattern=function(){return this.newWallPattern},UserPreferences.prototype.setNewWallPattern=function(e){if(this.newWallPattern!==e){var t=this.newWallPattern;this.newWallPattern=e,this.propertyChangeSupport.firePropertyChange("NEW_WALL_PATTERN",t,e)}},UserPreferences.prototype.getNewWallThickness=function(){return this.newWallThickness},UserPreferences.prototype.setNewWallThickness=function(e){if(this.newWallThickness!==e){var t=this.newWallThickness;this.newWallThickness=e,this.propertyChangeSupport.firePropertyChange("NEW_WALL_THICKNESS",t,e)}},UserPreferences.prototype.getNewWallHeight=function(){return this.newWallHeight},UserPreferences.prototype.setNewWallHeight=function(e){if(this.newWallHeight!==e){var t=this.newWallHeight;this.newWallHeight=e,this.propertyChangeSupport.firePropertyChange("NEW_WALL_HEIGHT",t,e)}},UserPreferences.prototype.getNewWallBaseboardThickness=function(){return this.newWallBaseboardThickness},UserPreferences.prototype.setNewWallBaseboardThickness=function(e){if(this.newWallBaseboardThickness!==e){var t=this.newWallBaseboardThickness;this.newWallBaseboardThickness=e,this.propertyChangeSupport.firePropertyChange("NEW_WALL_SIDEBOARD_THICKNESS",t,e)}},UserPreferences.prototype.getNewWallBaseboardHeight=function(){return this.newWallBaseboardHeight},UserPreferences.prototype.setNewWallBaseboardHeight=function(e){if(this.newWallBaseboardHeight!==e){var t=this.newWallBaseboardHeight;this.newWallBaseboardHeight=e,this.propertyChangeSupport.firePropertyChange("NEW_WALL_SIDEBOARD_HEIGHT",t,e)}},UserPreferences.prototype.getNewRoomFloorColor=function(){return this.newRoomFloorColor},UserPreferences.prototype.setNewRoomFloorColor=function(e){if(this.newRoomFloorColor!==e){var t=this.newRoomFloorColor;this.newRoomFloorColor=e,this.propertyChangeSupport.firePropertyChange("NEW_ROOM_FLOOR_COLOR",t,e)}},UserPreferences.prototype.getNewFloorThickness=function(){return this.newFloorThickness},UserPreferences.prototype.setNewFloorThickness=function(e){if(this.newFloorThickness!==e){var t=this.newFloorThickness;this.newFloorThickness=e,this.propertyChangeSupport.firePropertyChange("NEW_FLOOR_THICKNESS",t,e)}},UserPreferences.prototype.getAutoSaveDelayForRecovery=function(){return this.autoSaveDelayForRecovery},UserPreferences.prototype.setAutoSaveDelayForRecovery=function(e){if(this.autoSaveDelayForRecovery!==e){var t=this.autoSaveDelayForRecovery;this.autoSaveDelayForRecovery=e,this.propertyChangeSupport.firePropertyChange("AUTO_SAVE_DELAY_FOR_RECOVERY",t,e)}},UserPreferences.prototype.getRecentHomes=function(){return this.recentHomes.slice(0)},UserPreferences.prototype.setRecentHomes=function(e){if(e!=this.recentHomes){var t=this.recentHomes;this.recentHomes=e.slice(0),this.propertyChangeSupport.firePropertyChange("RECENT_HOMES",t,this.getRecentHomes())}},UserPreferences.prototype.getRecentHomesMaxCount=function(){return 10},UserPreferences.prototype.getStoredCamerasMaxCount=function(){return 50},UserPreferences.prototype.setActionTipIgnored=function(e){this.propertyChangeSupport.firePropertyChange("IGNORED_ACTION_TIP",null,e)},UserPreferences.prototype.isActionTipIgnored=function(e){return!0},UserPreferences.prototype.resetIgnoredActionTips=function(){this.propertyChangeSupport.firePropertyChange("IGNORED_ACTION_TIP",null,null)},UserPreferences.prototype.getDefaultTextStyle=function(e){return"Room"==e.name?UserPreferences.DEFAULT_ROOM_TEXT_STYLE:UserPreferences.DEFAULT_TEXT_STYLE},UserPreferences.prototype.getAutoCompletionStrings=function(e){var t=this.autoCompletionStrings.get(e);return void 0!==t?t.slice(0):[]},UserPreferences.prototype.addAutoCompletionString=function(e,t){if(null!==t&&t.length>0){var i=this.autoCompletionStrings[e];if(void 0===i)i=[];else{if(!(i.indexOf(t)<0))return;i=i.slice(0)}i.splice(0,0,t),this.setAutoCompletionStrings(e,i)}},UserPreferences.prototype.setAutoCompletionStrings=function(e,t){t!=this.autoCompletionStrings[e]&&(this.autoCompletionStrings[e]=t.slice(0),this.propertyChangeSupport.firePropertyChange("AUTO_COMPLETION_STRINGS",null,e))},UserPreferences.prototype.getAutoCompletedProperties=function(){return null!==this.autoCompletionStrings?Object.keys(this.autoCompletionStrings):[]},UserPreferences.prototype.getRecentColors=function(){return this.recentColors},UserPreferences.prototype.setRecentColors=function(e){if(e!=this.recentColors){var t=this.recentColors;this.recentColors=e.slice(0),this.propertyChangeSupport.firePropertyChange("RECENT_COLORS",t,this.getRecentColors())}},UserPreferences.prototype.getRecentTextures=function(){return this.recentTextures},UserPreferences.prototype.setRecentTextures=function(e){if(e!=this.recentTextures){var t=this.recentTextures;this.recentTextures=e.slice(0),this.propertyChangeSupport.firePropertyChange("RECENT_TEXTURES",t,this.getRecentTextures())}},UserPreferences.prototype.setHomeExamples=function(e){if(e!=this.homeExamples){var t=this.homeExamples;this.homeExamples=e.slice(0),this.propertyChangeSupport.firePropertyChange("HOME_EXAMPLES",t,this.getHomeExamples())}},UserPreferences.prototype.getHomeExamples=function(){return this.homeExamples},UserPreferences.prototype.isCheckUpdatesEnabled=function(){},UserPreferences.prototype.setCheckUpdatesEnabled=function(e){},UserPreferences.prototype.isImportedImageResizedWithoutPrompting=function(){return!0},DefaultUserPreferences.prototype=Object.create(UserPreferences.prototype),DefaultUserPreferences.prototype.constructor=DefaultUserPreferences,DefaultUserPreferences.prototype.write=function(){UserPreferences.prototype.write.call(this)},DefaultPatternTexture.__class="com.eteks.sweethome3d.io.DefaultPatternTexture",DefaultPatternTexture.__interfaces=["com.eteks.sweethome3d.model.TextureImage"],DefaultPatternTexture.__transients=["image"],DefaultPatternTexture.prototype.getName=function(){return this.name},DefaultPatternTexture.prototype.getCreator=function(){return null},DefaultPatternTexture.prototype.getImage=function(){return this.image},DefaultPatternTexture.prototype.getWidth=function(){return 10},DefaultPatternTexture.prototype.getHeight=function(){return 10},DefaultPatternTexture.prototype.equals=function(e){return e===this||e instanceof DefaultPatternTexture&&e.name==this.name},RecordedUserPreferences.prototype=Object.create(UserPreferences.prototype),RecordedUserPreferences.prototype.constructor=RecordedUserPreferences,RecordedUserPreferences.LANGUAGE="language",RecordedUserPreferences.UNIT="unit",RecordedUserPreferences.CURRENCY="currency",RecordedUserPreferences.VALUE_ADDED_TAX_ENABLED="valueAddedTaxEnabled",RecordedUserPreferences.DEFAULT_VALUE_ADDED_TAX_PERCENTAGE="defaultValueAddedTaxPercentage",RecordedUserPreferences.FURNITURE_CATALOG_VIEWED_IN_TREE="furnitureCatalogViewedInTree",RecordedUserPreferences.NAVIGATION_PANEL_VISIBLE="navigationPanelVisible",RecordedUserPreferences.EDITING_IN_3D_VIEW_ENABLED="editingIn3DViewEnabled",RecordedUserPreferences.AERIAL_VIEW_CENTERED_ON_SELECTION_ENABLED="aerialViewCenteredOnSelectionEnabled",RecordedUserPreferences.OBSERVER_CAMERA_SELECTED_AT_CHANGE="observerCameraSelectedAtChange",RecordedUserPreferences.MAGNETISM_ENABLED="magnetismEnabled",RecordedUserPreferences.RULERS_VISIBLE="rulersVisible",RecordedUserPreferences.GRID_VISIBLE="gridVisible",RecordedUserPreferences.DEFAULT_FONT_NAME="defaultFontName",RecordedUserPreferences.FURNITURE_VIEWED_FROM_TOP="furnitureViewedFromTop",RecordedUserPreferences.FURNITURE_MODEL_ICON_SIZE="furnitureModelIconSize",RecordedUserPreferences.ROOM_FLOOR_COLORED_OR_TEXTURED="roomFloorColoredOrTextured",RecordedUserPreferences.WALL_PATTERN="wallPattern",RecordedUserPreferences.NEW_WALL_PATTERN="newWallPattern",RecordedUserPreferences.NEW_WALL_THICKNESS="newWallThickness",RecordedUserPreferences.NEW_WALL_HEIGHT="newHomeWallHeight",RecordedUserPreferences.NEW_WALL_BASEBOARD_THICKNESS="newWallBaseboardThickness",RecordedUserPreferences.NEW_WALL_BASEBOARD_HEIGHT="newWallBaseboardHeight",RecordedUserPreferences.NEW_FLOOR_THICKNESS="newFloorThickness",RecordedUserPreferences.AUTO_SAVE_DELAY_FOR_RECOVERY="autoSaveDelayForRecovery",RecordedUserPreferences.RECENT_HOMES="recentHomes#",RecordedUserPreferences.IGNORED_ACTION_TIP="ignoredActionTip#",RecordedUserPreferences.TEXTURE_NAME="textureName#",RecordedUserPreferences.TEXTURE_CREATOR="textureCreator#",RecordedUserPreferences.TEXTURE_CATEGORY="textureCategory#",RecordedUserPreferences.TEXTURE_IMAGE="textureImage#",RecordedUserPreferences.TEXTURE_WIDTH="textureWidth#",RecordedUserPreferences.TEXTURE_HEIGHT="textureHeight#",RecordedUserPreferences.prototype.getProperty=function(e,t,i){return void 0===e[t]||null===e[t]?i:e[t]},RecordedUserPreferences.prototype.getProperties=function(){return this.properties},RecordedUserPreferences.prototype.setProperty=function(e,t,i){e[t]=i},RecordedUserPreferences.prototype.removeProperty=function(e,t){delete e[t]},RecordedUserPreferences.prototype.updatePreferencesFromProperties=function(e,t,i){this.setLanguage(this.getProperty(e,RecordedUserPreferences.LANGUAGE,t)),i&&this.updateDefaultCatalogs(),this.readModifiableTexturesCatalog(e);var n=new DefaultUserPreferences(!1,t);n.setLanguage(this.getLanguage());var o=n.getPatternsCatalog();this.setPatternsCatalog(o);var r=LengthUnit[this.getProperty(e,RecordedUserPreferences.UNIT)];r||(r=n.getLengthUnit()),this.setUnit(r),this.setCurrency(this.getProperty(e,RecordedUserPreferences.CURRENCY,n.getCurrency())),this.setValueAddedTaxEnabled("true"==this.getProperty(e,RecordedUserPreferences.VALUE_ADDED_TAX_ENABLED,""+n.isValueAddedTaxEnabled()));var l=this.getProperty(e,RecordedUserPreferences.DEFAULT_VALUE_ADDED_TAX_PERCENTAGE),a=n.getDefaultValueAddedTaxPercentage();if(null!==l)try{a=new Big(l)}catch(e){}this.setDefaultValueAddedTaxPercentage(a),this.setFurnitureCatalogViewedInTree("true"==this.getProperty(e,RecordedUserPreferences.FURNITURE_CATALOG_VIEWED_IN_TREE,""+n.isFurnitureCatalogViewedInTree())),this.setNavigationPanelVisible("true"==this.getProperty(e,RecordedUserPreferences.NAVIGATION_PANEL_VISIBLE,""+n.isNavigationPanelVisible())),this.setEditingIn3DViewEnabled("true"==this.getProperty(e,RecordedUserPreferences.EDITING_IN_3D_VIEW_ENABLED,""+n.isEditingIn3DViewEnabled())),this.setAerialViewCenteredOnSelectionEnabled("true"==this.getProperty(e,RecordedUserPreferences.AERIAL_VIEW_CENTERED_ON_SELECTION_ENABLED,""+n.isAerialViewCenteredOnSelectionEnabled())),this.setObserverCameraSelectedAtChange("true"==this.getProperty(e,RecordedUserPreferences.OBSERVER_CAMERA_SELECTED_AT_CHANGE,""+n.isObserverCameraSelectedAtChange())),this.setMagnetismEnabled("true"==this.getProperty(e,RecordedUserPreferences.MAGNETISM_ENABLED,"true")),this.setRulersVisible("true"==this.getProperty(e,RecordedUserPreferences.RULERS_VISIBLE,""+n.isMagnetismEnabled())),this.setGridVisible("true"==this.getProperty(e,RecordedUserPreferences.GRID_VISIBLE,""+n.isGridVisible())),this.setDefaultFontName(this.getProperty(e,RecordedUserPreferences.DEFAULT_FONT_NAME,n.getDefaultFontName())),this.setFurnitureViewedFromTop("true"==this.getProperty(e,RecordedUserPreferences.FURNITURE_VIEWED_FROM_TOP,""+n.isFurnitureViewedFromTop())),this.setFurnitureModelIconSize(parseInt(this.getProperty(e,RecordedUserPreferences.FURNITURE_MODEL_ICON_SIZE,""+n.getFurnitureModelIconSize()))),this.setFloorColoredOrTextured("true"==this.getProperty(e,RecordedUserPreferences.ROOM_FLOOR_COLORED_OR_TEXTURED,""+n.isRoomFloorColoredOrTextured()));try{this.setWallPattern(o.getPattern(this.getProperty(e,RecordedUserPreferences.WALL_PATTERN,n.getWallPattern().getName())))}catch(e){this.setWallPattern(n.getWallPattern())}try{null!=n.getNewWallPattern()&&this.setNewWallPattern(o.getPattern(this.getProperty(e,RecordedUserPreferences.NEW_WALL_PATTERN,n.getNewWallPattern().getName())))}catch(e){}this.setNewWallThickness(parseFloat(this.getProperty(e,RecordedUserPreferences.NEW_WALL_THICKNESS,""+n.getNewWallThickness()))),this.setNewWallHeight(parseFloat(this.getProperty(e,RecordedUserPreferences.NEW_WALL_HEIGHT,""+n.getNewWallHeight()))),this.setNewWallBaseboardThickness(n.getNewWallBaseboardThickness()),this.setNewWallBaseboardHeight(n.getNewWallBaseboardHeight()),this.setNewWallBaseboardThickness(parseFloat(this.getProperty(e,RecordedUserPreferences.NEW_WALL_BASEBOARD_THICKNESS,""+n.getNewWallBaseboardThickness()))),this.setNewWallBaseboardHeight(parseFloat(this.getProperty(e,RecordedUserPreferences.NEW_WALL_BASEBOARD_HEIGHT,""+n.getNewWallBaseboardHeight()))),this.setNewFloorThickness(parseFloat(this.getProperty(e,RecordedUserPreferences.NEW_FLOOR_THICKNESS,""+n.getNewFloorThickness()))),this.setAutoSaveDelayForRecovery(parseInt(this.getProperty(e,RecordedUserPreferences.AUTO_SAVE_DELAY_FOR_RECOVERY,""+n.getAutoSaveDelayForRecovery())));for(var s=[],h=1;h<=this.getRecentHomesMaxCount();h++){var u=this.getProperty(e,RecordedUserPreferences.RECENT_HOMES+h);null!=u&&s.push(u)}this.setRecentHomes(s);for(h=1;;h++){var d=this.getProperty(e,RecordedUserPreferences.IGNORED_ACTION_TIP+h,"");if(0==d.length)break;this.ignoredActionTips[d]=!0}},RecordedUserPreferences.prototype.addListeners=function(){var e=this;this.addPropertyChangeListener("LANGUAGE",(function(){e.updateDefaultCatalogs()}));for(var t=function(){e.writtenPropertiesUpdated=!0},i=["LANGUAGE","UNIT","CURRENCY","VALUE_ADDED_TAX_ENABLED","DEFAULT_VALUE_ADDED_TAX_PERCENTAGE","FURNITURE_CATALOG_VIEWED_IN_TREE","NAVIGATION_PANEL_VISIBLE","EDITING_IN_3D_VIEW_ENABLED","AERIAL_VIEW_CENTERED_ON_SELECTION_ENABLED","OBSERVER_CAMERA_SELECTED_AT_CHANGE","MAGNETISM_ENABLED","GRID_VISIBLE","DEFAULT_FONT_NAME","FURNITURE_VIEWED_FROM_TOP","FURNITURE_MODEL_ICON_SIZE","ROOM_FLOOR_COLORED_OR_TEXTURED","NEW_WALL_PATTERN","NEW_WALL_THICKNESS","NEW_WALL_HEIGHT","NEW_WALL_BASEBOARD_THICKNESS","NEW_WALL_BASEBOARD_HEIGHT","NEW_FLOOR_THICKNESS"],n=0;n<i.length;n++){var o=i[n];this.addPropertyChangeListener(o,t)}this.getTexturesCatalog().addTexturesListener(t)},RecordedUserPreferences.prototype.readPreferences=function(e,t){try{var i=this,n=function(n){if(null!=n){var o=JSON.parse(n);for(var r in o)e[r]=o[r]}i.updatePreferencesFromProperties(e,t,!0),i.addListeners()};if(0===this.readPreferencesUrl.indexOf(LocalStorageURLContent.LOCAL_STORAGE_PREFIX)){var o=this.readPreferencesUrl.substring(LocalStorageURLContent.LOCAL_STORAGE_PREFIX.length);n(localStorage.getItem(o))}else if(0===this.readPreferencesUrl.indexOf(IndexedDBURLContent.INDEXED_DB_PREFIX))new IndexedDBURLContent(this.readPreferencesUrl).getBlob({blobReady:function(e){var t=new FileReader;t.onload=function(){n(t.result)},t.readAsText(e)},blobError:function(e,t){i.updateDefaultCatalogs(),i.addListeners(),-1!=e&&console.log("Can't read preferences from indexedDB "+e+" "+t)}});else{var r=new XMLHttpRequest,l=-1!=this.readPreferencesUrl.indexOf("?")?"&":"?";r.open("GET",this.readPreferencesUrl+l+"requestId="+UUID.randomUUID(),!0),r.addEventListener("load",(function(){r.readyState===XMLHttpRequest.DONE&&200===r.status?n(r.responseText):(i.updateDefaultCatalogs(),i.addListeners())}));var a=function(e){console.log("Can't read preferences from server"),i.updateDefaultCatalogs(),i.addListeners()};r.addEventListener("error",a),r.addEventListener("timeout",a),r.timeout=1e4,r.send()}}catch(e){console.log(e),i.updateDefaultCatalogs(),i.addListeners()}},RecordedUserPreferences.prototype.updateDefaultCatalogs=function(){for(var e=this.getFurnitureCatalog(),t=e.getCategories().length-1;t>=0;t--)for(var i=(o=e.getCategory(t)).getFurniture().length-1;i>=0;i--){(r=o.getPieceOfFurniture(i)).isModifiable()||e.delete(r)}var n="function"==typeof DefaultFurnitureCatalog?Array.isArray(this.furnitureCatalogUrls)?this.readFurnitureCatalogFromResource(this.furnitureCatalogUrls,this.furnitureResourcesUrlBase):new DefaultFurnitureCatalog(this):new FurnitureCatalog;for(t=0;t<n.getCategories().length;t++){var o=n.getCategory(t);for(i=0;i<o.getFurniture().length;i++){var r=o.getPieceOfFurniture(i);e.add(o,r)}}var l=this.getTexturesCatalog();for(t=l.getCategories().length-1;t>=0;t--)for(i=(o=l.getCategory(t)).getTextures().length-1;i>=0;i--){(s=o.getTexture(i)).isModifiable()||l.delete(s)}var a="function"==typeof DefaultTexturesCatalog?Array.isArray(this.texturesCatalogUrls)?this.readTexturesCatalogFromResource(this.texturesCatalogUrls,this.texturesResourcesUrlBase):new DefaultTexturesCatalog(this):new TexturesCatalog;for(t=0;t<a.getCategories().length;t++)for(o=a.getCategory(t),i=0;i<o.getTextures().length;i++){var s=o.getTexture(i);l.add(o,s)}},RecordedUserPreferences.prototype.readFurnitureCatalogFromResource=function(e,t){return new DefaultFurnitureCatalog(e,t)},RecordedUserPreferences.prototype.readTexturesCatalogFromResource=function(e,t){return new DefaultTexturesCatalog(e,t)},RecordedUserPreferences.prototype.readModifiableTexturesCatalog=function(e){for(var t,i=1;null!=(t=this.readModifiableTexture(e,i));i++)if(""!=t.getImage().getURL()){var n=this.readModifiableTextureCategory(e,i);this.getTexturesCatalog().add(n,t)}},RecordedUserPreferences.prototype.readModifiableTexture=function(e,t){var i=this.getProperty(e,RecordedUserPreferences.TEXTURE_NAME+t,null);if(null==i)return null;var n=URLContent.fromURL(this.getProperty(e,RecordedUserPreferences.TEXTURE_IMAGE+t,"")),o=parseFloat(this.getProperty(e,RecordedUserPreferences.TEXTURE_WIDTH+t,"0.1")),r=parseFloat(this.getProperty(e,RecordedUserPreferences.TEXTURE_HEIGHT+t,"0.1")),l=this.getProperty(e,RecordedUserPreferences.TEXTURE_CREATOR+t,null);return new CatalogTexture(null,i,n,o,r,l,!0)},RecordedUserPreferences.prototype.readModifiableTextureCategory=function(e,t){var i=this.getProperty(e,RecordedUserPreferences.TEXTURE_CATEGORY+t,"");return new TexturesCategory(i)},RecordedUserPreferences.prototype.write=function(){if(UserPreferences.prototype.write.call(this),this.writtenPropertiesUpdated){var e=this.getProperties();this.writeModifiableTexturesCatalog(e),this.setProperty(e,RecordedUserPreferences.LANGUAGE,this.getLanguage()),this.setProperty(e,RecordedUserPreferences.UNIT,this.getLengthUnit().name());var t=this.getCurrency();null===t?this.removeProperty(e,RecordedUserPreferences.CURRENCY):this.setProperty(e,RecordedUserPreferences.CURRENCY,t),this.setProperty(e,RecordedUserPreferences.VALUE_ADDED_TAX_ENABLED,""+this.isValueAddedTaxEnabled());var i=this.getDefaultValueAddedTaxPercentage();null===i?this.removeProperty(e,RecordedUserPreferences.DEFAULT_VALUE_ADDED_TAX_PERCENTAGE):this.setProperty(e,RecordedUserPreferences.DEFAULT_VALUE_ADDED_TAX_PERCENTAGE,i.toString()),this.setProperty(e,RecordedUserPreferences.FURNITURE_CATALOG_VIEWED_IN_TREE,""+this.isFurnitureCatalogViewedInTree()),this.setProperty(e,RecordedUserPreferences.NAVIGATION_PANEL_VISIBLE,""+this.isNavigationPanelVisible()),this.setProperty(e,RecordedUserPreferences.EDITING_IN_3D_VIEW_ENABLED,""+this.isEditingIn3DViewEnabled()),this.setProperty(e,RecordedUserPreferences.AERIAL_VIEW_CENTERED_ON_SELECTION_ENABLED,""+this.isAerialViewCenteredOnSelectionEnabled()),this.setProperty(e,RecordedUserPreferences.OBSERVER_CAMERA_SELECTED_AT_CHANGE,""+this.isObserverCameraSelectedAtChange()),this.setProperty(e,RecordedUserPreferences.MAGNETISM_ENABLED,""+this.isMagnetismEnabled()),this.setProperty(e,RecordedUserPreferences.RULERS_VISIBLE,""+this.isRulersVisible()),this.setProperty(e,RecordedUserPreferences.GRID_VISIBLE,""+this.isGridVisible());var n=this.getDefaultFontName();null==n?this.removeProperty(e,RecordedUserPreferences.DEFAULT_FONT_NAME):this.setProperty(e,RecordedUserPreferences.DEFAULT_FONT_NAME,n),this.setProperty(e,RecordedUserPreferences.FURNITURE_VIEWED_FROM_TOP,""+this.isFurnitureViewedFromTop()),this.setProperty(e,RecordedUserPreferences.FURNITURE_MODEL_ICON_SIZE,""+this.getFurnitureModelIconSize()),this.setProperty(e,RecordedUserPreferences.ROOM_FLOOR_COLORED_OR_TEXTURED,""+this.isRoomFloorColoredOrTextured()),this.setProperty(e,RecordedUserPreferences.WALL_PATTERN,this.getWallPattern().getName());var o=this.getNewWallPattern();null!=o&&this.setProperty(e,RecordedUserPreferences.NEW_WALL_PATTERN,o.getName()),this.setProperty(e,RecordedUserPreferences.NEW_WALL_THICKNESS,""+this.getNewWallThickness()),this.setProperty(e,RecordedUserPreferences.NEW_WALL_HEIGHT,""+this.getNewWallHeight()),this.setProperty(e,RecordedUserPreferences.NEW_WALL_BASEBOARD_THICKNESS,""+this.getNewWallBaseboardThickness()),this.setProperty(e,RecordedUserPreferences.NEW_WALL_BASEBOARD_HEIGHT,""+this.getNewWallBaseboardHeight()),this.setProperty(e,RecordedUserPreferences.NEW_FLOOR_THICKNESS,""+this.getNewFloorThickness()),this.setProperty(e,RecordedUserPreferences.AUTO_SAVE_DELAY_FOR_RECOVERY,""+this.getAutoSaveDelayForRecovery());for(var r=this.getRecentHomes(),l=0;l<r.length&&l<this.getRecentHomesMaxCount();l++)this.setProperty(e,RecordedUserPreferences.RECENT_HOMES+(l+1),r[l]);var a=Object.keys(this.ignoredActionTips);for(l=0;l<a.length;l++){var s=a[l];this.ignoredActionTips[s]&&this.setProperty(e,RecordedUserPreferences.IGNORED_ACTION_TIP+(l+1),s)}if(Object.keys(this.uploadingBlobs).length>0){var h=this;setTimeout((function(){h.write()}),1e3)}else this.writtenPropertiesUpdated=!1,this.writePreferences(e)}},RecordedUserPreferences.prototype.writePreferences=function(e){if(this.writePreferencesUrl){var t=this;if(this.writingPreferences)setTimeout((function(){t.writePreferences(e)}),100);else{this.writingPreferences=!0;var i=JSON.stringify(e),n=function(){void 0!==t.writingObserver&&t.writingObserver.writeSucceeded&&t.writingObserver.writeSucceeded(e),setTimeout((function(){delete t.writingPreferences}),500)},o=function(i,n){void 0!==t.writingObserver&&t.writingObserver.writeFailed&&t.writingObserver.writeFailed(e,i,n),setTimeout((function(){delete t.writingPreferences,t.writePreferences(e)}),1e4)};if(0===this.writePreferencesUrl.indexOf(LocalStorageURLContent.LOCAL_STORAGE_PREFIX))try{var r=this.writePreferencesUrl.substring(LocalStorageURLContent.LOCAL_STORAGE_PREFIX.length);localStorage.setItem(r,i),n(),delete t.writingPreferences}catch(e){o(e,e.message)}else if(0===this.writePreferencesUrl.indexOf(IndexedDBURLContent.INDEXED_DB_PREFIX)){var l=new BlobURLContent(new Blob([i],{type:"application/json"}));l.writeBlob(this.writePreferencesUrl,"",{blobSaved:function(e,t){URL.revokeObjectURL(l.getURL()),n()},blobError:function(e,t){URL.revokeObjectURL(l.getURL()),o(e,t)}})}else{var a=new XMLHttpRequest,s=-1!=this.writePreferencesUrl.indexOf("?")?"&":"?";a.open("POST",this.writePreferencesUrl+s+"updateId="+UUID.randomUUID(),!0),a.addEventListener("load",(function(e){a.readyState===XMLHttpRequest.DONE&&(200===a.status?n():o(a.status,a.responseText))}));var h=function(e){o(0,"Can't post "+t.writePreferencesUrl)};a.addEventListener("error",h),a.addEventListener("timeout",h),a.send(i)}}}},RecordedUserPreferences.prototype.setActionTipIgnored=function(e){this.ignoredActionTips[e]=!0,UserPreferences.prototype.setActionTipIgnored.call(this,e)},RecordedUserPreferences.prototype.isActionTipIgnored=function(e){return!0===this.ignoredActionTips[e]},RecordedUserPreferences.prototype.resetIgnoredActionTips=function(){for(var e=Object.keys(this.ignoredActionTips),t=0;t<e.length;t++)this.ignoredActionTips[e[t]]=!1;UserPreferences.prototype.resetIgnoredActionTips.call(this)},RecordedUserPreferences.prototype.addLanguageLibrary=function(e){throw new UnsupportedOperationException},RecordedUserPreferences.prototype.languageLibraryExists=function(e){throw new UnsupportedOperationException},RecordedUserPreferences.prototype.furnitureLibraryExists=function(e){throw new UnsupportedOperationException},RecordedUserPreferences.prototype.addFurnitureLibrary=function(e){throw new UnsupportedOperationException},RecordedUserPreferences.prototype.texturesLibraryExists=function(e){throw new UnsupportedOperationException},RecordedUserPreferences.prototype.addTexturesLibrary=function(e){throw new UnsupportedOperationException},RecordedUserPreferences.prototype.getLibraries=function(){throw new UnsupportedOperationException},RecordedUserPreferences.prototype.writeModifiableTexturesCatalog=function(e){if(this.writeResourceUrl&&this.readResourceUrl){for(var t=1,i=this.getTexturesCatalog(),n=this,o=0;o<i.getCategoriesCount();o++)for(var r=i.getCategory(o),l=0;l<r.getTexturesCount();l++){var a=r.getTexture(l),s=a.getImage();if(a.isModifiable()&&s instanceof URLContent){if(this.setProperty(e,RecordedUserPreferences.TEXTURE_NAME+t,a.getName()),this.setProperty(e,RecordedUserPreferences.TEXTURE_CATEGORY+t,r.getName()),this.setProperty(e,RecordedUserPreferences.TEXTURE_WIDTH+t,a.getWidth()),this.setProperty(e,RecordedUserPreferences.TEXTURE_HEIGHT+t,a.getHeight()),null!=a.getCreator()?this.setProperty(e,RecordedUserPreferences.TEXTURE_CREATOR+t,a.getCreator()):this.removeProperty(e,RecordedUserPreferences.TEXTURE_CREATOR+t),!(s instanceof LocalURLContent)||s instanceof LocalStorageURLContent&&!(this.writeResourceUrl.indexOf(LocalStorageURLContent.LOCAL_STORAGE_PREFIX)<0)||s instanceof IndexedDBURLContent&&!(this.writeResourceUrl.indexOf(IndexedDBURLContent.INDEXED_DB_PREFIX)<0))s instanceof URLContent&&this.setProperty(e,RecordedUserPreferences.TEXTURE_IMAGE+t,s.getURL());else if(this.isSavedContentInResourceScope(s))delete n.uploadingBlobs[s.getURL()],this.setProperty(e,RecordedUserPreferences.TEXTURE_IMAGE+t,s.getSavedContent().getURL());else{var h=this.uploadingBlobs[s.getURL()];void 0===h&&s.getBlob({textureImage:s,blobReady:function(i){h=UUID.randomUUID(),n.uploadingBlobs[this.textureImage.getURL()]=h;var o="image/png"==i.type?".png":".jpg";n.writeResource(s,h+o,t,(function(t,i,o){if(!n.isSavedContentInResourceScope(t)){var r=URLContent.fromURL(CoreTools.format(n.readResourceUrl.replace(/(%[^s])/g,"%$1"),encodeURIComponent(i)));t.setSavedContent(r)}delete n.uploadingBlobs[t.getURL()],n.setProperty(e,RecordedUserPreferences.TEXTURE_IMAGE+o,t.getSavedContent().getURL())}))},blobError:function(e,t){contentsObserver.resourcesError(e,t)}})}t++}}for(;null!=this.getProperty(e,RecordedUserPreferences.TEXTURE_NAME+t,null);t++)this.removeProperty(e,RecordedUserPreferences.TEXTURE_NAME+t),this.removeProperty(e,RecordedUserPreferences.TEXTURE_IMAGE+t),this.removeProperty(e,RecordedUserPreferences.TEXTURE_CATEGORY+t),this.removeProperty(e,RecordedUserPreferences.TEXTURE_WIDTH+t),this.removeProperty(e,RecordedUserPreferences.TEXTURE_HEIGHT+t),this.removeProperty(e,RecordedUserPreferences.TEXTURE_CREATOR+t)}},RecordedUserPreferences.prototype.isSavedContentInResourceScope=function(e){var t=e.getSavedContent();return null!==t&&(!(t instanceof IndexedDBURLContent)||this.writeResourceUrl.indexOf(IndexedDBURLContent.INDEXED_DB_PREFIX)<0||0===t.getURL().indexOf(this.writeResourceUrl.substring(0,this.writeResourceUrl.indexOf("?"))))},RecordedUserPreferences.prototype.writeResource=function(e,t,i,n){var o=this;e.writeBlob(this.writeResourceUrl,t,{blobSaved:function(e,r){void 0!==o.writingObserver&&o.writingObserver.writeSucceeded&&o.writingObserver.writeSucceeded(e.getBlob()),n(e,t,i)},blobError:function(r,l){void 0!==o.writingObserver&&o.writingObserver.writeFailed&&o.writingObserver.writeFailed(e.getBlob(),r,l),setTimeout((function(){null===e.getSavedContent()?o.writeResource(e,t,i,n):n(e,i)}),1e4)}})},HomePreviewComponent.prototype.createHomeRecorder=function(){return new HomeRecorder},HomePreviewComponent.prototype.createComponent3D=function(e){return new HomeComponent3D(e,this.getHome(),this.getUserPreferences(),null,this.getController())},HomePreviewComponent.prototype.prepareComponent=function(e,t,i){var n=i&&i.roundsPerMinute?i.roundsPerMinute:0;this.startRotationAnimationAfterLoading=0!=n,i&&(i.navigationPanelVisible,1)&&this.getUserPreferences().setNavigationPanelVisible(i.navigationPanelVisible);var o=this.getHome();if(o.structure)o.getEnvironment().setAllLevelsVisible(!0);else{var r=function(){o.getEnvironment().setAllLevelsVisible(o.getCamera()instanceof ObserverCamera)};r(),o.addPropertyChangeListener("CAMERA",r)}o.getEnvironment().setObserverCameraElevationAdjusted(!0),this.trackFurnitureModels(t,n);var l=this,a=function(){l.stopRotationAnimation(),i&&i.aerialViewButtonId&&i.virtualVisitButtonId&&(o.getCamera()===o.getTopCamera()?document.getElementById(i.aerialViewButtonId).checked=!0:document.getElementById(i.virtualVisitButtonId).checked=!0)},s=e;if("string"==typeof e&&(s=document.getElementById(e)),(void 0===i||void 0===i.activateCameraSwitchKey||i.activateCameraSwitchKey)&&s.addEventListener("keydown",(function(e){32===e.keyCode&&(l.startRotationAnimationAfterLoading=!1,o.setCamera(o.getCamera()===o.getTopCamera()?o.getObserverCamera():o.getTopCamera()),a())})),i&&i.aerialViewButtonId&&i.virtualVisitButtonId){var h=document.getElementById(i.aerialViewButtonId);h.addEventListener("change",(function(){l.startRotationAnimationAfterLoading=!1,o.setCamera(h.checked?o.getTopCamera():o.getObserverCamera())}));var u=document.getElementById(i.virtualVisitButtonId);u.addEventListener("change",(function(){l.startRotationAnimationAfterLoading=!1,o.setCamera(u.checked?o.getObserverCamera():o.getTopCamera())})),a(),h.style.visibility="visible",u.style.visibility="visible";var d=function(e){for(var t=document.getElementsByTagName("label"),i=0;i<t.length;i++)t[i].getAttribute("for")==e&&(t[i].style.visibility="visible")};d(i.aerialViewButtonId),d(i.virtualVisitButtonId),o.addPropertyChangeListener("CAMERA",(function(){a(),o.structure&&i&&i.levelsAndCamerasListId&&(document.getElementById(i.levelsAndCamerasListId).disabled=o.getCamera()===o.getTopCamera())}))}if(i&&i.level&&(p=o.getLevels()).length>0)for(var c=0;c<p.length;c++){if((f=p[c]).isViewable()&&f.getName()==i.level){o.setSelectedLevel(f);break}}if(i&&i.camera&&(g=o.getStoredCameras()).length>0)for(c=0;c<g.length;c++){if((C=g[c]).getName()==i.camera){this.getController().goToCamera(C);break}}if(i&&i.levelsAndCamerasListId){var p,g,v=document.getElementById(i.levelsAndCamerasListId);if(v.disabled=void 0!==o.structure&&o.getCamera()===o.getTopCamera(),(p=o.getLevels()).length>0)for(c=0;c<p.length;c++){var f;if((f=p[c]).isViewable()&&(!i.selectableLevels||i.selectableLevels.indexOf(f.getName())>=0))(y=document.createElement("option")).text=f.getName(),y.level=f,v.add(y),f===o.getSelectedLevel()&&(v.selectedIndex=v.options.length-1)}if(void 0!==i.selectableCameras)if((g=o.getStoredCameras()).length>0){var m=v.options.length>0;for(c=0;c<g.length;c++){var y,C=g[c];if(i.selectableCameras.indexOf(C.getName())>=0)m&&(v.add(document.createElement("option")),m=!1),(y=document.createElement("option")).text=C.getName(),y.camera=C,v.add(y)}}if(v.options.length>1){var S=this.getController();v.addEventListener("change",(function(){l.startRotationAnimationAfterLoading=!1;var e=v.options[v.selectedIndex];void 0!==e.level?o.setSelectedLevel(e.level):void 0!==e.camera&&S.goToCamera(e.camera)})),v.style.visibility="visible"}}if(n){(S=this.getController()).goToCamera(o.getTopCamera()),S.rotateCameraPitch(Math.PI/6-o.getCamera().getPitch()),S.moveCamera(1e4),S.moveCamera(-50),this.clickListener=function(e){l.startRotationAnimationAfterLoading=!1,l.stopRotationAnimation()},s.addEventListener("keydown",this.clickListener),OperatingSystem.isInternetExplorerOrLegacyEdge()&&window.PointerEvent?(s.addEventListener("pointerdown",this.clickListener),s.addEventListener("pointermove",this.clickListener)):(s.addEventListener("mousedown",this.clickListener),s.addEventListener("touchstart",this.clickListener),s.addEventListener("touchmove",this.clickListener));var E=this.component3D.getSimulatedKeyElements(document.getElementsByTagName("body").item(0));for(c=0;c<E.length;c++)OperatingSystem.isInternetExplorerOrLegacyEdge()&&window.PointerEvent?E[c].addEventListener("pointerdown",this.clickListener):E[c].addEventListener("mousedown",this.clickListener);this.visibilityChanged=function(e){"hidden"==document.visibilityState&&l.stopRotationAnimation()},document.addEventListener("visibilitychange",this.visibilityChanged);var A=s.getBoundingClientRect();A.top>=0&&A.bottom<=self.innerHeight&&s.focus()}},HomePreviewComponent.prototype.getHome=function(){return this.home},HomePreviewComponent.prototype.getComponent3D=function(){return this.component3D},HomePreviewComponent.prototype.getController=function(){return this.controller},HomePreviewComponent.prototype.getUserPreferences=function(){return this.preferences},HomePreviewComponent.prototype.trackFurnitureModels=function(e,t){for(var i=[],n={},o={},r=this.getHome().getFurniture(),l=0;l<r.length;l++){var a=r[l],s=[];if(a instanceof HomeFurnitureGroup)for(var h=a.getAllFurniture(),u=0;u<h.length;u++){var d=h[u];d instanceof HomeFurnitureGroup||s.push(d)}else s.push(a);i.push.apply(i,s);for(u=0;u<s.length;u++){var c=s[u].getModel();if(c.isJAREntry()){var p=c.getJAREntryURL();p in n?n[p]++:n[p]=1}var g=c.getURL();g in o?o[g]++:o[g]=1}}if(0===i.length)e(ModelLoader.READING_MODEL,void 0,1);else{var v=0,f=this;for(l=0;l<i.length;l++){!function(r){ModelManager.getInstance().loadModel(r.getModel(),!1,{modelUpdated:function(l){var a=r.getModel();if(a.isJAREntry()){var s=a.getJAREntryURL();0==--n[s]&&(ZIPTools.disposeZIP(s),delete n[s])}var h=a.getURL();0==--o[h]&&(ModelManager.getInstance().unloadModel(a),delete o[h]),e(ModelLoader.READING_MODEL,r.getName(),++v/i.length),v===i.length&&(f.component3D.disposeGeometries(),i=[],f.startRotationAnimationAfterLoading&&(delete f.startRotationAnimationAfterLoading,f.startRotationAnimation(t)))},modelError:function(e){this.modelUpdated()}})}(i[l])}}},HomePreviewComponent.prototype.dispose=function(){if(this.stopRotationAnimation(),this.component3D){if(this.clickListener){document.removeEventListener("visibilitychange",this.visibilityChanged);for(var e=this.component3D.getSimulatedKeyElements(document.getElementsByTagName("body").item(0)),t=0;t<e.length;t++)OperatingSystem.isInternetExplorerOrLegacyEdge()&&window.PointerEvent?e[t].removeEventListener("pointerdown",this.clickListener):e[t].removeEventListener("mousedown",this.clickListener)}this.component3D.dispose()}},HomePreviewComponent.prototype.startRotationAnimation=function(e){this.roundsPerMinute=void 0!==e?e:1,this.rotationAnimationStarted||(this.rotationAnimationStarted=!0,this.animate())},HomePreviewComponent.prototype.animate=function(){if(this.rotationAnimationStarted){var e=Date.now();if(void 0!==this.lastRotationAnimationTime){var t=2*this.roundsPerMinute*Math.PI/6e4,i=(e-this.lastRotationAnimationTime)*t%(2*Math.PI);(i-=this.home.getCamera().getYaw()-this.lastRotationAnimationYaw)>0&&this.controller.rotateCameraYaw(i)}this.lastRotationAnimationTime=e,this.lastRotationAnimationYaw=this.home.getCamera().getYaw();var n=this;requestAnimationFrame((function(){n.animate()}))}},HomePreviewComponent.prototype.stopRotationAnimation=function(){delete this.lastRotationAnimationTime,delete this.lastRotationAnimationYaw,delete this.rotationAnimationStarted};